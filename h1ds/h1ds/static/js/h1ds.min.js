d3=function(){function l(a){return null!=a&&!isNaN(a)}function r(a){return a.length}function n(a,c){try{for(var h in c)Object.defineProperty(a.prototype,h,{value:c[h],enumerable:!1})}catch(u){a.prototype=c}}function b(){}function d(){}function g(a,c,h){return function(){var u=h.apply(c,arguments);return u===c?a:u}}function e(a,c){if(c in a)return c;c=c.charAt(0).toUpperCase()+c.substring(1);for(var h=0,u=zd.length;h<u;++h){var p=zd[h]+c;if(p in a)return p}}function m(){}function f(){}function q(a){function c(){for(var c=
h,u=-1,b=c.length,d;++u<b;)(d=c[u].on)&&d.apply(this,arguments);return a}var h=[],u=new b;c.on=function(c,w){var b=u.get(c),d;if(2>arguments.length)return b&&b.on;b&&(b.on=null,h=h.slice(0,d=h.indexOf(b)).concat(h.slice(d+1)),u.remove(c));w&&h.push(u.set(c,{on:w}));return a};return c}function v(){s.event.preventDefault()}function x(){for(var a=s.event,c;c=a.sourceEvent;)a=c;return a}function y(a){for(var c=new f,h=0,u=arguments.length;++h<u;)c[arguments[h]]=q(c);c.of=function(h,u){return function(b){try{var d=
b.sourceEvent=s.event;b.target=a;s.event=b;c[b.type].apply(h,u)}finally{s.event=d}}};return c}function t(a){nb(a,K);return a}function B(a){return"function"===typeof a?a:function(){return nc(a,this)}}function z(a){return"function"===typeof a?a:function(){return oc(a,this)}}function N(a,c){function h(){this.removeAttribute(a)}function u(){this.removeAttributeNS(a.space,a.local)}function p(){this.setAttribute(a,c)}function w(){this.setAttributeNS(a.space,a.local,c)}function b(){var h=c.apply(this,arguments);
null==h?this.removeAttribute(a):this.setAttribute(a,h)}function d(){var h=c.apply(this,arguments);null==h?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,h)}a=s.ns.qualify(a);return null==c?a.local?u:h:"function"===typeof c?a.local?d:b:a.local?w:p}function aa(a){return a.trim().replace(/\s+/g," ")}function Z(a){return new RegExp("(?:^|\\s+)"+s.requote(a)+"(?:\\s+|$)","g")}function F(a,c){function h(){for(var h=-1;++h<p;)a[h](this,c)}function u(){for(var h=-1,u=c.apply(this,
arguments);++h<p;)a[h](this,u)}a=a.trim().split(/\s+/).map(Va);var p=a.length;return"function"===typeof c?u:h}function Va(a){var c=Z(a);return function(h,u){if(p=h.classList)return u?p.add(a):p.remove(a);var p=h.getAttribute("class")||"";u?(c.lastIndex=0,c.test(p)||h.setAttribute("class",aa(p+" "+a))):h.setAttribute("class",aa(p.replace(c," ")))}}function L(a,c,h){function u(){this.style.removeProperty(a)}function p(){this.style.setProperty(a,c,h)}function w(){var u=c.apply(this,arguments);null==
u?this.style.removeProperty(a):this.style.setProperty(a,u,h)}return null==c?u:"function"===typeof c?w:p}function ta(a,c){function h(){delete this[a]}function u(){this[a]=c}function p(){var h=c.apply(this,arguments);null==h?delete this[a]:this[a]=h}return null==c?h:"function"===typeof c?p:u}function A(a){return"function"===typeof a?a:(a=s.ns.qualify(a)).local?function(){return ga.createElementNS(a.space,a.local)}:function(){return ga.createElementNS(this.namespaceURI,a)}}function H(a){return function(){return Ad(this,
a)}}function I(a){arguments.length||(a=s.ascending);return function(c,h){return c&&h?a(c.__data__,h.__data__):!c-!h}}function V(a,c){for(var h=0,u=a.length;h<u;h++)for(var p=a[h],w=0,b=p.length,d;w<b;w++)(d=p[w])&&c(d,w,h);return a}function Bd(a){nb(a,ua);return a}function Rf(a){var c,h;return function(u,p,w){u=a[w].update;var b=u.length;w!=h&&(h=w,c=0);for(p>=c&&(c=p+1);!(p=u[c])&&++c<b;);return p}}function ob(){var a=this.__transition__;a&&++a.active}function Cd(a,c,h){function u(){var c=this[b];
c&&(this.removeEventListener(a,c,c.$),delete this[b])}function p(){var p=f(c,Ca(arguments));u.call(this);this.addEventListener(a,this[b]=p,p.$=h);p._=c}function w(){var c=new RegExp("^__on([^.]+)"+s.requote(a)+"$"),h,u;for(u in this)if(h=u.match(c)){var p=this[u];this.removeEventListener(h[1],p,p.$);delete this[u]}}var b="__on"+a,d=a.indexOf("."),f=Ed;0<d&&(a=a.substring(0,d));var e=pc.get(a);e&&(a=e,f=Tf);return d?c?p:u:c?m:w}function Ed(a,c){return function(h){var u=s.event;s.event=h;c[0]=this.__data__;
try{a.apply(this,c)}finally{s.event=u}}}function Tf(a,c){var h=Ed(a,c);return function(a){var c=a.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||h.call(this,a)}}function pb(){var a=".dragsuppress-"+ ++Uf,c="touchmove"+a,h="selectstart"+a,u="dragstart"+a,p="click"+a,w=s.select(X).on(c,v).on(h,v).on(u,v),b=Da.style,d=b[qc];b[qc]="none";return function(c){w.on(a,null);b[qc]=d;if(c){var h=function(){w.on(p,null)};w.on(p,function(){v();h()},!0);setTimeout(h,0)}}}function Fd(a,c){c.changedTouches&&
(c=c.changedTouches[0]);var h=a.ownerSVGElement||a;if(h.createSVGPoint){var u=h.createSVGPoint();if(0>rc&&(X.scrollX||X.scrollY)){var h=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),p=h[0][0].getScreenCTM();rc=!(p.f||p.e);h.remove()}rc?(u.x=c.pageX,u.y=c.pageY):(u.x=c.clientX,u.y=c.clientY);u=u.matrixTransform(a.getScreenCTM().inverse());return[u.x,u.y]}h=a.getBoundingClientRect();return[c.clientX-h.left-a.clientLeft,c.clientY-
h.top-a.clientTop]}function Gd(a){return 1<a?0:-1>a?C:Math.acos(a)}function La(a){return 1<a?C/2:-1>a?-C/2:Math.asin(a)}function sc(a){return(Math.exp(a)-Math.exp(-a))/2}function qb(a){return(Math.exp(a)+Math.exp(-a))/2}function Hd(a){return(a=Math.sin(a/2))*a}function Wa(){}function Xa(a,c,h){return new tc(a,c,h)}function tc(a,c,h){this.h=a;this.s=c;this.l=h}function uc(a,c,h){function u(a){360<a?a-=360:0>a&&(a+=360);return 60>a?p+(w-p)*a/60:180>a?w:240>a?p+(w-p)*(240-a)/60:p}var p,w;a=isNaN(a)?
0:0>(a%=360)?a+360:a;c=isNaN(c)?0:0>c?0:1<c?1:c;h=0>h?0:1<h?1:h;w=0.5>=h?h*(1+c):h+c-h*c;p=2*h-w;return ma(Math.round(255*u(a+120)),Math.round(255*u(a)),Math.round(255*u(a-120)))}function Ya(a,c,h){return new rb(a,c,h)}function rb(a,c,h){this.h=a;this.c=c;this.l=h}function vc(a,c,h){isNaN(a)&&(a=0);isNaN(c)&&(c=0);return Za(h,Math.cos(a*=E)*c,Math.sin(a)*c)}function Za(a,c,h){return new sb(a,c,h)}function sb(a,c,h){this.l=a;this.a=c;this.b=h}function Id(a,c,h){a=(a+16)/116;h=a-h/200;c=wc(a+c/500)*
Jd;a=wc(a)*Kd;h=wc(h)*Ld;return ma(xc(3.2404542*c-1.5371385*a-0.4985314*h),xc(-0.969266*c+1.8760108*a+0.041556*h),xc(0.0556434*c-0.2040259*a+1.0572252*h))}function Md(a,c,h){return 0<a?Ya(Math.atan2(h,c)*O,Math.sqrt(c*c+h*h),a):Ya(NaN,NaN,a)}function wc(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function yc(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function xc(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function tb(a){return ma(a>>16,a>>8&255,a&255)+
""}function ma(a,c,h){return new zc(a,c,h)}function zc(a,c,h){this.r=a;this.g=c;this.b=h}function $a(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Nd(a,c,h){var u=0,p=0,w=0,b,d;if(b=/([a-z]+)\((.*)\)/i.exec(a))switch(d=b[2].split(","),b[1]){case "hsl":return h(parseFloat(d[0]),parseFloat(d[1])/100,parseFloat(d[2])/100);case "rgb":return c(Ac(d[0]),Ac(d[1]),Ac(d[2]))}if(h=ub.get(a))return c(h.r,h.g,h.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(u=a.charAt(1),
u+=u,p=a.charAt(2),p+=p,w=a.charAt(3),w+=w):7===a.length&&(u=a.substring(1,3),p=a.substring(3,5),w=a.substring(5,7)),u=parseInt(u,16),p=parseInt(p,16),w=parseInt(w,16));return c(u,p,w)}function Od(a,c,h){var u=Math.min(a/=255,c/=255,h/=255),p=Math.max(a,c,h),w=p-u,b=(p+u)/2;w?(u=0.5>b?w/(p+u):w/(2-p-u),a=60*(a==p?(c-h)/w+(c<h?6:0):c==p?(h-a)/w+2:(a-c)/w+4)):(a=NaN,u=0<b&&1>b?0:a);return Xa(a,u,b)}function Pd(a,c,h){a=Bc(a);c=Bc(c);h=Bc(h);var u=yc((0.4124564*a+0.3575761*c+0.1804375*h)/Jd),p=yc((0.2126729*
a+0.7151522*c+0.072175*h)/Kd);a=yc((0.0193339*a+0.119192*c+0.9503041*h)/Ld);return Za(116*p-16,500*(u-p),200*(p-a))}function Bc(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function Ac(a){var c=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*c):c}function M(a){return"function"===typeof a?a:function(){return a}}function W(a){return a}function Cc(a){return function(c,h,u){2===arguments.length&&"function"===typeof h&&(u=h,h=null);return Dc(c,h,a,u)}}function Dc(a,
c,h,u){function p(){var a=f.status,c;if(!a&&f.responseText||200<=a&&300>a||304===a){try{c=h.call(w,f)}catch(u){b.error.call(w,u);return}b.load.call(w,c)}else b.error.call(w,f)}var w={},b=s.dispatch("beforesend","progress","load","error"),d={},f=new XMLHttpRequest,e=null;!X.XDomainRequest||"withCredentials"in f||!/^(http(s)?:)?\/\//.test(a)||(f=new XDomainRequest);"onload"in f?f.onload=f.onerror=p:f.onreadystatechange=function(){3<f.readyState&&p()};f.onprogress=function(a){var c=s.event;s.event=a;
try{b.progress.call(w,f)}finally{s.event=c}};w.header=function(a,c){a=(a+"").toLowerCase();if(2>arguments.length)return d[a];null==c?delete d[a]:d[a]=c+"";return w};w.mimeType=function(a){if(!arguments.length)return c;c=null==a?null:a+"";return w};w.responseType=function(a){if(!arguments.length)return e;e=a;return w};w.response=function(a){h=a;return w};["get","post"].forEach(function(a){w[a]=function(){return w.send.apply(w,[a].concat(Ca(arguments)))}});w.send=function(h,u,p){2===arguments.length&&
"function"===typeof u&&(p=u,u=null);f.open(h,a,!0);null==c||"accept"in d||(d.accept=c+",*/*");if(f.setRequestHeader)for(var g in d)f.setRequestHeader(g,d[g]);null!=c&&f.overrideMimeType&&f.overrideMimeType(c);null!=e&&(f.responseType=e);if(null!=p)w.on("error",p).on("load",function(a){p(null,a)});b.beforesend.call(w,f);f.send(null==u?null:u);return w};w.abort=function(){f.abort();return w};s.rebind(w,b,"on");return null==u?w:w.get(Vf(u))}function Vf(a){return 1===a.length?function(c,h){a(null==c?
h:null)}:a}function Ec(){var a=Qd(),a=Rd()-a;24<a?(isFinite(a)&&(clearTimeout(vb),vb=setTimeout(Ec,a)),wb=0):(wb=1,Sd(Ec))}function Td(a,c,h){var u=arguments.length;2>u&&(c=0);3>u&&(h=Date.now());na.callback=a;na.time=h+c}function Qd(){var a=Date.now();for(na=xb;na;)a>=na.time&&(na.flush=na.callback(a-na.time)),na=na.next;return a}function Rd(){for(var a,c=xb,h=Infinity;c;)c.flush?c=a?a.next=c.next:xb=c.next:(c.time<h&&(h=c.time),c=(a=c).next);yb=a;return h}function Fc(a,c){return c-(a?Math.ceil(Math.log(a)/
Math.LN10):1)}function Wf(a){return a+""}function Gc(){}function Ud(a,c,h){var u=h.s=a+c,p=u-a;h.t=a-(u-p)+(c-p)}function zb(a,c){if(a&&Vd.hasOwnProperty(a.type))Vd[a.type](a,c)}function Hc(a,c,h){var u=-1;h=a.length-h;var p;for(c.lineStart();++u<h;)p=a[u],c.point(p[0],p[1],p[2]);c.lineEnd()}function Wd(a,c){var h=-1,u=a.length;for(c.polygonStart();++h<u;)Hc(a[h],c,1);c.polygonEnd()}function Xf(){function a(a,c){a*=E;c=c*E/2+C/4;var h=a-u,b=Math.cos(c),d=Math.sin(c),f=w*d,e=p*b+f*Math.cos(h),h=f*
Math.sin(h);Ma.add(Math.atan2(h,e));u=a;p=b;w=d}var c,h,u,p,w;ea.point=function(b,d){ea.point=a;u=(c=b)*E;p=Math.cos(d=(h=d)*E/2+C/4);w=Math.sin(d)};ea.lineEnd=function(){a(c,h)}}function Na(a){var c=a[0];a=a[1];var h=Math.cos(a);return[h*Math.cos(c),h*Math.sin(c),Math.sin(a)]}function Ab(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}function ab(a,c){return[a[1]*c[2]-a[2]*c[1],a[2]*c[0]-a[0]*c[2],a[0]*c[1]-a[1]*c[0]]}function Ic(a,c){a[0]+=c[0];a[1]+=c[1];a[2]+=c[2]}function Bb(a,c){return[a[0]*c,a[1]*
c,a[2]*c]}function Cb(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=c;a[1]/=c;a[2]/=c}function Db(a){return[Math.atan2(a[1],a[0]),La(a[2])]}function Eb(a,c){return Math.abs(a[0]-c[0])<G&&Math.abs(a[1]-c[1])<G}function Jc(a,c){a*=E;var h=Math.cos(c*=E);fb(h*Math.cos(a),h*Math.sin(a),Math.sin(c))}function fb(a,c,h){++gb;va+=(a-va)/gb;wa+=(c-wa)/gb;oa+=(h-oa)/gb}function Xd(){function a(a,w){a*=E;var b=Math.cos(w*=E),d=b*Math.cos(a),b=b*Math.sin(a),f=Math.sin(w),e=Math.atan2(Math.sqrt((e=h*
f-u*b)*e+(e=u*d-c*f)*e+(e=c*b-h*d)*e),c*d+h*b+u*f);bb+=e;ha+=e*(c+(c=d));ia+=e*(h+(h=b));da+=e*(u+(u=f));fb(c,h,u)}var c,h,u;ka.point=function(p,w){p*=E;var b=Math.cos(w*=E);c=b*Math.cos(p);h=b*Math.sin(p);u=Math.sin(w);ka.point=a;fb(c,h,u)}}function Yd(){ka.point=Jc}function Yf(){function a(a,c){a*=E;var h=Math.cos(c*=E),b=h*Math.cos(a),h=h*Math.sin(a),d=Math.sin(c),f=p*d-w*h,e=w*b-u*d,g=u*h-p*b,m=Math.sqrt(f*f+e*e+g*g),q=u*b+p*h+w*d,v=m&&-Gd(q)/m,m=Math.atan2(m,q);Ea+=v*f;Fa+=v*e;pa+=v*g;bb+=m;
ha+=m*(u+(u=b));ia+=m*(p+(p=h));da+=m*(w+(w=d));fb(u,p,w)}var c,h,u,p,w;ka.point=function(b,d){c=b;h=d;ka.point=a;b*=E;var f=Math.cos(d*=E);u=f*Math.cos(b);p=f*Math.sin(b);w=Math.sin(d);fb(u,p,w)};ka.lineEnd=function(){a(c,h);ka.lineEnd=Yd;ka.point=Jc}}function hb(){return!0}function Zd(a,c,h,u,p){var w=[],b=[];a.forEach(function(a){if(!(0>=(c=a.length-1))){var c,h=a[0],u=a[c];if(Eb(h,u)){p.lineStart();for(u=0;u<c;++u)p.point((h=a[u])[0],h[1]);p.lineEnd()}else a={point:h,points:a,other:null,visited:!1,
entry:!0,subject:!0},h={point:h,points:[h],other:a,visited:!1,entry:!1,subject:!1},a.other=h,w.push(a),b.push(h),a={point:u,points:[u],other:null,visited:!1,entry:!1,subject:!0},h={point:u,points:[u],other:a,visited:!1,entry:!0,subject:!1},a.other=h,w.push(a),b.push(h)}});b.sort(c);$d(w);$d(b);if(w.length){if(h)for(a=1,h=!h(b[0].point),c=b.length;a<c;++a)b[a].entry=h=!h;h=w[0];for(var d,f;;){for(c=h;c.visited;)if((c=c.next)===h)return;d=c.points;p.lineStart();do{c.visited=c.other.visited=!0;if(c.entry){if(c.subject)for(a=
0;a<d.length;a++)p.point((f=d[a])[0],f[1]);else u(c.point,c.next.point,1,p);c=c.next}else{if(c.subject)for(d=c.prev.points,a=d.length;0<=--a;)p.point((f=d[a])[0],f[1]);else u(c.point,c.prev.point,-1,p);c=c.prev}c=c.other;d=c.points}while(!c.visited);p.lineEnd()}}}function $d(a){if(c=a.length){for(var c,h=0,u=a[0],p;++h<c;)u.next=p=a[h],p.prev=u,u=p;u.next=p=a[0];p.prev=u}}function ae(a,c,h,u){return function(p){function w(c,h){a(c,h)&&p.point(c,h)}function b(a,c){q.point(a,c)}function d(){v.point=
b;q.lineStart()}function f(){v.point=w;q.lineEnd()}function e(a,c){x.point(a,c);P.push([a,c])}function g(){x.lineStart();P=[]}function m(){e(P[0][0],P[0][1]);x.lineEnd();var a=x.clean(),c=t.buffer(),h=c.length;P.pop();T.push(P);P=null;if(h)if(a&1){var a=c[0],h=a.length-1,c=-1,u;for(p.lineStart();++c<h;)p.point((u=a[c])[0],u[1]);p.lineEnd()}else 1<h&&a&2&&c.push(c.pop().concat(c.shift())),l.push(c.filter(Zf))}var q=c(p),v={point:w,lineStart:d,lineEnd:f,polygonStart:function(){v.point=e;v.lineStart=
g;v.lineEnd=m;l=[];T=[];p.polygonStart()},polygonEnd:function(){v.point=w;v.lineStart=d;v.lineEnd=f;l=s.merge(l);l.length?Zd(l,$f,null,h,p):u(T)&&(p.lineStart(),h(null,null,1,p),p.lineEnd());p.polygonEnd();l=T=null},sphere:function(){p.polygonStart();p.lineStart();h(null,null,1,p);p.lineEnd();p.polygonEnd()}},l,t=be(),x=c(t),T,P;return v}}function Zf(a){return 1<a.length}function be(){var a=[],c;return{lineStart:function(){a.push(c=[])},point:function(a,u){c.push([a,u])},lineEnd:m,buffer:function(){var h=
a;a=[];c=null;return h},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function $f(a,c){return(0>(a=a.point)[0]?a[1]-C/2-G:C/2-a[1])-(0>(c=c.point)[0]?c[1]-C/2-G:C/2-c[1])}function ce(a,c){var h=a[0],u=a[1],p=[Math.sin(h),-Math.cos(h),0],w=0,b=!1,d=!1,f=0;Ma.reset();for(var e=0,g=c.length;e<g;++e){var m=c[e],q=m.length;if(q){for(var v=m[0],l=v[0],t=v[1]/2+C/4,s=Math.sin(t),T=Math.cos(t),t=1;;){t===q&&(t=0);a=m[t];var P=a[0],R=a[1]/2+C/4,x=Math.sin(R),y=Math.cos(R),n=P-l,r=Math.abs(n)>
C,s=s*x;Ma.add(Math.atan2(s*Math.sin(n),T*y+s*Math.cos(n)));Math.abs(R)<G&&(d=!0);w+=r?n+(0<=n?2:-2)*C:n;r^l>=h^P>=h&&(v=ab(Na(v),Na(a)),Cb(v),v=ab(p,v),Cb(v),v=(r^0<=n?-1:1)*La(v[2]),u>v&&(f+=r^0<=n?1:-1));if(!t++)break;l=P;s=x;T=y;v=a}Math.abs(w)>G&&(b=!0)}}return(!d&&!b&&0>Ma||w<-G)^f&1}function ag(a){function c(a,c){return Math.cos(a)*Math.cos(c)>p}function h(a,c,h){var u=Na(a),w=Na(c),b=[1,0,0],w=ab(u,w),d=Ab(w,w),u=w[0],f=d-u*u;if(!f)return!h&&a;d=p*d/f;f=-p*u/f;u=ab(b,w);b=Bb(b,d);w=Bb(w,f);
Ic(b,w);w=Ab(b,u);d=Ab(u,u);f=w*w-d*(Ab(b,b)-1);if(!(0>f)){var sa=Math.sqrt(f),f=Bb(u,(-w-sa)/d);Ic(f,b);f=Db(f);if(!h)return f;h=a[0];var J=c[0];a=a[1];c=c[1];var e;J<h&&(e=h,h=J,J=e);var S=J-h,g=Math.abs(S-C)<G,m=g||S<G;!g&&c<a&&(e=a,a=c,c=e);if(m?g?0<a+c^f[1]<(Math.abs(f[0]-h)<G?a:c):a<=f[1]&&f[1]<=c:S>C^(h<=f[0]&&f[0]<=J))return c=Bb(u,(-w+sa)/d),Ic(c,b),[f,Db(c)]}}function u(c,h){var u=w?a:C-a,p=0;c<-u?p|=1:c>u&&(p|=2);h<-u?p|=4:h>u&&(p|=8);return p}var p=Math.cos(a),w=0<p,b=[a,0],d=Math.abs(p)>
G,f=Mc(a,6*E);return ae(c,function(a){var p,b,f,J,e;return{lineStart:function(){J=f=!1;e=1},point:function(S,g){var m=[S,g],q,v=c(S,g),l=w?v?0:u(S,g):v?u(S+(0>S?C:-C),g):0;!p&&(J=f=v)&&a.lineStart();v!==f&&(q=h(p,m),Eb(p,q)||Eb(m,q))&&(m[0]+=G,m[1]+=G,v=c(m[0],m[1]));if(v!==f)e=0,v?(a.lineStart(),q=h(m,p),a.point(q[0],q[1])):(q=h(p,m),a.point(q[0],q[1]),a.lineEnd()),p=q;else if(d&&p&&w^v){var t;l&b||!(t=h(m,p,!0))||(e=0,w?(a.lineStart(),a.point(t[0][0],t[0][1]),a.point(t[1][0],t[1][1]),a.lineEnd()):
(a.point(t[1][0],t[1][1]),a.lineEnd(),a.lineStart(),a.point(t[0][0],t[0][1])))}!v||p&&Eb(p,m)||a.point(m[0],m[1]);p=m;f=v;b=l},lineEnd:function(){f&&a.lineEnd();p=null},clean:function(){return e|(J&&f)<<1}}},f,function(a){return ce(b,a)})}function de(a,c,h,u){function p(u,p){return Math.abs(u[0]-a)<G?0<p?0:3:Math.abs(u[0]-h)<G?0<p?2:1:Math.abs(u[1]-c)<G?0<p?1:0:0<p?3:2}function w(a,c){return b(a.point,c.point)}function b(a,c){var h=p(a,1),u=p(c,1);return h!==u?h-u:0===h?c[1]-a[1]:1===h?a[0]-c[0]:
2===h?a[1]-c[1]:c[0]-a[0]}return function(f){function d(w){w=p(w,-1);return e([0===w||3===w?a:h,1<w?u:c])}function e(a){for(var c=0,h=x.length,u=a[1],p=0;p<h;++p)for(var w=1,b=x[p],f=b.length,d=b[0],J;w<f;++w)J=b[w],d[1]<=u?J[1]>u&&0<(J[0]-d[0])*(a[1]-d[1])-(a[0]-d[0])*(J[1]-d[1])&&++c:J[1]<=u&&0>(J[0]-d[0])*(a[1]-d[1])-(a[0]-d[0])*(J[1]-d[1])&&--c,d=J;return 0!==c}function g(w,f,d,e){var sa=0,S=0;if(null==w||(sa=p(w,d))!==(S=p(f,d))||0>b(w,f)^0<d){do e.point(0===sa||3===sa?a:h,1<sa?u:c);while((sa=
(sa+d+4)%4)!==S)}else e.point(f[0],f[1])}function m(p,w){a<=p&&p<=h&&c<=w&&w<=u&&f.point(p,w)}function q(p,w){p=Math.max(-Fb,Math.min(Fb,p));w=Math.max(-Fb,Math.min(Fb,w));var b=a<=p&&p<=h&&c<=w&&w<=u;x&&T.push([p,w]);if(z)R=p,y=w,n=b,z=!1,b&&(f.lineStart(),f.point(p,w));else if(b&&B)f.point(p,w);else{var d=[r,A],J=[p,w],e;e=J[0]-d[0];var S=J[1]-d[1],g=[0,1];Math.abs(e)<G&&Math.abs(S)<G?e=a<=d[0]&&d[0]<=h&&c<=d[1]&&d[1]<=u:Gb(a-d[0],e,g)&&Gb(d[0]-h,-e,g)&&Gb(c-d[1],S,g)&&Gb(d[1]-u,-S,g)?(1>g[1]&&
(J[0]=d[0]+g[1]*e,J[1]=d[1]+g[1]*S),0<g[0]&&(d[0]+=g[0]*e,d[1]+=g[0]*S),e=!0):e=!1;e?(B||(f.lineStart(),f.point(d[0],d[1])),f.point(J[0],J[1]),b||f.lineEnd()):b&&(f.lineStart(),f.point(p,w))}r=p;A=w;B=b}var v=f,l=be(),t,x,T,P={point:m,lineStart:function(){P.point=q;x&&x.push(T=[]);z=!0;B=!1;r=A=NaN},lineEnd:function(){t&&(q(R,y),n&&B&&l.rejoin(),t.push(l.buffer()));P.point=m;B&&f.lineEnd()},polygonStart:function(){f=l;t=[];x=[]},polygonEnd:function(){f=v;(t=s.merge(t)).length?(f.polygonStart(),Zd(t,
w,d,g,f),f.polygonEnd()):e([a,c])&&(f.polygonStart(),f.lineStart(),g(null,null,1,f),f.lineEnd(),f.polygonEnd());t=x=T=null}},R,y,n,r,A,B,z;return P}}function Gb(a,c,h){if(Math.abs(c)<G)return 0>=a;a/=c;if(0<c){if(a>h[1])return!1;a>h[0]&&(h[0]=a)}else{if(a<h[0])return!1;a<h[1]&&(h[1]=a)}return!0}function ee(a,c){function h(h,p){return h=a(h,p),c(h[0],h[1])}a.invert&&c.invert&&(h.invert=function(h,p){return h=c.invert(h,p),h&&a.invert(h[0],h[1])});return h}function Oc(a){var c=0,h=C/3,u=Pc(a);a=u(c,
h);a.parallels=function(a){return arguments.length?u(c=a[0]*C/180,h=a[1]*C/180):[c/C*180,h/C*180]};return a}function fe(a,c){function h(a,c){var h=Math.sqrt(w-2*p*Math.sin(c))/p;return[h*Math.sin(a*=p),b-h*Math.cos(a)]}var u=Math.sin(a),p=(u+Math.sin(c))/2,w=1+u*(2*p-u),b=Math.sqrt(w)/p;h.invert=function(a,c){var h=b-c;return[Math.atan2(a,h)/p,La((w-(a*a+h*h)*p*p)/(2*p))]};return h}function bg(){function a(a,c){Hb+=p*a-u*c;u=a;p=c}var c,h,u,p;Ga.point=function(w,b){Ga.point=a;c=u=w;h=p=b};Ga.lineEnd=
function(){a(c,h)}}function cg(){function a(a,c){b.push("M",a,",",c,w)}function c(a,c){b.push("M",a,",",c);d.point=h}function h(a,c){b.push("L",a,",",c)}function u(){d.point=a}function p(){b.push("Z")}var w=ge(4.5),b=[],d={point:a,lineStart:function(){d.point=c},lineEnd:u,polygonStart:function(){d.lineEnd=p},polygonEnd:function(){d.lineEnd=u;d.point=a},pointRadius:function(a){w=ge(a);return d},result:function(){if(b.length){var a=b.join("");b=[];return a}}};return d}function ge(a){return"m0,"+a+"a"+
a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Pa(a,c){va+=a;wa+=c;++oa}function he(){function a(a,p){var w=a-c,b=p-h,w=Math.sqrt(w*w+b*b);ha+=w*(c+a)/2;ia+=w*(h+p)/2;da+=w;Pa(c=a,h=p)}var c,h;la.point=function(u,p){la.point=a;Pa(c=u,h=p)}}function ie(){la.point=Pa}function dg(){function a(a,c){var h=a-u,b=c-p,h=Math.sqrt(h*h+b*b);ha+=h*(u+a)/2;ia+=h*(p+c)/2;da+=h;h=p*a-u*c;Ea+=h*(u+a);Fa+=h*(p+c);pa+=3*h;Pa(u=a,p=c)}var c,h,u,p;la.point=function(w,b){la.point=a;Pa(c=u=w,h=p=b)};
la.lineEnd=function(){a(c,h)}}function eg(a){function c(c,h){a.moveTo(c,h);a.arc(c,h,b,0,2*C)}function h(c,h){a.moveTo(c,h);d.point=u}function u(c,h){a.lineTo(c,h)}function p(){d.point=c}function w(){a.closePath()}var b=4.5,d={point:c,lineStart:function(){d.point=h},lineEnd:p,polygonStart:function(){d.lineEnd=w},polygonEnd:function(){d.lineEnd=p;d.point=c},pointRadius:function(a){b=a;return d},result:m};return d}function je(a){function c(c){function p(h,u){h=a(h,u);c.point(h[0],h[1])}function u(){y=
NaN;z.point=b;c.lineStart()}function b(u,p){var d=Na([u,p]),f=a(u,p);h(y,n,x,r,A,B,y=f[0],n=f[1],x=u,r=d[0],A=d[1],B=d[2],w,c);c.point(y,n)}function d(){z.point=p;c.lineEnd()}function f(){u();z.point=e;z.lineEnd=g}function e(a,c){b(m=a,c);q=y;v=n;l=r;t=A;s=B;z.point=b}function g(){h(y,n,x,r,A,B,q,v,m,l,t,s,w,c);z.lineEnd=d;d()}var m,q,v,l,t,s,x,y,n,r,A,B,z={point:p,lineStart:u,lineEnd:d,polygonStart:function(){c.polygonStart();z.lineStart=f},polygonEnd:function(){c.polygonEnd();z.lineStart=u}};return z}
function h(c,w,b,d,f,e,g,m,q,v,l,t,s,x){var y=g-c,n=m-w,r=y*y+n*n;if(r>4*u&&s--){var A=d+v,B=f+l,z=e+t,H=Math.sqrt(A*A+B*B+z*z),I=Math.asin(z/=H),L=Math.abs(Math.abs(z)-1)<G?(b+q)/2:Math.atan2(B,A),Oa=a(L,I),I=Oa[0],Oa=Oa[1],D=I-c,F=Oa-w,C=n*D-y*F;if(C*C/r>u||0.3<Math.abs((y*D+n*F)/r-0.5)||d*v+f*l+e*t<p)h(c,w,b,d,f,e,I,Oa,L,A/=H,B/=H,z,s,x),x.point(I,Oa),h(I,Oa,L,A,B,z,g,m,q,v,l,t,s,x)}}var u=0.5,p=Math.cos(30*E),w=16;c.precision=function(a){if(!arguments.length)return Math.sqrt(u);w=0<(u=a*a)&&16;
return c};return c}function Ib(a){this.stream=a}function fg(a){var c=je(function(c,u){return a([c*O,u*O])});return function(a){var u=new Ib(a=c(a));u.point=function(c,u){a.point(c*E,u*E)};return u}}function Ha(a){return Pc(function(){return a})()}function Pc(a){function c(a){a=d(a[0]*E,a[1]*E);return[a[0]*e+T,P-a[1]*e]}function h(a){return(a=d.invert((a[0]-T)/e,(P-a[1])/e))&&[a[0]*O,a[1]*O]}function u(){d=ee(b=Qc(l,t,x),w);var a=w(q,v);T=g-a[0]*e;P=m+a[1]*e;return p()}function p(){A&&(A.valid=!1,
A=null);return c}var w,b,d,f=je(function(a,c){a=w(a,c);return[a[0]*e+T,P-a[1]*e]}),e=150,g=480,m=250,q=0,v=0,l=0,t=0,x=0,T,P,R=ke,y=W,n=null,r=null,A;c.stream=function(a){A&&(A.valid=!1);A=gg(b,R(f(y(a))));A.valid=!0;return A};c.clipAngle=function(a){if(!arguments.length)return n;R=null==a?(n=a,ke):ag((n=+a)*E);return p()};c.clipExtent=function(a){if(!arguments.length)return r;y=(r=a)?de(a[0][0],a[0][1],a[1][0],a[1][1]):W;return p()};c.scale=function(a){if(!arguments.length)return e;e=+a;return u()};
c.translate=function(a){if(!arguments.length)return[g,m];g=+a[0];m=+a[1];return u()};c.center=function(a){if(!arguments.length)return[q*O,v*O];q=a[0]%360*E;v=a[1]%360*E;return u()};c.rotate=function(a){if(!arguments.length)return[l*O,t*O,x*O];l=a[0]%360*E;t=a[1]%360*E;x=2<a.length?a[2]%360*E:0;return u()};s.rebind(c,f,"precision");return function(){w=a.apply(this,arguments);c.invert=w.invert&&h;return u()}}function gg(a,c){var h=new Ib(c);h.point=function(h,p){p=a(h*E,p*E);h=p[0];c.point(h>C?h-2*
C:h<-C?h+2*C:h,p[1])};return h}function ib(a,c){return[a,c]}function Qc(a,c,h){return a?c||h?ee(le(a),me(c,h)):le(a):c||h?me(c,h):ib}function ne(a){return function(c,h){return c+=a,[c>C?c-2*C:c<-C?c+2*C:c,h]}}function le(a){var c=ne(a);c.invert=ne(-a);return c}function me(a,c){function h(a,c){var h=Math.cos(c),d=Math.cos(a)*h,h=Math.sin(a)*h,f=Math.sin(c),e=f*u+d*p;return[Math.atan2(h*w-e*b,d*u-f*p),La(e*w+h*b)]}var u=Math.cos(a),p=Math.sin(a),w=Math.cos(c),b=Math.sin(c);h.invert=function(a,c){var h=
Math.cos(c),d=Math.cos(a)*h,h=Math.sin(a)*h,f=Math.sin(c),e=f*w-h*b;return[Math.atan2(h*w+f*b,d*u+e*p),La(e*u-d*p)]};return h}function Mc(a,c){var h=Math.cos(a),u=Math.sin(a);return function(p,w,b,d){var f=b*c;if(null!=p){if(p=oe(h,p),w=oe(h,w),0<b?p<w:p>w)p+=2*b*C}else p=a+2*b*C,w=a-0.5*f;for(var e;0<b?p>w:p<w;p-=f)d.point((e=Db([h,-u*Math.cos(p),-u*Math.sin(p)]))[0],e[1])}}function oe(a,c){var h=Na(c);h[0]-=a;Cb(h);var u=Gd(-h[1]);return((0>-h[2]?-u:u)+2*Math.PI-G)%(2*Math.PI)}function pe(a,c,h){var u=
s.range(a,c-G,h).concat(c);return function(a){return u.map(function(c){return[a,c]})}}function qe(a,c,h){var u=s.range(a,c-G,h).concat(c);return function(a){return u.map(function(c){return[c,a]})}}function Rc(a){return a.source}function Sc(a){return a.target}function hg(a,c,h,u){var p=Math.cos(c),w=Math.sin(c),b=Math.cos(u),d=Math.sin(u),f=p*Math.cos(a),e=p*Math.sin(a),g=b*Math.cos(h),m=b*Math.sin(h),q=2*Math.asin(Math.sqrt(Hd(u-c)+p*b*Hd(h-a))),v=1/Math.sin(q);h=q?function(a){var c=Math.sin(a*=q)*
v,h=Math.sin(q-a)*v;a=h*f+c*g;var u=h*e+c*m,c=h*w+c*d;return[Math.atan2(u,a)*O,Math.atan2(c,Math.sqrt(a*a+u*u))*O]}:function(){return[a*O,c*O]};h.distance=q;return h}function jb(a,c){function h(c,h){var w=Math.cos(c),b=Math.cos(h),w=a(w*b);return[w*b*Math.sin(c),w*Math.sin(h)]}h.invert=function(a,h){var w=Math.sqrt(a*a+h*h),b=c(w),d=Math.sin(b),b=Math.cos(b);return[Math.atan2(a*d,w*b),Math.asin(w&&h*d/w)]};return h}function re(a,c){function h(a,c){var h=Math.abs(Math.abs(c)-C/2)<G?0:b/Math.pow(Math.tan(C/
4+c/2),p);return[h*Math.sin(p*a),b-h*Math.cos(p*a)]}var u=Math.cos(a),p=a===c?Math.sin(a):Math.log(u/Math.cos(c))/Math.log(Math.tan(C/4+c/2)/Math.tan(C/4+a/2)),b=u*Math.pow(Math.tan(C/4+a/2),p)/p;if(!p)return Jb;h.invert=function(a,c){var h=b-c,u=(0<p?1:0>p?-1:0)*Math.sqrt(a*a+h*h);return[Math.atan2(a,h)/p,2*Math.atan(Math.pow(b/u,1/p))-C/2]};return h}function se(a,c){function h(a,c){var h=b-c;return[h*Math.sin(p*a),b-h*Math.cos(p*a)]}var u=Math.cos(a),p=a===c?Math.sin(a):(u-Math.cos(c))/(c-a),b=
u/p+a;if(Math.abs(p)<G)return ib;h.invert=function(a,c){var h=b-c;return[Math.atan2(a,h)/p,b-(0<p?1:0>p?-1:0)*Math.sqrt(a*a+h*h)]};return h}function Jb(a,c){return[a,Math.log(Math.tan(C/4+c/2))]}function te(a){var c=Ha(a),h=c.scale,u=c.translate,p=c.clipExtent,b;c.scale=function(){var a=h.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a};c.translate=function(){var a=u.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a};c.clipExtent=function(a){var d=p.apply(c,arguments);if(d===c){if(b=
null==a){var f=C*h(),e=u();p([[e[0]-f,e[1]-f],[e[0]+f,e[1]+f]])}}else b&&(d=null);return d};return c.clipExtent(null)}function Tc(a,c){var h=Math.cos(c)*Math.sin(a);return[Math.log((1+h)/(1-h))/2,Math.atan2(Math.tan(c),Math.cos(a))]}function ue(a){function c(c){function d(){e.push("M",b(a(g),f))}for(var e=[],g=[],m=-1,J=c.length,q,v=M(h),l=M(u);++m<J;)p.call(this,q=c[m],m)?g.push([+v.call(this,q,m),+l.call(this,q,m)]):g.length&&(d(),g=[]);g.length&&d();return e.length?e.join(""):null}var h=qa,u=xa,
p=hb,b=fa,d=b.key,f=0.7;c.x=function(a){if(!arguments.length)return h;h=a;return c};c.y=function(a){if(!arguments.length)return u;u=a;return c};c.defined=function(a){if(!arguments.length)return p;p=a;return c};c.interpolate=function(a){if(!arguments.length)return d;d="function"===typeof a?b=a:(b=Uc.get(a)||fa).key;return c};c.tension=function(a){if(!arguments.length)return f;f=a;return c};return c}function qa(a){return a[0]}function xa(a){return a[1]}function fa(a){return a.join("L")}function Vc(a){for(var c=
0,h=a.length,u=a[0],p=[u[0],",",u[1]];++c<h;)p.push("V",(u=a[c])[1],"H",u[0]);return p.join("")}function Wc(a){for(var c=0,h=a.length,u=a[0],p=[u[0],",",u[1]];++c<h;)p.push("H",(u=a[c])[0],"V",u[1]);return p.join("")}function Kb(a,c){if(1>c.length||a.length!=c.length&&a.length!=c.length+2)return fa(a);var h=a.length!=c.length,u="",p=a[0],b=a[1],d=c[0],f=d,e=1;h&&(u+="Q"+(b[0]-2*d[0]/3)+","+(b[1]-2*d[1]/3)+","+b[0]+","+b[1],p=a[1],e=2);if(1<c.length)for(f=c[1],b=a[e],e++,u+="C"+(p[0]+d[0])+","+(p[1]+
d[1])+","+(b[0]-f[0])+","+(b[1]-f[1])+","+b[0]+","+b[1],p=2;p<c.length;p++,e++)b=a[e],f=c[p],u+="S"+(b[0]-f[0])+","+(b[1]-f[1])+","+b[0]+","+b[1];h&&(h=a[e],u+="Q"+(b[0]+2*f[0]/3)+","+(b[1]+2*f[1]/3)+","+h[0]+","+h[1]);return u}function Xc(a,c){for(var h=[],u=(1-c)/2,b,w=a[0],d=a[1],f=1,e=a.length;++f<e;)b=w,w=d,d=a[f],h.push([u*(d[0]-b[0]),u*(d[1]-b[1])]);return h}function ve(a){if(3>a.length)return fa(a);var c=1,h=a.length,u=a[0],b=u[0],w=u[1],d=[b,b,b,(u=a[1])[0]],f=[w,w,w,u[1]],b=[b,",",w,"L",
ja(Ia,d),",",ja(Ia,f)];for(a.push(a[h-1]);++c<=h;)u=a[c],d.shift(),d.push(u[0]),f.shift(),f.push(u[1]),Yc(b,d,f);a.pop();b.push("L",u);return b.join("")}function ja(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]}function Yc(a,c,h){a.push("C",ja(we,c),",",ja(we,h),",",ja(xe,c),",",ja(xe,h),",",ja(Ia,c),",",ja(Ia,h))}function Zc(a,c){return(c[1]-a[1])/(c[0]-a[0])}function ig(a,c,h,b){var p,w,d;a=b[a];p=a[0];w=a[1];a=b[c];c=a[0];d=a[1];a=b[h];return 0<(a[1]-w)*(c-p)-(d-w)*(a[0]-p)}function $c(a,
c,h){return(h[0]-c[0])*(a[1]-c[1])<(h[1]-c[1])*(a[0]-c[0])}function ye(a,c,h,b){var p=a[0],w=h[0],d=c[0]-p,f=b[0]-w;a=a[1];h=h[1];c=c[1]-a;b=b[1]-h;w=(f*(a-h)-b*(p-w))/(b*d-f*c);return[p+w*d,a+w*c]}function ze(a){var c=a[0];a=a[a.length-1];return!(c[0]-a[0]||c[1]-a[1])}function ad(a,c){var h=a.map(function(a,c){return{index:c,x:a[0],y:a[1]}}).sort(function(a,c){return a.y<c.y?-1:a.y>c.y?1:a.x<c.x?-1:a.x>c.x?1:0}),b=null,p={list:[],leftEnd:null,rightEnd:null,init:function(){p.leftEnd=p.createHalfEdge(null,
"l");p.rightEnd=p.createHalfEdge(null,"l");p.leftEnd.r=p.rightEnd;p.rightEnd.l=p.leftEnd;p.list.unshift(p.leftEnd,p.rightEnd)},createHalfEdge:function(a,c){return{edge:a,side:c,vertex:null,l:null,r:null}},insert:function(a,c){c.l=a;c.r=a.r;a.r.l=c;a.r=c},leftBound:function(a){var c=p.leftEnd;do c=c.r;while(c!=p.rightEnd&&w.rightOf(c,a));return c=c.l},del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?
b:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?b:a.edge.region[bd[a.side]]}},w={bisect:function(a,c){var h={region:{l:a,r:c},ep:{l:null,r:null}},b=c.x-a.x,u=c.y-a.y;h.c=a.x*b+a.y*u+0.5*(b*b+u*u);(0<b?b:-b)>(0<u?u:-u)?(h.a=1,h.b=u/b,h.c/=b):(h.b=1,h.a=b/u,h.c/=u);return h},intersect:function(a,c){var h=a.edge,b=c.edge;if(!h||!b||h.region.r==b.region.r)return null;var u=h.a*b.b-h.b*b.a;if(1E-10>Math.abs(u))return null;var p=(h.c*b.b-b.c*h.b)/u,u=(b.c*h.a-h.c*b.a)/u,d=h.region.r,
w=b.region.r;d.y<w.y||d.y==w.y&&d.x<w.x?d=a:(d=c,h=b);return(h=p>=h.region.r.x)&&"l"===d.side||!h&&"r"===d.side?null:{x:p,y:u}},rightOf:function(a,c){var h=a.edge,b=h.region.r,u=c.x>b.x;if(u&&"l"===a.side)return 1;if(!u&&"r"===a.side)return 0;if(1===h.a){var p=c.y-b.y,d=c.x-b.x,w=0,f=0;!u&&0>h.b||u&&0<=h.b?f=w=p>=h.b*d:(f=c.x+c.y*h.b>h.c,0>h.b&&(f=!f),f||(w=1));w||(b=b.x-h.region.l.x,f=h.b*(d*d-p*p)<b*p*(1+2*d/b+h.b*h.b),0>h.b&&(f=!f))}else d=h.c-h.a*c.x,h=c.y-d,p=c.x-b.x,b=d-b.y,f=h*h>p*p+b*b;return"l"===
a.side?f:!f},endPoint:function(a,h,b){a.ep[h]=b;a.ep[bd[h]]&&c(a)},distance:function(a,c){var h=a.x-c.x,b=a.y-c.y;return Math.sqrt(h*h+b*b)}},d={list:[],insert:function(a,c,h){a.vertex=c;a.ystar=c.y+h;h=0;for(var b=d.list,u=b.length;h<u;h++){var p=b[h];if(!(a.ystar>p.ystar||a.ystar==p.ystar&&c.x>p.vertex.x))break}b.splice(h,0,a)},del:function(a){for(var c=0,h=d.list,b=h.length;c<b&&h[c]!=a;++c);h.splice(c,1)},empty:function(){return 0===d.list.length},nextEvent:function(a){for(var c=0,h=d.list,b=
h.length;c<b;++c)if(h[c]==a)return h[c+1];return null},min:function(){var a=d.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return d.list.shift()}};p.init();for(var b=h.shift(),f=h.shift(),e,g,m,q,v,l,t,s,x;;)if(d.empty()||(e=d.min()),f&&(d.empty()||f.y<e.y||f.y==e.y&&f.x<e.x)){g=p.leftBound(f);m=p.right(g);t=p.rightRegion(g);x=w.bisect(t,f);l=p.createHalfEdge(x,"l");p.insert(g,l);if(s=w.intersect(g,l))d.del(g),d.insert(g,s,w.distance(s,f));g=l;l=p.createHalfEdge(x,"r");p.insert(g,
l);(s=w.intersect(l,m))&&d.insert(l,s,w.distance(s,f));f=h.shift()}else if(d.empty())break;else{g=d.extractMin();q=p.left(g);m=p.right(g);v=p.right(m);t=p.leftRegion(g);l=p.rightRegion(m);s=g.vertex;w.endPoint(g.edge,g.side,s);w.endPoint(m.edge,m.side,s);p.del(g);d.del(m);p.del(m);g="l";t.y>l.y&&(g=t,t=l,l=g,g="r");x=w.bisect(t,l);l=p.createHalfEdge(x,g);p.insert(q,l);w.endPoint(x,bd[g],s);if(s=w.intersect(q,l))d.del(q),d.insert(q,s,w.distance(s,t));(s=w.intersect(l,v))&&d.insert(l,s,w.distance(s,
t))}for(g=p.right(p.leftEnd);g!=p.rightEnd;g=p.right(g))c(g.edge)}function jg(a){return a.x}function kg(a){return a.y}function Ae(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function kb(a,c,h,b,p,d){if(!a(c,h,b,p,d)){var f=0.5*(h+p),e=0.5*(b+d);c=c.nodes;c[0]&&kb(a,c[0],h,b,f,e);c[1]&&kb(a,c[1],f,b,p,e);c[2]&&kb(a,c[2],h,e,f,d);c[3]&&kb(a,c[3],f,e,p,d)}}function cd(a,c){a=s.rgb(a);c=s.rgb(c);var h=a.r,b=a.g,p=a.b,d=c.r-h,f=c.g-b,e=c.b-p;return function(a){return"#"+$a(Math.round(h+d*a))+$a(Math.round(b+
f*a))+$a(Math.round(p+e*a))}}function Be(a,c){var h={},b={},p;for(p in a)p in c?h[p]=Qa(a[p],c[p]):b[p]=a[p];for(p in c)p in a||(b[p]=c[p]);return function(a){for(p in h)b[p]=h[p](a);return b}}function ya(a,c){c-=a=+a;return function(h){return a+c*h}}function Ce(a,c){var h,b,p=0,d=[],f=[],e,g;a+="";c+="";for(b=Lb.lastIndex=0;h=Lb.exec(c);++b)h.index&&d.push(c.substring(p,h.index)),f.push({i:d.length,x:h[0]}),d.push(null),p=Lb.lastIndex;p<c.length&&d.push(c.substring(p));b=0;for(e=f.length;(h=Lb.exec(a))&&
b<e;++b)if(g=f[b],g.x==h[0]){if(g.i)if(null==d[g.i+1])for(d[g.i-1]+=g.x,d.splice(g.i,1),h=b+1;h<e;++h)f[h].i--;else for(d[g.i-1]+=g.x+d[g.i+1],d.splice(g.i,2),h=b+1;h<e;++h)f[h].i-=2;else if(null==d[g.i+1])d[g.i]=g.x;else for(d[g.i]=g.x+d[g.i+1],d.splice(g.i+1,1),h=b+1;h<e;++h)f[h].i--;f.splice(b,1);e--;b--}else g.x=ya(parseFloat(h[0]),parseFloat(g.x));for(;b<e;)g=f.pop(),null==d[g.i+1]?d[g.i]=g.x:(d[g.i]=g.x+d[g.i+1],d.splice(g.i+1,1)),e--;return 1===d.length?null==d[0]?(g=f[0].x,function(a){return g(a)+
""}):function(){return c}:function(a){for(b=0;b<e;++b)d[(g=f[b]).i]=g.x(a);return d.join("")}}function Qa(a,c){for(var h=s.interpolators.length,b;0<=--h&&!(b=s.interpolators[h](a,c)););return b}function Mb(a,c){var h=[],b=[],p=a.length,d=c.length,f=Math.min(a.length,c.length),e;for(e=0;e<f;++e)h.push(Qa(a[e],c[e]));for(;e<p;++e)b[e]=a[e];for(;e<d;++e)b[e]=c[e];return function(a){for(e=0;e<f;++e)b[e]=h[e](a);return b}}function lg(a){return function(c){return 0>=c?0:1<=c?1:a(c)}}function De(a){return function(c){return 1-
a(1-c)}}function Ee(a){return function(c){return 0.5*(0.5>c?a(2*c):2-a(2-2*c))}}function mg(a){return a*a}function ng(a){return a*a*a}function og(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,h=c*a;return 4*(0.5>a?h:3*(a-c)+h-0.75)}function pg(a){return 1-Math.cos(a*C/2)}function qg(a){return Math.pow(2,10*(a-1))}function rg(a){return 1-Math.sqrt(1-a*a)}function sg(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*
a+0.984375}function Fe(a,c){c-=a;return function(h){return Math.round(a+c*h)}}function Ge(a){var c=[a.a,a.b],h=[a.c,a.d],b=He(c),p=c[0]*h[0]+c[1]*h[1],d=-p;h[0]+=d*c[0];h[1]+=d*c[1];d=He(h)||0;c[0]*h[1]<h[0]*c[1]&&(c[0]*=-1,c[1]*=-1,b*=-1,p*=-1);this.rotate=(b?Math.atan2(c[1],c[0]):Math.atan2(-h[0],h[1]))*O;this.translate=[a.e,a.f];this.scale=[b,d];this.skew=d?Math.atan2(p,d)*O:0}function He(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);c&&(a[0]/=c,a[1]/=c);return c}function Ie(a,c){var h=[],b=[],p,d=s.transform(a),
f=s.transform(c),e=d.translate,g=f.translate,m=d.rotate,q=f.rotate,v=d.skew,l=f.skew,d=d.scale,f=f.scale;e[0]!=g[0]||e[1]!=g[1]?(h.push("translate(",null,",",null,")"),b.push({i:1,x:ya(e[0],g[0])},{i:3,x:ya(e[1],g[1])})):g[0]||g[1]?h.push("translate("+g+")"):h.push("");m!=q?(180<m-q?q+=360:180<q-m&&(m+=360),b.push({i:h.push(h.pop()+"rotate(",null,")")-2,x:ya(m,q)})):q&&h.push(h.pop()+"rotate("+q+")");v!=l?b.push({i:h.push(h.pop()+"skewX(",null,")")-2,x:ya(v,l)}):l&&h.push(h.pop()+"skewX("+l+")");
d[0]!=f[0]||d[1]!=f[1]?(p=h.push(h.pop()+"scale(",null,",",null,")"),b.push({i:p-4,x:ya(d[0],f[0])},{i:p-2,x:ya(d[1],f[1])})):1==f[0]&&1==f[1]||h.push(h.pop()+"scale("+f+")");p=b.length;return function(a){for(var c=-1,d;++c<p;)h[(d=b[c]).i]=d.x(a);return h.join("")}}function tg(a,c){c=c-(a=+a)?1/(c-a):0;return function(h){return(h-a)*c}}function ug(a,c){c=c-(a=+a)?1/(c-a):0;return function(h){return Math.max(0,Math.min(1,(h-a)*c))}}function vg(a){var c=a.source;a=a.target;var h;var b=a;if(c===b)h=
c;else{h=Je(c);for(var b=Je(b),d=h.pop(),f=b.pop(),e=null;d===f;)e=d,d=h.pop(),f=b.pop();h=e}for(b=[c];c!==h;)c=c.parent,b.push(c);for(c=b.length;a!==h;)b.splice(c,0,a),a=a.parent;return b}function Je(a){for(var c=[],h=a.parent;null!=h;)c.push(a),a=h,h=h.parent;c.push(a);return c}function wg(a){a.fixed|=2}function xg(a){a.fixed&=-7}function yg(a){a.fixed|=4;a.px=a.x;a.py=a.y}function zg(a){a.fixed&=-5}function Ke(a,c,h){var b=0,d=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,e=f.length,g=-1,m;++g<e;)m=
f[g],null!=m&&(Ke(m,c,h),a.charge+=m.charge,b+=m.charge*m.cx,d+=m.charge*m.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),c*=h[a.point.index],a.charge+=a.pointCharge=c,b+=c*a.point.x,d+=c*a.point.y);a.cx=b/a.charge;a.cy=d/a.charge}function lb(a,c){s.rebind(a,c,"sort","children","value");a.nodes=a;a.links=Ag;return a}function Bg(a){return a.children}function Cg(a){return a.value}function Dg(a,c){return c.value-a.value}function Ag(a){return s.merge(a.map(function(a){return(a.children||
[]).map(function(h){return{source:a,target:h}})}))}function Eg(a){return a.x}function Fg(a){return a.y}function Gg(a,c,h){a.y0=c;a.y=h}function dd(a){return s.range(a.length)}function ed(a){var c=-1;a=a[0].length;for(var h=[];++c<a;)h[c]=0;return h}function Hg(a){for(var c=1,h=0,b=a[0][1],d,f=a.length;c<f;++c)(d=a[c][1])>b&&(h=c,b=d);return h}function Ig(a){return a.reduce(Jg,0)}function Jg(a,c){return a+c[1]}function Kg(a,c){return Le(a,Math.ceil(Math.log(c.length)/Math.LN2+1))}function Le(a,c){for(var h=
-1,b=+a[0],d=(a[1]-b)/c,f=[];++h<=c;)f[h]=d*h+b;return f}function Lg(a){return[s.min(a),s.max(a)]}function Me(a,c){return a.parent==c.parent?1:2}function fd(a){var c=a.children;return c&&c.length?c[0]:a._tree.thread}function gd(a){var c=a.children,h;return c&&(h=c.length)?c[h-1]:a._tree.thread}function Nb(a,c){var h=a.children;if(h&&(d=h.length))for(var b,d,f=-1;++f<d;)0<c(b=Nb(h[f],c),a)&&(a=b);return a}function Mg(a,c){return a.x-c.x}function Ng(a,c){return c.x-a.x}function Og(a,c){return a.depth-
c.depth}function za(a,c){function h(a,b){var d=a.children;if(d&&(m=d.length))for(var f,e=null,g=-1,m;++g<m;)f=d[g],h(f,e),e=f;c(a,b)}h(a,null)}function Pg(a,c){return a.value-c.value}function hd(a,c){var h=a._pack_next;a._pack_next=c;c._pack_prev=a;c._pack_next=h;h._pack_prev=c}function Ne(a,c){a._pack_next=c;c._pack_prev=a}function Oe(a,c){var h=c.x-a.x,b=c.y-a.y,d=a.r+c.r;return 0.999*d*d>h*h+b*b}function Pe(a){function c(a){b=Math.min(a.x-a.r,b);d=Math.max(a.x+a.r,d);f=Math.min(a.y-a.r,f);e=Math.max(a.y+
a.r,e)}if((h=a.children)&&(s=h.length)){var h,b=Infinity,d=-Infinity,f=Infinity,e=-Infinity,g,m,q,v,l,t,s;h.forEach(Qg);g=h[0];g.x=-g.r;g.y=0;c(g);if(1<s&&(m=h[1],m.x=m.r,m.y=0,c(m),2<s))for(q=h[2],Qe(g,m,q),c(q),hd(g,q),g._pack_prev=q,hd(q,m),m=g._pack_next,v=3;v<s;v++){Qe(g,m,q=h[v]);var x=0,y=1,n=1;for(l=m._pack_next;l!==m;l=l._pack_next,y++)if(Oe(l,q)){x=1;break}if(1==x)for(t=g._pack_prev;t!==l._pack_prev&&!Oe(t,q);t=t._pack_prev,n++);x?(y<n||y==n&&m.r<g.r?Ne(g,m=l):Ne(g=t,m),v--):(hd(g,q),m=
q,c(q))}g=(b+d)/2;m=(f+e)/2;for(v=l=0;v<s;v++)q=h[v],q.x-=g,q.y-=m,l=Math.max(l,q.r+Math.sqrt(q.x*q.x+q.y*q.y));a.r=l;h.forEach(Rg)}}function Qg(a){a._pack_next=a._pack_prev=a}function Rg(a){delete a._pack_next;delete a._pack_prev}function Re(a,c,h,b){var d=a.children;a.x=c+=b*a.x;a.y=h+=b*a.y;a.r*=b;if(d){a=-1;for(var f=d.length;++a<f;)Re(d[a],c,h,b)}}function Qe(a,c,h){var b=a.r+h.r,d=c.x-a.x,f=c.y-a.y;if(b&&(d||f)){var e=c.r+h.r,g=d*d+f*f,e=e*e,b=b*b;c=0.5+(b-e)/(2*g);e=Math.sqrt(Math.max(0,2*
e*(b+g)-(b-=g)*b-e*e))/(2*g);h.x=a.x+c*d+e*f;h.y=a.y+c*f-e*d}else h.x=a.x+b,h.y=a.y}function Sg(a){return 1+s.max(a,function(a){return a.y})}function Tg(a){return a.reduce(function(a,h){return a+h.x},0)/a.length}function Se(a){var c=a.children;return c&&c.length?Se(c[0]):a}function Te(a){var c=a.children,h;return c&&(h=c.length)?Te(c[h-1]):a}function id(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ue(a,c){var h=a.x+c[3],b=a.y+c[0],d=a.dx-c[1]-c[3],f=a.dy-c[0]-c[2];0>d&&(h+=d/2,d=0);0>f&&(b+=f/
2,f=0);return{x:h,y:b,dx:d,dy:f}}function cb(a){var c=a[0];a=a[a.length-1];return c<a?[c,a]:[a,c]}function Ob(a){return a.rangeExtent?a.rangeExtent():cb(a.range())}function Ug(a,c,h,b){var d=h(a[0],a[1]),f=b(c[0],c[1]);return function(a){return f(d(a))}}function Pb(a,c){var h=0,b=a.length-1,d=a[h],f=a[b],e;f<d&&(e=h,h=b,b=e,e=d,d=f,f=e);a[h]=c.floor(d);a[b]=c.ceil(f);return a}function Ve(a){return a?{floor:function(c){return Math.floor(c/a)*a},ceil:function(c){return Math.ceil(c/a)*a}}:Vg}function Wg(a,
c,h,b){var d=[],f=[],e=0,g=Math.min(a.length,c.length)-1;a[g]<a[0]&&(a=a.slice().reverse(),c=c.slice().reverse());for(;++e<=g;)d.push(h(a[e-1],a[e])),f.push(b(c[e-1],c[e]));return function(c){var h=s.bisect(a,c,1,g)-1;return f[h](d[h](c))}}function We(a,c,h,b){function d(){var p=2<Math.min(a.length,c.length)?Wg:Ug,m=b?ug:tg;e=p(a,c,m,h);g=p(c,a,m,Qa);return f}function f(a){return e(a)}var e,g;f.invert=function(a){return g(a)};f.domain=function(c){if(!arguments.length)return a;a=c.map(Number);return d()};
f.range=function(a){if(!arguments.length)return c;c=a;return d()};f.rangeRound=function(a){return f.range(a).interpolate(Fe)};f.clamp=function(a){if(!arguments.length)return b;b=a;return d()};f.interpolate=function(a){if(!arguments.length)return h;h=a;return d()};f.ticks=function(c){return s.range.apply(s,Ja(a,c))};f.tickFormat=function(c,h){return jd(a,c,h)};f.nice=function(c){Pb(a,Ve(Ja(a,c)[2]));return d()};f.copy=function(){return We(a,c,h,b)};return d()}function kd(a,c){return s.rebind(a,c,"range",
"rangeRound","interpolate","clamp")}function Ja(a,c){null==c&&(c=10);var h=cb(a),b=h[1]-h[0],d=Math.pow(10,Math.floor(Math.log(b/c)/Math.LN10)),b=c/b*d;0.15>=b?d*=10:0.35>=b?d*=5:0.75>=b&&(d*=2);h[0]=Math.ceil(h[0]/d)*d;h[1]=Math.floor(h[1]/d)*d+0.5*d;h[2]=d;return h}function jd(a,c,h){var b=-Math.floor(Math.log(Ja(a,c)[2])/Math.LN10+0.01);return s.format(h?h.replace(Xe,function(a,c,h,d,f,e,g,m,q,v){return[c,h,d,f,e,g,m,q||"."+(b-2*("%"===v)),v].join("")}):",."+b+"f")}function Ye(a,c,h,b){function d(a){return(h?
Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(c)}function f(a){return h?Math.pow(c,a):-Math.pow(c,-a)}function e(c){return a(d(c))}e.invert=function(c){return f(a.invert(c))};e.domain=function(c){if(!arguments.length)return b;h=0<=c[0];a.domain((b=c.map(Number)).map(d));return e};e.base=function(h){if(!arguments.length)return c;c=+h;a.domain(b.map(d));return e};e.nice=function(){var c=Pb(b.map(d),h?Math:Xg);a.domain(c);b=c.map(f);return e};e.ticks=function(){var a=cb(b),e=[],g=a[0],a=a[1],m=Math.floor(d(g)),
q=Math.ceil(d(a)),J=c%1?2:c;if(isFinite(q-m)){if(h){for(;m<q;m++)for(var v=1;v<J;v++)e.push(f(m)*v);e.push(f(m))}else for(e.push(f(m));m++<q;)for(v=J-1;0<v;v--)e.push(f(m)*v);for(m=0;e[m]<g;m++);for(q=e.length;e[q-1]>a;q--);e=e.slice(m,q)}return e};e.tickFormat=function(a,c){if(!arguments.length)return Ze;2>arguments.length?c=Ze:"function"!==typeof c&&(c=s.format(c));var b=Math.max(0.1,a/e.ticks().length),u=h?(g=1E-12,Math.ceil):(g=-1E-12,Math.floor),g;return function(a){return a/f(u(d(a)+g))<=b?
c(a):""}};e.copy=function(){return Ye(a.copy(),c,h,b)};return kd(e,a)}function $e(a,c,h){function b(c){return a(d(c))}var d=Qb(c),f=Qb(1/c);b.invert=function(c){return f(a.invert(c))};b.domain=function(c){if(!arguments.length)return h;a.domain((h=c.map(Number)).map(d));return b};b.ticks=function(a){return s.range.apply(s,Ja(h,a))};b.tickFormat=function(a,c){return jd(h,a,c)};b.nice=function(a){return b.domain(Pb(h,Ve(Ja(h,a)[2])))};b.exponent=function(e){if(!arguments.length)return c;d=Qb(c=e);f=
Qb(1/c);a.domain(h.map(d));return b};b.copy=function(){return $e(a.copy(),c,h)};return kd(b,a)}function Qb(a){return function(c){return 0>c?-Math.pow(-c,a):Math.pow(c,a)}}function af(a,c){function h(c){return w[((f.get(c)||f.set(c,a.push(c)))-1)%w.length]}function d(c,h){return s.range(a.length).map(function(a){return c+h*a})}var f,w,e;h.domain=function(d){if(!arguments.length)return a;a=[];f=new b;for(var u=-1,w=d.length,e;++u<w;)f.has(e=d[u])||f.set(e,a.push(e));return h[c.t].apply(h,c.a)};h.range=
function(a){if(!arguments.length)return w;w=a;e=0;c={t:"range",a:arguments};return h};h.rangePoints=function(b,f){2>arguments.length&&(f=0);var p=b[0],g=b[1],m=(g-p)/(Math.max(1,a.length-1)+f);w=d(2>a.length?(p+g)/2:p+m*f/2,m);e=0;c={t:"rangePoints",a:arguments};return h};h.rangeBands=function(b,f,p){2>arguments.length&&(f=0);3>arguments.length&&(p=f);var g=b[1]<b[0],m=b[g-0],q=(b[1-g]-m)/(a.length-f+2*p);w=d(m+q*p,q);g&&w.reverse();e=q*(1-f);c={t:"rangeBands",a:arguments};return h};h.rangeRoundBands=
function(b,f,p){2>arguments.length&&(f=0);3>arguments.length&&(p=f);var g=b[1]<b[0],m=b[g-0],q=b[1-g],v=Math.floor((q-m)/(a.length-f+2*p));w=d(m+Math.round((q-m-(a.length-f)*v)/2),v);g&&w.reverse();e=Math.round(v*(1-f));c={t:"rangeRoundBands",a:arguments};return h};h.rangeBand=function(){return e};h.rangeExtent=function(){return cb(c.a[0])};h.copy=function(){return af(a,c)};return h.domain(a)}function bf(a,c){function h(){var h=0,f=c.length;for(d=[];++h<f;)d[h-1]=s.quantile(a,h/f);return b}function b(a){if(!isNaN(a=
+a))return c[s.bisect(d,a)]}var d;b.domain=function(c){if(!arguments.length)return a;a=c.filter(function(a){return!isNaN(a)}).sort(s.ascending);return h()};b.range=function(a){if(!arguments.length)return c;c=a;return h()};b.quantiles=function(){return d};b.invertExtent=function(h){h=c.indexOf(h);return 0>h?[NaN,NaN]:[0<h?d[h-1]:a[0],h<d.length?d[h]:a[a.length-1]]};b.copy=function(){return bf(a,c)};return h()}function cf(a,c,h){function b(c){return h[Math.max(0,Math.min(e,Math.floor(f*(c-a))))]}function d(){f=
h.length/(c-a);e=h.length-1;return b}var f,e;b.domain=function(h){if(!arguments.length)return[a,c];a=+h[0];c=+h[h.length-1];return d()};b.range=function(a){if(!arguments.length)return h;h=a;return d()};b.invertExtent=function(c){c=h.indexOf(c);c=0>c?NaN:c/f+a;return[c,c+1/f]};b.copy=function(){return cf(a,c,h)};return d()}function df(a,c){function h(h){if(h<=h)return c[s.bisect(a,h)]}h.domain=function(c){if(!arguments.length)return a;a=c;return h};h.range=function(a){if(!arguments.length)return c;
c=a;return h};h.invertExtent=function(h){h=c.indexOf(h);return[a[h-1],a[h]]};h.copy=function(){return df(a,c)};return h}function ef(a){function c(a){return+a}c.invert=c;c.domain=c.range=function(h){if(!arguments.length)return a;a=h.map(c);return c};c.ticks=function(c){return s.range.apply(s,Ja(a,c))};c.tickFormat=function(c,b){return jd(a,c,b)};c.copy=function(){return ef(a)};return c}function Yg(a){return a.innerRadius}function Zg(a){return a.outerRadius}function ff(a){return a.startAngle}function gf(a){return a.endAngle}
function hf(a){for(var c,h=-1,b=a.length,d,f;++h<b;)c=a[h],d=c[0],f=c[1]+Ra,c[0]=d*Math.cos(f),c[1]=d*Math.sin(f);return a}function jf(a){function c(c){function m(){S.push("M",g(a(s),l),v,q(a(t.reverse()),l),"Z")}for(var S=[],t=[],s=[],x=-1,y=c.length,n,r=M(h),A=M(d),B=h===b?function(){return H}:M(b),z=d===f?function(){return I}:M(f),H,I;++x<y;)e.call(this,n=c[x],x)?(t.push([H=+r.call(this,n,x),I=+A.call(this,n,x)]),s.push([+B.call(this,n,x),+z.call(this,n,x)])):t.length&&(m(),t=[],s=[]);t.length&&
m();return S.length?S.join(""):null}var h=qa,b=qa,d=0,f=xa,e=hb,g=fa,m=g.key,q=g,v="L",l=0.7;c.x=function(a){if(!arguments.length)return b;h=b=a;return c};c.x0=function(a){if(!arguments.length)return h;h=a;return c};c.x1=function(a){if(!arguments.length)return b;b=a;return c};c.y=function(a){if(!arguments.length)return f;d=f=a;return c};c.y0=function(a){if(!arguments.length)return d;d=a;return c};c.y1=function(a){if(!arguments.length)return f;f=a;return c};c.defined=function(a){if(!arguments.length)return e;
e=a;return c};c.interpolate=function(a){if(!arguments.length)return m;m="function"===typeof a?g=a:(g=Uc.get(a)||fa).key;q=g.reverse||g;v=g.closed?"M":"L";return c};c.tension=function(a){if(!arguments.length)return l;l=a;return c};return c}function $g(a){return a.radius}function kf(a){return[a.x,a.y]}function ah(a){return function(){var c=a.apply(this,arguments),h=c[0],c=c[1]+Ra;return[h*Math.cos(c),h*Math.sin(c)]}}function bh(){return 64}function ch(){return"circle"}function lf(a){a=Math.sqrt(a/C);
return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function mb(a,c){nb(a,U);a.id=c;return a}function ld(a,c,h,b){var d=a.id;return V(a,"function"===typeof h?function(a,f,e){a.__transition__[d].tween.set(c,b(h.call(a,a.__data__,f,e)))}:(h=b(h),function(a){a.__transition__[d].tween.set(c,h)}))}function dh(a){null==a&&(a="");return function(){this.textContent=a}}function Rb(a,c,h,d){var f=a.__transition__||(a.__transition__={active:0,count:0}),e=f[h];if(!e){var g=d.time,e=f[h]={tween:new b,
time:g,ease:d.ease,delay:d.delay,duration:d.duration};++f.count;s.timer(function(b){function d(b){if(f.active>h)return m();f.active=h;e.event&&e.event.start.call(a,q,c);e.tween.forEach(function(h,b){(b=b.call(a,q,c))&&s.push(b)});if(u(b))return 1;Td(u,0,g)}function u(b){if(f.active!==h)return m();b=(b-l)/t;for(var d=v(b),g=s.length;0<g;)s[--g].call(a,d);if(1<=b)return e.event&&e.event.end.call(a,q,c),m()}function m(){--f.count?delete f[h]:delete a.__transition__;return 1}var q=a.__data__,v=e.ease,
l=e.delay,t=e.duration,s=[];if(l<=b)return d(b);Td(d,l,g)},0,g)}}function mf(a,c){a.attr("transform",function(a){return"translate("+c(a)+",0)"})}function nf(a,c){a.attr("transform",function(a){return"translate(0,"+c(a)+")"})}function Aa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Sa(a,c,h){function b(c){var h=a(c),d=f(h,1);return c-h<d-c?h:d}function d(h){c(h=a(new Y(h-1)),1);return h}function f(a,h){c(a=new Y(+a),h);return a}function e(a,b,f){a=d(a);
var u=[];if(1<f)for(;a<b;)h(a)%f||u.push(new Date(+a)),c(a,1);else for(;a<b;)u.push(new Date(+a)),c(a,1);return u}a.floor=a;a.round=b;a.ceil=d;a.offset=f;a.range=e;var g=a.utc=Sb(a);g.floor=g;g.round=Sb(b);g.ceil=Sb(d);g.offset=Sb(f);g.range=function(a,c,h){try{Y=Aa;var b=new Aa;b._=a;return e(b,c,h)}finally{Y=Date}};return a}function Sb(a){return function(c,h){try{Y=Aa;var b=new Aa;b._=c;return a(b,h)._}finally{Y=Date}}}function ba(a){function c(c){for(var b=[],d=-1,f=0,e,g;++d<h;)if(37===a.charCodeAt(d)){b.push(a.substring(f,
d));null!=(e=of[f=a.charAt(++d)])&&(f=a.charAt(++d));if(g=Tb[f])f=g(c,null==e?"e"===f?" ":"0":e);b.push(f);f=d+1}b.push(a.substring(f,d));return b.join("")}var h=a.length;c.parse=function(c){var h={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(Ub(h,a,c,0)!=c.length)return null;"p"in h&&(h.H=h.H%12+12*h.p);c=null!=h.Z&&Y!==Aa;var b=new (c?Aa:Y);"j"in h?b.setFullYear(h.y,0,h.j):"w"in h&&("W"in h||"U"in h)?(b.setFullYear(h.y,0,1),b.setFullYear(h.y,0,"W"in h?(h.w+6)%7+7*h.W-(b.getDay()+5)%7:h.w+7*h.U-(b.getDay()+
6)%7)):b.setFullYear(h.y,h.m,h.d);b.setHours(h.H+Math.floor(h.Z/100),h.M+h.Z%100,h.S,h.L);return c?b._:b};c.toString=function(){return a};return c}function Ub(a,c,h,b){for(var d,f=0,e=c.length,g=h.length;f<e;){if(b>=g)return-1;d=c.charCodeAt(f++);if(37===d){if(d=c.charAt(f++),d=eh[d in of?c.charAt(f++):d],!d||0>(b=d(a,h,b)))return-1}else if(d!=h.charCodeAt(b++))return-1}return b}function Vb(a){return new RegExp("^(?:"+a.map(s.requote).join("|")+")","i")}function Wb(a){for(var c=new b,h=-1,d=a.length;++h<
d;)c.set(a[h].toLowerCase(),h);return c}function ca(a,c,h){var b=0>a?"-":"";a=(b?-a:a)+"";var d=a.length;return b+(d<h?Array(h-d+1).join(c)+a:a)}function pf(a,c,h){Q.lastIndex=0;return(c=Q.exec(c.substring(h,h+2)))?(a.d=+c[0],h+c[0].length):-1}function qf(a,c,h){Q.lastIndex=0;return(c=Q.exec(c.substring(h,h+2)))?(a.H=+c[0],h+c[0].length):-1}function ra(a){function c(a){try{Y=Aa;var c=new Y;c._=a;return h(c)}finally{Y=Date}}var h=ba(a);c.parse=function(a){try{Y=Aa;var c=h.parse(a);return c&&c._}finally{Y=
Date}};c.toString=h.toString;return c}function md(a){return a.toISOString()}function nd(a,c,h){function b(c){return a(c)}function d(a,h){var b=(a[1]-a[0])/h,f=s.bisect(Xb,b);return f==Xb.length?[c.year,Ja(a.map(function(a){return a/31536E6}),h)[2]]:f?c[b/Xb[f-1]<Xb[f]/b?f-1:f]:[fh,Ja(a,h)[2]]}b.invert=function(c){return Ta(a.invert(c))};b.domain=function(c){if(!arguments.length)return a.domain().map(Ta);a.domain(c);return b};b.nice=function(a,c){function h(b){return!isNaN(b)&&!a.range(b,Ta(+b+1),
c).length}var f=b.domain(),e=cb(f);if(e=null==a?d(e,10):"number"===typeof a&&d(e,a))a=e[0],c=e[1];return b.domain(Pb(f,1<c?{floor:function(c){for(;h(c=a.floor(c));)c=Ta(c-1);return c},ceil:function(c){for(;h(c=a.ceil(c));)c=Ta(+c+1);return c}}:a))};b.ticks=function(a,c){var h=cb(b.domain()),f=null==a?d(h,10):"number"===typeof a?d(h,a):!a.range&&[{range:a},c];f&&(a=f[0],c=f[1]);return a.range(h[0],Ta(+h[1]+1),c)};b.tickFormat=function(){return h};b.copy=function(){return nd(a.copy(),c,h)};return kd(b,
a)}function Ta(a){return new Date(a)}function rf(a){return function(c){for(var h=a.length-1,b=a[h];!b[1](c);)b=a[--h];return b[0](c)}}function gh(a){return JSON.parse(a.responseText)}function hh(a){var c=ga.createRange();c.selectNode(ga.body);return c.createContextualFragment(a.responseText)}var s={version:"3.3.3"};Date.now||(Date.now=function(){return+new Date});var ih=[].slice,Ca=function(a){return ih.call(a)},ga=document,Da=ga.documentElement,X=window;try{Ca(Da.childNodes)[0].nodeType}catch(Rh){Ca=
function(a){for(var c=a.length,h=Array(c);c--;)h[c]=a[c];return h}}try{ga.createElement("div").style.setProperty("opacity",0,"")}catch(Sh){var Yb=X.Element.prototype,jh=Yb.setAttribute,kh=Yb.setAttributeNS,sf=X.CSSStyleDeclaration.prototype,lh=sf.setProperty;Yb.setAttribute=function(a,c){jh.call(this,a,c+"")};Yb.setAttributeNS=function(a,c,h){kh.call(this,a,c,h+"")};sf.setProperty=function(a,c,h){lh.call(this,a,c+"",h)}}s.ascending=function(a,c){return a<c?-1:a>c?1:a>=c?0:NaN};s.descending=function(a,
c){return c<a?-1:c>a?1:c>=a?0:NaN};s.min=function(a,c){var h=-1,b=a.length,d,f;if(1===arguments.length){for(;++h<b&&!(null!=(d=a[h])&&d<=d);)d=void 0;for(;++h<b;)null!=(f=a[h])&&d>f&&(d=f)}else{for(;++h<b&&!(null!=(d=c.call(a,a[h],h))&&d<=d);)d=void 0;for(;++h<b;)null!=(f=c.call(a,a[h],h))&&d>f&&(d=f)}return d};s.max=function(a,c){var h=-1,b=a.length,d,f;if(1===arguments.length){for(;++h<b&&!(null!=(d=a[h])&&d<=d);)d=void 0;for(;++h<b;)null!=(f=a[h])&&f>d&&(d=f)}else{for(;++h<b&&!(null!=(d=c.call(a,
a[h],h))&&d<=d);)d=void 0;for(;++h<b;)null!=(f=c.call(a,a[h],h))&&f>d&&(d=f)}return d};s.extent=function(a,c){var h=-1,b=a.length,d,f,e;if(1===arguments.length){for(;++h<b&&!(null!=(d=e=a[h])&&d<=d);)d=e=void 0;for(;++h<b;)null!=(f=a[h])&&(d>f&&(d=f),e<f&&(e=f))}else{for(;++h<b&&!(null!=(d=e=c.call(a,a[h],h))&&d<=d);)d=void 0;for(;++h<b;)null!=(f=c.call(a,a[h],h))&&(d>f&&(d=f),e<f&&(e=f))}return[d,e]};s.sum=function(a,c){var h=0,b=a.length,d,f=-1;if(1===arguments.length)for(;++f<b;)isNaN(d=+a[f])||
(h+=d);else for(;++f<b;)isNaN(d=+c.call(a,a[f],f))||(h+=d);return h};s.mean=function(a,c){var h=a.length,b,d=0,f=-1,e=0;if(1===arguments.length)for(;++f<h;)l(b=a[f])&&(d+=(b-d)/++e);else for(;++f<h;)l(b=c.call(a,a[f],f))&&(d+=(b-d)/++e);return e?d:void 0};s.quantile=function(a,c){var h=(a.length-1)*c+1,b=Math.floor(h),d=+a[b-1];return(h-=b)?d+h*(a[b]-d):d};s.median=function(a,c){1<arguments.length&&(a=a.map(c));a=a.filter(l);return a.length?s.quantile(a.sort(s.ascending),0.5):void 0};s.bisector=function(a){return{left:function(c,
h,b,d){3>arguments.length&&(b=0);4>arguments.length&&(d=c.length);for(;b<d;){var f=b+d>>>1;a.call(c,c[f],f)<h?b=f+1:d=f}return b},right:function(c,h,b,d){3>arguments.length&&(b=0);4>arguments.length&&(d=c.length);for(;b<d;){var f=b+d>>>1;h<a.call(c,c[f],f)?d=f:b=f+1}return b}}};var tf=s.bisector(function(a){return a});s.bisectLeft=tf.left;s.bisect=s.bisectRight=tf.right;s.shuffle=function(a){for(var c=a.length,h,b;c;)b=Math.random()*c--|0,h=a[c],a[c]=a[b],a[b]=h;return a};s.permute=function(a,c){for(var h=
c.length,b=Array(h);h--;)b[h]=a[c[h]];return b};s.pairs=function(a){for(var c=0,h=a.length-1,b=a[0],d=Array(0>h?0:h);c<h;)d[c]=[b,b=a[++c]];return d};s.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,c=s.min(arguments,r),h=Array(c);++a<c;)for(var b=-1,d,f=h[a]=Array(d);++b<d;)f[b]=arguments[b][a];return h};s.transpose=function(a){return s.zip.apply(s,a)};s.keys=function(a){var c=[],h;for(h in a)c.push(h);return c};s.values=function(a){var c=[],h;for(h in a)c.push(a[h]);return c};s.entries=
function(a){var c=[],h;for(h in a)c.push({key:h,value:a[h]});return c};s.merge=function(a){return Array.prototype.concat.apply([],a)};s.range=function(a,c,h){3>arguments.length&&(h=1,2>arguments.length&&(c=a,a=0));if(Infinity===(c-a)/h)throw Error("infinite range");var b=[],d;d=Math.abs(h);for(var f=1;d*f%1;)f*=10;d=f;var f=-1,e;a*=d;c*=d;h*=d;if(0>h)for(;(e=a+h*++f)>c;)b.push(e/d);else for(;(e=a+h*++f)<c;)b.push(e/d);return b};s.map=function(a){var c=new b;if(a instanceof b)a.forEach(function(a,
h){c.set(a,h)});else for(var h in a)c.set(h,a[h]);return c};n(b,{has:function(a){return Ka+a in this},get:function(a){return this[Ka+a]},set:function(a,c){return this[Ka+a]=c},remove:function(a){a=Ka+a;return a in this&&delete this[a]},keys:function(){var a=[];this.forEach(function(c){a.push(c)});return a},values:function(){var a=[];this.forEach(function(c,h){a.push(h)});return a},entries:function(){var a=[];this.forEach(function(c,h){a.push({key:c,value:h})});return a},forEach:function(a){for(var c in this)c.charCodeAt(0)===
uf&&a.call(this,c.substring(1),this[c])}});var Ka="\x00",uf=Ka.charCodeAt(0);s.nest=function(){function a(c,f,p){if(p>=d.length)return g?g.call(h,f):e?f.sort(e):f;for(var m=-1,q=f.length,v=d[p++],l,t,s=new b,x;++m<q;)(x=s.get(l=v(t=f[m])))?x.push(t):s.set(l,[t]);c?(t=c(),f=function(h,b){t.set(h,a(c,b,p))}):(t={},f=function(h,b){t[h]=a(c,b,p)});s.forEach(f);return t}function c(a,h){if(h>=d.length)return a;var b=[],e=f[h++];a.forEach(function(a,d){b.push({key:a,values:c(d,h)})});return e?b.sort(function(a,
c){return e(a.key,c.key)}):b}var h={},d=[],f=[],e,g;h.map=function(c,h){return a(h,c,0)};h.entries=function(h){return c(a(s.map,h,0),0)};h.key=function(a){d.push(a);return h};h.sortKeys=function(a){f[d.length-1]=a;return h};h.sortValues=function(a){e=a;return h};h.rollup=function(a){g=a;return h};return h};s.set=function(a){var c=new d;if(a)for(var h=0,b=a.length;h<b;++h)c.add(a[h]);return c};n(d,{has:function(a){return Ka+a in this},add:function(a){this[Ka+a]=!0;return a},remove:function(a){a=Ka+
a;return a in this&&delete this[a]},values:function(){var a=[];this.forEach(function(c){a.push(c)});return a},forEach:function(a){for(var c in this)c.charCodeAt(0)===uf&&a.call(this,c.substring(1))}});s.behavior={};s.rebind=function(a,c){for(var h=1,b=arguments.length,d;++h<b;)a[d=arguments[h]]=g(a,c,c[d]);return a};var zd="webkit ms moz Moz o O".split(" ");s.dispatch=function(){for(var a=new f,c=-1,h=arguments.length;++c<h;)a[arguments[c]]=q(a);return a};f.prototype.on=function(a,c){var h=a.indexOf("."),
b="";0<=h&&(b=a.substring(h+1),a=a.substring(0,h));if(a)return 2>arguments.length?this[a].on(b):this[a].on(b,c);if(2===arguments.length){if(null==c)for(a in this)if(this.hasOwnProperty(a))this[a].on(b,null);return this}};s.event=null;s.requote=function(a){return a.replace(mh,"\\$&")};var mh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nb={}.__proto__?function(a,c){a.__proto__=c}:function(a,c){for(var h in c)a[h]=c[h]},nc=function(a,c){return c.querySelector(a)},oc=function(a,c){return c.querySelectorAll(a)},
nh=Da[e(Da,"matchesSelector")],Ad=function(a,c){return nh.call(a,c)};"function"===typeof Sizzle&&(nc=function(a,c){return Sizzle(a,c)[0]||null},oc=function(a,c){return Sizzle.uniqueSort(Sizzle(a,c))},Ad=Sizzle.matchesSelector);s.selection=function(){return vf};var K=s.selection.prototype=[];K.select=function(a){var c=[],h,b,d,f;a=B(a);for(var e=-1,g=this.length;++e<g;){c.push(h=[]);h.parentNode=(d=this[e]).parentNode;for(var m=-1,q=d.length;++m<q;)(f=d[m])?(h.push(b=a.call(f,f.__data__,m,e)),b&&"__data__"in
f&&(b.__data__=f.__data__)):h.push(null)}return t(c)};K.selectAll=function(a){var c=[],h,b;a=z(a);for(var d=-1,f=this.length;++d<f;)for(var e=this[d],g=-1,m=e.length;++g<m;)if(b=e[g])c.push(h=Ca(a.call(b,b.__data__,g,d))),h.parentNode=b;return t(c)};var od={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};s.ns={prefix:od,qualify:function(a){var c=a.indexOf(":"),
h=a;0<=c&&(h=a.substring(0,c),a=a.substring(c+1));return od.hasOwnProperty(h)?{space:od[h],local:a}:a}};K.attr=function(a,c){if(2>arguments.length){if("string"===typeof a){var h=this.node();a=s.ns.qualify(a);return a.local?h.getAttributeNS(a.space,a.local):h.getAttribute(a)}for(c in a)this.each(N(c,a[c]));return this}return this.each(N(a,c))};K.classed=function(a,c){if(2>arguments.length){if("string"===typeof a){var h=this.node(),b=(a=a.trim().split(/^|\s+/g)).length,d=-1;if(c=h.classList)for(;++d<
b;){if(!c.contains(a[d]))return!1}else for(c=h.getAttribute("class");++d<b;)if(!Z(a[d]).test(c))return!1;return!0}for(c in a)this.each(F(c,a[c]));return this}return this.each(F(a,c))};K.style=function(a,c,h){var b=arguments.length;if(3>b){if("string"!==typeof a){2>b&&(c="");for(h in a)this.each(L(h,a[h],c));return this}if(2>b)return X.getComputedStyle(this.node(),null).getPropertyValue(a);h=""}return this.each(L(a,c,h))};K.property=function(a,c){if(2>arguments.length){if("string"===typeof a)return this.node()[a];
for(c in a)this.each(ta(c,a[c]));return this}return this.each(ta(a,c))};K.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var c=a.apply(this,arguments);this.textContent=null==c?"":c}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};K.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var c=a.apply(this,arguments);this.innerHTML=null==c?"":c}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=
a}):this.node().innerHTML};K.append=function(a){a=A(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};K.insert=function(a,c){a=A(a);c=B(c);return this.select(function(){return this.insertBefore(a.apply(this,arguments),c.apply(this,arguments))})};K.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};K.data=function(a,c){function h(a,h){var d,f=a.length,e=h.length,g=Math.min(f,e),p=Array(e),u=Array(e),w=Array(f),l,t;if(c){var g=
new b,J=new b,s=[],x;for(d=-1;++d<f;)x=c.call(l=a[d],l.__data__,d),g.has(x)?w[d]=l:g.set(x,l),s.push(x);for(d=-1;++d<e;)x=c.call(h,t=h[d],d),(l=g.get(x))?(p[d]=l,l.__data__=t):J.has(x)||(u[d]={__data__:t}),J.set(x,t),g.remove(x);for(d=-1;++d<f;)g.has(s[d])&&(w[d]=a[d])}else{for(d=-1;++d<g;)l=a[d],t=h[d],l?(l.__data__=t,p[d]=l):u[d]={__data__:t};for(;d<e;++d)u[d]={__data__:h[d]};for(;d<f;++d)w[d]=a[d]}u.update=p;u.parentNode=p.parentNode=w.parentNode=a.parentNode;m.push(u);q.push(p);v.push(w)}var d=
-1,f=this.length,e,g;if(!arguments.length){for(a=Array(f=(e=this[0]).length);++d<f;)if(g=e[d])a[d]=g.__data__;return a}var m=Bd([]),q=t([]),v=t([]);if("function"===typeof a)for(;++d<f;)h(e=this[d],a.call(e,e.parentNode.__data__,d));else for(;++d<f;)h(e=this[d],a);q.enter=function(){return m};q.exit=function(){return v};return q};K.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};K.filter=function(a){var c=[],h,b,d;"function"!==typeof a&&(a=H(a));for(var f=
0,e=this.length;f<e;f++){c.push(h=[]);h.parentNode=(b=this[f]).parentNode;for(var g=0,m=b.length;g<m;g++)(d=b[g])&&a.call(d,d.__data__,g)&&h.push(d)}return t(c)};K.order=function(){for(var a=-1,c=this.length;++a<c;)for(var h=this[a],b=h.length-1,d=h[b],f;0<=--b;)if(f=h[b])d&&d!==f.nextSibling&&d.parentNode.insertBefore(f,d),d=f;return this};K.sort=function(a){a=I.apply(this,arguments);for(var c=-1,h=this.length;++c<h;)this[c].sort(a);return this.order()};K.each=function(a){return V(this,function(c,
h,b){a.call(c,c.__data__,h,b)})};K.call=function(a){var c=Ca(arguments);a.apply(c[0]=this,c);return this};K.empty=function(){return!this.node()};K.node=function(){for(var a=0,c=this.length;a<c;a++)for(var h=this[a],b=0,d=h.length;b<d;b++){var f=h[b];if(f)return f}return null};K.size=function(){var a=0;this.each(function(){++a});return a};var ua=[];s.selection.enter=Bd;s.selection.enter.prototype=ua;ua.append=K.append;ua.empty=K.empty;ua.node=K.node;ua.call=K.call;ua.size=K.size;ua.select=function(a){for(var c=
[],h,b,d,f,e,g=-1,m=this.length;++g<m;){d=(f=this[g]).update;c.push(h=[]);h.parentNode=f.parentNode;for(var q=-1,v=f.length;++q<v;)(e=f[q])?(h.push(d[q]=b=a.call(f.parentNode,e.__data__,q,g)),b.__data__=e.__data__):h.push(null)}return t(c)};ua.insert=function(a,c){2>arguments.length&&(c=Rf(this));return K.insert.call(this,a,c)};K.transition=function(){for(var a=Ua||++wf,c=[],h,b,d=Zb||{time:Date.now(),ease:og,delay:0,duration:250},f=-1,e=this.length;++f<e;){c.push(h=[]);for(var g=this[f],m=-1,q=g.length;++m<
q;)(b=g[m])&&Rb(b,m,a,d),h.push(b)}return mb(c,a)};K.interrupt=function(){return this.each(ob)};s.select=function(a){a=["string"===typeof a?nc(a,ga):a];a.parentNode=Da;return t([a])};s.selectAll=function(a){a=Ca("string"===typeof a?oc(a,ga):a);a.parentNode=Da;return t([a])};var vf=s.select(Da);K.on=function(a,c,h){var b=arguments.length;if(3>b){if("string"!==typeof a){2>b&&(c=!1);for(h in a)this.each(Cd(h,a[h],c));return this}if(2>b)return(b=this.node()["__on"+a])&&b._;h=!1}return this.each(Cd(a,
c,h))};var pc=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});pc.forEach(function(a){"on"+a in ga&&pc.remove(a)});var qc=e(Da.style,"userSelect"),Uf=0;s.mouse=function(a){return Fd(a,x())};var rc=/WebKit/.test(X.navigator.userAgent)?-1:0;s.touches=function(a,c){2>arguments.length&&(c=x().touches);return c?Ca(c).map(function(c){var b=Fd(a,c);b.identifier=c.identifier;return b}):[]};s.behavior.drag=function(){function a(){this.on("mousedown.drag",d).on("touchstart.drag",f)}function c(a,c,d,f){return function(){function e(){x.on(d+
"."+q,null).on(f+"."+q,null);n(l&&s.event.target===m);p({type:"dragend"})}var g=this.parentNode,p=h.of(this,arguments),m=s.event.target,w=a(),q=null==w?"drag":"drag-"+w,v=c(g,w),l=0,t,x=s.select(X).on(d+"."+q,function(){if(!g)return e();var a=c(g,w),h=a[0]-v[0],b=a[1]-v[1];l=l|h|b;v=a;p({type:"drag",x:a[0]+t[0],y:a[1]+t[1],dx:h,dy:b})}).on(f+"."+q,e),n=pb();b?(t=b.apply(this,arguments),t=[t.x-v[0],t.y-v[1]]):t=[0,0];p({type:"dragstart"})}}var h=y(a,"drag","dragstart","dragend"),b=null,d=c(m,s.mouse,
"mousemove","mouseup"),f=c(function(){return s.event.changedTouches[0].identifier},function(a,c){return s.touches(a).filter(function(a){return a.identifier===c})[0]},"touchmove","touchend");a.origin=function(c){if(!arguments.length)return b;b=c;return a};return s.rebind(a,h,"on")};var C=Math.PI,G=1E-6,xf=G*G,E=C/180,O=180/C,$b=Math.SQRT2;s.interpolateZoom=function(a,c){function h(a){var c=a*x;if(s){a=qb(t);var h=f/(2*v),e;e=$b*c+t;e=sc(e)/qb(e);h*=a*e-sc(t);return[b+h*g,d+h*m,f*a/qb($b*c+t)]}return[b+
a*g,d+a*m,f*Math.exp($b*c)]}var b=a[0],d=a[1],f=a[2],e=c[2],g=c[0]-b,m=c[1]-d,q=g*g+m*m,v=Math.sqrt(q),l=(e*e-f*f+4*q)/(4*f*v),q=(e*e-f*f-4*q)/(4*e*v),t=Math.log(Math.sqrt(l*l+1)-l),s=Math.log(Math.sqrt(q*q+1)-q)-t,x=(s||Math.log(e/f))/$b;h.duration=1E3*x;return h};s.behavior.zoom=function(){function a(a){a.on(P,m).on(oh+".zoom",l).on(R,t).on("dblclick.zoom",x).on(Kc,q)}function c(a){return[(a[0]-n.x)/n.k,(a[1]-n.y)/n.k]}function h(a){n.k=Math.max(T[0],Math.min(T[1],a))}function b(a,c){c=[c[0]*n.k+
n.x,c[1]*n.k+n.y];n.x+=a[0]-c[0];n.y+=a[1]-c[1]}function d(){L&&L.domain(Nc.range().map(function(a){return(a-n.x)/n.k}).map(Nc.invert));F&&F.domain(D.range().map(function(a){return(a-n.y)/n.k}).map(D.invert))}function f(a){a({type:"zoomstart"})}function e(a){d();a({type:"zoom",scale:n.k,translate:[n.x,n.y]})}function g(a){a({type:"zoomend"})}function m(){var a=this,h=I.of(a,arguments),d=s.event.target,p=0,q=s.select(X).on(R,function(){p=1;b(s.mouse(a),v);e(h)}).on(z,function(){q.on(R,X===a?t:null).on(z,
null);l(p&&s.event.target===d);g(h)}),v=c(s.mouse(a)),l=pb();ob.call(a);f(h)}function q(){function a(){var h=s.touches(p);y=n.k;h.forEach(function(a){a.identifier in t&&(t[a.identifier]=c(a))});return h}function d(){for(var c=s.event.changedTouches,f=0,g=c.length;f<g;++f)t[c[f].identifier]=null;g=a();f=Date.now();1===g.length?(500>f-Lc&&(c=g[0],g=t[c.identifier],h(2*n.k),b(c,g),v(),e(l)),Lc=f):1<g.length&&(c=g[0],g=g[1],f=c[0]-g[0],c=c[1]-g[1],x=f*f+c*c)}var p=this,l=I.of(p,arguments),t={},x=0,y,
r=s.event.changedTouches[0].identifier,Dd="touchmove.zoom-"+r,A="touchend.zoom-"+r,B=s.select(X).on(Dd,function(){for(var a=s.touches(p),c,d,f,g,m=0,q=a.length;m<q;++m,g=null)if(f=a[m],g=t[f.identifier]){if(d)break;c=f;d=g}if(g){var w=(w=f[0]-c[0])*w+(w=f[1]-c[1])*w,a=x&&Math.sqrt(w/x);c=[(c[0]+f[0])/2,(c[1]+f[1])/2];d=[(d[0]+g[0])/2,(d[1]+g[1])/2];h(a*y)}Lc=null;b(c,d);e(l)}).on(A,function(){if(s.event.touches.length){for(var c=s.event.changedTouches,h=0,b=c.length;h<b;++h)delete t[c[h].identifier];
for(var d in t)return void a()}B.on(Dd,null).on(A,null);R.on(P,m).on(Kc,q);Sf();g(l)}),R=s.select(p).on(P,null).on(Kc,d),Sf=pb();ob.call(p);d();f(l)}function l(){var a=I.of(this,arguments);H?clearTimeout(H):(ob.call(this),f(a));H=setTimeout(function(){H=null;g(a)},50);v();var d=A||s.mouse(this);r||(r=c(d));h(Math.pow(2,0.002*ac())*n.k);b(d,r);e(a)}function t(){r=null}function x(){var a=I.of(this,arguments),d=s.mouse(this),p=c(d),m=Math.log(n.k)/Math.LN2;f(a);h(Math.pow(2,s.event.shiftKey?Math.ceil(m)-
1:Math.floor(m)+1));b(d,p);e(a);g(a)}var n={x:0,y:0,k:1},r,A,B=[960,500],T=yf,P="mousedown.zoom",R="mousemove.zoom",z="mouseup.zoom",H,Kc="touchstart.zoom",Lc,I=y(a,"zoomstart","zoom","zoomend"),Nc,L,D,F;a.event=function(a){a.each(function(){var a=I.of(this,arguments),c=n;Ua?s.select(this).transition().each("start.zoom",function(){n=this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var h=B[0],b=h/2,d=B[1]/2,f=s.interpolateZoom([(b-n.x)/n.k,(d-n.y)/n.k,h/n.k],[(b-c.x)/c.k,(d-c.y)/c.k,
h/c.k]);return function(c){c=f(c);var g=h/c[2];this.__chart__=n={x:b-c[0]*g,y:d-c[1]*g,k:g};e(a)}}).each("end.zoom",function(){g(a)}):(this.__chart__=n,f(a),e(a),g(a))})};a.translate=function(c){if(!arguments.length)return[n.x,n.y];n={x:+c[0],y:+c[1],k:n.k};d();return a};a.scale=function(c){if(!arguments.length)return n.k;n={x:n.x,y:n.y,k:+c};d();return a};a.scaleExtent=function(c){if(!arguments.length)return T;T=null==c?yf:[+c[0],+c[1]];return a};a.center=function(c){if(!arguments.length)return A;
A=c&&[+c[0],+c[1]];return a};a.size=function(c){if(!arguments.length)return B;B=c&&[+c[0],+c[1]];return a};a.x=function(c){if(!arguments.length)return L;L=c;Nc=c.copy();n={x:0,y:0,k:1};return a};a.y=function(c){if(!arguments.length)return F;F=c;D=c.copy();n={x:0,y:0,k:1};return a};return s.rebind(a,I,"on")};var yf=[0,Infinity],ac,oh="onwheel"in ga?(ac=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ga?(ac=function(){return s.event.wheelDelta},"mousewheel"):(ac=
function(){return-s.event.detail},"MozMousePixelScroll");Wa.prototype.toString=function(){return this.rgb()+""};s.hsl=function(a,c,h){return 1===arguments.length?a instanceof tc?Xa(a.h,a.s,a.l):Nd(""+a,Od,Xa):Xa(+a,+c,+h)};var pd=tc.prototype=new Wa;pd.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);return Xa(this.h,this.s,this.l/a)};pd.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return Xa(this.h,this.s,a*this.l)};pd.rgb=function(){return uc(this.h,this.s,this.l)};s.hcl=function(a,
c,h){return 1===arguments.length?a instanceof rb?Ya(a.h,a.c,a.l):a instanceof sb?Md(a.l,a.a,a.b):Md((a=Pd((a=s.rgb(a)).r,a.g,a.b)).l,a.a,a.b):Ya(+a,+c,+h)};var qd=rb.prototype=new Wa;qd.brighter=function(a){return Ya(this.h,this.c,Math.min(100,this.l+bc*(arguments.length?a:1)))};qd.darker=function(a){return Ya(this.h,this.c,Math.max(0,this.l-bc*(arguments.length?a:1)))};qd.rgb=function(){return vc(this.h,this.c,this.l).rgb()};s.lab=function(a,c,h){return 1===arguments.length?a instanceof sb?Za(a.l,
a.a,a.b):a instanceof rb?vc(a.l,a.c,a.h):Pd((a=s.rgb(a)).r,a.g,a.b):Za(+a,+c,+h)};var bc=18,Jd=0.95047,Kd=1,Ld=1.08883,rd=sb.prototype=new Wa;rd.brighter=function(a){return Za(Math.min(100,this.l+bc*(arguments.length?a:1)),this.a,this.b)};rd.darker=function(a){return Za(Math.max(0,this.l-bc*(arguments.length?a:1)),this.a,this.b)};rd.rgb=function(){return Id(this.l,this.a,this.b)};s.rgb=function(a,c,h){return 1===arguments.length?a instanceof zc?ma(a.r,a.g,a.b):Nd(""+a,ma,uc):ma(~~a,~~c,~~h)};var cc=
zc.prototype=new Wa;cc.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,h=this.g,b=this.b;if(!c&&!h&&!b)return ma(30,30,30);c&&30>c&&(c=30);h&&30>h&&(h=30);b&&30>b&&(b=30);return ma(Math.min(255,~~(c/a)),Math.min(255,~~(h/a)),Math.min(255,~~(b/a)))};cc.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return ma(~~(a*this.r),~~(a*this.g),~~(a*this.b))};cc.hsl=function(){return Od(this.r,this.g,this.b)};cc.toString=function(){return"#"+$a(this.r)+$a(this.g)+$a(this.b)};var ub=
s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,
violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ub.forEach(function(a,c){ub.set(a,ma(c>>16,c>>8&255,c&255))});s.functor=M;s.xhr=Cc(W);s.dsv=function(a,c){function h(a,h,d){3>arguments.length&&(d=h,h=null);var e=s.xhr(a,c,d);e.row=function(a){return arguments.length?e.response(null==(h=a)?b:f(a)):h};return e.row(h)}function b(a){return h.parse(a.responseText)}function f(a){return function(c){return h.parse(c.responseText,a)}}function e(c){return c.map(g).join(a)}
function g(a){return m.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var m=new RegExp('["'+a+"\n]"),q=a.charCodeAt(0);h.parse=function(a,c){var b;return h.parseRows(a,function(a,h){if(b)return b(a,h-1);var d=new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}");b=c?function(a,h){return c(d(a),h)}:d})};h.parseRows=function(a,c){function h(){if(g>=e)return d;if(u)return u=!1,b;var c=g;if(34===a.charCodeAt(c)){for(var f=c;f++<e;)if(34===a.charCodeAt(f)){if(34!==
a.charCodeAt(f+1))break;++f}g=f+2;var p=a.charCodeAt(f+1);13===p?(u=!0,10===a.charCodeAt(f+2)&&++g):10===p&&(u=!0);return a.substring(c+1,f).replace(/""/g,'"')}for(;g<e;){p=a.charCodeAt(g++);f=1;if(10===p)u=!0;else if(13===p)u=!0,10===a.charCodeAt(g)&&(++g,++f);else if(p!==q)continue;return a.substring(c,g-f)}return a.substring(c)}for(var b={},d={},f=[],e=a.length,g=0,p=0,m,u;(m=h())!==d;){for(var w=[];m!==b&&m!==d;)w.push(m),m=h();c&&!(w=c(w,p++))||f.push(w)}return f};h.format=function(c){if(Array.isArray(c[0]))return h.formatRows(c);
var b=new d,f=[];c.forEach(function(a){for(var c in a)b.has(c)||f.push(b.add(c))});return[f.map(g).join(a)].concat(c.map(function(c){return f.map(function(a){return g(c[a])}).join(a)})).join("\n")};h.formatRows=function(a){return a.map(e).join("\n")};return h};s.csv=s.dsv(",","text/csv");s.tsv=s.dsv("\t","text/tab-separated-values");var xb,yb,wb,vb,na,Sd=X[e(X,"requestAnimationFrame")]||function(a){setTimeout(a,17)};s.timer=function(a,c,h){var b=arguments.length;2>b&&(c=0);3>b&&(h=Date.now());b={callback:a,
time:h+c,next:null};yb?yb.next=b:xb=b;yb=b;wb||(vb=clearTimeout(vb),wb=1,Sd(Ec))};s.timer.flush=function(){Qd();Rd()};var dc=[3,3],ph="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,c){var h=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/h}:function(a){return a*h},symbol:a}});s.formatPrefix=function(a,c){var h=0;a&&(0>a&&(a*=-1),c&&(a=s.round(a,Fc(a,c))),h=1+Math.floor(1E-12+Math.log(a)/Math.LN10),h=Math.max(-24,Math.min(24,3*Math.floor((0>=h?h+1:h-1)/3))));return ph[8+
h/3]};s.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};s.format=function(a){a=Xe.exec(a);var c=a[1]||" ",h=a[2]||">",b=a[3]||"",d=a[4]||"",f=a[5],e=+a[6],g=a[7],m=a[8],q=a[9],v=1,l="",t=!1;m&&(m=+m.substring(1));if(f||"0"===c&&"="===h)f=c="0",h="=",g&&(e-=Math.floor((e-1)/4));switch(q){case "n":g=!0;q="g";break;case "%":v=100;l="%";q="f";break;case "p":v=100;l="%";q="r";break;case "b":case "o":case "x":case "X":"#"===d&&(d="0"+q.toLowerCase());case "c":case "d":t=!0;
m=0;break;case "s":v=-1,q="r"}"#"===d?d="":"$"===d&&(d="$");"r"!=q||m||(q="g");if(null!=m)if("g"==q)m=Math.max(1,Math.min(21,m));else if("e"==q||"f"==q)m=Math.max(0,Math.min(20,m));var q=qh.get(q)||Wf,x=f&&g;return function(a){if(t&&a%1)return"";var n=0>a||0===a&&0>1/a?(a=-a,"-"):b;if(0>v){var y=s.formatPrefix(a,m);a=y.scale(a);l=y.symbol}else a*=v;a=q(a,m);var r=a.lastIndexOf("."),y=0>r?a:a.substring(0,r);a=0>r?"":"."+a.substring(r+1);!f&&g&&(y=sd(y));var r=d.length+y.length+a.length+(x?0:n.length),
A=r<e?Array(r=e-r+1).join(c):"";x&&(y=sd(A+y));n+=d;a=y+a;return("<"===h?n+a+A:">"===h?A+n+a:"^"===h?A.substring(0,r>>=1)+n+a+A.substring(r):n+(x?a:A+a))+l}};var Xe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,qh=s.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,c){return a.toPrecision(c)},e:function(a,
c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=s.round(a,Fc(a,c))).toFixed(Math.max(0,Math.min(20,Fc(a*(1+1E-15),c))))}}),sd=W;if(dc)var rh=dc.length,sd=function(a){for(var c=a.length,h=[],b=0,d=dc[0];0<c&&0<d;)h.push(a.substring(c-=d,c+d)),d=dc[b=(b+1)%rh];return h.reverse().join(",")};s.geo={};Gc.prototype={s:0,t:0,add:function(a){Ud(a,this.t,ec);Ud(ec.s,this.s,this);this.s?this.t+=ec.t:this.s=ec.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};
var ec=new Gc;s.geo.stream=function(a,c){if(a&&zf.hasOwnProperty(a.type))zf[a.type](a,c);else zb(a,c)};var zf={Feature:function(a,c){zb(a.geometry,c)},FeatureCollection:function(a,c){for(var h=a.features,b=-1,d=h.length;++b<d;)zb(h[b].geometry,c)}},Vd={Sphere:function(a,c){c.sphere()},Point:function(a,c){a=a.coordinates;c.point(a[0],a[1],a[2])},MultiPoint:function(a,c){for(var h=a.coordinates,b=-1,d=h.length;++b<d;)a=h[b],c.point(a[0],a[1],a[2])},LineString:function(a,c){Hc(a.coordinates,c,0)},MultiLineString:function(a,
c){for(var h=a.coordinates,b=-1,d=h.length;++b<d;)Hc(h[b],c,0)},Polygon:function(a,c){Wd(a.coordinates,c)},MultiPolygon:function(a,c){for(var h=a.coordinates,b=-1,d=h.length;++b<d;)Wd(h[b],c)},GeometryCollection:function(a,c){for(var h=a.geometries,b=-1,d=h.length;++b<d;)zb(h[b],c)}};s.geo.area=function(a){db=0;s.geo.stream(a,ea);return db};var db,Ma=new Gc,ea={sphere:function(){db+=4*C},point:m,lineStart:m,lineEnd:m,polygonStart:function(){Ma.reset();ea.lineStart=Xf},polygonEnd:function(){var a=
2*Ma;db+=0>a?4*C+a:a;ea.lineStart=ea.lineEnd=ea.point=m}};s.geo.bounds=function(){function a(a,c){R.push(z=[v=a,t=a]);c<l&&(l=c);c>x&&(x=c)}function c(c,h){var b=Na([c*E,h*E]);if(A){var d=ab(A,b),d=ab([d[1],-d[0],0],d);Cb(d);var d=Db(d),f=c-n,e=0<f?1:-1,m=d[0]*O*e,f=180<Math.abs(f);f^(e*n<m&&m<e*c)?(d=d[1]*O,d>x&&(x=d)):(m=(m+360)%360-180,f^(e*n<m&&m<e*c))?(d=-d[1]*O,d<l&&(l=d)):(h<l&&(l=h),h>x&&(x=h));f?c<n?g(v,c)>g(v,t)&&(t=c):g(c,t)>g(v,t)&&(v=c):t>=v?(c<v&&(v=c),c>t&&(t=c)):c>n?g(v,c)>g(v,t)&&
(t=c):g(c,t)>g(v,t)&&(v=c)}else a(c,h);A=b;n=c}function h(){H.point=c}function b(){z[0]=v;z[1]=t;H.point=a;A=null}function d(a,h){if(A){var b=a-n;B+=180<Math.abs(b)?b+(0<b?360:-360):b}else y=a,r=h;ea.point(a,h);c(a,h)}function f(){ea.lineStart()}function e(){d(y,r);ea.lineEnd();Math.abs(B)>G&&(v=-(t=180));z[0]=v;z[1]=t;A=null}function g(a,c){return 0>(c-=a)?c+360:c}function m(a,c){return a[0]-c[0]}function q(a,c){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}var v,l,t,x,n,y,r,A,B,R,z,H={point:a,
lineStart:h,lineEnd:b,polygonStart:function(){H.point=d;H.lineStart=f;H.lineEnd=e;B=0;ea.polygonStart()},polygonEnd:function(){ea.polygonEnd();H.point=a;H.lineStart=h;H.lineEnd=b;0>Ma?(v=-(t=180),l=-(x=90)):B>G?x=90:B<-G&&(l=-90);z[0]=v;z[1]=t}};return function(a){x=t=-(v=l=Infinity);R=[];s.geo.stream(a,H);if(a=R.length){R.sort(m);for(var c=1,h=R[0],b,d=[h];c<a;++c)b=R[c],q(b[0],h)||q(b[1],h)?(g(h[0],b[1])>g(h[0],h[1])&&(h[1]=b[1]),g(b[0],h[1])>g(h[0],h[1])&&(h[0]=b[0])):d.push(h=b);var f=-Infinity,
e;a=d.length-1;c=0;for(h=d[a];c<=a;h=b,++c)b=d[c],(e=g(h[1],b[0]))>f&&(f=e,v=b[0],t=h[1])}R=z=null;return Infinity===v||Infinity===l?[[NaN,NaN],[NaN,NaN]]:[[v,l],[t,x]]}}();s.geo.centroid=function(a){gb=bb=va=wa=oa=ha=ia=da=Ea=Fa=pa=0;s.geo.stream(a,ka);a=Ea;var c=Fa,h=pa,b=a*a+c*c+h*h;return b<xf&&(a=ha,c=ia,h=da,bb<G&&(a=va,c=wa,h=oa),b=a*a+c*c+h*h,b<xf)?[NaN,NaN]:[Math.atan2(c,a)*O,La(h/Math.sqrt(b))*O]};var gb,bb,va,wa,oa,ha,ia,da,Ea,Fa,pa,ka={sphere:m,point:Jc,lineStart:Xd,lineEnd:Yd,polygonStart:function(){ka.lineStart=
Yf},polygonEnd:function(){ka.lineStart=Xd}},ke=ae(hb,function(a){var c=NaN,h=NaN,b=NaN,d;return{lineStart:function(){a.lineStart();d=1},point:function(f,e){var g=0<f?C:-C,m=Math.abs(f-c);if(Math.abs(m-C)<G)a.point(c,h=0<(h+e)/2?C/2:-C/2),a.point(b,h),a.lineEnd(),a.lineStart(),a.point(g,h),a.point(f,h),d=0;else if(b!==g&&m>=C){Math.abs(c-b)<G&&(c-=b*G);Math.abs(f-g)<G&&(f-=g*G);var m=c,q=h,v=f,l,t,s=Math.sin(m-v);h=Math.abs(s)>G?Math.atan((Math.sin(q)*(t=Math.cos(e))*Math.sin(v)-Math.sin(e)*(l=Math.cos(q))*
Math.sin(m))/(l*t*s)):(q+e)/2;a.point(b,h);a.lineEnd();a.lineStart();a.point(g,h);d=0}a.point(c=f,h=e);b=g},lineEnd:function(){a.lineEnd();c=h=NaN},clean:function(){return 2-d}}},function(a,c,h,b){null==a?(h=h*C/2,b.point(-C,h),b.point(0,h),b.point(C,h),b.point(C,0),b.point(C,-h),b.point(0,-h),b.point(-C,-h),b.point(-C,0),b.point(-C,h)):Math.abs(a[0]-c[0])>G?(a=(a[0]<c[0]?1:-1)*C,h=h*a/2,b.point(-a,h),b.point(0,h),b.point(a,h)):b.point(c[0],c[1])},function(a){return ce(sh,a)}),sh=[-C,0],Fb=1E9;s.geo.clipExtent=
function(){var a,c,h,b,d,f,e={stream:function(a){d&&(d.valid=!1);d=f(a);d.valid=!0;return d},extent:function(g){if(!arguments.length)return[[a,c],[h,b]];f=de(a=+g[0][0],c=+g[0][1],h=+g[1][0],b=+g[1][1]);d&&(d.valid=!1,d=null);return e}};return e.extent([[0,0],[960,500]])};(s.geo.conicEqualArea=function(){return Oc(fe)}).raw=fe;s.geo.albers=function(){return s.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};s.geo.albersUsa=function(){function a(a){var c=
a[0];a=a[1];d=null;(e(c,a),d)||(g(c,a),d)||m(c,a);return d}var c=s.geo.albers(),h=s.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),b=s.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,f={point:function(a,c){d=[a,c]}},e,g,m;a.invert=function(a){var d=c.scale(),f=c.translate(),e=(a[0]-f[0])/d,d=(a[1]-f[1])/d;return(0.12<=d&&0.234>d&&-0.425<=e&&-0.214>e?h:0.166<=d&&0.234>d&&-0.214<=e&&-0.115>e?b:c).invert(a)};a.stream=function(a){var d=c.stream(a),
f=h.stream(a),e=b.stream(a);return{point:function(a,c){d.point(a,c);f.point(a,c);e.point(a,c)},sphere:function(){d.sphere();f.sphere();e.sphere()},lineStart:function(){d.lineStart();f.lineStart();e.lineStart()},lineEnd:function(){d.lineEnd();f.lineEnd();e.lineEnd()},polygonStart:function(){d.polygonStart();f.polygonStart();e.polygonStart()},polygonEnd:function(){d.polygonEnd();f.polygonEnd();e.polygonEnd()}}};a.precision=function(d){if(!arguments.length)return c.precision();c.precision(d);h.precision(d);
b.precision(d);return a};a.scale=function(d){if(!arguments.length)return c.scale();c.scale(d);h.scale(0.35*d);b.scale(d);return a.translate(c.translate())};a.translate=function(d){if(!arguments.length)return c.translate();var p=c.scale(),q=+d[0],v=+d[1];e=c.translate(d).clipExtent([[q-0.455*p,v-0.238*p],[q+0.455*p,v+0.238*p]]).stream(f).point;g=h.translate([q-0.307*p,v+0.201*p]).clipExtent([[q-0.425*p+G,v+0.12*p+G],[q-0.214*p-G,v+0.234*p-G]]).stream(f).point;m=b.translate([q-0.205*p,v+0.212*p]).clipExtent([[q-
0.214*p+G,v+0.166*p+G],[q-0.115*p-G,v+0.234*p-G]]).stream(f).point;return a};return a.scale(1070)};var fc,Hb,Ga={point:m,lineStart:m,lineEnd:m,polygonStart:function(){Hb=0;Ga.lineStart=bg},polygonEnd:function(){Ga.lineStart=Ga.lineEnd=Ga.point=m;fc+=Math.abs(Hb/2)}},gc,hc,ic,jc,th={point:function(a,c){a<gc&&(gc=a);a>ic&&(ic=a);c<hc&&(hc=c);c>jc&&(jc=c)},lineStart:m,lineEnd:m,polygonStart:m,polygonEnd:m},la={point:Pa,lineStart:he,lineEnd:ie,polygonStart:function(){la.lineStart=dg},polygonEnd:function(){la.point=
Pa;la.lineStart=he;la.lineEnd=ie}};s.geo.transform=function(a){return{stream:function(c){c=new Ib(c);for(var h in a)c[h]=a[h];return c}}};Ib.prototype={point:function(a,c){this.stream.point(a,c)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};s.geo.path=function(){function a(a){a&&("function"===typeof h&&e.pointRadius(+h.apply(this,
arguments)),g&&g.valid||(g=f(e)),s.geo.stream(a,g));return e.result()}function c(){g=null;return a}var h=4.5,b,d,f,e,g;a.area=function(a){fc=0;s.geo.stream(a,f(Ga));return fc};a.centroid=function(a){va=wa=oa=ha=ia=da=Ea=Fa=pa=0;s.geo.stream(a,f(la));return pa?[Ea/pa,Fa/pa]:da?[ha/da,ia/da]:oa?[va/oa,wa/oa]:[NaN,NaN]};a.bounds=function(a){ic=jc=-(gc=hc=Infinity);s.geo.stream(a,f(th));return[[gc,hc],[ic,jc]]};a.projection=function(a){if(!arguments.length)return b;f=(b=a)?a.stream||fg(a):W;return c()};
a.context=function(a){if(!arguments.length)return d;e=null==(d=a)?new cg:new eg(a);"function"!==typeof h&&e.pointRadius(h);return c()};a.pointRadius=function(c){if(!arguments.length)return h;h="function"===typeof c?c:(e.pointRadius(+c),+c);return a};return a.projection(s.geo.albersUsa()).context(null)};s.geo.projection=Ha;s.geo.projectionMutator=Pc;(s.geo.equirectangular=function(){return Ha(ib)}).raw=ib.invert=ib;s.geo.rotation=function(a){function c(c){c=a(c[0]*E,c[1]*E);return c[0]*=O,c[1]*=O,
c}a=Qc(a[0]%360*E,a[1]*E,2<a.length?a[2]*E:0);c.invert=function(c){c=a.invert(c[0]*E,c[1]*E);return c[0]*=O,c[1]*=O,c};return c};s.geo.circle=function(){function a(){var a="function"===typeof c?c.apply(this,arguments):c,h=Qc(-a[0]*E,-a[1]*E,0).invert,b=[];d(null,null,1,{point:function(a,c){b.push(a=h(a,c));a[0]*=O;a[1]*=O}});return{type:"Polygon",coordinates:[b]}}var c=[0,0],h,b=6,d;a.origin=function(h){if(!arguments.length)return c;c=h;return a};a.angle=function(c){if(!arguments.length)return h;
d=Mc((h=+c)*E,b*E);return a};a.precision=function(c){if(!arguments.length)return b;d=Mc(h*E,(b=+c)*E);return a};return a.angle(90)};s.geo.distance=function(a,c){var h=(c[0]-a[0])*E,b=a[1]*E,d=c[1]*E,f=Math.sin(h),h=Math.cos(h),e=Math.sin(b),b=Math.cos(b),g=Math.sin(d),d=Math.cos(d),m;return Math.atan2(Math.sqrt((m=d*f)*m+(m=b*g-e*d*h)*m),e*g+b*d*h)};s.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return s.range(Math.ceil(f/t)*t,d,t).map(r).concat(s.range(Math.ceil(q/
x)*x,m,x).map(A)).concat(s.range(Math.ceil(b/v)*v,h,v).filter(function(a){return Math.abs(a%t)>G}).map(n)).concat(s.range(Math.ceil(g/l)*l,e,l).filter(function(a){return Math.abs(a%x)>G}).map(y))}var h,b,d,f,e,g,m,q,v=10,l=v,t=90,x=360,n,y,r,A,B=2.5;a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[r(f).concat(A(m).slice(1),r(d).reverse().slice(1),A(q).reverse().slice(1))]}};a.extent=function(c){return arguments.length?
a.majorExtent(c).minorExtent(c):a.minorExtent()};a.majorExtent=function(c){if(!arguments.length)return[[f,q],[d,m]];f=+c[0][0];d=+c[1][0];q=+c[0][1];m=+c[1][1];f>d&&(c=f,f=d,d=c);q>m&&(c=q,q=m,m=c);return a.precision(B)};a.minorExtent=function(c){if(!arguments.length)return[[b,g],[h,e]];b=+c[0][0];h=+c[1][0];g=+c[0][1];e=+c[1][1];b>h&&(c=b,b=h,h=c);g>e&&(c=g,g=e,e=c);return a.precision(B)};a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()};a.majorStep=function(c){if(!arguments.length)return[t,
x];t=+c[0];x=+c[1];return a};a.minorStep=function(c){if(!arguments.length)return[v,l];v=+c[0];l=+c[1];return a};a.precision=function(c){if(!arguments.length)return B;B=+c;n=pe(g,e,90);y=qe(b,h,B);r=pe(q,m,90);A=qe(f,d,B);return a};return a.majorExtent([[-180,-90+G],[180,90-G]]).minorExtent([[-180,-80-G],[180,80+G]])};s.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[h||c.apply(this,arguments),d||b.apply(this,arguments)]}}var c=Rc,h,b=Sc,d;a.distance=function(){return s.geo.distance(h||
c.apply(this,arguments),d||b.apply(this,arguments))};a.source=function(b){if(!arguments.length)return c;c=b;h="function"===typeof b?null:b;return a};a.target=function(c){if(!arguments.length)return b;b=c;d="function"===typeof c?null:c;return a};a.precision=function(){return arguments.length?a:0};return a};s.geo.interpolate=function(a,c){return hg(a[0]*E,a[1]*E,c[0]*E,c[1]*E)};s.geo.length=function(a){kc=0;s.geo.stream(a,eb);return kc};var kc,eb={sphere:m,point:m,lineStart:function(){function a(a,
d){var f=Math.sin(d*=E),e=Math.cos(d),g=Math.abs((a*=E)-c),m=Math.cos(g);kc+=Math.atan2(Math.sqrt((g=e*Math.sin(g))*g+(g=b*f-h*e*m)*g),h*f+b*e*m);c=a;h=f;b=e}var c,h,b;eb.point=function(d,f){c=d*E;h=Math.sin(f*=E);b=Math.cos(f);eb.point=a};eb.lineEnd=function(){eb.point=eb.lineEnd=m}},lineEnd:m,polygonStart:m,polygonEnd:m},Af=jb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(s.geo.azimuthalEqualArea=function(){return Ha(Af)}).raw=Af;var Bf=jb(function(a){return(a=Math.acos(a))&&
a/Math.sin(a)},W);(s.geo.azimuthalEquidistant=function(){return Ha(Bf)}).raw=Bf;(s.geo.conicConformal=function(){return Oc(re)}).raw=re;(s.geo.conicEquidistant=function(){return Oc(se)}).raw=se;var Cf=jb(function(a){return 1/a},Math.atan);(s.geo.gnomonic=function(){return Ha(Cf)}).raw=Cf;Jb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-C/2]};(s.geo.mercator=function(){return te(Jb)}).raw=Jb;var Df=jb(function(){return 1},Math.asin);(s.geo.orthographic=function(){return Ha(Df)}).raw=Df;var Ef=
jb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(s.geo.stereographic=function(){return Ha(Ef)}).raw=Ef;Tc.invert=function(a,c){return[Math.atan2(sc(a),Math.cos(c)),La(Math.sin(c)/qb(a))]};(s.geo.transverseMercator=function(){return te(Tc)}).raw=Tc;s.geom={};s.svg={};s.svg.line=function(){return ue(W)};var Uc=s.map({linear:fa,"linear-closed":function(a){return fa(a)+"Z"},step:function(a){for(var c=0,h=a.length,b=a[0],d=[b[0],",",b[1]];++c<h;)d.push("H",(b[0]+(b=a[c])[0])/2,"V",b[1]);
1<h&&d.push("H",b[0]);return d.join("")},"step-before":Vc,"step-after":Wc,basis:ve,"basis-open":function(a){if(4>a.length)return fa(a);for(var c=[],h=-1,b=a.length,d,f=[0],e=[0];3>++h;)d=a[h],f.push(d[0]),e.push(d[1]);c.push(ja(Ia,f)+","+ja(Ia,e));for(--h;++h<b;)d=a[h],f.shift(),f.push(d[0]),e.shift(),e.push(d[1]),Yc(c,f,e);return c.join("")},"basis-closed":function(a){for(var c,h=-1,b=a.length,d=b+4,f,e=[],g=[];4>++h;)f=a[h%b],e.push(f[0]),g.push(f[1]);c=[ja(Ia,e),",",ja(Ia,g)];for(--h;++h<d;)f=
a[h%b],e.shift(),e.push(f[0]),g.shift(),g.push(f[1]),Yc(c,e,g);return c.join("")},bundle:function(a,c){var h=a.length-1;if(h)for(var b=a[0][0],d=a[0][1],f=a[h][0]-b,e=a[h][1]-d,g=-1,m,q;++g<=h;)m=a[g],q=g/h,m[0]=c*m[0]+(1-c)*(b+q*f),m[1]=c*m[1]+(1-c)*(d+q*e);return ve(a)},cardinal:function(a,c){return 3>a.length?fa(a):a[0]+Kb(a,Xc(a,c))},"cardinal-open":function(a,c){return 4>a.length?fa(a):a[1]+Kb(a.slice(1,a.length-1),Xc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?fa(a):a[0]+Kb((a.push(a[0]),
a),Xc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>a.length)a=fa(a);else{var c=a[0],h=[],b,d,f,e;b=0;d=a.length-1;var g=[];f=a[1];for(e=g[0]=Zc(a[0],f);++b<d;)g[b]=(e+(e=Zc(f,f=a[b+1])))/2;g[b]=e;for(var m=-1,q=a.length-1;++m<q;)b=Zc(a[m],a[m+1]),1E-6>Math.abs(b)?g[m]=g[m+1]=0:(d=g[m]/b,f=g[m+1]/b,e=d*d+f*f,9<e&&(e=3*b/Math.sqrt(e),g[m]=e*d,g[m+1]=e*f));for(m=-1;++m<=q;)e=(a[Math.min(q,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+g[m]*g[m])),h.push([e||0,g[m]*e||0]);a=c+Kb(a,h)}return a}});
Uc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});var we=[0,2/3,1/3,0],xe=[0,1/3,2/3,0],Ia=[0,1/6,2/3,1/6];s.geom.hull=function(a){function c(a){if(3>a.length)return[];var c=M(b),f=M(d),e=a.length,g,m=e-1,q=[],v=[],l,t,s=0,x,n,y,r;if(c===qa&&d===xa)g=a;else for(t=0,g=[];t<e;++t)g.push([+c.call(this,l=a[t],t),+f.call(this,l,t)]);for(t=1;t<e;++t)if(g[t][1]<g[s][1]||g[t][1]==g[s][1]&&g[t][0]<g[s][0])s=t;for(t=0;t<e;++t)t!==s&&(f=g[t][1]-g[s][1],c=g[t][0]-g[s][0],q.push({angle:Math.atan2(f,
c),index:t}));q.sort(function(a,c){return a.angle-c.angle});r=q[0].angle;y=q[0].index;n=0;for(t=1;t<m;++t){e=q[t].index;if(r==q[t].angle)if(c=g[y][0]-g[s][0],f=g[y][1]-g[s][1],l=g[e][0]-g[s][0],x=g[e][1]-g[s][1],c*c+f*f>=l*l+x*x){q[t].index=-1;continue}else q[n].index=-1;r=q[t].angle;n=t;y=e}v.push(s);for(e=t=0;2>t;++e)-1<q[e].index&&(v.push(q[e].index),t++);for(t=v.length;e<m;++e)if(!(0>q[e].index)){for(;!ig(v[t-2],v[t-1],q[e].index,g);)--t;v[t++]=q[e].index}g=[];for(t-=1;0<=t;--t)g.push(a[v[t]]);
return g}var b=qa,d=xa;if(arguments.length)return c(a);c.x=function(a){return arguments.length?(b=a,c):b};c.y=function(a){return arguments.length?(d=a,c):d};return c};s.geom.polygon=function(a){nb(a,lc);return a};var lc=s.geom.polygon.prototype=[];lc.area=function(){for(var a=-1,c=this.length,b,d=this[c-1],f=0;++a<c;)b=d,d=this[a],f+=b[1]*d[0]-b[0]*d[1];return 0.5*f};lc.centroid=function(a){var c=-1,b=this.length,d=0,f=0,e,g=this[b-1],m;for(arguments.length||(a=-1/(6*this.area()));++c<b;)e=g,g=this[c],
m=e[0]*g[1]-g[0]*e[1],d+=(e[0]+g[0])*m,f+=(e[1]+g[1])*m;return[d*a,f*a]};lc.clip=function(a){for(var c,b=ze(a),d=-1,f=this.length-ze(this),e,g,m=this[f-1],q,v,l;++d<f;){c=a.slice();a.length=0;q=this[d];v=c[(g=c.length-b)-1];for(e=-1;++e<g;)l=c[e],$c(l,m,q)?($c(v,m,q)||a.push(ye(v,l,m,q)),a.push(l)):$c(v,m,q)&&a.push(ye(v,l,m,q)),v=l;b&&a.push(a[0]);m=q}return a};s.geom.delaunay=function(a){var c=a.map(function(){return[]}),b=[];ad(a,function(b){c[b.region.l.index].push(a[b.region.r.index])});c.forEach(function(c,
d){var f=a[d],e=f[0],g=f[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-e,a[1]-g)});c.sort(function(a,c){return a.angle-c.angle});for(var m=0,q=c.length-1;m<q;m++)b.push([f,c[m],c[m+1]])});return b};s.geom.voronoi=function(a){function c(a){var c,e=a.map(function(){return[]}),g=M(b),m=M(d),q,v,l=a.length;if(g===qa&&m===xa)c=a;else for(c=Array(l),v=0;v<l;++v)c[v]=[+g.call(this,q=a[v],v),+m.call(this,q,v)];ad(c,function(a){var c,b,h,d;1===a.a&&0<=a.b?(c=a.ep.r,b=a.ep.l):(c=a.ep.l,b=a.ep.r);1===a.a?
(h=c?c.y:-1E6,c=a.c-a.b*h,d=b?b.y:1E6,b=a.c-a.b*d):(c=c?c.x:-1E6,h=a.c-a.a*c,b=b?b.x:1E6,d=a.c-a.a*b);c=[c,h];b=[b,d];e[a.region.l.index].push(c,b);e[a.region.r.index].push(c,b)});e=e.map(function(a,b){var h=c[b][0],d=c[b][1],f=a.map(function(a){return Math.atan2(a[0]-h,a[1]-d)}),e=s.range(a.length).sort(function(a,c){return f[a]-f[c]});return e.filter(function(a,c){return!c||f[a]-f[e[c-1]]>G}).map(function(c){return a[c]})});e.forEach(function(a,b){var h=a.length;if(!h)return a.push([-1E6,-1E6],
[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<h)){var d=c[b],f=a[0],e=a[1],h=d[0],d=d[1],g=f[0],f=f[1],m=e[0],q=e[1],p=Math.abs(m-g),e=q-f;Math.abs(e)<G?(h=d<f?-1E6:1E6,a.push([-1E6,h],[1E6,h])):p<G?(h=h<g?-1E6:1E6,a.push([h,-1E6],[h,1E6])):(h=(m-g)*(f-d)<(g-h)*(q-f)?1E6:-1E6,d=Math.abs(e)-p,Math.abs(d)<G?a.push([0>e?h:-h,h]):(0<d&&(h*=-1),a.push([-1E6,h],[1E6,h])))}});if(f)for(v=0;v<l;++v)f.clip(e[v]);for(v=0;v<l;++v)e[v].point=a[v];return e}var b=qa,d=xa,f=null;if(arguments.length)return c(a);c.x=function(a){return arguments.length?
(b=a,c):b};c.y=function(a){return arguments.length?(d=a,c):d};c.clipExtent=function(a){if(!arguments.length)return f&&[f[0],f[2]];if(null==a)f=null;else{var b=+a[0][0],h=+a[0][1],d=+a[1][0],e=+a[1][1];f=s.geom.polygon([[b,h],[b,e],[d,e],[d,h]])}return c};c.size=function(a){return arguments.length?c.clipExtent(a&&[[0,0],a]):f&&f[2]};c.links=function(a){var c,f=a.map(function(){return[]}),e=[],g=M(b),m=M(d),q,p,v=a.length;if(g===qa&&m===xa)c=a;else for(c=Array(v),p=0;p<v;++p)c[p]=[+g.call(this,q=a[p],
p),+m.call(this,q,p)];ad(c,function(c){var b=c.region.l.index;c=c.region.r.index;f[b][c]||(f[b][c]=f[c][b]=!0,e.push({source:a[b],target:a[c]}))});return e};c.triangles=function(a){if(b===qa&&d===xa)return s.geom.delaunay(a);for(var c=Array(q),f=M(b),e=M(d),g,m=-1,q=a.length;++m<q;)(c[m]=[+f.call(this,g=a[m],m),+e.call(this,g,m)]).data=g;return s.geom.delaunay(c).map(function(a){return a.map(function(a){return a.data})})};return c};var bd={l:"r",r:"l"};s.geom.quadtree=function(a,c,b,d,f){function e(a){function v(a,
c,b,h,d,f,e,g){if(!isNaN(b)&&!isNaN(h))if(a.leaf){var m=a.x,q=a.y;if(null!=m){if(!(0.01>Math.abs(m-b)+Math.abs(q-h))){var p=a.point;a.x=a.y=a.point=null;l(a,p,m,q,d,f,e,g)}l(a,c,b,h,d,f,e,g)}else a.x=b,a.y=h,a.point=c}else l(a,c,b,h,d,f,e,g)}function l(a,c,b,h,d,f,e,g){var m=0.5*(d+e),q=0.5*(f+g),p=b>=m,w=h>=q,u=(w<<1)+p;a.leaf=!1;a=a.nodes[u]||(a.nodes[u]=Ae());p?d=m:e=m;w?f=q:g=q;v(a,c,b,h,d,f,e,g)}var w,t=M(g),s=M(m),x,n,y,r,A,B,z,H;if(null!=c)A=c,B=b,z=d,H=f;else if(z=H=-(A=B=Infinity),x=[],n=
[],r=a.length,q)for(y=0;y<r;++y)w=a[y],w.x<A&&(A=w.x),w.y<B&&(B=w.y),w.x>z&&(z=w.x),w.y>H&&(H=w.y),x.push(w.x),n.push(w.y);else for(y=0;y<r;++y){var I=+t(w=a[y],y);w=+s(w,y);I<A&&(A=I);w<B&&(B=w);I>z&&(z=I);w>H&&(H=w);x.push(I);n.push(w)}I=z-A;w=H-B;I>w?H=B+I:z=A+w;var L=Ae();L.add=function(a){v(L,a,+t(a,++y),+s(a,y),A,B,z,H)};L.visit=function(a){kb(a,L,A,B,z,H)};y=-1;if(null==c){for(;++y<r;)v(L,a[y],x[y],n[y],A,B,z,H);--y}else a.forEach(L.add);x=n=a=w=null;return L}var g=qa,m=xa,q;if(q=arguments.length)return g=
jg,m=kg,3===q&&(f=b,d=c,b=c=0),e(a);e.x=function(a){return arguments.length?(g=a,e):g};e.y=function(a){return arguments.length?(m=a,e):m};e.extent=function(a){if(!arguments.length)return null==c?null:[[c,b],[d,f]];null==a?c=b=d=f=null:(c=+a[0][0],b=+a[0][1],d=+a[1][0],f=+a[1][1]);return e};e.size=function(a){if(!arguments.length)return null==c?null:[d-c,f-b];null==a?c=b=d=f=null:(c=b=0,d=+a[0],f=+a[1]);return e};return e};s.interpolateRgb=cd;s.interpolateObject=Be;s.interpolateNumber=ya;s.interpolateString=
Ce;var Lb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;s.interpolate=Qa;s.interpolators=[function(a,c){var b=typeof c;return("string"===b?ub.has(c)||/^(#|rgb\(|hsl\()/.test(c)?cd:Ce:c instanceof Wa?cd:"object"===b?Array.isArray(c)?Mb:Be:ya)(a,c)}];s.interpolateArray=Mb;var Ff=function(){return W},uh=s.map({linear:Ff,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return mg},cubic:function(){return ng},sin:function(){return pg},exp:function(){return qg},circle:function(){return rg},
elastic:function(a,c){var b;2>arguments.length&&(c=0.45);arguments.length?b=c/(2*C)*Math.asin(1/a):(a=1,b=c/4);return function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-b)*C/c)}},back:function(a){a||(a=1.70158);return function(c){return c*c*((a+1)*c-a)}},bounce:function(){return sg}}),vh=s.map({"in":W,out:De,"in-out":Ee,"out-in":function(a){return Ee(De(a))}});s.ease=function(a){var c=a.indexOf("-"),b=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in",b=uh.get(b)||Ff,c=vh.get(c)||W;return lg(c(b.apply(null,
Array.prototype.slice.call(arguments,1))))};s.interpolateHcl=function(a,c){a=s.hcl(a);c=s.hcl(c);var b=a.h,d=a.c,f=a.l,e=c.h-b,g=c.c-d,m=c.l-f;isNaN(g)&&(g=0,d=isNaN(d)?c.c:d);isNaN(e)?(e=0,b=isNaN(b)?c.h:b):180<e?e-=360:-180>e&&(e+=360);return function(a){return vc(b+e*a,d+g*a,f+m*a)+""}};s.interpolateHsl=function(a,c){a=s.hsl(a);c=s.hsl(c);var b=a.h,d=a.s,f=a.l,e=c.h-b,g=c.s-d,m=c.l-f;isNaN(g)&&(g=0,d=isNaN(d)?c.s:d);isNaN(e)?(e=0,b=isNaN(b)?c.h:b):180<e?e-=360:-180>e&&(e+=360);return function(a){return uc(b+
e*a,d+g*a,f+m*a)+""}};s.interpolateLab=function(a,c){a=s.lab(a);c=s.lab(c);var b=a.l,d=a.a,f=a.b,e=c.l-b,g=c.a-d,m=c.b-f;return function(a){return Id(b+e*a,d+g*a,f+m*a)+""}};s.interpolateRound=Fe;s.transform=function(a){var c=ga.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(a){if(null!=a){c.setAttribute("transform",a);var b=c.transform.baseVal.consolidate()}return new Ge(b?b.matrix:wh)})(a)};Ge.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+
")skewX("+this.skew+")scale("+this.scale+")"};var wh={a:1,b:0,c:0,d:1,e:0,f:0};s.interpolateTransform=Ie;s.layout={};s.layout.bundle=function(){return function(a){for(var c=[],b=-1,d=a.length;++b<d;)c.push(vg(a[b]));return c}};s.layout.chord=function(){function a(){var a={},b=[],h=s.range(g),t=[],x,n,y,r,A;d=[];f=[];x=0;for(r=-1;++r<g;){n=0;for(A=-1;++A<g;)n+=e[r][A];b.push(n);t.push(s.range(g));x+=n}q&&h.sort(function(a,c){return q(b[a],b[c])});v&&t.forEach(function(a,c){a.sort(function(a,b){return v(e[c][a],
e[c][b])})});x=(2*C-m*g)/x;n=0;for(r=-1;++r<g;){y=n;for(A=-1;++A<g;){var B=h[r],z=t[B][A],H=e[B][z],I=n,L=n+=H*x;a[B+"-"+z]={index:B,subindex:z,startAngle:I,endAngle:L,value:H}}f[B]={index:B,startAngle:y,endAngle:n,value:(n-y)/x};n+=m}for(r=-1;++r<g;)for(A=r-1;++A<g;)h=a[r+"-"+A],t=a[A+"-"+r],(h.value||t.value)&&d.push(h.value<t.value?{source:t,target:h}:{source:h,target:t});l&&c()}function c(){d.sort(function(a,c){return l((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var b=
{},d,f,e,g,m=0,q,v,l;b.matrix=function(a){if(!arguments.length)return e;g=(e=a)&&e.length;d=f=null;return b};b.padding=function(a){if(!arguments.length)return m;m=a;d=f=null;return b};b.sortGroups=function(a){if(!arguments.length)return q;q=a;d=f=null;return b};b.sortSubgroups=function(a){if(!arguments.length)return v;v=a;d=null;return b};b.sortChords=function(a){if(!arguments.length)return l;l=a;d&&c();return b};b.chords=function(){d||a();return d};b.groups=function(){f||a();return f};return b};
s.layout.force=function(){function a(a){return function(c,b,d,h){if(c.point!==a){d=c.cx-a.x;var f=c.cy-a.y,e=1/Math.sqrt(d*d+f*f);if((h-b)*e<x)return b=c.charge*e*e,a.px-=d*b,a.py-=f*b,!0;c.point&&isFinite(e)&&(b=c.pointCharge*e*e,a.px-=d*b,a.py-=f*b)}return!c.charge}}function c(a){a.px=s.event.x;a.py=s.event.y;b.resume()}var b={},d=s.dispatch("start","tick","end"),f=[1,1],e,g,m=0.9,q=xh,v=yh,l=-30,t=0.1,x=0.8,n=[],y=[],r,A,B;b.tick=function(){if(0.005>(g*=0.99))return d.end({type:"end",alpha:g=0}),
!0;var c=n.length,b=y.length,h,e,q,v,w,x,z;for(h=0;h<b;++h)if(e=y[h],q=e.source,v=e.target,x=v.x-q.x,z=v.y-q.y,w=x*x+z*z)w=g*A[h]*((w=Math.sqrt(w))-r[h])/w,x*=w,z*=w,v.x-=x*(w=q.weight/(v.weight+q.weight)),v.y-=z*w,q.x+=x*(w=1-w),q.y+=z*w;if(w=g*t)if(x=f[0]/2,z=f[1]/2,h=-1,w)for(;++h<c;)e=n[h],e.x+=(x-e.x)*w,e.y+=(z-e.y)*w;if(l)for(Ke(b=s.geom.quadtree(n),g,B),h=-1;++h<c;)(e=n[h]).fixed||b.visit(a(e));for(h=-1;++h<c;)e=n[h],e.fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*m,e.y-=(e.py-(e.py=e.y))*
m);d.tick({type:"tick",alpha:g})};b.nodes=function(a){if(!arguments.length)return n;n=a;return b};b.links=function(a){if(!arguments.length)return y;y=a;return b};b.size=function(a){if(!arguments.length)return f;f=a;return b};b.linkDistance=function(a){if(!arguments.length)return q;q="function"===typeof a?a:+a;return b};b.distance=b.linkDistance;b.linkStrength=function(a){if(!arguments.length)return v;v="function"===typeof a?a:+a;return b};b.friction=function(a){if(!arguments.length)return m;m=+a;
return b};b.charge=function(a){if(!arguments.length)return l;l="function"===typeof a?a:+a;return b};b.gravity=function(a){if(!arguments.length)return t;t=+a;return b};b.theta=function(a){if(!arguments.length)return x;x=+a;return b};b.alpha=function(a){if(!arguments.length)return g;a=+a;g?g=0<a?a:0:0<a&&(d.start({type:"start",alpha:g=a}),s.timer(b.tick));return b};b.start=function(){function a(b,h){var f;if(!w){w=[];for(d=0;d<e;++d)w[d]=[];for(d=0;d<g;++d)f=y[d],w[f.source.index].push(f.target),w[f.target.index].push(f.source)}f=
w[c];for(var m=-1,q=f.length,p;++m<q;)if(!isNaN(p=f[m][b]))return p;return Math.random()*h}var c,d,e=n.length,g=y.length,m=f[0],t=f[1],w,u;for(c=0;c<e;++c)(u=n[c]).index=c,u.weight=0;for(c=0;c<g;++c)u=y[c],"number"==typeof u.source&&(u.source=n[u.source]),"number"==typeof u.target&&(u.target=n[u.target]),++u.source.weight,++u.target.weight;for(c=0;c<e;++c)u=n[c],isNaN(u.x)&&(u.x=a("x",m)),isNaN(u.y)&&(u.y=a("y",t)),isNaN(u.px)&&(u.px=u.x),isNaN(u.py)&&(u.py=u.y);r=[];if("function"===typeof q)for(c=
0;c<g;++c)r[c]=+q.call(this,y[c],c);else for(c=0;c<g;++c)r[c]=q;A=[];if("function"===typeof v)for(c=0;c<g;++c)A[c]=+v.call(this,y[c],c);else for(c=0;c<g;++c)A[c]=v;B=[];if("function"===typeof l)for(c=0;c<e;++c)B[c]=+l.call(this,n[c],c);else for(c=0;c<e;++c)B[c]=l;return b.resume()};b.resume=function(){return b.alpha(0.1)};b.stop=function(){return b.alpha(0)};b.drag=function(){e||(e=s.behavior.drag().origin(W).on("dragstart.force",wg).on("drag.force",c).on("dragend.force",xg));if(!arguments.length)return e;
this.on("mouseover.force",yg).on("mouseout.force",zg).call(e)};return s.rebind(b,d,"on")};var xh=20,yh=1;s.layout.hierarchy=function(){function a(c,g,m){var q=f.call(b,c,g);c.depth=g;m.push(c);if(q&&(l=q.length)){var v=-1,l,t=c.children=[],x=0;g+=1;for(var s;++v<l;)s=a(q[v],g,m),s.parent=c,t.push(s),x+=s.value;d&&t.sort(d);e&&(c.value=x)}else e&&(c.value=+e.call(b,c,g)||0);return c}function c(a,d){var f=a.children,g=0;if(f&&(q=f.length))for(var m=-1,q,p=d+1;++m<q;)g+=c(f[m],p);else e&&(g=+e.call(b,
a,d)||0);e&&(a.value=g);return g}function b(c){var d=[];a(c,0,d);return d}var d=Dg,f=Bg,e=Cg;b.sort=function(a){if(!arguments.length)return d;d=a;return b};b.children=function(a){if(!arguments.length)return f;f=a;return b};b.value=function(a){if(!arguments.length)return e;e=a;return b};b.revalue=function(a){c(a,0);return a};return b};s.layout.partition=function(){function a(c,b,d,h){var f=c.children;c.x=b;c.y=c.depth*h;c.dx=d;c.dy=h;if(f&&(g=f.length)){var e=-1,g,m;for(d=c.value?d/c.value:0;++e<g;)a(m=
f[e],b,c=m.value*d,h),b+=c}}function c(a){a=a.children;var b=0;if(a&&(h=a.length))for(var d=-1,h;++d<h;)b=Math.max(b,c(a[d]));return 1+b}function b(h,e){var g=d.call(this,h,e);a(g[0],0,f[0],f[1]/c(g[0]));return g}var d=s.layout.hierarchy(),f=[1,1];b.size=function(a){if(!arguments.length)return f;f=a;return b};return lb(b,d)};s.layout.pie=function(){function a(e){var g=e.map(function(b,d){return+c.call(a,b,d)}),m=+("function"===typeof d?d.apply(this,arguments):d),q=(("function"===typeof f?f.apply(this,
arguments):f)-m)/s.sum(g),v=s.range(e.length);null!=b&&v.sort(b===Gf?function(a,c){return g[c]-g[a]}:function(a,c){return b(e[a],e[c])});var l=[];v.forEach(function(a){var c;l[a]={data:e[a],value:c=g[a],startAngle:m,endAngle:m+=c*q}});return l}var c=Number,b=Gf,d=0,f=2*C;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.startAngle=function(c){if(!arguments.length)return d;d=c;return a};a.endAngle=function(c){if(!arguments.length)return f;
f=c;return a};return a};var Gf={};s.layout.stack=function(){function a(m,q){var v=m.map(function(b,d){return c.call(a,b,d)}),l=v.map(function(c){return c.map(function(c,b){return[e.call(a,c,b),g.call(a,c,b)]})}),t=b.call(a,l,q),v=s.permute(v,t),l=s.permute(l,t),t=d.call(a,l,q),x=v.length,n=v[0].length,y,r,A;for(r=0;r<n;++r)for(f.call(a,v[0][r],A=t[r],l[0][r][1]),y=1;y<x;++y)f.call(a,v[y][r],A+=l[y-1][r][1],l[y][r][1]);return m}var c=W,b=dd,d=ed,f=Gg,e=Eg,g=Fg;a.values=function(b){if(!arguments.length)return c;
c=b;return a};a.order=function(c){if(!arguments.length)return b;b="function"===typeof c?c:zh.get(c)||dd;return a};a.offset=function(c){if(!arguments.length)return d;d="function"===typeof c?c:Ah.get(c)||ed;return a};a.x=function(c){if(!arguments.length)return e;e=c;return a};a.y=function(c){if(!arguments.length)return g;g=c;return a};a.out=function(c){if(!arguments.length)return f;f=c;return a};return a};var zh=s.map({"inside-out":function(a){var c=a.length,b,d=a.map(Hg),f=a.map(Ig),e=s.range(c).sort(function(a,
c){return d[a]-d[c]}),g=0,m=0,q=[],v=[];for(a=0;a<c;++a)b=e[a],g<m?(g+=f[b],q.push(b)):(m+=f[b],v.push(b));return v.reverse().concat(q)},reverse:function(a){return s.range(a.length).reverse()},"default":dd}),Ah=s.map({silhouette:function(a){var c=a.length,b=a[0].length,d=[],f=0,e,g,m,q=[];for(g=0;g<b;++g){for(m=e=0;e<c;e++)m+=a[e][g][1];m>f&&(f=m);d.push(m)}for(g=0;g<b;++g)q[g]=(f-d[g])/2;return q},wiggle:function(a){var c=a.length,b=a[0],d=b.length,f,e,g,m,q,v,l,t,x,s=[];s[0]=t=x=0;for(e=1;e<d;++e){for(m=
f=0;f<c;++f)m+=a[f][e][1];q=f=0;for(l=b[e][0]-b[e-1][0];f<c;++f){g=0;for(v=(a[f][e][1]-a[f][e-1][1])/(2*l);g<f;++g)v+=(a[g][e][1]-a[g][e-1][1])/l;q+=v*a[f][e][1]}s[e]=t-=m?q/m*l:0;t<x&&(x=t)}for(e=0;e<d;++e)s[e]-=x;return s},expand:function(a){var c=a.length,b=a[0].length,d=1/c,f,e,g,m=[];for(e=0;e<b;++e){for(g=f=0;f<c;f++)g+=a[f][e][1];if(g)for(f=0;f<c;f++)a[f][e][1]/=g;else for(f=0;f<c;f++)a[f][e][1]=d}for(e=0;e<b;++e)m[e]=0;return m},zero:ed});s.layout.histogram=function(){function a(a,e){var g=
[],m=a.map(b,this),q=d.call(this,m,e),v=f.call(this,q,m,e),l;e=-1;for(var t=m.length,x=v.length-1,n=c?1:1/t;++e<x;)l=g[e]=[],l.dx=v[e+1]-(l.x=v[e]),l.y=0;if(0<x)for(e=-1;++e<t;)l=m[e],l>=q[0]&&l<=q[1]&&(l=g[s.bisect(v,l,1,x)-1],l.y+=n,l.push(a[e]));return g}var c=!0,b=Number,d=Lg,f=Kg;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.range=function(c){if(!arguments.length)return d;d=M(c);return a};a.bins=function(c){if(!arguments.length)return f;f="number"===typeof c?function(a){return Le(a,
c)}:M(c);return a};a.frequency=function(b){if(!arguments.length)return c;c=!!b;return a};return a};s.layout.tree=function(){function a(a,e){function g(a,c){var d=a.children,f=a._tree;if(d&&(e=d.length)){for(var e,m=d[0],q,v=m,p,l=-1;++l<e;){p=d[l];g(p,q);var t=p;if(q){for(var u=t,w=t,x=t.parent.children[0],s=u._tree.mod,n=w._tree.mod,y=q._tree.mod,r=x._tree.mod,A=void 0;q=gd(q),u=fd(u),q&&u;){x=fd(x);w=gd(w);w._tree.ancestor=t;A=q._tree.prelim+y-u._tree.prelim-s+b(q,u);if(0<A){var B=q._tree.ancestor.parent==
t.parent?q._tree.ancestor:v,z=t,H=A,B=B._tree,z=z._tree,J=H/(z.number-B.number);B.change+=J;z.change-=J;z.shift+=H;z.prelim+=H;z.mod+=H;s+=A;n+=A}y+=q._tree.mod;s+=u._tree.mod;r+=x._tree.mod;n+=w._tree.mod}q&&!gd(w)&&(w._tree.thread=q,w._tree.mod+=y-n);u&&!fd(x)&&(x._tree.thread=u,x._tree.mod+=s-r,v=t)}q=p}e=d=0;l=a.children;for(t=l.length;0<=--t;)v=l[t]._tree,v.prelim+=d,v.mod+=d,d+=v.shift+(e+=v.change);m=0.5*(m._tree.prelim+p._tree.prelim);c?(f.prelim=c._tree.prelim+b(a,c),f.mod=f.prelim-m):f.prelim=
m}else c&&(f.prelim=c._tree.prelim+b(a,c))}function m(a,c){a.x=a._tree.prelim+c;var b=a.children;if(b&&(h=b.length)){var d=-1,h;for(c+=a._tree.mod;++d<h;)m(b[d],c)}}var q=c.call(this,a,e),v=q[0];za(v,function(a,c){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:c?c._tree.number+1:0}});g(v);m(v,-v._tree.prelim);var l=Nb(v,Ng),t=Nb(v,Mg),x=Nb(v,Og),s=l.x-b(l,t)/2,n=t.x+b(t,l)/2,y=x.depth||1;za(v,f?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-s)/(n-s)*d[0];a.y=
a.depth/y*d[1];delete a._tree});return q}var c=s.layout.hierarchy().sort(null).value(null),b=Me,d=[1,1],f=!1;a.separation=function(c){if(!arguments.length)return b;b=c;return a};a.size=function(c){if(!arguments.length)return f?null:d;f=null==(d=c);return a};a.nodeSize=function(c){if(!arguments.length)return f?d:null;f=null!=(d=c);return a};return lb(a,c)};s.layout.pack=function(){function a(a,e){var g=c.call(this,a,e),m=g[0],q=d[0],v=d[1],l=null==f?Math.sqrt:"function"===typeof f?f:function(){return f};
m.x=m.y=0;za(m,function(a){a.r=+l(a.value)});za(m,Pe);if(b){var t=b*(f?1:Math.max(2*m.r/q,2*m.r/v))/2;za(m,function(a){a.r+=t});za(m,Pe);za(m,function(a){a.r-=t})}Re(m,q/2,v/2,f?1:1/Math.max(2*m.r/q,2*m.r/v));return g}var c=s.layout.hierarchy().sort(Pg),b=0,d=[1,1],f;a.size=function(c){if(!arguments.length)return d;d=c;return a};a.radius=function(c){if(!arguments.length)return f;f=null==c||"function"===typeof c?c:+c;return a};a.padding=function(c){if(!arguments.length)return b;b=+c;return a};return lb(a,
c)};s.layout.cluster=function(){function a(a,e){var g=c.call(this,a,e),m=g[0],q,v=0;za(m,function(a){var c=a.children;c&&c.length?(a.x=Tg(c),a.y=Sg(c)):(a.x=q?v+=b(a,q):0,a.y=0,q=a)});var l=Se(m),t=Te(m),x=l.x-b(l,t)/2,s=t.x+b(t,l)/2;za(m,f?function(a){a.x=(a.x-m.x)*d[0];a.y=(m.y-a.y)*d[1]}:function(a){a.x=(a.x-x)/(s-x)*d[0];a.y=(1-(m.y?a.y/m.y:1))*d[1]});return g}var c=s.layout.hierarchy().sort(null).value(null),b=Me,d=[1,1],f=!1;a.separation=function(c){if(!arguments.length)return b;b=c;return a};
a.size=function(c){if(!arguments.length)return f?null:d;f=null==(d=c);return a};a.nodeSize=function(c){if(!arguments.length)return f?d:null;f=null!=(d=c);return a};return lb(a,c)};s.layout.treemap=function(){function a(a,c){for(var b=-1,d=a.length,f,h;++b<d;)h=(f=a[b]).value*(0>c?0:c),f.area=isNaN(h)||0>=h?0:h}function c(b){var f=b.children;if(f&&f.length){var h=v(b),e=[],g=f.slice(),m=Infinity,q,l="slice"===x?h.dx:"dice"===x?h.dy:"slice-dice"===x?b.depth&1?h.dy:h.dx:Math.min(h.dx,h.dy);a(g,h.dx*
h.dy/b.value);for(e.area=0;0<(b=g.length);){e.push(b=g[b-1]);e.area+=b.area;if(!(b="squarify"!==x)){q=l;b=e.area;for(var t=void 0,p=0,s=Infinity,w=-1,y=e.length;++w<y;)if(t=e[w].area)t<s&&(s=t),t>p&&(p=t);b*=b;q*=q;b=(q=b?Math.max(q*p*n/b,b/(q*s*n)):Infinity)<=m}b?(g.pop(),m=q):(e.area-=e.pop().area,d(e,l,h,!1),l=Math.min(h.dx,h.dy),e.length=e.area=0,m=Infinity)}e.length&&(d(e,l,h,!0),e.length=e.area=0);f.forEach(c)}}function b(c){var f=c.children;if(f&&f.length){var e=v(c),g=f.slice(),m=[];a(g,e.dx*
e.dy/c.value);for(m.area=0;c=g.pop();)m.push(c),m.area+=c.area,null!=c.z&&(d(m,c.z?e.dx:e.dy,e,!g.length),m.length=m.area=0);f.forEach(b)}}function d(a,c,b,f){var h=-1,e=a.length,m=b.x,q=b.y,v=c?g(a.area/c):0,l;if(c==b.dx){if(f||v>b.dy)v=b.dy;for(;++h<e;)l=a[h],l.x=m,l.y=q,l.dy=v,m+=l.dx=Math.min(b.x+b.dx-m,v?g(l.area/v):0);l.z=!0;l.dx+=b.x+b.dx-m;b.y+=v;b.dy-=v}else{if(f||v>b.dx)v=b.dx;for(;++h<e;)l=a[h],l.x=m,l.y=q,l.dx=v,q+=l.dy=Math.min(b.y+b.dy-q,v?g(l.area/v):0);l.z=!1;l.dy+=b.y+b.dy-q;b.x+=
v;b.dx-=v}}function f(d){d=t||e(d);var g=d[0];g.x=0;g.y=0;g.dx=m[0];g.dy=m[1];t&&e.revalue(g);a([g],g.dx*g.dy/g.value);(t?b:c)(g);l&&(t=d);return d}var e=s.layout.hierarchy(),g=Math.round,m=[1,1],q=null,v=id,l=!1,t,x="squarify",n=0.5*(1+Math.sqrt(5));f.size=function(a){if(!arguments.length)return m;m=a;return f};f.padding=function(a){function c(b){var d=a.call(f,b,b.depth);return null==d?id(b):Ue(b,"number"===typeof d?[d,d,d,d]:d)}function b(c){return Ue(c,a)}if(!arguments.length)return q;var d;v=
null==(q=a)?id:"function"===(d=typeof a)?c:"number"===d?(a=[a,a,a,a],b):b;return f};f.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return f};f.sticky=function(a){if(!arguments.length)return l;l=a;t=null;return f};f.ratio=function(a){if(!arguments.length)return n;n=a;return f};f.mode=function(a){if(!arguments.length)return x;x=a+"";return f};return lb(f,e)};s.random={normal:function(a,c){var b=arguments.length;2>b&&(c=1);1>b&&(a=0);return function(){var b,d;do b=2*
Math.random()-1,d=2*Math.random()-1,d=b*b+d*d;while(!d||1<d);return a+c*b*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=s.random.normal.apply(s,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,b=0;b<a;b++)c+=Math.random();return c/a}}};s.scale={};var Vg={floor:W,ceil:W};s.scale.linear=function(){return We([0,1],[0,1],Qa,!1)};s.scale.log=function(){return Ye(s.scale.linear().domain([0,1]),10,!0,[1,10])};var Ze=s.format(".0e"),Xg={floor:function(a){return-Math.ceil(-a)},
ceil:function(a){return-Math.floor(-a)}};s.scale.pow=function(){return $e(s.scale.linear(),1,[0,1])};s.scale.sqrt=function(){return s.scale.pow().exponent(0.5)};s.scale.ordinal=function(){return af([],{t:"range",a:[[]]})};s.scale.category10=function(){return s.scale.ordinal().range(Bh)};s.scale.category20=function(){return s.scale.ordinal().range(Ch)};s.scale.category20b=function(){return s.scale.ordinal().range(Dh)};s.scale.category20c=function(){return s.scale.ordinal().range(Eh)};var Bh=[2062260,
16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(tb),Ch=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(tb),Dh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(tb),Eh=[3244733,7057110,10406625,13032431,15095053,
16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(tb);s.scale.quantile=function(){return bf([],[])};s.scale.quantize=function(){return cf(0,1,[0,1])};s.scale.threshold=function(){return df([0.5],[0,1])};s.scale.identity=function(){return ef([0,1])};s.svg.arc=function(){function a(){var a=c.apply(this,arguments),e=b.apply(this,arguments),g=d.apply(this,arguments)+Ra,m=f.apply(this,arguments)+Ra,q=(m<g&&(q=g,g=m,m=
q),m-g),v=q<C?"0":"1",l=Math.cos(g),g=Math.sin(g),t=Math.cos(m),m=Math.sin(m);return q>=Fh?a?"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z":a?"M"+e*l+","+e*g+"A"+e+","+e+" 0 "+v+",1 "+e*t+","+e*m+"L"+a*t+","+a*m+"A"+a+","+a+" 0 "+v+",0 "+a*l+","+a*g+"Z":"M"+e*l+","+e*g+"A"+e+","+e+" 0 "+v+",1 "+e*t+","+e*m+"L0,0Z"}var c=Yg,b=Zg,d=ff,f=gf;a.innerRadius=function(b){if(!arguments.length)return c;
c=M(b);return a};a.outerRadius=function(c){if(!arguments.length)return b;b=M(c);return a};a.startAngle=function(c){if(!arguments.length)return d;d=M(c);return a};a.endAngle=function(c){if(!arguments.length)return f;f=M(c);return a};a.centroid=function(){var a=(c.apply(this,arguments)+b.apply(this,arguments))/2,e=(d.apply(this,arguments)+f.apply(this,arguments))/2+Ra;return[Math.cos(e)*a,Math.sin(e)*a]};return a};var Ra=-C/2,Fh=2*C-1E-6;s.svg.line.radial=function(){var a=ue(hf);a.radius=a.x;delete a.x;
a.angle=a.y;delete a.y;return a};Vc.reverse=Wc;Wc.reverse=Vc;s.svg.area=function(){return jf(W)};s.svg.area.radial=function(){var a=jf(hf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};s.svg.chord=function(){function a(a,e){var g=c(this,d,a,e),m=c(this,f,a,e);return"M"+g.p0+b(g.r,g.p1,g.a1-g.a0)+(g.a0==m.a0&&g.a1==m.a1?"Q 0,0 "+g.p0:"Q 0,0 "+m.p0+b(m.r,m.p1,m.a1-m.a0)+
("Q 0,0 "+g.p0))+"Z"}function c(a,c,b,d){var f=c.call(a,b,d);c=e.call(a,f,d);b=g.call(a,f,d)+Ra;a=m.call(a,f,d)+Ra;return{r:c,a0:b,a1:a,p0:[c*Math.cos(b),c*Math.sin(b)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function b(a,c,d){return"A"+a+","+a+" 0 "+ +(d>C)+",1 "+c}var d=Rc,f=Sc,e=$g,g=ff,m=gf;a.radius=function(c){if(!arguments.length)return e;e=M(c);return a};a.source=function(c){if(!arguments.length)return d;d=M(c);return a};a.target=function(c){if(!arguments.length)return f;f=M(c);return a};a.startAngle=
function(c){if(!arguments.length)return g;g=M(c);return a};a.endAngle=function(c){if(!arguments.length)return m;m=M(c);return a};return a};s.svg.diagonal=function(){function a(a,f){var e=c.call(this,a,f),g=b.call(this,a,f),m=(e.y+g.y)/2,e=[e,{x:e.x,y:m},{x:g.x,y:m},g],e=e.map(d);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var c=Rc,b=Sc,d=kf;a.source=function(b){if(!arguments.length)return c;c=M(b);return a};a.target=function(c){if(!arguments.length)return b;b=M(c);return a};a.projection=function(c){if(!arguments.length)return d;
d=c;return a};return a};s.svg.diagonal.radial=function(){var a=s.svg.diagonal(),c=kf,b=a.projection;a.projection=function(a){return arguments.length?b(ah(c=a)):c};return a};s.svg.symbol=function(){function a(a,d){return(Hf.get(c.call(this,a,d))||lf)(b.call(this,a,d))}var c=ch,b=bh;a.type=function(b){if(!arguments.length)return c;c=M(b);return a};a.size=function(c){if(!arguments.length)return b;b=M(c);return a};return a};var Hf=s.map({circle:lf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+
-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*If));var c=a*If;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/mc);var c=a*mc/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/mc);var c=a*mc/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});s.svg.symbolTypes=
Hf.keys();var mc=Math.sqrt(3),If=Math.tan(30*E),U=[],wf=0,Ua,Zb;U.call=K.call;U.empty=K.empty;U.node=K.node;U.size=K.size;s.transition=function(a){return arguments.length?Ua?a.transition():a:vf.transition()};s.transition.prototype=U;U.select=function(a){var c=this.id,b=[],d,f,e;a=B(a);for(var g=-1,m=this.length;++g<m;){b.push(d=[]);for(var q=this[g],v=-1,l=q.length;++v<l;)(e=q[v])&&(f=a.call(e,e.__data__,v,g))?("__data__"in e&&(f.__data__=e.__data__),Rb(f,v,c,e.__transition__[c]),d.push(f)):d.push(null)}return mb(b,
c)};U.selectAll=function(a){var c=this.id,b=[],d,f,e,g;a=z(a);for(var m=-1,q=this.length;++m<q;)for(var v=this[m],l=-1,t=v.length;++l<t;)if(d=v[l]){g=d.__transition__[c];f=a.call(d,d.__data__,l,m);b.push(d=[]);for(var x=-1,s=f.length;++x<s;)(e=f[x])&&Rb(e,x,c,g),d.push(e)}return mb(b,c)};U.filter=function(a){var c=[],b,d,f;"function"!==typeof a&&(a=H(a));for(var e=0,g=this.length;e<g;e++){c.push(b=[]);d=this[e];for(var m=0,q=d.length;m<q;m++)(f=d[m])&&a.call(f,f.__data__,m)&&b.push(f)}return mb(c,
this.id)};U.tween=function(a,c){var b=this.id;return 2>arguments.length?this.node().__transition__[b].tween.get(a):V(this,null==c?function(c){c.__transition__[b].tween.remove(a)}:function(d){d.__transition__[b].tween.set(a,c)})};U.attr=function(a,c){function b(){this.removeAttribute(m)}function d(){this.removeAttributeNS(m.space,m.local)}function f(a){return null==a?b:(a+="",function(){var c=this.getAttribute(m),b;return c!==a&&(b=g(c,a),function(a){this.setAttribute(m,b(a))})})}function e(a){return null==
a?d:(a+="",function(){var c=this.getAttributeNS(m.space,m.local),b;return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(m.space,m.local,b(a))})})}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var g="transform"==a?Ie:Qa,m=s.ns.qualify(a);return ld(this,"attr."+a,c,m.local?e:f)};U.attrTween=function(a,c){function b(a,d){var h=c.call(this,a,d,this.getAttribute(f));return h&&function(a){this.setAttribute(f,h(a))}}function d(a,b){var h=c.call(this,a,b,this.getAttributeNS(f.space,f.local));
return h&&function(a){this.setAttributeNS(f.space,f.local,h(a))}}var f=s.ns.qualify(a);return this.tween("attr."+a,f.local?d:b)};U.style=function(a,c,b){function d(){this.style.removeProperty(a)}var f=arguments.length;if(3>f){if("string"!==typeof a){2>f&&(c="");for(b in a)this.style(b,a[b],c);return this}b=""}return ld(this,"style."+a,c,function(c){return null==c?d:(c+="",function(){var d=X.getComputedStyle(this,null).getPropertyValue(a),f;return d!==c&&(f=Qa(d,c),function(c){this.style.setProperty(a,
f(c),b)})})})};U.styleTween=function(a,c,b){3>arguments.length&&(b="");return this.tween("style."+a,function(d,f){var e=c.call(this,d,f,X.getComputedStyle(this,null).getPropertyValue(a));return e&&function(c){this.style.setProperty(a,e(c),b)}})};U.text=function(a){return ld(this,"text",a,dh)};U.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};U.ease=function(a){var c=this.id;if(1>arguments.length)return this.node().__transition__[c].ease;
"function"!==typeof a&&(a=s.ease.apply(s,arguments));return V(this,function(b){b.__transition__[c].ease=a})};U.delay=function(a){var c=this.id;return V(this,"function"===typeof a?function(b,d,f){b.__transition__[c].delay=+a.call(b,b.__data__,d,f)}:(a=+a,function(b){b.__transition__[c].delay=a}))};U.duration=function(a){var c=this.id;return V(this,"function"===typeof a?function(b,d,f){b.__transition__[c].duration=Math.max(1,a.call(b,b.__data__,d,f))}:(a=Math.max(1,a),function(b){b.__transition__[c].duration=
a}))};U.each=function(a,c){var b=this.id;if(2>arguments.length){var d=Zb,f=Ua;Ua=b;V(this,function(c,d,f){Zb=c.__transition__[b];a.call(c,c.__data__,d,f)});Zb=d;Ua=f}else V(this,function(d){d=d.__transition__[b];(d.event||(d.event=s.dispatch("start","end"))).on(a,c)});return this};U.transition=function(){for(var a=this.id,c=++wf,b=[],d,f,e,g,m=0,q=this.length;m<q;m++){b.push(d=[]);f=this[m];for(var v=0,l=f.length;v<l;v++){if(e=f[v])g=Object.create(e.__transition__[a]),g.delay+=g.duration,Rb(e,v,c,
g);d.push(e)}}return mb(b,c)};s.svg.axis=function(){function a(a){a.each(function(){var a=s.select(this),v=null==m?c.ticks?c.ticks.apply(c,g):c.domain():m,l=null==q?c.tickFormat?c.tickFormat.apply(c,g):W:q,t=a.selectAll(".tick").data(v,W),v=t.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),x=s.transition(t.exit()).style("opacity",1E-6).remove(),n=s.transition(t).style("opacity",1),y,r=Ob(c),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),
s.transition(a)),A=c.copy(),B=this.__chart__||A;this.__chart__=A;v.append("line");v.append("text");var z=v.select("line"),H=n.select("line"),l=t.select("text").text(l),t=v.select("text"),I=n.select("text");switch(b){case "bottom":y=mf;z.attr("y2",d);t.attr("y",Math.max(d,0)+e);H.attr("x2",0).attr("y2",d);I.attr("x",0).attr("y",Math.max(d,0)+e);l.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+r[0]+","+f+"V0H"+r[1]+"V"+f);break;case "top":y=mf;z.attr("y2",-d);t.attr("y",-(Math.max(d,
0)+e));H.attr("x2",0).attr("y2",-d);I.attr("x",0).attr("y",-(Math.max(d,0)+e));l.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+r[0]+","+-f+"V0H"+r[1]+"V"+-f);break;case "left":y=nf;z.attr("x2",-d);t.attr("x",-(Math.max(d,0)+e));H.attr("x2",-d).attr("y2",0);I.attr("x",-(Math.max(d,0)+e)).attr("y",0);l.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-f+","+r[0]+"H0V"+r[1]+"H"+-f);break;case "right":y=nf,z.attr("x2",d),t.attr("x",Math.max(d,0)+e),H.attr("x2",d).attr("y2",
0),I.attr("x",Math.max(d,0)+e).attr("y",0),l.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+f+","+r[0]+"H0V"+r[1]+"H"+f)}if(c.rangeBand){var L=A.rangeBand()/2,x=function(a){return A(a)+L};v.call(y,x);n.call(y,x)}else v.call(y,B),n.call(y,A),x.call(y,A)})}var c=s.scale.linear(),b=Jf,d=6,f=6,e=3,g=[10],m=null,q;a.scale=function(b){if(!arguments.length)return c;c=b;return a};a.orient=function(c){if(!arguments.length)return b;b=c in Gh?c+"":Jf;return a};a.ticks=function(){if(!arguments.length)return g;
g=arguments;return a};a.tickValues=function(c){if(!arguments.length)return m;m=c;return a};a.tickFormat=function(c){if(!arguments.length)return q;q=c;return a};a.tickSize=function(c){var b=arguments.length;if(!b)return d;d=+c;f=+arguments[b-1];return a};a.innerTickSize=function(c){if(!arguments.length)return d;d=+c;return a};a.outerTickSize=function(c){if(!arguments.length)return f;f=+c;return a};a.tickPadding=function(c){if(!arguments.length)return e;e=+c;return a};a.tickSubdivide=function(){return arguments.length&&
a};return a};var Jf="bottom",Gh={top:1,right:1,bottom:1,left:1};s.svg.brush=function(){function a(e){e.each(function(){var e=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),q=e.selectAll(".background").data([0]);q.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor",
"move");var v=e.selectAll(".resize").data(A,W);v.exit().remove();v.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Hh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");v.style("display",a.empty()?"none":null);e=s.transition(e);q=s.transition(q);g&&(v=Ob(g),q.attr("x",v[0]).attr("width",v[1]-v[0]),b(e));m&&(v=Ob(m),
q.attr("y",v[0]).attr("height",v[1]-v[0]),d(e));c(e)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+q[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function b(a){a.select(".extent").attr("x",q[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function d(a){a.select(".extent").attr("y",l[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function f(){function p(){var a=s.mouse(B),f=!1;G&&(a[0]+=G[0],a[1]+=G[1]);C||(s.event.altKey?
(V||(V=[(q[0]+q[1])/2,(l[0]+l[1])/2]),E[0]=q[+(a[0]<V[0])],E[1]=l[+(a[1]<V[1])]):V=null);D&&y(a,g,0)&&(b(I),f=!0);F&&y(a,m,1)&&(d(I),f=!0);f&&(c(I),H({type:"brush",mode:C?"move":"resize"}))}function y(a,c,b){var d=Ob(c);c=d[0];var f=d[1],d=E[b],h=b?l:q,e=h[1]-h[0];C&&(c-=d,f-=e+d);a=(b?r:n)?Math.max(c,Math.min(f,a[b])):a[b];C?c=(a+=d)+e:(V&&(d=Math.max(c,Math.min(f,2*V[b]-a))),d<a?(c=a,a=d):c=d);if(h[0]!=a||h[1]!=c)return b?x=null:t=null,h[0]=a,h[1]=c,!0}function A(){p();I.style("pointer-events",
"all").selectAll(".resize").style("display",a.empty()?"none":null);s.select("body").style("cursor",null);ta.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);N();H({type:"brushend"})}var B=this,z=s.select(s.event.target),H=e.of(B,arguments),I=s.select(B),L=z.datum(),D=!/^(n|s)$/.test(L)&&g,F=!/^(e|w)$/.test(L)&&m,C=z.classed("extent"),N=pb(),V,E=s.mouse(B),G,ta=s.select(X).on("keydown.brush",function(){32==
s.event.keyCode&&(C||(V=null,E[0]-=q[1],E[1]-=l[1],C=2),v())}).on("keyup.brush",function(){32==s.event.keyCode&&2==C&&(E[0]+=q[1],E[1]+=l[1],C=0,v())});if(s.event.changedTouches)ta.on("touchmove.brush",p).on("touchend.brush",A);else ta.on("mousemove.brush",p).on("mouseup.brush",A);I.interrupt().selectAll("*").interrupt();if(C)E[0]=q[0]-E[0],E[1]=l[0]-E[1];else if(L){var aa=+/w$/.test(L),L=+/^n/.test(L);G=[q[1-aa]-E[0],l[1-L]-E[1]];E[0]=q[aa];E[1]=l[L]}else s.event.altKey&&(V=E.slice());I.style("pointer-events",
"none").selectAll(".resize").style("display",null);s.select("body").style("cursor",z.style("cursor"));H({type:"brushstart"});p()}var e=y(a,"brushstart","brush","brushend"),g=null,m=null,q=[0,0],l=[0,0],t,x,n=!0,r=!0,A=td[0];a.event=function(a){a.each(function(){var a=e.of(this,arguments),c={x:q,y:l,i:t,j:x},b=this.__chart__||c;this.__chart__=c;Ua?s.select(this).transition().each("start.brush",function(){t=b.i;x=b.j;q=b.x;l=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=Mb(q,c.x),
d=Mb(l,c.y);t=x=null;return function(f){q=c.x=b(f);l=c.y=d(f);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=c.i;x=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(c){if(!arguments.length)return g;g=c;A=td[!g<<1|!m];return a};a.y=function(c){if(!arguments.length)return m;m=c;A=td[!g<<1|!m];return a};a.clamp=function(c){if(!arguments.length)return g&&m?[n,r]:g?n:m?r:null;g&&m?(n=
!!c[0],r=!!c[1]):g?n=!!c:m&&(r=!!c);return a};a.extent=function(c){var b,d,f,h,e;if(!arguments.length)return g&&(t?(b=t[0],d=t[1]):(b=q[0],d=q[1],g.invert&&(b=g.invert(b),d=g.invert(d)),d<b&&(e=b,b=d,d=e))),m&&(x?(f=x[0],h=x[1]):(f=l[0],h=l[1],m.invert&&(f=m.invert(f),h=m.invert(h)),h<f&&(e=f,f=h,h=e))),g&&m?[[b,f],[d,h]]:g?[b,d]:m&&[f,h];g&&(b=c[0],d=c[1],m&&(b=b[0],d=d[0]),t=[b,d],g.invert&&(b=g(b),d=g(d)),d<b&&(e=b,b=d,d=e),b!=q[0]||d!=q[1])&&(q=[b,d]);m&&(f=c[0],h=c[1],g&&(f=f[1],h=h[1]),x=[f,
h],m.invert&&(f=m(f),h=m(h)),h<f&&(e=f,f=h,h=e),f!=l[0]||h!=l[1])&&(l=[f,h]);return a};a.clear=function(){a.empty()||(q=[0,0],l=[0,0],t=x=null);return a};a.empty=function(){return!!g&&q[0]==q[1]||!!m&&l[0]==l[1]};return s.rebind(a,e,"on")};var Hh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},td=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],D=s.time={},Y=Date;Aa.prototype={getDate:function(){return this._.getUTCDate()},
getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ba.setUTCDate.apply(this._,
arguments)},setDay:function(){Ba.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ba.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ba.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ba.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ba.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ba.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ba.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ba.setTime.apply(this._,arguments)}};
var Ba=Date.prototype,ud="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),vd="Sun Mon Tue Wed Thu Fri Sat".split(" "),wd="January February March April May June July August September October November December".split(" "),xd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");D.year=Sa(function(a){a=D.day(a);a.setMonth(0,1);return a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});D.years=D.year.range;D.years.utc=D.year.utc.range;D.day=
Sa(function(a){var c=new Y(2E3,0);c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});D.days=D.day.range;D.days.utc=D.day.utc.range;D.dayOfYear=function(a){var c=D.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var b=D[a]=Sa(function(a){(a=D.day(a)).setDate(a.getDate()-
(a.getDay()+c)%7);return a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var b=D.year(a).getDay();return Math.floor((D.dayOfYear(a)+(b+c)%7)/7)-(b!==c)});D[a+"s"]=b.range;D[a+"s"].utc=b.utc.range;D[a+"OfYear"]=function(a){var b=D.year(a).getDay();return Math.floor((D.dayOfYear(a)+(b+c)%7)/7)}});D.week=D.sunday;D.weeks=D.sunday.range;D.weeks.utc=D.sunday.utc.range;D.weekOfYear=D.sundayOfYear;D.format=ba;var Kf=Vb(ud),Ih=Wb(ud),Lf=Vb(vd),Jh=Wb(vd),Mf=Vb(wd),Kh=Wb(wd),Nf=Vb(xd),
Lh=Wb(xd),Of=/^%/,of={"-":"",_:" ",0:"0"},Tb={a:function(a){return vd[a.getDay()]},A:function(a){return ud[a.getDay()]},b:function(a){return xd[a.getMonth()]},B:function(a){return wd[a.getMonth()]},c:ba("%a %b %e %X %Y"),d:function(a,c){return ca(a.getDate(),c,2)},e:function(a,c){return ca(a.getDate(),c,2)},H:function(a,c){return ca(a.getHours(),c,2)},I:function(a,c){return ca(a.getHours()%12||12,c,2)},j:function(a,c){return ca(1+D.dayOfYear(a),c,3)},L:function(a,c){return ca(a.getMilliseconds(),
c,3)},m:function(a,c){return ca(a.getMonth()+1,c,2)},M:function(a,c){return ca(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ca(a.getSeconds(),c,2)},U:function(a,c){return ca(D.sundayOfYear(a),c,2)},w:function(a){return a.getDay()},W:function(a,c){return ca(D.mondayOfYear(a),c,2)},x:ba("%m/%d/%Y"),X:ba("%H:%M:%S"),y:function(a,c){return ca(a.getFullYear()%100,c,2)},Y:function(a,c){return ca(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();
a=0<c?"-":"+";var b=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ca(b,"0",2)+ca(c,"0",2)},"%":function(){return"%"}},eh={a:function(a,c,b){Lf.lastIndex=0;return(c=Lf.exec(c.substring(b)))?(a.w=Jh.get(c[0].toLowerCase()),b+c[0].length):-1},A:function(a,c,b){Kf.lastIndex=0;return(c=Kf.exec(c.substring(b)))?(a.w=Ih.get(c[0].toLowerCase()),b+c[0].length):-1},b:function(a,c,b){Nf.lastIndex=0;return(c=Nf.exec(c.substring(b)))?(a.m=Lh.get(c[0].toLowerCase()),b+c[0].length):-1},B:function(a,c,b){Mf.lastIndex=
0;return(c=Mf.exec(c.substring(b)))?(a.m=Kh.get(c[0].toLowerCase()),b+c[0].length):-1},c:function(a,c,b){return Ub(a,Tb.c.toString(),c,b)},d:pf,e:pf,H:qf,I:qf,j:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b,b+3)))?(a.j=+c[0],b+c[0].length):-1},L:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b,b+3)))?(a.L=+c[0],b+c[0].length):-1},m:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b,b+2)))?(a.m=c[0]-1,b+c[0].length):-1},M:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b,
b+2)))?(a.M=+c[0],b+c[0].length):-1},p:function(a,c,b){c=Mh.get(c.substring(b,b+=2).toLowerCase());return null==c?-1:(a.p=c,b)},S:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b,b+2)))?(a.S=+c[0],b+c[0].length):-1},U:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b)))?(a.U=+c[0],b+c[0].length):-1},w:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b,b+1)))?(a.w=+c[0],b+c[0].length):-1},W:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b)))?(a.W=+c[0],b+c[0].length):
-1},x:function(a,c,b){return Ub(a,Tb.x.toString(),c,b)},X:function(a,c,b){return Ub(a,Tb.X.toString(),c,b)},y:function(a,c,b){Q.lastIndex=0;if(c=Q.exec(c.substring(b,b+2))){var d=+c[0];a=(a.y=d+(68<d?1900:2E3),b+c[0].length)}else a=-1;return a},Y:function(a,c,b){Q.lastIndex=0;return(c=Q.exec(c.substring(b,b+4)))?(a.y=+c[0],b+c[0].length):-1},Z:function(a,c,b){return/^[+-]\d{4}$/.test(c=c.substring(b,b+5))?(a.Z=+c,b+5):-1},"%":function(a,c,b){Of.lastIndex=0;return(a=Of.exec(c.substring(b,b+1)))?b+
a[0].length:-1}},Q=/^\s*\d+/,Mh=s.map({am:0,pm:1});ba.utc=ra;var Pf=ra("%Y-%m-%dT%H:%M:%S.%LZ");ba.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?md:Pf;md.parse=function(a){a=new Date(a);return isNaN(a)?null:a};md.toString=Pf.toString;D.second=Sa(function(a){return new Y(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});D.seconds=D.second.range;D.seconds.utc=D.second.utc.range;D.minute=Sa(function(a){return new Y(6E4*
Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+6E4*Math.floor(c))},function(a){return a.getMinutes()});D.minutes=D.minute.range;D.minutes.utc=D.minute.utc.range;D.hour=Sa(function(a){var c=a.getTimezoneOffset()/60;return new Y(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});D.hours=D.hour.range;D.hours.utc=D.hour.utc.range;D.month=Sa(function(a){a=D.day(a);a.setDate(1);return a},function(a,c){a.setMonth(a.getMonth()+
c)},function(a){return a.getMonth()});D.months=D.month.range;D.months.utc=D.month.utc.range;var Xb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],yd=[[D.second,1],[D.second,5],[D.second,15],[D.second,30],[D.minute,1],[D.minute,5],[D.minute,15],[D.minute,30],[D.hour,1],[D.hour,3],[D.hour,6],[D.hour,12],[D.day,1],[D.day,2],[D.week,1],[D.month,1],[D.month,3],[D.year,1]],Nh=[[ba("%Y"),hb],[ba("%B"),function(a){return a.getMonth()}],[ba("%b %d"),function(a){return 1!=
a.getDate()}],[ba("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[ba("%I %p"),function(a){return a.getHours()}],[ba("%I:%M"),function(a){return a.getMinutes()}],[ba(":%S"),function(a){return a.getSeconds()}],[ba(".%L"),function(a){return a.getMilliseconds()}]],Oh=rf(Nh);yd.year=D.year;D.scale=function(){return nd(s.scale.linear(),yd,Oh)};var fh={range:function(a,c,b){return s.range(+a,+c,b).map(Ta)}},Qf=yd.map(function(a){return[a[0].utc,a[1]]}),Ph=[[ra("%Y"),hb],[ra("%B"),function(a){return a.getUTCMonth()}],
[ra("%b %d"),function(a){return 1!=a.getUTCDate()}],[ra("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[ra("%I %p"),function(a){return a.getUTCHours()}],[ra("%I:%M"),function(a){return a.getUTCMinutes()}],[ra(":%S"),function(a){return a.getUTCSeconds()}],[ra(".%L"),function(a){return a.getUTCMilliseconds()}]],Qh=rf(Ph);Qf.year=D.year.utc;D.scale.utc=function(){return nd(s.scale.linear(),Qf,Qh)};s.text=Cc(function(a){return a.responseText});s.json=function(a,c){return Dc(a,"application/json",
gh,c)};s.html=function(a,c){return Dc(a,"text/html",hh,c)};s.xml=Cc(function(a){return a.responseXML});return s}();(function(l){function r(d){if(d){if("string"===typeof b[d])return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var g,e=0,m=n.length;e<m;e++)if(g=n[e]+d,"string"===typeof b[g])return g}}var n=["Webkit","Moz","ms","Ms","O"],b=document.documentElement.style;"function"===typeof define&&define.amd?define(function(){return r}):l.getStyleProperty=r})(window);
(function(l,r){function n(b){var d=parseFloat(b);return-1===b.indexOf("%")&&!isNaN(d)&&d}function b(b){var d=b("boxSizing"),q;(function(){if(d){var b=document.createElement("div");b.style.width="200px";b.style.padding="1px 2px 3px 4px";b.style.borderStyle="solid";b.style.borderWidth="1px 2px 3px 4px";b.style[d]="border-box";var e=document.body||document.documentElement;e.appendChild(b);var m=g(b);q=200===n(m.width);e.removeChild(b)}})();return function(b){"string"===typeof b&&(b=document.querySelector(b));
if(b&&"object"===typeof b&&b.nodeType){var m=g(b);if("none"===m.display){var l={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},m=0;for(b=e.length;m<b;m++)l[e[m]]=0;return l}l={};l.width=b.offsetWidth;l.height=b.offsetHeight;b=l.isBorderBox=!(!d||!m[d]||"border-box"!==m[d]);for(var t=0,r=e.length;t<r;t++){var z=e[t],N=parseFloat(m[z]);l[z]=isNaN(N)?0:N}var t=l.paddingLeft+l.paddingRight,r=l.paddingTop+l.paddingBottom,z=l.marginLeft+l.marginRight,N=l.marginTop+l.marginBottom,
aa=l.borderLeftWidth+l.borderRightWidth,Z=l.borderTopWidth+l.borderBottomWidth;b=b&&q;var F=n(m.width);!1!==F&&(l.width=F+(b?0:t+aa));m=n(m.height);!1!==m&&(l.height=m+(b?0:r+Z));l.innerWidth=l.width-(t+aa);l.innerHeight=l.height-(r+Z);l.outerWidth=l.width+z;l.outerHeight=l.height+N;return l}}}var d=document.defaultView,g=d&&d.getComputedStyle?function(b){return d.getComputedStyle(b,null)}:function(b){return b.currentStyle},e="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");
"function"===typeof define&&define.amd?define(["get-style-property/get-style-property"],b):l.getSize=b(l.getStyleProperty)})(window);
(function(l){var r=document.documentElement,n=function(){};r.addEventListener?n=function(b,g,e){b.addEventListener(g,e,!1)}:r.attachEvent&&(n=function(b,g,e){b[g+e]=e.handleEvent?function(){var b=l.event;b.target=b.target||b.srcElement;e.handleEvent.call(e,b)}:function(){var g=l.event;g.target=g.target||g.srcElement;e.call(b,g)};b.attachEvent("on"+g,b[g+e])});var b=function(){};r.removeEventListener?b=function(b,g,e){b.removeEventListener(g,e,!1)}:r.detachEvent&&(b=function(b,g,e){b.detachEvent("on"+
g,b[g+e]);try{delete b[g+e]}catch(m){b[g+e]=void 0}});r={bind:n,unbind:b};"function"===typeof define&&define.amd?define(r):l.eventie=r})(this);
(function(l){function r(b){"function"===typeof b&&(r.isReady?b():g.push(b))}function n(b){b="readystatechange"===b.type&&"complete"!==d.readyState;if(!r.isReady&&!b){r.isReady=!0;b=0;for(var m=g.length;b<m;b++)(0,g[b])()}}function b(b){b.bind(d,"DOMContentLoaded",n);b.bind(d,"readystatechange",n);b.bind(l,"load",n);return r}var d=l.document,g=[];r.isReady=!1;"function"===typeof define&&define.amd?(r.isReady="function"===typeof requirejs,define(["eventie/eventie"],b)):l.docReady=b(l.eventie)})(this);
(function(){function l(){}function r(b,g){for(var e=b.length;e--;)if(b[e].listener===g)return e;return-1}function n(b){return function(){return this[b].apply(this,arguments)}}var b=l.prototype;b.getListeners=function(b){var g=this._getEvents(),e,m;if("object"===typeof b)for(m in e={},g)g.hasOwnProperty(m)&&b.test(m)&&(e[m]=g[m]);else e=g[b]||(g[b]=[]);return e};b.flattenListeners=function(b){var g=[],e;for(e=0;e<b.length;e+=1)g.push(b[e].listener);return g};b.getListenersAsObject=function(b){var g=
this.getListeners(b),e;g instanceof Array&&(e={},e[b]=g);return e||g};b.addListener=function(b,g){var e=this.getListenersAsObject(b),m="object"===typeof g,f;for(f in e)e.hasOwnProperty(f)&&-1===r(e[f],g)&&e[f].push(m?g:{listener:g,once:!1});return this};b.on=n("addListener");b.addOnceListener=function(b,g){return this.addListener(b,{listener:g,once:!0})};b.once=n("addOnceListener");b.defineEvent=function(b){this.getListeners(b);return this};b.defineEvents=function(b){for(var g=0;g<b.length;g+=1)this.defineEvent(b[g]);
return this};b.removeListener=function(b,g){var e=this.getListenersAsObject(b),m,f;for(f in e)e.hasOwnProperty(f)&&(m=r(e[f],g),-1!==m&&e[f].splice(m,1));return this};b.off=n("removeListener");b.addListeners=function(b,g){return this.manipulateListeners(!1,b,g)};b.removeListeners=function(b,g){return this.manipulateListeners(!0,b,g)};b.manipulateListeners=function(b,g,e){var m,f,q=b?this.removeListener:this.addListener;b=b?this.removeListeners:this.addListeners;if("object"!==typeof g||g instanceof
RegExp)for(m=e.length;m--;)q.call(this,g,e[m]);else for(m in g)g.hasOwnProperty(m)&&(f=g[m])&&("function"===typeof f?q.call(this,m,f):b.call(this,m,f));return this};b.removeEvent=function(b){var g=typeof b,e=this._getEvents(),m;if("string"===g)delete e[b];else if("object"===g)for(m in e)e.hasOwnProperty(m)&&b.test(m)&&delete e[m];else delete this._events;return this};b.emitEvent=function(b,g){var e=this.getListenersAsObject(b),m,f,q,l;for(q in e)if(e.hasOwnProperty(q))for(f=e[q].length;f--;)m=e[q][f],
!0===m.once&&this.removeListener(b,m.listener),l=m.listener.apply(this,g||[]),l===this._getOnceReturnValue()&&this.removeListener(b,m.listener);return this};b.trigger=n("emitEvent");b.emit=function(b){var g=Array.prototype.slice.call(arguments,1);return this.emitEvent(b,g)};b.setOnceReturnValue=function(b){this._onceReturnValue=b;return this};b._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};b._getEvents=function(){return this._events||(this._events=
{})};"function"===typeof define&&define.amd?define(function(){return l}):"object"===typeof module&&module.exports?module.exports=l:this.EventEmitter=l}).call(this);
(function(l){function r(){}function n(d){function g(b){b.prototype.option||(b.prototype.option=function(b){d.isPlainObject(b)&&(this.options=d.extend(!0,this.options,b))})}function e(f,e){d.fn[f]=function(g){if("string"===typeof g){for(var l=b.call(arguments,1),n=0,t=this.length;n<t;n++){var r=d.data(this[n],f);if(r)if(d.isFunction(r[g])&&"_"!==g.charAt(0)){if(r=r[g].apply(r,l),void 0!==r)return r}else m("no such method '"+g+"' for "+f+" instance");else m("cannot call methods on "+f+" prior to initialization; attempted to call '"+
g+"'")}return this}return this.each(function(){var b=d.data(this,f);b?(b.option(g),b._init()):(b=new e(this,g),d.data(this,f,b))})}}if(d){var m="undefined"===typeof console?r:function(b){console.error(b)};d.bridget=function(b,d){g(d);e(b,d)}}}var b=Array.prototype.slice;"function"===typeof define&&define.amd?define(["jquery"],n):n(l.jQuery)})(window);
(function(l,r){function n(b,d){return b[g](d)}function b(b,d){b.parentNode||document.createDocumentFragment().appendChild(b);for(var e=b.parentNode.querySelectorAll(d),g=0,m=e.length;g<m;g++)if(e[g]===b)return!0;return!1}function d(b,d){b.parentNode||document.createDocumentFragment().appendChild(b);return n(b,d)}var g=function(){if(r.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],d=0,e=b.length;d<e;d++){var g=b[d]+"MatchesSelector";if(r[g])return g}}(),e;if(g){var m=document.createElement("div");
e=n(m,"div")?n:d}else e=b;"function"===typeof define&&define.amd?define(function(){return e}):window.matchesSelector=e})(this,Element.prototype);
(function(l){function r(b,d){for(var f in d)b[f]=d[f];return b}function n(b){return b.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}function b(b,d,f){function q(b,d){b&&(this.element=b,this.layout=d,this.position={x:0,y:0},this._create())}var l=f("transition"),x=f("transform"),y=l&&x,t=!!f("perspective"),B={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],z=["transform","transition","transitionDuration","transitionProperty"],
N=function(){for(var b={},d=0,e=z.length;d<e;d++){var g=z[d],m=f(g);m&&m!==g&&(b[g]=m)}return b}();r(q.prototype,b.prototype);q.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};q.prototype.handleEvent=function(b){var d="on"+b.type;if(this[d])this[d](b)};q.prototype.getSize=function(){this.size=d(this.element)};q.prototype.css=function(b){var d=this.element.style,f;for(f in b)d[N[f]||f]=b[f]};q.prototype.getPosition=function(){var b=
g(this.element),d=this.layout.options,f=d.isOriginLeft,d=d.isOriginTop,e=parseInt(b[f?"left":"right"],10),b=parseInt(b[d?"top":"bottom"],10),e=isNaN(e)?0:e,b=isNaN(b)?0:b,m=this.layout.size,e=e-(f?m.paddingLeft:m.paddingRight),b=b-(d?m.paddingTop:m.paddingBottom);this.position.x=e;this.position.y=b};q.prototype.layoutPosition=function(){var b=this.layout.size,d=this.layout.options,f={};d.isOriginLeft?(f.left=this.position.x+b.paddingLeft+"px",f.right=""):(f.right=this.position.x+b.paddingRight+"px",
f.left="");d.isOriginTop?(f.top=this.position.y+b.paddingTop+"px",f.bottom=""):(f.bottom=this.position.y+b.paddingBottom+"px",f.top="");this.css(f);this.emitEvent("layout",[this])};var aa=t?function(b,d){return"translate3d("+b+"px, "+d+"px, 0)"}:function(b,d){return"translate("+b+"px, "+d+"px)"};q.prototype._transitionTo=function(b,d){this.getPosition();var f=this.position.x,e=this.position.y,g=parseInt(b,10),m=parseInt(d,10),g=g===this.position.x&&m===this.position.y;this.setPosition(b,d);g&&!this.isTransitioning?
this.layoutPosition():(f=b-f,e=d-e,g={},m=this.layout.options,f=m.isOriginLeft?f:-f,e=m.isOriginTop?e:-e,g.transform=aa(f,e),this.transition({to:g,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0}))};q.prototype.goTo=function(b,d){this.setPosition(b,d);this.layoutPosition()};q.prototype.moveTo=y?q.prototype._transitionTo:q.prototype.goTo;q.prototype.setPosition=function(b,d){this.position.x=parseInt(b,10);this.position.y=parseInt(d,10)};q.prototype._nonTransition=function(b){this.css(b.to);
b.isCleaning&&this._removeStyles(b.to);for(var d in b.onTransitionEnd)b.onTransitionEnd[d].call(this)};q.prototype._transition=function(b){if(parseFloat(this.layout.options.transitionDuration)){var d=this._transition,f;for(f in b.onTransitionEnd)d.onEnd[f]=b.onTransitionEnd[f];for(f in b.to)d.ingProperties[f]=!0,b.isCleaning&&(d.clean[f]=!0);b.from&&this.css(b.from);this.enableTransition(b.to);this.css(b.to);this.isTransitioning=!0}else this._nonTransition(b)};var Z=x&&n(x)+",opacity";q.prototype.enableTransition=
function(){this.isTransitioning||(this.css({transitionProperty:Z,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(B,this,!1))};q.prototype.transition=q.prototype[l?"_transition":"_nonTransition"];q.prototype.onwebkitTransitionEnd=function(b){this.ontransitionend(b)};q.prototype.onotransitionend=function(b){this.ontransitionend(b)};var F={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};q.prototype.ontransitionend=function(b){if(b.target===
this.element){var d=this._transition,f=F[b.propertyName]||b.propertyName;delete d.ingProperties[f];var e;a:{e=d.ingProperties;for(var g in e){e=!1;break a}e=!0}e&&this.disableTransition();f in d.clean&&(this.element.style[b.propertyName]="",delete d.clean[f]);f in d.onEnd&&(d.onEnd[f].call(this),delete d.onEnd[f]);this.emitEvent("transitionEnd",[this])}};q.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(B,this,!1);this.isTransitioning=!1};q.prototype._removeStyles=
function(b){var d={},f;for(f in b)d[f]="";this.css(d)};var Va={transitionProperty:"",transitionDuration:""};q.prototype.removeTransitionStyles=function(){this.css(Va)};q.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])};q.prototype.remove=function(){if(l&&parseFloat(this.layout.options.transitionDuration)){var b=this;this.on("transitionEnd",function(){b.removeElem();return!0});this.hide()}else this.removeElem()};q.prototype.reveal=function(){delete this.isHidden;
this.css({display:""});var b=this.layout.options;this.transition({from:b.hiddenStyle,to:b.visibleStyle,isCleaning:!0})};q.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var b=this.layout.options;this.transition({from:b.visibleStyle,to:b.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.css({display:"none"})}}})};q.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return q}var d=document.defaultView,
g=d&&d.getComputedStyle?function(b){return d.getComputedStyle(b,null)}:function(b){return b.currentStyle};"function"===typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],b):(l.Outlayer={},l.Outlayer.Item=b(l.EventEmitter,l.getSize,l.getStyleProperty))})(window);
(function(l){function r(b,d){for(var f in d)b[f]=d[f];return b}function n(b){var d=[];if("[object Array]"===v.call(b))d=b;else if(b&&"number"===typeof b.length)for(var f=0,e=b.length;f<e;f++)d.push(b[f]);else d.push(b);return d}function b(b,d){var f=y(d,b);-1!==f&&d.splice(f,1)}function d(b){return b.replace(/(.)([A-Z])/g,function(b,d,f){return d+"-"+f}).toLowerCase()}function g(g,v,y,N,aa,Z){function F(b,d){"string"===typeof b&&(b=e.querySelector(b));if(b&&x(b)){this.element=b;this.options=r({},
this.options);this.option(d);var f=++L;this.element.outlayerGUID=f;ta[f]=this;this._create();this.options.isInitLayout&&this.layout()}else m&&m.error("Bad "+this.settings.namespace+" element: "+b)}function Va(b,d){b.prototype[d]=r({},F.prototype[d])}var L=0,ta={};F.prototype.settings={namespace:"outlayer",item:Z};F.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},
visibleStyle:{opacity:1,transform:"scale(1)"}};r(F.prototype,y.prototype);F.prototype.option=function(b){r(this.options,b)};F.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);r(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()};F.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)};F.prototype._itemize=function(b){b=this._filterFindItemElements(b);for(var d=this.settings.item,f=[],
e=0,g=b.length;e<g;e++){var m=new d(b[e],this);f.push(m)}return f};F.prototype._filterFindItemElements=function(b){b=n(b);for(var d=this.options.itemSelector,f=[],e=0,g=b.length;e<g;e++){var m=b[e];if(x(m))if(d){aa(m,d)&&f.push(m);for(var m=m.querySelectorAll(d),q=0,l=m.length;q<l;q++)f.push(m[q])}else f.push(m)}return f};F.prototype.getItemElements=function(){for(var b=[],d=0,f=this.items.length;d<f;d++)b.push(this.items[d].element);return b};F.prototype.layout=function(){this._resetLayout();this._manageStamps();
this.layoutItems(this.items,void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited);this._isLayoutInited=!0};F.prototype._init=F.prototype.layout;F.prototype._resetLayout=function(){this.getSize()};F.prototype.getSize=function(){this.size=N(this.element)};F.prototype._getMeasurement=function(b,d){var f=this.options[b],e;f?("string"===typeof f?e=this.element.querySelector(f):x(f)&&(e=f),this[b]=e?N(e)[d]:f):this[b]=0};F.prototype.layoutItems=function(b,d){b=this._getItemsForLayout(b);
this._layoutItems(b,d);this._postLayout()};F.prototype._getItemsForLayout=function(b){for(var d=[],f=0,e=b.length;f<e;f++){var g=b[f];g.isIgnored||d.push(g)}return d};F.prototype._layoutItems=function(b,d){if(b&&b.length){this._itemsOn(b,"layout",function(){this.emitEvent("layoutComplete",[this,b])});for(var f=[],e=0,g=b.length;e<g;e++){var m=b[e],q=this._getItemLayoutPosition(m);q.item=m;q.isInstant=d;f.push(q)}this._processLayoutQueue(f)}else this.emitEvent("layoutComplete",[this,b])};F.prototype._getItemLayoutPosition=
function(){return{x:0,y:0}};F.prototype._processLayoutQueue=function(b){for(var d=0,f=b.length;d<f;d++){var e=b[d];this._positionItem(e.item,e.x,e.y,e.isInstant)}};F.prototype._positionItem=function(b,d,f,e){e?b.goTo(d,f):b.moveTo(d,f)};F.prototype._postLayout=function(){var b=this._getContainerSize();b&&(this._setContainerMeasure(b.width,!0),this._setContainerMeasure(b.height,!1))};F.prototype._getContainerSize=q;F.prototype._setContainerMeasure=function(b,d){if(void 0!==b){var f=this.size;f.isBorderBox&&
(b+=d?f.paddingLeft+f.paddingRight+f.borderLeftWidth+f.borderRightWidth:f.paddingBottom+f.paddingTop+f.borderTopWidth+f.borderBottomWidth);b=Math.max(b,0);this.element.style[d?"width":"height"]=b+"px"}};F.prototype._itemsOn=function(b,d,f){function e(){g++;g===m&&f.call(q);return!0}for(var g=0,m=b.length,q=this,l=0,v=b.length;l<v;l++)b[l].on(d,e)};F.prototype.ignore=function(b){if(b=this.getItem(b))b.isIgnored=!0};F.prototype.unignore=function(b){(b=this.getItem(b))&&delete b.isIgnored};F.prototype.stamp=
function(b){if(b=this._find(b)){this.stamps=this.stamps.concat(b);for(var d=0,f=b.length;d<f;d++)this.ignore(b[d])}};F.prototype.unstamp=function(d){if(d=this._find(d))for(var f=0,e=d.length;f<e;f++){var g=d[f];b(g,this.stamps);this.unignore(g)}};F.prototype._find=function(b){if(b)return"string"===typeof b&&(b=this.element.querySelectorAll(b)),b=n(b)};F.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var b=0,d=this.stamps.length;b<d;b++)this._manageStamp(this.stamps[b])}};
F.prototype._getBoundingRect=function(){var b=this.element.getBoundingClientRect(),d=this.size;this._boundingRect={left:b.left+d.paddingLeft+d.borderLeftWidth,top:b.top+d.paddingTop+d.borderTopWidth,right:b.right-(d.paddingRight+d.borderRightWidth),bottom:b.bottom-(d.paddingBottom+d.borderBottomWidth)}};F.prototype._manageStamp=q;F.prototype._getElementOffset=function(b){var d=b.getBoundingClientRect(),f=this._boundingRect;b=N(b);return{left:d.left-f.left-b.marginLeft,top:d.top-f.top-b.marginTop,
right:f.right-d.right-b.marginRight,bottom:f.bottom-d.bottom-b.marginBottom}};F.prototype.handleEvent=function(b){var d="on"+b.type;if(this[d])this[d](b)};F.prototype.bindResize=function(){this.isResizeBound||(g.bind(l,"resize",this),this.isResizeBound=!0)};F.prototype.unbindResize=function(){g.unbind(l,"resize",this);this.isResizeBound=!1};F.prototype.onresize=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(function(){b.resize();delete b.resizeTimeout},
100)};F.prototype.resize=function(){var b=N(this.element);this.size&&b&&b.innerWidth===this.size.innerWidth||this.layout()};F.prototype.addItems=function(b){b=this._itemize(b);if(b.length)return this.items=this.items.concat(b),b};F.prototype.appended=function(b){b=this.addItems(b);b.length&&(this.layoutItems(b,!0),this.reveal(b))};F.prototype.prepended=function(b){b=this._itemize(b);if(b.length){var d=this.items.slice(0);this.items=b.concat(d);this._resetLayout();this.layoutItems(b,!0);this.reveal(b);
this.layoutItems(d)}};F.prototype.reveal=function(b){if(b&&b.length)for(var d=0,f=b.length;d<f;d++)b[d].reveal()};F.prototype.hide=function(b){if(b&&b.length)for(var d=0,f=b.length;d<f;d++)b[d].hide()};F.prototype.getItem=function(b){for(var d=0,f=this.items.length;d<f;d++){var e=this.items[d];if(e.element===b)return e}};F.prototype.getItems=function(b){if(b&&b.length){for(var d=[],f=0,e=b.length;f<e;f++){var g=this.getItem(b[f]);g&&d.push(g)}return d}};F.prototype.remove=function(d){d=n(d);var f=
this.getItems(d);if(f&&f.length){this._itemsOn(f,"remove",function(){this.emitEvent("removeComplete",[this,f])});d=0;for(var e=f.length;d<e;d++){var g=f[d];g.remove();b(g,this.items)}}};F.prototype.destroy=function(){var b=this.element.style;b.height="";b.position="";b.width="";for(var b=0,d=this.items.length;b<d;b++)this.items[b].destroy();this.unbindResize();delete this.element.outlayerGUID;f&&f.removeData(this.element,this.settings.namespace)};F.data=function(b){return(b=b&&b.outlayerGUID)&&ta[b]};
F.create=function(b,g){function q(){F.apply(this,arguments)}r(q.prototype,F.prototype);Va(q,"options");Va(q,"settings");r(q.prototype.options,g);q.prototype.settings.namespace=b;q.data=F.data;q.Item=function(){Z.apply(this,arguments)};q.Item.prototype=new Z;q.prototype.settings.item=q.Item;v(function(){for(var g=d(b),l=e.querySelectorAll(".js-"+g),g="data-"+g+"-options",v=0,t=l.length;v<t;v++){var x=l[v],n=x.getAttribute(g),r;try{r=n&&JSON.parse(n)}catch(y){m&&m.error("Error parsing "+g+" on "+x.nodeName.toLowerCase()+
(x.id?"#"+x.id:"")+": "+y);continue}n=new q(x,r);f&&f.data(x,b,n)}});f&&f.bridget&&f.bridget(b,q);return q};F.Item=Z;return F}var e=l.document,m=l.console,f=l.jQuery,q=function(){},v=Object.prototype.toString,x="object"===typeof HTMLElement?function(b){return b instanceof HTMLElement}:function(b){return b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName},y=Array.prototype.indexOf?function(b,d){return b.indexOf(d)}:function(b,d){for(var f=0,e=b.length;f<e;f++)if(b[f]===d)return f;
return-1};"function"===typeof define&&define.amd?define("eventie/eventie doc-ready/doc-ready eventEmitter/EventEmitter get-size/get-size matches-selector/matches-selector ./item".split(" "),g):l.Outlayer=g(l.eventie,l.docReady,l.EventEmitter,l.getSize,l.matchesSelector,l.Outlayer.Item)})(window);
(function(l){function r(b,d){var g=b.create("masonry");g.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var b=this.cols;for(this.colYs=[];b--;)this.colYs.push(0);this.maxY=0};g.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var b=this.items[0];this.columnWidth=(b=b&&b.element)&&d(b).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;this.cols=
Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)};g.prototype.getContainerWidth=function(){var b=d(this.options.isFitWidth?this.element.parentNode:this.element);this.containerWidth=b&&b.innerWidth};g.prototype._getItemLayoutPosition=function(b){b.getSize();var d=Math.ceil(b.size.outerWidth/this.columnWidth),d=Math.min(d,this.cols),f=this._getColGroup(d),g=Math.min.apply(Math,f),d=n(f,g),l={x:this.columnWidth*d,y:g};b=g+b.size.outerHeight;f=this.cols+1-
f.length;for(g=0;g<f;g++)this.colYs[d+g]=b;return l};g.prototype._getColGroup=function(b){if(2>b)return this.colYs;for(var d=[],f=this.cols+1-b,g=0;g<f;g++){var l=this.colYs.slice(g,g+b);d[g]=Math.max.apply(Math,l)}return d};g.prototype._manageStamp=function(b){var g=d(b);b=this._getElementOffset(b);var f=this.options.isOriginLeft?b.left:b.right,q=f+g.outerWidth,f=Math.floor(f/this.columnWidth),f=Math.max(0,f),q=Math.floor(q/this.columnWidth),q=Math.min(this.cols-1,q),g=(this.options.isOriginTop?
b.top:b.bottom)+g.outerHeight;for(b=f;b<=q;b++)this.colYs[b]=Math.max(g,this.colYs[b])};g.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var b={height:this.maxY};this.options.isFitWidth&&(b.width=this._getContainerFitWidth());return b};g.prototype._getContainerFitWidth=function(){for(var b=0,d=this.cols;--d&&0===this.colYs[d];)b++;return(this.cols-b)*this.columnWidth-this.gutter};g.prototype.resize=function(){var b=this.containerWidth;this.getContainerWidth();b!==
this.containerWidth&&this.layout()};return g}var n=Array.prototype.indexOf?function(b,d){return b.indexOf(d)}:function(b,d){for(var g=0,e=b.length;g<e;g++)if(b[g]===d)return g;return-1};"function"===typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],r):l.Masonry=r(l.Outlayer,l.getSize)})(window);window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var l=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,l):console.log.apply(console,l)}};
(function(l){function r(){}for(var n="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),b;b=n.pop();)l[b]=l[b]||r})(function(){try{return console.log(),window.console}catch(l){return window.console={}}}());
(function(l){function r(n){if("string"===typeof n.data){var b=n.handler,d=n.data.toLowerCase().split(" ");n.handler=function(g){if(this===g.target||!/textarea|select/i.test(g.target.nodeName)&&"text"!==g.target.type){var e="keypress"!==g.type&&l.hotkeys.specialKeys[g.which],m=String.fromCharCode(g.which).toLowerCase(),f="",q={};g.altKey&&"alt"!==e&&(f+="alt+");g.ctrlKey&&"ctrl"!==e&&(f+="ctrl+");g.metaKey&&!g.ctrlKey&&"meta"!==e&&(f+="meta+");g.shiftKey&&"shift"!==e&&(f+="shift+");e?q[f+e]=!0:(q[f+
m]=!0,q[f+l.hotkeys.shiftNums[m]]=!0,"shift+"===f&&(q[l.hotkeys.shiftNums[m]]=!0));e=0;for(m=d.length;e<m;e++)if(q[d[e]])return b.apply(this,arguments)}}}}l.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",
110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};l.each(["keydown","keyup","keypress"],function(){l.event.special[this]={add:r}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var l=!1,r=!1,n=!1;(function(b){b.vakata={};b.vakata.css={get_css:function(b,d,e){b=b.toLowerCase();var g=e.cssRules||e.rules,m=0;do{if(g.length&&m>g.length+5)break;if(g[m].selectorText&&g[m].selectorText.toLowerCase()==b)return!0===d?(e.removeRule&&e.removeRule(m),e.deleteRule&&e.deleteRule(m),!0):g[m]}while(g[++m]);return!1},add_css:function(d,e){if(b.jstree.css.get_css(d,!1,e))return!1;e.insertRule?e.insertRule(d+" { }",0):e.addRule(d,null,0);return b.vakata.css.get_css(d)},
remove_css:function(d,e){return b.vakata.css.get_css(d,!0,e)},add_sheet:function(d){var e=!1,g=!0;if(d.str)return d.title&&(e=b("style[id='"+d.title+"-stylesheet']")[0]),e?g=!1:(e=document.createElement("style"),e.setAttribute("type","text/css"),d.title&&e.setAttribute("id",d.title+"-stylesheet")),e.styleSheet?g?(document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet.cssText=d.str):e.styleSheet.cssText=e.styleSheet.cssText+" "+d.str:(e.appendChild(document.createTextNode(d.str)),document.getElementsByTagName("head")[0].appendChild(e)),
e.sheet||e.styleSheet;if(d.url)if(document.createStyleSheet)try{document.createStyleSheet(d.url)}catch(m){}else return e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.media="all",e.href=d.url,document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet}};var d=[],g=-1,e={},m={};b.fn.jstree=function(f){var g="string"==typeof f,m=Array.prototype.slice.call(arguments,1),l=this;if(g){if("_"==f.substring(0,1))return l;this.each(function(){var e=d[b.data(this,"jstree_instance_id")],
e=e&&b.isFunction(e[f])?e[f].apply(e,m):e;if("undefined"!==typeof e&&(0===f.indexOf("is_")||!0!==e&&!1!==e))return l=e,!1})}else this.each(function(){var g=b.data(this,"jstree_instance_id"),q=[],l=f?b.extend({},!0,f):{},x=b(this),n=!1,r=[],q=q.concat(m);x.data("jstree")&&q.push(x.data("jstree"));l=q.length?b.extend.apply(null,[!0,l].concat(q)):l;"undefined"!==typeof g&&d[g]&&d[g].destroy();g=parseInt(d.push({}),10)-1;b.data(this,"jstree_instance_id",g);l.plugins=b.isArray(l.plugins)?l.plugins:b.jstree.defaults.plugins.slice();
l.plugins.unshift("core");l.plugins=l.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");n=b.extend(!0,{},b.jstree.defaults,l);n.plugins=l.plugins;b.each(e,function(d,f){-1===b.inArray(d,n.plugins)?(n[d]=null,delete n[d]):r.push(d)});n.plugins=r;d[g]=new b.jstree._instance(g,b(this).addClass("jstree jstree-"+g),n);b.each(d[g]._get_settings().plugins,function(b,f){d[g].data[f]={}});b.each(d[g]._get_settings().plugins,function(b,f){e[f]&&
e[f].__init.apply(d[g])});setTimeout(function(){d[g]&&d[g].init()},0)});return l};b.jstree={defaults:{plugins:[]},_focused:function(){return d[g]||null},_reference:function(f){if(d[f])return d[f];var e=b(f);e.length||"string"!==typeof f||(e=b("#"+f));return e.length?d[e.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(d,e,g){this.data={core:{}};this.get_settings=function(){return b.extend(!0,{},g)};this._get_settings=function(){return g};this.get_index=function(){return d};
this.get_container=function(){return e};this.get_container_ul=function(){return e.children("ul:eq(0)")};this._set_settings=function(d){g=b.extend(!0,{},g,d)}},_fn:{},plugin:function(d,g){g=b.extend({},{__init:b.noop,__destroy:b.noop,_fn:{},defaults:!1},g);e[d]=g;b.jstree.defaults[d]=g.defaults;b.each(g._fn,function(e,g){g.plugin=d;g.old=b.jstree._fn[e];b.jstree._fn[e]=function(){var d,f=g,m=Array.prototype.slice.call(arguments);d=new b.Event("before.jstree");var q=!1;if(!0!==this.data.core.locked||
"unlock"===e||"is_locked"===e){do{if(f&&f.plugin&&-1!==b.inArray(f.plugin,this._get_settings().plugins))break;f=f.old}while(f);if(f){if(0===e.indexOf("_"))d=f.apply(this,m);else{d=this.get_container().triggerHandler(d,{func:e,inst:this,args:m,plugin:f.plugin});if(!1===d)return;"undefined"!==typeof d&&(m=d);d=f.apply(b.extend({},this,{__callback:function(b){this.get_container().triggerHandler(e+".jstree",{inst:this,args:m,rslt:b,rlbk:q})},__rollback:function(){return q=this.get_rollback()},__call_old:function(b){return f.old.apply(this,
b?Array.prototype.slice.call(arguments,1):m)}}),m)}return d}}};b.jstree._fn[e].old=g.old;b.jstree._fn[e].plugin=d})},rollback:function(f){f&&(b.isArray(f)||(f=[f]),b.each(f,function(b,f){d[f.i].set_rollback(f.h,f.d)}))}};b.jstree._fn=b.jstree._instance.prototype={};b(function(){var d=navigator.userAgent.toLowerCase(),e=(d.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(d)&&6==parseInt(e,10)){l=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(d)&&
7==parseInt(e,10)&&(r=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(d)&&/mozilla/.test(d)&&1.9>parseFloat(e,10)&&(n=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");b.vakata.css.add_sheet({str:g,title:"jstree"})});b.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",b.proxy(function(d){d=b(d.target);this.toggle_node(d)},this)).bind("mousedown.jstree",b.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(b){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){b=window.getSelection();
try{b.removeAllRanges(),b.collapse()}catch(d){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",b.proxy(function(d,e){var g=this._get_node(e.rslt.obj),m=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li").each(function(){var d=b(this);d.data("jstree")&&b.each(d.data("jstree"),function(f,e){m.data[f]&&b.isFunction(m["_"+f+"_notify"])&&m["_"+f+"_notify"].call(m,d,e)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
b.proxy(function(d,e){var g=this._get_node(e.rslt.obj),m=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li.jstree-open:not(:has(ul))").each(function(){m.load_node(this,b.noop,b.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var f,m=this.get_index(),l=this._get_settings(),x=this;b.each(l.plugins,function(b,d){try{e[d].__destroy.apply(x)}catch(f){}});this.__callback();if(this.is_focused())for(f in d)if(d.hasOwnProperty(f)&&
f!=m){d[f].set_focus();break}m===g&&(g=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});b(document).unbind(".jstree-"+m).undelegate(".jstree-"+m);d[m]=null;delete d[m]},_core_notify:function(b,d){d.opened&&this.open_node(b,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var b=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&b.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(b.data.core.to_open)},save_loaded:function(){},reload_nodes:function(d){var e=this,g=!0,m=[],l=[];d||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=b.map(b.makeArray(this.data.core.to_open),function(b){return"#"+b.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=b.map(b.makeArray(this.data.core.to_load),function(b){return"#"+
b.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(b.each(this.data.core.to_load,function(d,f){if("#"==f)return!0;b(f).length?m.push(f):l.push(f)}),m.length&&(this.data.core.to_load=l,b.each(m,function(b,d){e._is_loaded(d)||(e.load_node(d,function(){e.reload_nodes(!0)},function(){e.reload_nodes(!0)}),
g=!1)})));this.data.core.to_open.length&&b.each(this.data.core.to_open,function(b,d){e.open_node(d,!1,!0)});g&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){e.__callback({},e)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var d=this;this.data.core.to_open.length&&b.each(this.data.core.to_open,function(b,e){d.open_node(e,!1,!0)});this.__callback({})},refresh:function(b){var d=this;this.save_opened();b||(b=-1);(b=this._get_node(b))||
(b=-1);-1!==b?b.children("UL").remove():this.get_container_ul().empty();this.load_node(b,function(){d.__callback({obj:b});d.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var d=b.jstree._focused();d&&d.unset_focus();this.get_container().addClass("jstree-focused");g=this.get_index();this.__callback()}},is_focused:function(){return g==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),g=
-1);this.__callback()},_get_node:function(d){var e=b(d,this.get_container());if(e.is(".jstree")||-1==d)return-1;e=e.closest("li",this.get_container());return e.length?e:!1},_get_next:function(b,d){b=this._get_node(b);return-1===b?this.get_container().find("> ul > li:first-child"):b.length?d?0<b.nextAll("li").size()?b.nextAll("li:eq(0)"):!1:b.hasClass("jstree-open")?b.find("li:eq(0)"):0<b.nextAll("li").size()?b.nextAll("li:eq(0)"):b.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(b,
d){b=this._get_node(b);if(-1===b)return this.get_container().find("> ul > li:last-child");if(!b.length)return!1;if(d)return 0<b.prevAll("li").length?b.prevAll("li:eq(0)"):!1;if(b.prev("li").length){for(b=b.prev("li").eq(0);b.hasClass("jstree-open");)b=b.children("ul:eq(0)").children("li:last");return b}var e=b.parentsUntil(".jstree","li:eq(0)");return e.length?e:!1},_get_parent:function(b){b=this._get_node(b);if(-1==b||!b.length)return!1;b=b.parentsUntil(".jstree","li:eq(0)");return b.length?b:-1},
_get_children:function(b){b=this._get_node(b);return-1===b?this.get_container().children("ul:eq(0)").children("li"):b.length?b.children("ul:eq(0)").children("li"):!1},get_path:function(b,d){var e=[],g=this;b=this._get_node(b);if(-1===b||!b||!b.length)return!1;b.parentsUntil(".jstree","li").each(function(){e.push(d?this.id:g.get_text(this))});e.reverse();e.push(d?b.attr("id"):this.get_text(b));return e},_get_string:function(b){return this._get_settings().core.strings[b]||b},is_open:function(b){return(b=
this._get_node(b))&&-1!==b&&b.hasClass("jstree-open")},is_closed:function(b){return(b=this._get_node(b))&&-1!==b&&b.hasClass("jstree-closed")},is_leaf:function(b){return(b=this._get_node(b))&&-1!==b&&b.hasClass("jstree-leaf")},correct_state:function(b){b=this._get_node(b);if(!b||-1===b)return!1;b.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:b})},open_node:function(b,d,e){b=this._get_node(b);if(!b.length)return!1;if(!b.hasClass("jstree-closed"))return d&&
d.call(),!1;var g=e||l?0:this._get_settings().core.animation,m=this;this._is_loaded(b)?(this._get_settings().core.open_parents&&b.parentsUntil(".jstree",".jstree-closed").each(function(){m.open_node(this,!1,!0)}),g&&b.children("ul").css("display","none"),b.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),g?b.children("ul").stop(!0,!0).slideDown(g,function(){this.style.display="";m.after_open(b)}):m.after_open(b),this.__callback({obj:b}),d&&d.call()):
(b.children("a").addClass("jstree-loading"),this.load_node(b,function(){m.open_node(b,d,e)},d))},after_open:function(b){this.__callback({obj:b})},close_node:function(b,d){b=this._get_node(b);var e=d||l?0:this._get_settings().core.animation,g=this;if(!b.length||!b.hasClass("jstree-open"))return!1;e&&b.children("ul").attr("style","display:block !important");b.removeClass("jstree-open").addClass("jstree-closed");e?b.children("ul").stop(!0,!0).slideUp(e,function(){this.style.display="";g.after_close(b)}):
g.after_close(b);this.__callback({obj:b})},after_close:function(b){this.__callback({obj:b})},toggle_node:function(b){b=this._get_node(b);if(b.hasClass("jstree-closed"))return this.open_node(b);if(b.hasClass("jstree-open"))return this.close_node(b)},open_all:function(b,d,e){(b=b?this._get_node(b):-1)&&-1!==b||(b=this.get_container_ul());e?b=b.find("li.jstree-closed"):(e=b,b=b.is(".jstree-closed")?b.find("li.jstree-closed").addBack():b.find("li.jstree-closed"));var g=this;b.each(function(){var b=this;
g._is_loaded(this)?g.open_node(this,!1,!d):g.open_node(this,function(){g.open_all(b,d,e)},!d)});0===e.find("li.jstree-closed").length&&this.__callback({obj:e})},close_all:function(b,d){var e=this;(b=b?this._get_node(b):this.get_container())&&-1!==b||(b=this.get_container_ul());b.find("li.jstree-open").addBack().each(function(){e.close_node(this,!d)});this.__callback({obj:b})},clean_node:function(d){d=d&&-1!=d?b(d):this.get_container_ul();d=d.is("li")?d.find("li").addBack():d.find("li");d.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
d.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:d})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(b,d){this.get_container().empty().append(b);this.data=d;this.__callback()},load_node:function(b,d,e){this.__callback({obj:b})},_is_loaded:function(b){return!0},create_node:function(d,e,g,m,l){d=this._get_node(d);e="undefined"===typeof e?
"last":e;var t=b("<li />"),n=this._get_settings().core,r;if(-1!==d&&!d.length)return!1;if(!l&&!this._is_loaded(d))return this.load_node(d,function(){this.create_node(d,e,g,m,!0)}),!1;this.__rollback();"string"===typeof g&&(g={data:g});g||(g={});g.attr&&t.attr(g.attr);g.metadata&&t.data(g.metadata);g.state&&t.addClass("jstree-"+g.state);g.data||(g.data=this._get_string("new_node"));b.isArray(g.data)||(r=g.data,g.data=[],g.data.push(r));b.each(g.data,function(d,f){r=b("<a />");b.isFunction(f)&&(f=f.call(this,
g));if("string"==typeof f)r.attr("href","#")[n.html_titles?"html":"text"](f);else f.attr||(f.attr={}),f.attr.href||(f.attr.href="#"),r.attr(f.attr)[n.html_titles?"html":"text"](f.title),f.language&&r.addClass(f.language);r.prepend("<ins class='jstree-icon'>&#160;</ins>");!f.icon&&g.icon&&(f.icon=g.icon);f.icon&&(-1===f.icon.indexOf("/")?r.children("ins").addClass(f.icon):r.children("ins").css("background","url('"+f.icon+"') center center no-repeat"));t.append(r)});t.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===d&&(d=this.get_container(),"before"===e&&(e="first"),"after"===e&&(e="last"));switch(e){case "before":d.before(t);r=this._get_parent(d);break;case "after":d.after(t);r=this._get_parent(d);break;case "inside":case "first":d.children("ul").length||d.append("<ul />");d.children("ul").prepend(t);r=d;break;case "last":d.children("ul").length||d.append("<ul />");d.children("ul").append(t);r=d;break;default:d.children("ul").length||d.append("<ul />"),e||(e=0),r=d.children("ul").children("li").eq(e),
r.length?r.before(t):d.children("ul").append(t),r=d}if(-1===r||r.get(0)===this.get_container().get(0))r=-1;this.clean_node(r);this.__callback({obj:t,parent:r});m&&m.call(this,t);return t},get_text:function(b){b=this._get_node(b);if(!b.length)return!1;var d=this._get_settings().core.html_titles;b=b.children("a:eq(0)");if(d)return b=b.clone(),b.children("INS").remove(),b.html();b=b.contents().filter(function(){return 3==this.nodeType})[0];return b.nodeValue},set_text:function(b,d){b=this._get_node(b);
if(!b.length)return!1;b=b.children("a:eq(0)");if(this._get_settings().core.html_titles){var e=b.children("INS").clone();b.html(d).prepend(e);this.__callback({obj:b,name:d});return!0}b=b.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:b,name:d});return b.nodeValue=d},rename_node:function(b,d){b=this._get_node(b);this.__rollback();b&&b.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:b,name:d})},delete_node:function(d){d=this._get_node(d);
if(!d.length)return!1;this.__rollback();var e=this._get_parent(d),g=b([]),m=this;d.each(function(){g=g.add(m._get_prev(this))});d=d.detach();-1!==e&&0===e.find("> ul > li").length&&e.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(e);this.__callback({obj:d,prev:g,parent:e});return d},prepare_move:function(d,e,g,l,n){var t={};t.ot=b.jstree._reference(d)||this;t.o=t.ot._get_node(d);t.r=-1===e?-1:this._get_node(e);t.p="undefined"===typeof g||!1===g?"last":g;if(n||!m.o||
m.o[0]!==t.o[0]||m.r[0]!==t.r[0]||m.p!==t.p){t.ot=b.jstree._reference(t.o)||this;t.rt=b.jstree._reference(t.r)||this;if(-1!==t.r&&t.r){if(!/^(before|after)$/.test(t.p)&&!this._is_loaded(t.r))return this.load_node(t.r,function(){this.prepare_move(d,e,g,l,!0)});switch(t.p){case "before":t.cp=t.r.index();t.cr=t.rt._get_parent(t.r);break;case "after":t.cp=t.r.index()+1;t.cr=t.rt._get_parent(t.r);break;case "inside":case "first":t.cp=0;t.cr=t.r;break;case "last":t.cp=t.r.find(" > ul > li").length;t.cr=
t.r;break;default:t.cp=t.p,t.cr=t.r}}else switch(t.cr=-1,t.p){case "first":case "before":case "inside":t.cp=0;break;case "after":case "last":t.cp=t.rt.get_container().find(" > ul > li").length;break;default:t.cp=t.p}t.np=-1==t.cr?t.rt.get_container():t.cr;t.op=t.ot._get_parent(t.o);t.cop=t.o.index();-1===t.op&&(t.op=t.ot?t.ot.get_container():this.get_container());!/^(before|after)$/.test(t.p)&&t.op&&t.np&&t.op[0]===t.np[0]&&t.o.index()<t.cp&&t.cp++;t.or=t.np.find(" > ul > li:nth-child("+(t.cp+1)+
")");m=t}this.__callback(m);l&&l.call(this,m)},check_move:function(){var b=m,d=!0,e=-1===b.r?this.get_container():b.r;if(!b||!b.o||b.or[0]===b.o[0])return!1;if(!b.cy){if(b.op&&b.np&&b.op[0]===b.np[0]&&b.cp-1===b.o.index())return!1;b.o.each(function(){if(-1!==e.parentsUntil(".jstree","li").addBack().index(this))return d=!1})}return d},move_node:function(d,e,g,l,n,t){if(!n)return this.prepare_move(d,e,g,function(b){this.move_node(b,!1,!1,l,!0,t)});l&&(m.cy=!0);if(!t&&!this.check_move())return!1;this.__rollback();
e=!1;l?(e=d.o.clone(!0),e.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):e=d.o;d.or.length?d.or.before(e):(d.np.children("ul").length||b("<ul />").appendTo(d.np),d.np.children("ul:eq(0)").append(e));try{d.ot.clean_node(d.op),d.rt.clean_node(d.np),d.op.find("> ul > li").length||d.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(r){}l&&(m.cy=!0,m.oc=e);this.__callback(m);return m},_get_move:function(){return m}}})})(jQuery);
(function(b){var d,g,e;b(function(){/msie/.test(navigator.userAgent.toLowerCase())?(g=b('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),e=b('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),d=g.width()-e.width(),g.add(e).remove()):(g=b("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),d=100-g.width(),g.parent().remove())});b.jstree.plugin("ui",{__init:function(){this.data.ui.selected=b();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",b.proxy(function(d){d.preventDefault();d.currentTarget.blur();b(d.currentTarget).hasClass("jstree-loading")||this.select_node(d.currentTarget,!0,d)},this)).delegate("a","mouseenter.jstree",b.proxy(function(d){b(d.currentTarget).hasClass("jstree-loading")||
this.hover_node(d.target)},this)).delegate("a","mouseleave.jstree",b.proxy(function(d){b(d.currentTarget).hasClass("jstree-loading")||this.dehover_node(d.target)},this)).bind("reopen.jstree",b.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",b.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",b.proxy(function(){this.reselect()},this)).bind("close_node.jstree",b.proxy(function(d,e){var g=this._get_settings().ui,l=this._get_node(e.rslt.obj),
n=l&&l.length?l.children("ul").find("a.jstree-clicked"):b(),r=this;!1!==g.selected_parent_close&&n.length&&n.each(function(){r.deselect_node(this);"select_parent"===g.selected_parent_close&&r.select_node(l)})},this)).bind("delete_node.jstree",b.proxy(function(b,d){var e=this._get_settings().ui.select_prev_on_delete,g=this._get_node(d.rslt.obj),g=g&&g.length?g.find("a.jstree-clicked"):[],l=this;g.each(function(){l.deselect_node(this)});e&&g.length&&d.rslt.prev.each(function(){if(this.parentNode)return l.select_node(this),
!1})},this)).bind("move_node.jstree",b.proxy(function(b,d){d.rslt.cy&&d.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(d,e){if("undefined"===typeof d||null===d)return e?this.data.ui.selected:this.data.ui.last_selected;var g=b(d,
this.get_container());if(g.is(".jstree")||-1==d)return-1;g=g.closest("li",this.get_container());return g.length?g:!1},_ui_notify:function(b,d){d.selected&&this.select_node(b,!1)},save_selected:function(){var b=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&b.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var d=this,e=this.data.ui.to_select,e=b.map(b.makeArray(e),function(b){return"#"+b.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});b.each(e,function(b,e){e&&"#"!==e&&d.select_node(e)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(b){this.save_selected();return this.__call_old()},hover_node:function(b){b=this._get_node(b);
if(!b.length)return!1;b.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=b.children("a").addClass("jstree-hovered").parent();this._fix_scroll(b);this.__callback({obj:b})},dehover_node:function(){var b=this.data.ui.hovered,d;if(!b||!b.length)return!1;d=b.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===d[0]&&(this.data.ui.hovered=null);this.__callback({obj:b})},select_node:function(b,d,e){b=this._get_node(b);if(-1==b||!b||!b.length)return!1;var g=this._get_settings().ui,
l="on"==g.select_multiple_modifier||!1!==g.select_multiple_modifier&&e&&e[g.select_multiple_modifier+"Key"],n=!1!==g.select_range_modifier&&e&&e[g.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==b[0]&&this.data.ui.last_selected.parent()[0]===b.parent()[0],t=this.is_selected(b),r=!0,z=this;if(d){if(g.disable_selecting_children&&l&&(b.parentsUntil(".jstree","li").children("a.jstree-clicked").length||b.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
r=!1;switch(!0){case n:this.data.ui.last_selected.addClass("jstree-last-selected");b=b[b.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==g.select_limit||b.length<g.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==z.data.ui.last_selected[0]&&z.deselect_node(this)}),t=!1,r=!0):r=!1;break;case t&&!l:this.deselect_all();t=!1;r=!0;break;case !t&&!l:if(-1==g.select_limit||
0<g.select_limit)this.deselect_all(),r=!0;break;case t&&l:this.deselect_node(b);break;case !t&&l:if(-1==g.select_limit||this.data.ui.selected.length+1<=g.select_limit)r=!0}}r&&!t&&(n||(this.data.ui.last_selected=b),b.children("a").addClass("jstree-clicked"),g.selected_parent_open&&b.parents(".jstree-closed").each(function(){z.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(b),this._fix_scroll(b.eq(0)),this.__callback({obj:b,e:e}))},_fix_scroll:function(b){var e=this.get_container()[0];
e.scrollHeight>e.offsetHeight&&(b=this._get_node(b))&&-1!==b&&b.length&&b.is(":visible")&&(b=b.offset().top-this.get_container().offset().top,0>b&&(e.scrollTop=e.scrollTop+b-1),b+this.data.core.li_height+(e.scrollWidth>e.offsetWidth?d:0)>e.offsetHeight&&(e.scrollTop+=b-e.offsetHeight+this.data.core.li_height+1+(e.scrollWidth>e.offsetWidth?d:0)))},deselect_node:function(b){b=this._get_node(b);if(!b.length)return!1;this.is_selected(b)&&(b.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(b),this.data.ui.last_selected.get(0)===b.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:b}))},toggle_select:function(b){b=this._get_node(b);if(!b.length)return!1;this.is_selected(b)?this.deselect_node(b):this.select_node(b)},is_selected:function(b){return 0<=this.data.ui.selected.index(this._get_node(b))},get_selected:function(d){return d?b(d).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(d){d=d?b(d).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();d.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=b([]);this.data.ui.last_selected=!1;this.__callback({obj:d})}}});b.jstree.defaults.plugins.push("ui")})(jQuery);(function(b){b.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",b.proxy(function(b,g){if(this._get_settings().crrm.move.open_onmove){var e=this;g.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){e.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(b){return!0}}},_fn:{_show_input:function(d,g){d=this._get_node(d);var e=this._get_settings().core.rtl,m=this._get_settings().crrm.input_width_limit,f=d.children("ins").width(),l=d.find("> a:visible > ins").width()*d.find("> a:visible > ins").length,v=this.get_text(d),n=b("<div />",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
r=d.css("position","relative").append(b("<input />",{value:v,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:e?"auto":f+l+4+"px",right:e?f+l+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:b.proxy(function(){var b=d.children(".jstree-rename-input"),e=b.val();""===e&&(e=v);n.remove();b.remove();this.set_text(d,v);this.rename_node(d,e);g.call(this,d,e,v);d.css("position","")},
this),keyup:function(b){b=b.keyCode||b.which;27==b?(this.value=v,this.blur()):13==b?this.blur():r.width(Math.min(n.text("pW"+this.value).width(),m))},keypress:function(b){if(13==(b.keyCode||b.which))return!1}})).children(".jstree-rename-input");this.set_text(d,"");n.css({fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||
"",wordSpacing:r.css("wordSpacing")||""});r.width(Math.min(n.text("pW"+r[0].value).width(),m))[0].select()},rename:function(b){b=this._get_node(b);this.__rollback();var g=this.__callback;this._show_input(b,function(b,d,f){g.call(this,{obj:b,new_name:d,old_name:f})})},create:function(d,g,e,m,f){var l=this;(d=this._get_node(d))||(d=-1);this.__rollback();return this.create_node(d,g,e,function(d){var e=this._get_parent(d),g=b(d).index();m&&m.call(this,d);e.length&&e.hasClass("jstree-closed")&&this.open_node(e,
!1,!0);f?l.__callback({obj:d,name:this.get_text(d),parent:e,position:g}):this._show_input(d,function(b,d,f){l.__callback({obj:b,name:d,parent:e,position:g})})})},remove:function(b){b=this._get_node(b,!0);var g=this._get_parent(b),e=this._get_prev(b);this.__rollback();b=this.delete_node(b);!1!==b&&this.__callback({obj:b,prev:e,parent:g})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(b,g,e,m,f,l){var v=
this._get_settings().crrm.move;if(!f)return"undefined"===typeof e&&(e=v.default_position),"inside"!==e||v.default_position.match(/^(before|after)$/)||(e=v.default_position),this.__call_old(!0,b,g,e,m,!1,l);if(!0===v.always_copy||"multitree"===v.always_copy&&b.rt.get_index()!==b.ot.get_index())m=!0;this.__call_old(!0,b,g,e,m,!0,l)},cut:function(b){b=this._get_node(b,!0);if(!b||!b.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=b;this.__callback({obj:b})},copy:function(b){b=this._get_node(b,
!0);if(!b||!b.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=b;this.__callback({obj:b})},paste:function(b){b=this._get_node(b);if(!b||!b.length)return!1;var g=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,b),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,b,!1,!0);this.__callback({obj:b,
nodes:g})}}})})(jQuery);(function(b){var d=[];b.jstree._themes=!1;b.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",b.proxy(function(){var b=this._get_settings().themes;this.data.themes.dots=b.dots;this.data.themes.icons=b.icons;this.set_theme(b.theme,b.url)},this)).bind("loaded.jstree",b.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(g,e){if(!g)return!1;e||(e=b.jstree._themes+g+"/style.css");-1==b.inArray(e,d)&&(b.vakata.css.add_sheet({url:e}),d.push(e));this.data.themes.theme!=g&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=g);this.get_container().addClass("jstree-"+g);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});b(function(){!1===b.jstree._themes&&b("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return b.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===b.jstree._themes&&(b.jstree._themes="themes/")});b.jstree.defaults.plugins.push("themes")})(jQuery);(function(b){var d=[];b.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof b.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";b.each(this._get_settings().hotkeys,function(g,e){!1!==e&&-1==b.inArray(g,d)&&(b(document).bind("keydown",g,function(d){a:{var e=b.jstree._focused(),l;if(e&&e.data&&e.data.hotkeys&&e.data.hotkeys.enabled&&(l=e._get_settings().hotkeys[g])){d=l.call(e,d);break a}d=void 0}return d}),d.push(g))});this.get_container().bind("lock.jstree",b.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",b.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&(b.hasClass("jstree-open")?this.close_node(b):
this.hover_node(this._get_prev(b)));return!1},"ctrl+left":function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&(b.hasClass("jstree-open")?this.close_node(b):this.hover_node(this._get_prev(b)));return!1},"shift+left":function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&(b.hasClass("jstree-open")?this.close_node(b):this.hover_node(this._get_prev(b)));return!1},right:function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&b.length&&(b.hasClass("jstree-closed")?
this.open_node(b):this.hover_node(this._get_next(b)));return!1},"ctrl+right":function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&b.length&&(b.hasClass("jstree-closed")?this.open_node(b):this.hover_node(this._get_next(b)));return!1},"shift+right":function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&b.length&&(b.hasClass("jstree-closed")?this.open_node(b):this.hover_node(this._get_next(b)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(b){b.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(b);return!1},"shift+space":function(b){b.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(b);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(b){b.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(b,g){g.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(b,g,e){var m=this;this.load_node_json(b,function(){m.__callback({obj:m._get_node(b)});g.call(this)},e)},_is_loaded:function(d){var g=this._get_settings().json_data;
d=this._get_node(d);return-1==d||!d||!g.ajax&&!g.progressive_render&&!b.isFunction(g.data)||d.is(".jstree-open, .jstree-leaf")||0<d.children("ul").children("li").length},refresh:function(d){d=this._get_node(d);var g=this._get_settings().json_data;d&&-1!==d&&g.progressive_unload&&(b.isFunction(g.data)||g.ajax)&&d.removeData("jstree_children");return this.__call_old()},load_node_json:function(d,g,e){var m=this.get_settings().json_data,f,l=function(){};f=function(){};if((d=this._get_node(d))&&-1!==d&&
(m.progressive_render||m.progressive_unload)&&!d.is(".jstree-open, .jstree-leaf")&&0===d.children("ul").children("li").length&&d.data("jstree_children")){if(f=this._parse_json(d.data("jstree_children"),d))d.append(f),m.progressive_unload||d.removeData("jstree_children");this.clean_node(d);g&&g.call(this)}else{if(d&&-1!==d){if(d.data("jstree_is_loading"))return;d.data("jstree_is_loading",!0)}switch(!0){case !m.data&&!m.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(m.data):m.data.call(this,
d,b.proxy(function(b){(b=this._parse_json(b,d))?(-1!==d&&d?(d.append(b).children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(b.children()),this.clean_node(d),g&&g.call(this)):(-1!==d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),m.correct_state&&this.correct_state(d)):m.correct_state&&this.get_container().children("ul").empty(),e&&e.call(this))},this));break;
case !!m.data&&!m.ajax||!!m.data&&!!m.ajax&&(!d||-1===d):d&&-1!=d||((f=this._parse_json(m.data,d))?(this.get_container().children("ul").empty().append(f.children()),this.clean_node()):m.correct_state&&this.get_container().children("ul").empty());g&&g.call(this);break;case !m.data&&!!m.ajax||!!m.data&&!!m.ajax&&d&&-1!==d:l=function(b,f,g){var l=this.get_settings().json_data.ajax.error;l&&l.call(this,b,f,g);-1!=d&&d.length?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),
"success"===f&&m.correct_state&&this.correct_state(d)):"success"===f&&m.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},f=function(e,f,n){var t=this.get_settings().json_data.ajax.success;t&&(e=t.call(this,e,f,n)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,"")||!b.isArray(e)&&!b.isPlainObject(e))return l.call(this,n,f,"");(e=this._parse_json(e,d))?(-1!==d&&d?(d.append(e).children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading")):
this.get_container().children("ul").empty().append(e.children()),this.clean_node(d),g&&g.call(this)):-1!==d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),m.correct_state&&(this.correct_state(d),g&&g.call(this))):m.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},m.ajax.context=this,m.ajax.error=l,m.ajax.success=f,m.ajax.dataType||(m.ajax.dataType="json"),b.isFunction(m.ajax.url)&&(m.ajax.url=m.ajax.url.call(this,d)),
b.isFunction(m.ajax.data)&&(m.ajax.data=m.ajax.data.call(this,d)),b.ajax(m.ajax)}}},_parse_json:function(d,g,e){var m=!1,f=this._get_settings(),l=f.json_data,v=f.core.html_titles,n;if(!d)return m;l.progressive_unload&&g&&-1!==g&&g.data("jstree_children",m);if(b.isArray(d)){m=b("<ul>");if(!d.length)return!1;f=0;for(l=d.length;f<l;f++)n=this._parse_json(d[f],g,!0),n.length&&(m=m.append(n));m=m.children()}else{"string"==typeof d&&(d={data:d});if(!d.data&&""!==d.data)return m;m=b("<li />");d.attr&&m.attr(d.attr);
d.metadata&&m.data(d.metadata);d.state&&m.addClass("jstree-"+d.state);b.isArray(d.data)||(n=d.data,d.data=[],d.data.push(n));b.each(d.data,function(e,f){n=b("<a />");b.isFunction(f)&&(f=f.call(this,d));if("string"==typeof f)n.attr("href","#")[v?"html":"text"](f);else f.attr||(f.attr={}),f.attr.href||(f.attr.href="#"),n.attr(f.attr)[v?"html":"text"](f.title),f.language&&n.addClass(f.language);n.prepend("<ins class='jstree-icon'>&#160;</ins>");!f.icon&&d.icon&&(f.icon=d.icon);f.icon&&(-1===f.icon.indexOf("/")?
n.children("ins").addClass(f.icon):n.children("ins").css("background","url('"+f.icon+"') center center no-repeat"));m.append(n)});m.prepend("<ins class='jstree-icon'>&#160;</ins>");d.children&&(l.progressive_render&&"open"!==d.state?m.addClass("jstree-closed").data("jstree_children",d.children):(l.progressive_unload&&m.data("jstree_children",d.children),b.isArray(d.children)&&d.children.length&&(n=this._parse_json(d.children,g,!0),n.length&&(g=b("<ul />"),g.append(n),m.append(g)))))}e||(e=b("<ul />"),
e.append(m),m=e);return m},get_json:function(d,g,e,m){var f=[],l=this._get_settings(),v=this,n,r,t,B,z,N;(d=this._get_node(d))&&-1!==d||(d=this.get_container().find("> ul > li"));g=b.isArray(g)?g:["id","class"];!m&&this.data.types&&g.push(l.types.type_attr);e=b.isArray(e)?e:[];d.each(function(){t=b(this);n={data:[]};g.length&&(n.attr={});b.each(g,function(b,d){(r=t.attr(d))&&r.length&&r.replace(/jstree[^ ]*/ig,"").length&&(n.attr[d]=(" "+r).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))});t.hasClass("jstree-open")&&(n.state="open");t.hasClass("jstree-closed")&&(n.state="closed");t.data()&&(n.metadata=t.data());B=t.children("a");B.each(function(){z=b(this);e.length||-1!==b.inArray("languages",l.plugins)||z.children("ins").get(0).style.backgroundImage.length||z.children("ins").get(0).className&&z.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(N=!1,-1!==b.inArray("languages",l.plugins)&&b.isArray(l.languages)&&l.languages.length&&b.each(l.languages,
function(b,d){if(z.hasClass(d))return N=d,!1}),r={attr:{},title:v.get_text(z,N)},b.each(e,function(b,d){r.attr[d]=(" "+(z.attr(d)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==b.inArray("languages",l.plugins)&&b.isArray(l.languages)&&l.languages.length&&b.each(l.languages,function(b,d){if(z.hasClass(d))return r.language=d,!0}),z.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(r.icon=z.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),z.children("ins").get(0).style.backgroundImage.length&&(r.icon=z.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):r=v.get_text(z);1<B.length?n.data.push(r):n.data=r});t=t.find("> ul > li");t.length&&(n.children=v.get_json(t,g,e,!0));f.push(n)});return f}}})})(jQuery);(function(b){var d=!1;b.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(g){var e=this._get_settings().languages,
m=!1,f=".jstree-"+this.get_index()+" a";if(!b.isArray(e)||0===e.length)return!1;if(-1==b.inArray(g,e))if(e[g])g=e[g];else return!1;if(g==this.data.languages.current_language)return!0;m=b.vakata.css.get_css(f+"."+this.data.languages.current_language,!1,d);!1!==m&&(m.style.display="none");m=b.vakata.css.get_css(f+"."+g,!1,d);!1!==m&&(m.style.display="");this.data.languages.current_language=g;this.__callback(g);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(d,
e){var m=this._get_settings().languages,f=this._get_settings().core.strings;b.isArray(m)&&m.length&&(e=e&&-1!=b.inArray(e,m)?e:this.data.languages.current_language);return f[e]&&f[e][d]?f[e][d]:f[d]?f[d]:d},get_text:function(d,e){d=this._get_node(d)||this.data.ui.last_selected;if(!d.size())return!1;var m=this._get_settings().languages,f=this._get_settings().core.html_titles;b.isArray(m)&&m.length?(e=e&&-1!=b.inArray(e,m)?e:this.data.languages.current_language,d=d.children("a."+e)):d=d.children("a:eq(0)");
if(f)return d=d.clone(),d.children("INS").remove(),d.html();d=d.contents().filter(function(){return 3==this.nodeType})[0];return d.nodeValue},set_text:function(d,e,m){d=this._get_node(d)||this.data.ui.last_selected;if(!d.size())return!1;var f=this._get_settings().languages,l=this._get_settings().core.html_titles;b.isArray(f)&&f.length?(m=m&&-1!=b.inArray(m,f)?m:this.data.languages.current_language,d=d.children("a."+m)):d=d.children("a:eq(0)");if(l)return f=d.children("INS").clone(),d.html(e).prepend(f),
this.__callback({obj:d,name:e,lang:m}),!0;d=d.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:d,name:e,lang:m});return d.nodeValue=e},_load_css:function(){var g=this._get_settings().languages,e="/* languages css */",m=".jstree-"+this.get_index()+" a",f;if(b.isArray(g)&&g.length){this.data.languages.current_language=g[0];for(f=0;f<g.length;f++)e+=m+"."+g[f]+" {",g[f]!=this.data.languages.current_language&&(e+=" display:none; "),e+=" } ";d=b.vakata.css.add_sheet({str:e,
title:"jstree-languages"})}},create_node:function(d,e,m,f){return this.__call_old(!0,d,e,m,function(d){var e=this._get_settings().languages,g=d.children("a"),m;if(b.isArray(e)&&e.length){for(m=0;m<e.length;m++)g.is("."+e[m])||d.append(g.eq(0).clone().removeClass(e.join(" ")).addClass(e[m]));g.not("."+e.join(", .")).remove()}f&&f.call(this,d)})}}})})(jQuery);(function(b){b.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof b.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var d=this._get_settings().cookies,g;d.save_loaded&&(g=b.cookie(d.save_loaded))&&g.length&&(this.data.core.to_load=g.split(","));d.save_opened&&(g=b.cookie(d.save_opened))&&g.length&&(this.data.core.to_open=g.split(","));d.save_selected&&(g=b.cookie(d.save_selected))&&g.length&&this.data.ui&&(this.data.ui.to_select=g.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",b.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
b.proxy(function(b){this._get_settings().cookies.auto_save&&this.save_cookie((b.handleObj.namespace+b.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(d){if(!this.data.core.refreshing){var g=this._get_settings().cookies;if(d)switch(d){case "open_node":case "close_node":g.save_opened&&(this.save_opened(),b.cookie(g.save_opened,this.data.core.to_open.join(","),
g.cookie_options));g.save_loaded&&(this.save_loaded(),b.cookie(g.save_loaded,this.data.core.to_load.join(","),g.cookie_options));break;case "select_node":case "deselect_node":g.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(g.save_selected,this.data.ui.to_select.join(","),g.cookie_options))}else g.save_loaded&&(this.save_loaded(),b.cookie(g.save_loaded,this.data.core.to_load.join(","),g.cookie_options)),g.save_opened&&(this.save_opened(),b.cookie(g.save_opened,this.data.core.to_open.join(","),
g.cookie_options)),g.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(g.save_selected,this.data.ui.to_select.join(","),g.cookie_options))}}}})})(jQuery);(function(b){b.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",b.proxy(function(b,g){var e=this._get_node(g.rslt.obj),e=-1===e?this.get_container().children("ul"):e.children("ul");this.sort(e)},this)).bind("rename_node.jstree create_node.jstree create.jstree",b.proxy(function(b,g){this.sort(g.rslt.obj.parent())},
this)).bind("move_node.jstree",b.proxy(function(b,g){var e=-1==g.rslt.np?this.get_container():g.rslt.np;this.sort(e.children("ul"))},this))},defaults:function(b,g){return this.get_text(b)>this.get_text(g)?1:-1},_fn:{sort:function(d){var g=this._get_settings().sort,e=this;d.append(b.makeArray(d.children("li")).sort(b.proxy(g,e)));d.find("> li > ul").each(function(){e.sort(b(this))});this.clean_node(d)}}})})(jQuery);(function(b){var d=!1,g=!1,e=!1,m=!1,f=!1,l=!1,v=!1,n=!1,r=!1;b.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(d,e,f){b.vakata.dnd.is_drag&&b.vakata.drag_stop({});try{d.currentTarget.unselectable="on",d.currentTarget.onselectstart=function(){return!1},d.currentTarget.style&&(d.currentTarget.style.MozUserSelect="none")}catch(g){}b.vakata.dnd.init_x=d.pageX;b.vakata.dnd.init_y=d.pageY;b.vakata.dnd.user_data=e;b.vakata.dnd.is_down=!0;b.vakata.dnd.helper=b("<div id='vakata-dragged' />").html(f);
b(document).bind("mousemove",b.vakata.dnd.drag);b(document).bind("mouseup",b.vakata.dnd.drag_stop);return!1},drag:function(d){if(b.vakata.dnd.is_down){if(!b.vakata.dnd.is_drag)if(5<Math.abs(d.pageX-b.vakata.dnd.init_x)||5<Math.abs(d.pageY-b.vakata.dnd.init_y))b.vakata.dnd.helper.appendTo("body"),b.vakata.dnd.is_drag=!0,b(document).triggerHandler("drag_start.vakata",{event:d,data:b.vakata.dnd.user_data});else return;if("mousemove"===d.type){var e=b(document),g=e.scrollTop(),e=e.scrollLeft();20>d.pageY-
g?(l&&"down"===v&&(clearInterval(l),l=!1),l||(v="up",l=setInterval(function(){b(document).scrollTop(b(document).scrollTop()-b.vakata.dnd.scroll_spd)},150))):l&&"up"===v&&(clearInterval(l),l=!1);20>b(window).height()-(d.pageY-g)?(l&&"up"===v&&(clearInterval(l),l=!1),l||(v="down",l=setInterval(function(){b(document).scrollTop(b(document).scrollTop()+b.vakata.dnd.scroll_spd)},150))):l&&"down"===v&&(clearInterval(l),l=!1);20>d.pageX-e?(f&&"right"===n&&(clearInterval(f),f=!1),f||(n="left",f=setInterval(function(){b(document).scrollLeft(b(document).scrollLeft()-
b.vakata.dnd.scroll_spd)},150))):f&&"left"===n&&(clearInterval(f),f=!1);20>b(window).width()-(d.pageX-e)?(f&&"left"===n&&(clearInterval(f),f=!1),f||(n="right",f=setInterval(function(){b(document).scrollLeft(b(document).scrollLeft()+b.vakata.dnd.scroll_spd)},150))):f&&"right"===n&&(clearInterval(f),f=!1)}b.vakata.dnd.helper.css({left:d.pageX+b.vakata.dnd.helper_left+"px",top:d.pageY+b.vakata.dnd.helper_top+"px"});b(document).triggerHandler("drag.vakata",{event:d,data:b.vakata.dnd.user_data})}},drag_stop:function(d){f&&
clearInterval(f);l&&clearInterval(l);b(document).unbind("mousemove",b.vakata.dnd.drag);b(document).unbind("mouseup",b.vakata.dnd.drag_stop);b(document).triggerHandler("drag_stop.vakata",{event:d,data:b.vakata.dnd.user_data});b.vakata.dnd.helper.remove();b.vakata.dnd.init_x=0;b.vakata.dnd.init_y=0;b.vakata.dnd.user_data={};b.vakata.dnd.is_down=!1;b.vakata.dnd.is_drag=!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});b.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",b.proxy(function(f){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.themes&&(e.attr("class","jstree-"+this.data.themes.theme),m&&m.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
f.currentTarget===f.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==f.target&&(f=b.jstree._reference(f.target),f.data.dnd.foreign?(f=f._get_settings().dnd.drag_check.call(this,{o:d,r:f.get_container(),is_root:!0}),!0!==f&&!0!==f.inside&&!0!==f.before&&!0!==f.after||b.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(f.prepare_move(d,f.get_container(),"last"),f.check_move()&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",b.proxy(function(e){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&e.currentTarget===e.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var f=b.jstree._reference(e.currentTarget);f.data.dnd.foreign?(e=f._get_settings().dnd.drag_check.call(this,{o:d,r:f.get_container(),is_root:!0}),!0!==e&&!0!==e.inside&&!0!==e.before&&!0!==e.after||f._get_settings().dnd.drag_finish.call(this,
{o:d,r:f.get_container(),is_root:!0})):f.move_node(d,f.get_container(),"last",e[f._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",b.proxy(function(d){if(d.relatedTarget&&d.relatedTarget.id&&"jstree-marker-line"===d.relatedTarget.id)return!1;b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",b.proxy(function(d){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){var e=this.get_container()[0];d.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft+=b.vakata.dnd.scroll_spd},e),100)):d.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft-=b.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);d.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop+=b.vakata.dnd.scroll_spd},e),100)):d.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop-=
b.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&e&&m&&(e.hide(),m.hide())},this)).delegate("a","mousedown.jstree",b.proxy(function(b){if(1===b.which)return this.start_drag(b.currentTarget,b),!1},this)).delegate("a","mouseenter.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_enter(d.currentTarget)},this)).delegate("a","mousemove.jstree",
b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(g&&g.length&&g.children("a")[0]===d.currentTarget||this.dnd_enter(d.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=b(d.target).offset()),this.data.dnd.w=(d.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",b.proxy(function(d){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){if(d.relatedTarget&&
d.relatedTarget.id&&"jstree-marker-line"===d.relatedTarget.id)return!1;e&&e.hide();m&&m.hide();this.data.dnd.mto=setTimeout(function(b){return function(){b.dnd_leave(d)}}(this),0)}},this)).delegate("a","mouseup.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_finish(d)},this));b(document).bind("drag_stop.vakata",b.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);
this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;e&&e.css({top:"-2000px"});m&&m.css({top:"-2000px"})},this)).bind("drag_start.vakata",b.proxy(function(d,e){if(e.data.jstree){var f=b(e.event.target);f.closest(".jstree").hasClass("jstree-"+
this.get_index())&&this.dnd_enter(f)}},this));var f=this._get_settings().dnd;f.drag_target&&b(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),b.proxy(function(f){d=f.target;b.vakata.dnd.drag_start(f,{jstree:!0,obj:f.target},"<ins class='jstree-icon'></ins>"+b(f.target).text());this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),m&&m.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));
b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var g=this.get_container();this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=parseInt(g.height(),10);this.data.dnd.foreign=!0;f.preventDefault()},this));f.drop_target&&b(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),b.proxy(function(e){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:d,r:b(e.target),e:e})&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),b.proxy(function(d){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),b.proxy(function(e){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:d,r:b(e.target),e:e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(b){return!0},drop_finish:b.noop,drag_target:".jstree-draggable",drag_finish:b.noop,drag_check:function(b){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(g&&g.length){this.data.dnd.off=g.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+g.width());if(this.data.dnd.foreign){var b=this._get_settings().dnd.drag_check.call(this,{o:d,r:g});this.data.dnd.after=b.after;this.data.dnd.before=b.before;
this.data.dnd.inside=b.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(d,g,"before");this.data.dnd.before=this.check_move();this.prepare_move(d,g,"after");this.data.dnd.after=this.check_move();this._is_loaded(g)?(this.prepare_move(d,g,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var d=["before","inside","after"],f=!1,g=this._get_settings().core.rtl,
d=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];b.each(d,b.proxy(function(d,e){if(this.data.dnd[e])return b.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),f=e,!1},this));!1===f&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");d=g?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(f){case "before":e.css({left:d+"px",top:this.data.dnd.off.top-6+"px"}).show();m&&m.css({left:d+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":e.css({left:d+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();m&&m.css({left:d+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":e.css({left:d+(g?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();m&&m.hide();break;default:e.hide(),
m&&m.hide()}return r=f}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(g,b.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(b){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:d,r:g,p:r}):(this.dnd_prepare(),this.move_node(d,g,r,b[this._get_settings().dnd.copy_modifier+"Key"]));g=d=!1;e.hide();m&&m.hide()},dnd_enter:function(d){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var e=this._get_settings().dnd;this.data.dnd.prepared=!1;g=this._get_node(d);e.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(b.proxy(this.dnd_prepare,this),e.check_timeout)):this.dnd_prepare();e.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),g&&g.length&&g.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(b.proxy(this.dnd_open,this),e.open_timeout))):g&&g.length&&g.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(d){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");e.hide();m&&m.hide();g&&g[0]===d.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(f,g){d=this._get_node(f);this.data.ui&&this.is_selected(d)&&(d=this._get_node(null,!0));var l=1<d.length?this._get_string("multiple_selection"):this.get_text(d),
q=this.get_container();this._get_settings().core.html_titles||(l=l.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));b.vakata.dnd.drag_start(g,{jstree:!0,obj:d},"<ins class='jstree-icon'></ins>"+l);this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),m&&m.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=q.offset();this.data.dnd.cw=parseInt(q.width(),10);this.data.dnd.ch=parseInt(q.height(),
10);this.data.dnd.active=!0}}});b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});e=b("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(b){e.hide();m.hide();b.preventDefault();b.stopImmediatePropagation();return!1}).appendTo("body");m=b("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(b){if(g&&g.length)return g.children("a").trigger(b),b.preventDefault(),b.stopImmediatePropagation(),!1}).bind("mouseleave",function(d){var f=b(d.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
g&&g.length)return g.children("a").trigger(d),e.hide(),m.hide(),d.preventDefault(),d.stopImmediatePropagation(),!1}).appendTo("body");b(document).bind("drag_start.vakata",function(b,d){d.data.jstree&&(e.show(),m&&m.show())});b(document).bind("drag_stop.vakata",function(b,d){d.data.jstree&&(e.hide(),m&&m.hide())})})})(jQuery);(function(b){b.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=b.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",b.proxy(function(b,g){this._prepare_checkboxes(g.rslt.obj)},this)).bind("loaded.jstree",b.proxy(function(b){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",b.proxy(function(b){b.preventDefault();this._get_node(b.target).hasClass("jstree-checked")?this.uncheck_node(b.target):
this.check_node(b.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return b.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(b){return["check_"+(b[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(b,g){g.checked&&this.check_node(b,!1)},_prepare_checkboxes:function(d){d=d&&-1!=d?this._get_node(d):this.get_container().find("> ul > li");if(!1!==d){var g,e=this,m,f=this._get_settings().checkbox.two_state,l=this._get_settings().checkbox.real_checkboxes,v=this._get_settings().checkbox.real_checkboxes_names;d.each(function(){m=b(this);g=m.is("li")&&(m.hasClass("jstree-checked")||l&&m.children(":checked").length)?"jstree-checked":"jstree-unchecked";m.find("li").addBack().each(function(){var d=
b(this),m;d.children("a"+(e.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":g);l&&(d.children(":checkbox").length?d.children(":checkbox").addClass("jstree-real-checkbox"):(m=v.call(e,d),d.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+m[0]+"' name='"+m[0]+"' value='"+m[1]+"' />")));f?(d.hasClass("jstree-checked")||d.children(":checked").length)&&
d.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===g||d.hasClass("jstree-checked")||d.children(":checked").length)&&d.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||d.find(".jstree-checked").parent().parent().each(function(){e._repair_state(this)})}},change_state:function(d,g){d=this._get_node(d);var e=!1,m=this._get_settings().checkbox.real_checkboxes;if(!d||-1===d)return!1;g=!1===g||!0===g?g:d.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)g?(d.removeClass("jstree-checked").addClass("jstree-unchecked"),m&&d.children(":checkbox").prop("checked",!1)):(d.removeClass("jstree-unchecked").addClass("jstree-checked"),m&&d.children(":checkbox").prop("checked",!0));else{if(g){e=d.find("li").addBack();if(!e.filter(".jstree-checked, .jstree-undetermined").length)return!1;e.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");m&&e.children(":checkbox").prop("checked",!1)}else{e=
d.find("li").addBack();if(!e.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;e.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");m&&e.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=d);this.data.checkbox.last_selected=d}d.parentsUntil(".jstree","li").each(function(){var d=b(this);if(g){if(d.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return d.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
m&&d.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");m&&d.children(":checkbox").prop("checked",!1)}else{if(d.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return d.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),m&&d.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");m&&d.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(d);return!0},check_node:function(b){if(this.change_state(b,!1)){b=this._get_node(b);if(this._get_settings().checkbox.checked_parent_open){var g=this;b.parents(".jstree-closed").each(function(){g.open_node(this,!1,!0)})}this.__callback({obj:b})}},uncheck_node:function(b){this.change_state(b,
!0)&&this.__callback({obj:this._get_node(b)})},check_all:function(){var b=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){b.change_state(this,!1)});this.__callback()},uncheck_all:function(){var b=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){b.change_state(this,!0)});this.__callback()},is_checked:function(b){b=this._get_node(b);
return b.length?b.is(".jstree-checked"):!1},get_checked:function(b,g){b=b&&-1!==b?this._get_node(b):this.get_container();return g||this._get_settings().checkbox.two_state?b.find(".jstree-checked"):b.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(b,g){b=b&&-1!==b?this._get_node(b):this.get_container();return g||this._get_settings().checkbox.two_state?b.find(".jstree-unchecked"):b.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(b){b=this._get_node(b);if(b.length)if(this._get_settings().checkbox.two_state)b.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var g=this._get_settings().checkbox.real_checkboxes,
e=b.find("> ul > .jstree-checked").length,m=b.find("> ul > .jstree-undetermined").length,f=b.find("> ul > li").length;0===f?b.hasClass("jstree-undetermined")&&this.change_state(b,!1):0===e&&0===m?this.change_state(b,!0):e===f?this.change_state(b,!1):(b.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),g&&b.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var d=
this,g=this.data.ui.to_select,g=b.map(b.makeArray(g),function(b){return"#"+b.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();b.each(g,function(b,g){d.check_node(g)});this.__callback()}else this.__call_old()},save_loaded:function(){var b=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&b.data.core.to_load.push("#"+this.id)})}}});
b(function(){b.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(b){b.vakata.xslt=function(d,g,f){var l=!1,v,n,r;if(!1===l&&window.ActiveXObject)try{l=new ActiveXObject("Msxml2.XSLTemplate"),n=new ActiveXObject("Msxml2.DOMDocument"),n.loadXML(d),r=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),r.loadXML(g),l.stylesheet=r,v=l.createProcessor(),v.input=n,v.transform(),l=v.output}catch(t){}d=b.parseXML(d);g=b.parseXML(g);!1===l&&
"undefined"!==typeof XSLTProcessor&&(v=new XSLTProcessor,v.importStylesheet(g),l=v.transformToFragment(d,document),l=b("<div />").append(l).html());!1===l&&"undefined"!==typeof d.transformNode&&(l=d.transformNode(g));f.call(null,l)};var d={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
g=function(b){return b.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};b.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(b,d,f){var g=this;this.load_node_xml(b,function(){g.__callback({obj:g._get_node(b)});d.call(this)},f)},_is_loaded:function(d){var g=this._get_settings().xml_data;d=this._get_node(d);return-1==d||
!d||!g.ajax&&!b.isFunction(g.data)||d.is(".jstree-open, .jstree-leaf")||0<d.children("ul").children("li").size()},load_node_xml:function(d,g,f){var l=this.get_settings().xml_data,v=function(){},n=function(){};if((d=this._get_node(d))&&-1!==d){if(d.data("jstree_is_loading"))return;d.data("jstree_is_loading",!0)}switch(!0){case !l.data&&!l.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(l.data):l.data.call(this,d,b.proxy(function(f){this.parse_xml(f,b.proxy(function(f){f&&(f=
f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=b(f),-1!==d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.append(f),d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()),l.clean_node&&this.clean_node(d),g&&g.call(this)):d&&-1!==d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),l.correct_state&&(this.correct_state(d),g&&g.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},this));break;case !!l.data&&!l.ajax||!!l.data&&!!l.ajax&&(!d||-1===d):d&&-1!=d||this.parse_xml(l.data,b.proxy(function(f){f?(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length&&(f=b(f),this.get_container().children("ul").empty().append(f.children()),l.clean_node&&this.clean_node(d),g&&g.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},this));break;case !l.data&&!!l.ajax||!!l.data&&!!l.ajax&&d&&-1!==d:v=function(b,g,m){var v=this.get_settings().xml_data.ajax.error;
v&&v.call(this,b,g,m);-1!==d&&d.length?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),"success"===g&&l.correct_state&&this.correct_state(d)):"success"===g&&l.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},n=function(f,n,r){f=r.responseText;var x=this.get_settings().xml_data.ajax.success;x&&(f=x.call(this,f,n,r)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return v.call(this,r,n,"");this.parse_xml(f,
b.proxy(function(f){f&&(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=b(f),-1!==d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.append(f),d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()),l.clean_node&&this.clean_node(d),g&&g.call(this)):d&&-1!==d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),l.correct_state&&(this.correct_state(d),g&&g.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},l.ajax.context=this,l.ajax.error=v,l.ajax.success=n,l.ajax.dataType||(l.ajax.dataType="xml"),b.isFunction(l.ajax.url)&&(l.ajax.url=l.ajax.url.call(this,d)),b.isFunction(l.ajax.data)&&(l.ajax.data=l.ajax.data.call(this,d)),b.ajax(l.ajax)}},parse_xml:function(e,g){var f=this._get_settings().xml_data;b.vakata.xslt(e,d[f.xsl],g)},get_xml:function(d,m,f,l,v){var n="",r=this._get_settings(),t=this,B,z,N,aa,Z;d||(d="flat");v||(v=0);(m=this._get_node(m))&&-1!==m||(m=this.get_container().find("> ul > li"));
f=b.isArray(f)?f:["id","class"];!v&&this.data.types&&-1===b.inArray(r.types.type_attr,f)&&f.push(r.types.type_attr);l=b.isArray(l)?l:[];v||(r.xml_data.get_include_preamble&&(n+='<?xml version="1.0" encoding="UTF-8"?>'),n+="<root>");m.each(function(){n+="<item";N=b(this);b.each(f,function(b,d){var f=N.attr(d);r.xml_data.get_skip_empty&&"undefined"===typeof f||(n+=" "+d+'="'+g((" "+(f||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});N.hasClass("jstree-open")&&
(n+=' state="open"');N.hasClass("jstree-closed")&&(n+=' state="closed"');"flat"===d&&(n+=' parent_id="'+g(v)+'"');n+=">";n+="<content>";aa=N.children("a");aa.each(function(){B=b(this);Z=!1;n+="<name";-1!==b.inArray("languages",r.plugins)&&b.each(r.languages,function(b,d){if(B.hasClass(d))return n+=' lang="'+g(d)+'"',Z=d,!1});l.length&&b.each(l,function(b,d){var f=B.attr(d);r.xml_data.get_skip_empty&&"undefined"===typeof f||(n+=" "+d+'="'+g((" "+f||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"')});B.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(n+=' icon="'+g(B.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');B.children("ins").get(0).style.backgroundImage.length&&(n+=' icon="'+g(B.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');n+=">";n+="<![CDATA["+
t.get_text(B,Z)+"]]\x3e";n+="</name>"});n+="</content>";z=N[0].id||!0;N=N.find("> ul > li");z=N.length?t.get_xml(d,N,f,l,z):"";"nest"==d&&(n+=z);n+="</item>";"flat"==d&&(n+=z)});v||(n+="</root>");return n}}})})(jQuery);(function(b){8<=b().jquery.split(".")[1]?(b.expr[":"].jstree_contains=b.expr.createPseudo(function(b){return function(g){return 0<=(g.textContent||g.innerText||"").toLowerCase().indexOf(b.toLowerCase())}}),b.expr[":"].jstree_title_contains=b.expr.createPseudo(function(b){return function(g){return 0<=
(g.getAttribute("title")||"").toLowerCase().indexOf(b.toLowerCase())}})):(b.expr[":"].jstree_contains=function(b,g,e){return 0<=(b.textContent||b.innerText||"").toLowerCase().indexOf(e[3].toLowerCase())},b.expr[":"].jstree_title_contains=function(b,g,e){return 0<=(b.getAttribute("title")||"").toLowerCase().indexOf(e[3].toLowerCase())});b.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=b();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(d,g){b(this).children("ul").find("li").hide().removeClass("jstree-last");g.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){b(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){b(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(d,g){if(""===b.trim(d))this.clear_search();else{var e=
this.get_settings().search,m=this,f=function(){};this.data.search.str=d;if(!g&&!1!==e.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(b,d,f){var e=this.get_settings().search.ajax.success;e&&(b=e.call(this,b,d,f)||b);this.data.search.to_open=b;this._search_open()};e.ajax.context=this;e.ajax.error=function(){};e.ajax.success=f;b.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,d));b.isFunction(e.ajax.data)&&(e.ajax.data=
e.ajax.data.call(this,d));e.ajax.data||(e.ajax.data={search_string:d});if(!e.ajax.dataType||/^json/.exec(e.ajax.dataType))e.ajax.dataType="json";b.ajax(e.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+e.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){m.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:d})}},clear_search:function(d){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=b()},_search_open:function(d){var g=this;d=!0;var e=[],m=[];this.data.search.to_open.length&&(b.each(this.data.search.to_open,function(d,g){if("#"==g)return!0;b(g).length&&b(g).is(".jstree-closed")?e.push(g):m.push(g)}),e.length&&(this.data.search.to_open=m,b.each(e,function(b,d){g.open_node(d,function(){g._search_open(!0)})}),d=!1));d&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(b){b.vakata.context={hide_on_mouseleave:!1,cnt:b("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(d,g,e,m,f,l,n){b.vakata.context.rtl=!!n;if(d=b.vakata.context.parse(d)){b.vakata.context.vis=!0;b.vakata.context.tgt=g;b.vakata.context.par=l||g||null;b.vakata.context.data=f||null;b.vakata.context.cnt.html(d).css({visibility:"hidden",display:"block",left:0,top:0});if(b.vakata.context.hide_on_mouseleave)b.vakata.context.cnt.one("mouseleave",
function(d){b.vakata.context.hide()});f=b.vakata.context.cnt.height();l=b.vakata.context.cnt.width();e+l>b(document).width()&&(e=b(document).width()-(l+5),b.vakata.context.cnt.find("li > ul").addClass("right"));m+f>b(document).height()&&(m-=f+g[0].offsetHeight,b.vakata.context.cnt.find("li > ul").addClass("bottom"));b.vakata.context.cnt.css({left:e,top:m}).find("li:has(ul)").bind("mouseenter",function(d){d=b(document).width();var f=b(document).height(),e=b(this).children("ul").show();d!==b(document).width()&&
e.toggleClass("right");f!==b(document).height()&&e.toggleClass("bottom")}).bind("mouseleave",function(d){b(this).children("ul").hide()}).end().css({visibility:"visible"}).show();b(document).triggerHandler("context_show.vakata")}},hide:function(){b.vakata.context.vis=!1;b.vakata.context.cnt.attr("class","").css({visibility:"hidden"});b(document).triggerHandler("context_hide.vakata")},parse:function(d,g){if(!d)return!1;var e="",m=!1,f=!0;g||(b.vakata.context.func={});e+="<ul>";b.each(d,function(d,g){if(!g)return!0;
b.vakata.context.func[d]=g.action;!f&&g.separator_before&&(e+="<li class='vakata-separator vakata-separator-before'></li>");f=!1;e+="<li class='"+(g._class||"")+(g._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";g.icon&&-1===g.icon.indexOf("/")&&(e+=" class='"+g.icon+"' ");g.icon&&-1!==g.icon.indexOf("/")&&(e+=" style='background:url("+g.icon+") center center no-repeat;' ");e+=">&#160;</ins><a href='#' rel='"+d+"'>";g.submenu&&(e+="<span style='float:"+(b.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");e+=g.label+"</a>";g.submenu&&(m=b.vakata.context.parse(g.submenu,!0))&&(e+=m);e+="</li>";g.separator_after&&(e+="<li class='vakata-separator vakata-separator-after'></li>",f=!0)});e=e.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");e+="</ul>";b(document).triggerHandler("context_parse.vakata");return 10<e.length?e:!1},exec:function(d){return b.isFunction(b.vakata.context.func[d])?(b.vakata.context.func[d].call(b.vakata.context.data,b.vakata.context.par),
!0):!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});b.vakata.context.cnt.delegate("a","click",function(b){b.preventDefault()}).delegate("a","mouseup",function(d){!b(this).parent().hasClass("jstree-contextmenu-disabled")&&b.vakata.context.exec(b(this).attr("rel"))?b.vakata.context.hide():b(this).blur()}).delegate("a","mouseover",function(){b.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");b(document).bind("mousedown",function(d){b.vakata.context.vis&&!b.contains(b.vakata.context.cnt[0],d.target)&&
b.vakata.context.hide()});"undefined"!==typeof b.hotkeys&&b(document).bind("keydown","up",function(d){if(b.vakata.context.vis){var g=b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();g.length||(g=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());g.addClass("vakata-hover");d.stopImmediatePropagation();d.preventDefault()}}).bind("keydown","down",function(d){if(b.vakata.context.vis){var g=
b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();g.length||(g=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());g.addClass("vakata-hover");d.stopImmediatePropagation();d.preventDefault()}}).bind("keydown","right",function(d){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
d.stopImmediatePropagation(),d.preventDefault())}).bind("keydown","left",function(d){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),d.stopImmediatePropagation(),d.preventDefault())}).bind("keydown","esc",function(d){b.vakata.context.hide();d.preventDefault()}).bind("keydown","space",function(d){b.vakata.context.cnt.find(".vakata-hover").last().children("a").click();d.preventDefault()})});b.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",b.proxy(function(d){d.preventDefault();b(d.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(d.currentTarget,d.pageX,d.pageY)},this)).delegate("a","click.jstree",b.proxy(function(d){this.data.contextmenu&&b.vakata.context.hide()},this)).bind("destroy.jstree",b.proxy(function(){this.data.contextmenu&&b.vakata.context.hide()},this));b(document).bind("context_hide.vakata",b.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(b){this.create(b)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(b){this.rename(b)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(b){this.is_selected(b)?this.remove():this.remove(b)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(b){this.cut(b)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(b){this.copy(b)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(b){this.paste(b)}}}}}},_fn:{show_contextmenu:function(d,g,e){d=this._get_node(d);var m=this.get_settings().contextmenu,f=d.children("a:visible:eq(0)"),l=!1,l=!1;m.select_node&&this.data.ui&&!this.is_selected(d)&&(this.deselect_all(),this.select_node(d,!0));
if(m.show_at_node||"undefined"===typeof g||"undefined"===typeof e)l=f.offset(),g=l.left,e=l.top+this.data.core.li_height;l=d.data("jstree")&&d.data("jstree").contextmenu?d.data("jstree").contextmenu:m.items;b.isFunction(l)&&(l=l.call(this,d));this.data.contextmenu=!0;b.vakata.context.show(l,f,g,e,this,d,this._get_settings().core.rtl);this.data.themes&&b.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(b){b.jstree.plugin("types",{__init:function(){var d=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",b.proxy(function(){var g=d.type_attr,e="",m=this;b.each(d.types,function(d,l){b.each(l,function(b,d){/^(max_depth|max_children|icon|valid_children)$/.test(b)||m.data.types.attach_to.push(b)});if(!l.icon)return!0;if(l.icon.image||l.icon.position)e="default"==d?e+(".jstree-"+m.get_index()+" a > .jstree-icon { "):e+(".jstree-"+m.get_index()+" li["+g+'="'+d+'"] > a > .jstree-icon { '),l.icon.image&&(e+=" background-image:url("+
l.icon.image+"); "),e=l.icon.position?e+(" background-position:"+l.icon.position+"; "):e+" background-position:0 0; ",e+="} "});""!==e&&b.vakata.css.add_sheet({str:e,title:"jstree-types"})},this)).bind("before.jstree",b.proxy(function(d,e){var m,f;if((m=(m=this._get_settings().types.use_data?this._get_node(e.args[0]):!1)&&-1!==m&&m.length?m.data("jstree"):!1)&&m.types&&!1===m.types[e.func]||-1!==b.inArray(e.func,this.data.types.attach_to)&&e.args[0]&&(e.args[0].tagName||e.args[0].jquery)&&(m=this._get_settings().types.types,
f=this._get_type(e.args[0]),(m[f]&&"undefined"!==typeof m[f][e.func]||m["default"]&&"undefined"!==typeof m["default"][e.func])&&!1===this._check(e.func,e.args[0])))return d.stopImmediatePropagation(),!1},this));l&&this.get_container().bind("load_node.jstree set_type.jstree",b.proxy(function(d,e){var m=e&&e.rslt&&e.rslt.obj&&-1!==e.rslt.obj?this._get_node(e.rslt.obj).parent():this.get_container_ul(),f=!1,l=this._get_settings().types;b.each(l.types,function(b,d){d.icon&&(d.icon.image||d.icon.position)&&
(f="default"===b?m.find("li > a > .jstree-icon"):m.find("li["+l.type_attr+"='"+b+"'] > a > .jstree-icon"),d.icon.image&&f.css("backgroundImage","url("+d.icon.image+")"),f.css("backgroundPosition",d.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(b,g){g.type&&this._get_settings().types.use_data&&this.set_type(g.type,b)},_get_type:function(b){return(b=
this._get_node(b))&&b.length?b.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(b,g){g=this._get_node(g);var e=g.length&&b?g.attr(this._get_settings().types.type_attr,b):!1;e&&this.__callback({obj:g,type:b});return e},_check:function(d,g,e){g=this._get_node(g);var m=!1,f=this._get_type(g),l=0,n=this,r=this._get_settings().types,y=!1;if(-1===g)if(r[d])m=r[d];else return;else{if(!1===f)return;(y=r.use_data?g.data("jstree"):!1)&&y.types&&"undefined"!==typeof y.types[d]?m=y.types[d]:
r.types[f]&&"undefined"!==typeof r.types[f][d]?m=r.types[f][d]:r.types["default"]&&"undefined"!==typeof r.types["default"][d]&&(m=r.types["default"][d])}b.isFunction(m)&&(m=m.call(this,g));"max_depth"===d&&-1!==g&&!1!==e&&-2!==r.max_depth&&0!==m&&g.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(-1!==r.max_depth&&0>=r.max_depth-(b+1))return m=0,!1;l=0===b?m:n._check(d,this,!1);if(-1!==l&&0>=l-(b+1))return m=0,!1;0<=l&&(l-(b+1)<m||0>m)&&(m=l-(b+1));0<=r.max_depth&&(r.max_depth-
(b+1)<m||0>m)&&(m=r.max_depth-(b+1))});return m},check_move:function(){if(!this.__call_old())return!1;var d=this._get_move(),g=d.rt._get_settings().types,e=d.rt._check("max_children",d.cr),m=d.rt._check("max_depth",d.cr),f=d.rt._check("valid_children",d.cr),l=0,n=1;if("none"===f||b.isArray(f)&&d.ot&&d.ot._get_type&&(d.o.each(function(){if(-1===b.inArray(d.ot._get_type(this),f))return n=!1}),!1===n)||-2!==g.max_children&&-1!==e&&(l=-1===d.cr?this.get_container().find("> ul > li").not(d.o).length:d.cr.find("> ul > li").not(d.o).length,
l+d.o.length>e))return!1;if(-2!==g.max_depth&&-1!==m){n=0;if(0===m)return!1;if("undefined"===typeof d.o.d){for(g=d.o;0<g.length;)g=g.find("> ul > li"),n++;d.o.d=n}if(0>m-d.o.d)return!1}return!0},create_node:function(d,g,e,m,f,l){if(!l&&(f||this._is_loaded(d))){var n="string"==typeof g&&g.match(/^before|after$/i)&&-1!==d?this._get_parent(d):this._get_node(d),r=this._get_settings().types,y=this._check("max_children",n),t=this._check("max_depth",n),B=this._check("valid_children",n);"string"===typeof e&&
(e={data:e});e||(e={});if("none"===B)return!1;if(b.isArray(B))if(!e.attr||!e.attr[r.type_attr])e.attr||(e.attr={}),e.attr[r.type_attr]=B[0];else if(-1===b.inArray(e.attr[r.type_attr],B))return!1;if(-2!==r.max_children&&-1!==y&&(n=-1===n?this.get_container().find("> ul > li").length:n.find("> ul > li").length,n+1>y)||-2!==r.max_depth&&-1!==t&&0>t-1)return!1}return this.__call_old(!0,d,g,e,m,f,l)}}})})(jQuery);(function(b){b.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=
this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(b,g,e){var m=this;this.load_node_html(b,function(){m.__callback({obj:m._get_node(b)});g.call(this)},e)},_is_loaded:function(d){d=this._get_node(d);return-1==d||!d||!this._get_settings().html_data.ajax&&!b.isFunction(this._get_settings().html_data.data)||
d.is(".jstree-open, .jstree-leaf")||0<d.children("ul").children("li").size()},load_node_html:function(d,g,e){var m,f=this.get_settings().html_data,l=function(){};m=function(){};if((d=this._get_node(d))&&-1!==d){if(d.data("jstree_is_loading"))return;d.data("jstree_is_loading",!0)}switch(!0){case b.isFunction(f.data):f.data.call(this,d,b.proxy(function(e){e&&""!==e&&e.toString&&""!==e.toString().replace(/^[\s\n]+$/,"")?(e=b(e),e.is("ul")||(e=b("<ul />").append(e)),-1!=d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),
d.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node(d),g&&g.call(this)):d&&-1!==d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(d),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},this));break;case !f.data&&!f.ajax:d&&-1!=d||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());g&&g.call(this);break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!d||-1===d):d&&-1!=d||(m=b(f.data),m.is("ul")||(m=b("<ul />").append(m)),this.get_container().children("ul").empty().append(m.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());g&&g.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&d&&-1!==d:d=this._get_node(d),l=function(b,g,m){var l=this.get_settings().html_data.ajax.error;l&&l.call(this,b,g,m);-1!=d&&d.length?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),"success"===g&&f.correct_state&&this.correct_state(d)):"success"===g&&f.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},m=function(e,m,n){var r=this.get_settings().html_data.ajax.success;
r&&(e=r.call(this,e,m,n)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return l.call(this,n,m,"");e?(e=b(e),e.is("ul")||(e=b("<ul />").append(e)),-1!=d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(d),g&&g.call(this)):d&&-1!==d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),f.correct_state&&
(this.correct_state(d),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},f.ajax.context=this,f.ajax.error=l,f.ajax.success=m,f.ajax.dataType||(f.ajax.dataType="html"),b.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,d)),b.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,d)),b.ajax(f.ajax)}}}});b.jstree.defaults.plugins.push("html_data")})(jQuery);(function(b){b.jstree.plugin("themeroller",{__init:function(){var d=this._get_settings().themeroller;
this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(g){b(g.currentTarget).hasClass("jstree-loading")||b(this).addClass(d.item_h)}).delegate("a","mouseleave.jstree",function(){b(this).removeClass(d.item_h)}).bind("init.jstree",b.proxy(function(b,d){d.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(d.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",
b.proxy(function(b,d){this._themeroller(d.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",b.proxy(function(b){this._themeroller()},this)).bind("close_node.jstree",b.proxy(function(b,d){this._themeroller(d.rslt.obj)},this)).bind("delete_node.jstree",b.proxy(function(b,d){this._themeroller(d.rslt.parent)},this)).bind("correct_state.jstree",b.proxy(function(b,e){e.rslt.obj.children("ins.jstree-icon").removeClass(d.opened+" "+d.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(d.item_clsd,"").replace(d.item_open,"").replace(d.item_leaf,"").indexOf("ui-icon-")}).removeClass(d.item_open+" "+d.item_clsd).addClass(d.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",b.proxy(function(b,e){e.rslt.obj.children("a").addClass(d.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",b.proxy(function(b,e){this.get_container().find("a."+d.item_a).removeClass(d.item_a).end().find("a.jstree-clicked").addClass(d.item_a)},this)).bind("dehover_node.jstree",
b.proxy(function(b,e){e.rslt.obj.children("a").removeClass(d.item_h)},this)).bind("hover_node.jstree",b.proxy(function(b,e){this.get_container().find("a."+d.item_h).not(e.rslt.obj).removeClass(d.item_h);e.rslt.obj.children("a").addClass(d.item_h)},this)).bind("move_node.jstree",b.proxy(function(b,d){this._themeroller(d.rslt.o);this._themeroller(d.rslt.op)},this))},__destroy:function(){var d=this._get_settings().themeroller,g=["ui-icon"];b.each(d,function(b,d){d=d.split(" ");d.length&&(g=g.concat(d))});
this.get_container().removeClass("ui-widget-content").find("."+g.join(", .")).removeClass(g.join(" "))},_fn:{_themeroller:function(b){var g=this._get_settings().themeroller;b=(b=b&&-1!=b?this._get_node(b):this.get_container_ul())&&-1!=b?b.parent():this.get_container_ul();b.find("li.jstree-closed").children("ins.jstree-icon").removeClass(g.opened).addClass("ui-icon "+g.closed).end().children("a").addClass(g.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(g.item_clsd,
"").replace(g.item_open,"").replace(g.item_leaf,"").indexOf("ui-icon-")}).removeClass(g.item_leaf+" "+g.item_open).addClass(g.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(g.closed).addClass("ui-icon "+g.opened).end().children("a").addClass(g.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(g.item_clsd,"").replace(g.item_open,"").replace(g.item_leaf,"").indexOf("ui-icon-")}).removeClass(g.item_leaf+
" "+g.item_clsd).addClass(g.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(g.closed+" ui-icon "+g.opened).end().children("a").addClass(g.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(g.item_clsd,"").replace(g.item_open,"").replace(g.item_leaf,"").indexOf("ui-icon-")}).removeClass(g.item_clsd+" "+g.item_open).addClass(g.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});b(function(){b.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(b){b.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
b.proxy(function(d,g){var e=[],m=!0,f;"move_node"==g.func&&!0===g.args[4]&&g.args[0].o&&g.args[0].o.length&&(g.args[0].o.children("a").each(function(){e.push(b(this).text().replace(/^\s+/g,""))}),m=this._check_unique(e,g.args[0].np.find("> ul > li").not(g.args[0].o),"move_node"));"create_node"==g.func&&(g.args[4]||this._is_loaded(g.args[0]))&&(m=this._get_node(g.args[0]),!g.args[1]||"before"!==g.args[1]&&"after"!==g.args[1]||(m=this._get_parent(g.args[0]))&&-1!==m||(m=this.get_container()),"string"===
typeof g.args[2]?e.push(g.args[2]):g.args[2]&&g.args[2].data?e.push(g.args[2].data):e.push(this._get_string("new_node")),m=this._check_unique(e,m.find("> ul > li"),"create_node"));"rename_node"==g.func&&(e.push(g.args[1]),f=this._get_node(g.args[0]),(m=this._get_parent(f))&&-1!==m||(m=this.get_container()),m=this._check_unique(e,m.find("> ul > li").not(f),"rename_node"));if(!m)return d.stopPropagation(),!1},this))},defaults:{error_callback:b.noop},_fn:{_check_unique:function(d,g,e){var m=[],f=!0;
g.children("a").each(function(){m.push(b(this).text().replace(/^\s+/g,""))});if(!m.length||!d.length)return!0;b.each(d,function(d,e){if(-1!==b.inArray(e,m))return f=!1});f||this._get_settings().unique.error_callback.call(null,d,g,e);return f},check_move:function(){if(!this.__call_old())return!1;var d=this._get_move(),g=[];return d.o&&d.o.length?(d.o.children("a").each(function(){g.push(b(this).text().replace(/^\s+/g,""))}),this._check_unique(g,d.np.find("> ul > li").not(d.o),"check_move")):!0}}})})(jQuery);
(function(b){b.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",b.proxy(function(b,g){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",b.proxy(function(b,g){this._prepare_wholerow_span(g&&g.rslt&&g.rslt.obj?g.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
b.proxy(function(b,g){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(b,d){return function(){b._prepare_wholerow_ul(d)}}(this,g&&g.rslt&&g.rslt.obj?g.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",b.proxy(function(b,g){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",b.proxy(function(d,g){g.rslt.obj.each(function(){g.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((b(this).offset().top-g.inst.get_container().offset().top+g.inst.get_container()[0].scrollTop)/g.inst.data.core.li_height,10)+")").children("a").attr("class",g.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",b.proxy(function(b,g){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===b.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((g.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",g.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(d){var g=b(d.currentTarget);"A"===d.target.tagName||"INS"===d.target.tagName&&g.closest("li").is(".jstree-open, .jstree-closed")||(g.closest("li").children("a:visible:eq(0)").click(),d.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",b.proxy(function(d){d.stopImmediatePropagation();if(b(d.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(d.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",b.proxy(function(d){b(d.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(d.currentTarget)},this));(r||l)&&b.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(d){d=d&&-1!=d?this._get_node(d):this.get_container().find("> ul > li");!1!==d&&d.each(function(){b(this).find("li").addBack().each(function(){var d=b(this);if(d.children(".jstree-wholerow-span").length)return!0;d.prepend("<span class='jstree-wholerow-span' style='width:"+18*d.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var b=this.get_container().children("ul").eq(0),
g=b.html();b.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==g&&(this.data.wholerow.last_html=g,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(b.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(b.parent()[0].scrollWidth).css("top",-1*(b.height()+(r?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});b(function(){var d=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
n&&(d+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(r||l)d+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";b.vakata.css.add_sheet({str:d,title:"jstree"})})})(jQuery);(function(b){var d=
["getChildren","getChildrenCount","getAttr","getName","getProps"],g=function(d,g){var f=!0;d=d||{};g=[].concat(g);b.each(g,function(g,m){if(!b.isFunction(d[m]))return f=!1});return f};b.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(e,m){var f=-1==e?this._get_settings().model.object:e.data("jstree_model");if(!g(f,d))return m.call(null,!1);this._get_settings().model.async?f.getChildren(b.proxy(function(b){this.model_done(b,
m)},this)):this.model_done(f.getChildren(),m)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(d,g){var f=[],l=this._get_settings(),n=this;b.isArray(d)||(d=[d]);b.each(d,function(d,e){var g=e.getProps()||{};g.attr=e.getAttr()||{};e.getChildrenCount()&&(g.state="closed");g.data=e.getName();b.isArray(g.data)||(g.data=[g.data]);n.data.types&&b.isFunction(e.getType)&&(g.attr[l.types.type_attr]=e.getType());g.attr.id&&l.model.id_prefix&&(g.attr.id=l.model.id_prefix+g.attr.id);g.metadata||
(g.metadata={});g.metadata.jstree_model=e;f.push(g)});g.call(null,f)}}})})(jQuery)}})();
(function(l){l.color={};l.color.make=function(n,b,d,g){var e={};e.r=n||0;e.g=b||0;e.b=d||0;e.a=null!=g?g:1;e.add=function(b,d){for(var g=0;g<b.length;++g)e[b.charAt(g)]+=d;return e.normalize()};e.scale=function(b,d){for(var g=0;g<b.length;++g)e[b.charAt(g)]*=d;return e.normalize()};e.toString=function(){return 1<=e.a?"rgb("+[e.r,e.g,e.b].join()+")":"rgba("+[e.r,e.g,e.b,e.a].join()+")"};e.normalize=function(){function b(d,e,g){return e<d?d:e>g?g:e}e.r=b(0,parseInt(e.r),255);e.g=b(0,parseInt(e.g),255);
e.b=b(0,parseInt(e.b),255);e.a=b(0,e.a,1);return e};e.clone=function(){return l.color.make(e.r,e.b,e.g,e.a)};return e.normalize()};l.color.extract=function(n,b){var d;do{d=n.css(b).toLowerCase();if(""!=d&&"transparent"!=d)break;n=n.parent()}while(!l.nodeName(n.get(0),"body"));"rgba(0, 0, 0, 0)"==d&&(d="transparent");return l.color.parse(d)};l.color.parse=function(n){var b,d=l.color.make;if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return d(parseInt(b[1],10),parseInt(b[2],
10),parseInt(b[3],10));if(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return d(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),parseFloat(b[4]));if(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return d(2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3]));if(b=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return d(2.55*
parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3]),parseFloat(b[4]));if(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return d(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16));if(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return d(parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16));n=l.trim(n).toLowerCase();if("transparent"==n)return d(255,255,255,0);b=r[n]||[0,0,0];return d(b[0],b[1],b[2])};var r={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
jQuery.cookie=function(l,r,n){if(1<arguments.length&&"[object Object]"!==String(r)){n=jQuery.extend({},n);if(null===r||void 0===r)n.expires=-1;if("number"===typeof n.expires){var b=n.expires,d=n.expires=new Date;d.setDate(d.getDate()+b)}r=String(r);return document.cookie=[encodeURIComponent(l),"=",n.raw?r:encodeURIComponent(r),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=r||{};d=n.raw?function(b){return b}:
decodeURIComponent;return(b=(new RegExp("(?:^|; )"+encodeURIComponent(l)+"=([^;]*)")).exec(document.cookie))?d(b[1]):null};
(function(l){var r=l.d3,n=Error("d3.layer must be initialized with a base"),b=Error("d3.layer must specify a `dataBind` method."),d=Error("d3.layer must specify an `insert` method."),g=function(b){if(!b)throw n;this._base=b;this._handlers={}};g.prototype.dataBind=function(){throw b;};g.prototype.insert=function(){throw d;};g.prototype.on=function(b,d,f){f=f||{};b in this._handlers||(this._handlers[b]=[]);this._handlers[b].push({callback:d,chart:f.chart||null})};g.prototype.off=function(b,d){var f,
g=this._handlers[b];if(g){if(1===arguments.length)return g.length=0,void 0;for(f=g.length-1;-1<f;--f)g[f].callback===d&&g.splice(f,1)}};g.prototype.draw=function(b){var d,f,g,l,n;if(d=this.dataBind.call(this._base,b),!(d instanceof r.selection))throw Error("Invalid selection defined by `dataBind` method.");b=d.enter();b._chart=this._base._chart;d=[{name:"update",selection:d},{name:"enter",selection:this.insert.bind(b)},{name:"merge",selection:d},{name:"exit",selection:d.exit.bind(d)}];for(var y=0,
t=d.length;t>y;++y){if(g=d[y].name,f=d[y].selection,"function"==typeof f&&(f=f()),!(f instanceof r.selection))throw Error('Invalid selection defined for "'+g+"' lifecycle event.");if(b=this._handlers[g])for(l=0,n=b.length;n>l;++l)f._chart=b[l].chart||this._base._chart,f.call(b[l].callback);if(b=this._handlers[g+":transition"],b&&b.length)for(f=f.transition(),l=0,n=b.length;n>l;++l)f._chart=b[l].chart||this._base._chart,f.call(b[l].callback)}};r.selection.prototype.layer=function(b){var d,f=new g(this);
if(f.dataBind=b.dataBind,f.insert=b.insert,"events"in b)for(d in b.events)f.on(d,b.events[d]);return this.on=function(){return f.on.apply(f,arguments)},this.off=function(){return f.off.apply(f,arguments)},this.draw=function(){return f.draw.apply(f,arguments)},this}})(this);
(function(l,r){function n(b){var d,e,g,m;if(!b)return b;e=arguments.length;for(d=1;e>d;d++)if(g=arguments[d])for(m in g)b[m]=g[m];return b}var b=l.d3,d=function(b){this.constructor=b},g=function(b,e){var g;return d.prototype=b.prototype,g=new d(b),b.apply(g,e),g},e=function(b,d){var g=this.constructor.__super__;g&&e.call(g,b,d);Object.hasOwnProperty.call(this.constructor.prototype,"initialize")&&this.initialize.apply(b,d)},m=function(b){this.base=b;this._layers={};this._mixins=[];this._events={};
e.call(this,this,Array.prototype.slice.call(arguments,1))};m.prototype.unlayer=function(b){var d=this.layer(b),d=this._layerList.indexOf(d);return delete this._layers[b],this._layerList.splice(d,1),this};m.prototype.layer=function(b,d,e){var g;return 1===arguments.length?this._layers[b]:(g=d.layer(e),this._layers[b]=g,d._chart=this,g)};m.prototype.initialize=function(){};m.prototype.transform=function(b){return b};m.prototype.mixin=function(b,d){var e=Array.prototype.slice.call(arguments,2);e.unshift(d);
e=g(m[b],e);return this._mixins.push(e),e};m.prototype.draw=function(b){var d,e;b=this.transform(b);for(d in this._layers)this._layers[d].draw(b);for(e in this._mixins)this._mixins[e].draw(b)};m.prototype.on=function(b,d,e){return(this._events[b]||(this._events[b]=[])).push({callback:d,context:e||this,_chart:this}),this};m.prototype.once=function(b,d,e){var g=this,m=function(){g.off(b,m);d.apply(this,arguments)};return this.on(b,m,e)};m.prototype.off=function(b,d,e){var g,m,l,n,r;if(0===arguments.length){for(b in this._events)this._events[b].length=
0;return this}if(1===arguments.length)return m=this._events[b],m&&(m.length=0),this;g=b?[b]:Object.keys(this._events);for(n=0;g.length>n;n++)for(m=g[n],m=this._events[m],r=m.length;r--;)l=m[r],(d&&d===l.callback||e&&e===l.context)&&m.splice(r,1);return this};m.prototype.trigger=function(b){var d,e,g=Array.prototype.slice.call(arguments,1),m=this._events[b];if(m!==r)for(d=0;m.length>d;d++)e=m[d],e.callback.apply(e.context,g);return this};m.extend=function(b,d,e){var g,l=this;g=d&&Object.hasOwnProperty.call(d,
"constructor")?d.constructor:function(){return l.apply(this,arguments)};n(g,l,e);e=function(){this.constructor=g};return e.prototype=l.prototype,g.prototype=new e,d&&n(g.prototype,d),g.__super__=l.prototype,m[b]=g,g};b.chart=function(b){return 0===arguments.length?m:1===arguments.length?m[b]:m.extend.apply(m,arguments)};b.selection.prototype.chart=function(b){if(0===arguments.length)return this._chart;var d=Array.prototype.slice.call(arguments,1);d.unshift(this);return g(m[b],d)};b.selection.enter.prototype.chart=
function(){return this._chart};b.transition.prototype.chart=b.selection.enter.prototype.chart})(this);function sortByKey(l,r){return l.sort(function(l,b){var d=l[r],g=b[r];return d<g?-1:d>g?1:0})}function parseUri(l){var r=parseUri.options;l=r.parser[r.strictMode?"strict":"loose"].exec(l);for(var n={},b=14;b--;)n[r.key[b]]=l[b]||"";n[r.q.name]={};n[r.key[12]].replace(r.q.parser,function(b,g,e){g&&(n[r.q.name][g]=e)});return n}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(l){var r="";l.protocol&&(r+=l.protocol+"://");l.user&&(r+=l.user);l.password&&(r+=":"+l.password);if(l.user||l.password)r+="@";l.host&&(r+=l.host);l.port&&(r+=":"+l.port);l.path&&(r+=l.path);var n=l.queryKey,b=[];for(k in n)if(n.hasOwnProperty(k)){var d=encodeURIComponent(n[k]);k=encodeURIComponent(k);d?b.push(k+"="+d):b.push(k)}0<b.length&&(r+="?"+b.join("&"));l.anchor&&(r+="#"+l.anchor);return r}
function H1DSUri(l){this.base_uri=l;this.base_uri_components=parseUri(l);this.base_h1ds_filters=[];this.base_non_h1ds_query={};this.extra_h1ds_filters=[];this.extra_non_h1ds_query={};l={fids:[]};var r=/^f(\d+)(_(\w+))?/,n;for(n in this.base_uri_components.queryKey)if(this.base_uri_components.queryKey.hasOwnProperty(n)){var b=r.exec(n);b?(l.hasOwnProperty(b[1])||(l.fids.push(b[1]),l[b[1]]={name:"",kwargs:{},fid:parseInt(b[1])}),"undefined"===typeof b[2]?l[b[1]].name=this.base_uri_components.queryKey[n]:
l[b[1]].kwargs[b[3]]=this.base_uri_components.queryKey[n]):this.base_non_h1ds_query[n]=this.base_uri_components.queryKey[n]}for(n=0;n<l.fids.length;n++)this.base_h1ds_filters.push(l[l.fids[n]]);this.sortH1DSFilters()}H1DSUri.prototype.sortH1DSFilters=function(){this.base_h1ds_filters=sortByKey(this.base_h1ds_filters,"fid");this.extra_h1ds_filters=sortByKey(this.extra_h1ds_filters,"fid")};
H1DSUri.prototype.updateOrAddBaseFilter=function(l,r){var n=this.base_h1ds_filters.length;0<n&&this.base_h1ds_filters[n-1].name==l?this.base_h1ds_filters[n-1].kwargs=r:this.addBaseFilter(l,r)};H1DSUri.prototype.shiftExtraH1DSFilterFIDs=function(l){for(var r=0;r<this.extra_h1ds_filters.length;r++)this.extra_h1ds_filters[r].fid+=l};
H1DSUri.prototype.shiftExtraFilterIDs=function(){this.sortH1DSFilters();if(0<this.extra_h1ds_filters.length){var l=new_fid-this.extra_h1ds_filters[0].fid;0<=l&&this.shiftExtraH1DSFilterFIDs(l+1)}};H1DSUri.prototype.addBaseFilter=function(l,r){this.sortH1DSFilters();var n=this.base_h1ds_filters.length;this.base_h1ds_filters.push({name:l,kwargs:r,fid:0<n?this.base_h1ds_filters[n-1].fid+1:0});this.shiftExtraH1DSFilterFIDs(1)};
H1DSUri.prototype.addExtraFilter=function(l,r){this.sortH1DSFilters();var n=this.extra_h1ds_filters.length,b=this.base_h1ds_filters.length;this.extra_h1ds_filters.push({name:l,kwargs:r,fid:0<n?this.extra_h1ds_filters[n-1].fid+1:0<b?this.base_h1ds_filters[b-1].fid+1:0})};H1DSUri.prototype.packFilterIDs=function(){console.log(this.extra_h1ds_filters)};
H1DSUri.prototype.changeFilterID=function(l,r){for(var n=0;n<this.base_h1ds_filters.length;n++)this.base_h1ds_filters[n].fid==parseInt(l)&&(this.base_h1ds_filters[n].fid=parseInt(r));for(n=0;n<this.extra_h1ds_filters.length;n++)this.extra_h1ds_filters[n].fid==parseInt(l)&&(this.extra_h1ds_filters[n].fid=parseInt(r));this.shiftExtraFilterIDs()};
H1DSUri.prototype.renderBaseUri=function(){var l={},r;for(r in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(r)&&(l[r]=this.base_non_h1ds_query[r]);for(r=0;r<this.base_h1ds_filters.length;r++){var n=this.base_h1ds_filters[r].fid;l["f"+n]=this.base_h1ds_filters[r].name;for(var b in this.base_h1ds_filters[r].kwargs)l["f"+n+"_"+b]=this.base_h1ds_filters[r].kwargs[b]}b=jQuery.extend({},this.base_uri_components);b.queryKey=l;return makeUri(b)};
H1DSUri.prototype.renderExtraUri=function(){var l={},r;for(r in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(r)&&(l[r]=this.base_non_h1ds_query[r]);for(var n=0;n<this.base_h1ds_filters.length;n++){var b=this.base_h1ds_filters[n].fid;l["f"+b]=this.base_h1ds_filters[n].name;for(var d in this.base_h1ds_filters[n].kwargs)l["f"+b+"_"+d]=this.base_h1ds_filters[n].kwargs[d]}for(r in this.extra_non_h1ds_query)this.extra_non_h1ds_query.hasOwnProperty(r)&&(l[r]=this.extra_non_h1ds_query[r]);
for(n=0;n<this.extra_h1ds_filters.length;n++)for(d in b=this.extra_h1ds_filters[n].fid,l["f"+b]=this.extra_h1ds_filters[n].name,this.extra_h1ds_filters[n].kwargs)l["f"+b+"_"+d]=this.extra_h1ds_filters[n].kwargs[d];r=jQuery.extend({},this.base_uri_components);r.queryKey=l;return makeUri(r)};H1DSUri.prototype.isBinary=function(){return"bin"===this.base_non_h1ds_query.format};
H1DSUri.prototype.getShot=function(){var l=this.uri_components.path;"/"!==l[l.length-1]&&(l+="/");l=l.match(/\/\d+\//);return null===l?0:Number(l[0].substring(1,l[0].length-1))};H1DSUri.prototype.setShot=function(l){var r=this.uri_components.path;"/"!==r[r.length-1]&&(r+="/");l=r.replace(/\/\d+\//,"/"+l+"/");this.uri_components.path=l};d3.chart("dvBaseChart",{initialize:function(){var l=this,r=this.base.append("g").classed("graph-background",!0);l.main=l.base.append("g").attr("class","chart-main");l.brush=d3.svg.brush();l.margin={top:10,right:10,bottom:10,left:10};l._width=100;l._height=100;l.rmin=function(n){if(n.hasOwnProperty("length")){for(var b=[],d=0;d<n.length;d++)b.push(l.rmin(n[d]));return d3.min(b)}return n};l.rmax=function(n){if(n.hasOwnProperty("length")){for(var b=[],d=0;d<n.length;d++)b.push(l.rmax(n[d]));return d3.max(b)}return n};
this.source=function(l){arguments.length||this.source_data;this.source_data=l};this.load_data=function(){l.data=[];for(var n=0;n<l.source_data.length;n++)l.data.push(l.source_data[n].url_parser(l.source_data[n].url,l.source_data[n].modifiers));l.formatted_data=l.format_data(l.data)};this.render=function(){l.draw(l.data)};this.set_margin=function(n){var b=l._width+l.margin.left+l.margin.right,d=l._height+l.margin.bottom+l.margin.top;l.margin=n;l.base.select("g.chart-main").attr("transform","translate("+
l.margin.left+","+l.margin.top+")");l._width=b-l.margin.left-l.margin.right;l._height=d-l.margin.top-l.margin.bottom};this.set_margin({top:10,right:10,bottom:10,left:10});this.layer("background",r,{dataBind:function(l){return this.selectAll("rect.background").data([l])},insert:function(){return this.insert("rect").attr("class","background").attr("x",0).attr("y",0).attr("width",l._width+l.margin.left+l.margin.right).attr("height",l._height+l.margin.top+l.margin.bottom)}})},width:function(l){if(!arguments.length)return this._width+
this.margin.left+this.margin.right;this._width=l-this.margin.left-this.margin.right;this.base.select("g rect.background").attr("width",l);return this},height:function(l){if(!arguments.length)return this._height+this.margin.top+this.margin.bottom;this._height=l-this.margin.top-this.margin.bottom;this.base.select("g rect.background").attr("y",l).attr("height",l);return this}});
d3.chart("dvBaseChart").extend("dvTimeSeriesChart",{initialize:function(){var l=this;this.set_margin({top:50,right:50,bottom:50,left:50});this.xScale=d3.scale.linear().range([0,l._width]);this.yScale=d3.scale.linear().range([l._height,0]);this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom");this.yAxis=d3.svg.axis().scale(this.yScale).orient("left");this.colors=d3.scale.category20().range();this.layer("xAxis",l.main.append("g"),{dataBind:function(b){return this.selectAll("g.x.axis").data([b])},
insert:function(){return this.insert("g").attr("class","x axis").attr("transform",function(b){return"translate(0,"+l._height+")"})},events:{merge:function(){l.xScale.range([0,l._width]).domain([d3.min(l.data,function(b){return l.rmin(b.dimension)}),d3.max(l.data,function(b){return l.rmax(b.dimension)})]);return this.call(l.xAxis)},enter:function(){l.xScale.range([0,l._width]).domain([d3.min(l.data,function(b){return l.rmin(b.dimension)}),d3.max(l.data,function(b){return l.rmax(b.dimension)})]);return this.call(l.xAxis)},
exit:function(){return this.remove()}}});this.layer("yAxis",l.main.append("g"),{dataBind:function(b){return this.selectAll("g.y.axis").data([b])},insert:function(){return this.append("g").attr("class","y axis").attr("transform",function(b){return"translate(0,0)"})},events:{merge:function(){var b=d3.min(l.data,function(b){return l.rmin(b.value)}),d=d3.max(l.data,function(b){return l.rmax(b.value)}),g=0.05*(d-b);l.yScale.range([l._height,0]).domain([b-g,d+g]);return this.call(l.yAxis)},enter:function(){var b=
d3.min(l.data,function(b){return l.rmin(b.value)}),d=d3.max(l.data,function(b){return l.rmax(b.value)}),g=0.05*(d-b);l.yScale.range([l._height,0]).domain([b-g,d+g]);return this.call(l.yAxis)},exit:function(){return this.remove()}}});var r=d3.svg.line().x(function(b){return l.xScale(b[0])}).y(function(b){return l.yScale(b[1])});l.format_data=function(b){for(var d=[],g=0,e=0;e<b.length;e++)for(var m=l.format_datum(b[e]),f=0;f<m.length;f++){var n=m[f];n.color_index=g;n.name=m.name;d.push(n);++g}return d};
l.format_datum=function(b){var d=[],g=0;"undefined"!==typeof b.metadata.minmax_pairs&&(g=b.metadata.minmax_pairs.length);var e=d3.range(b.value.length);if(0<g)for(var m=0;m<g;m++){e.splice(e.indexOf(b.metadata.minmax_pairs[m][0]),1);e.splice(e.indexOf(b.metadata.minmax_pairs[m][1]),1);for(var f=[],l=0;l<b.value[b.metadata.minmax_pairs[m][0]].length;l++)f.push([b.dimension[0][l],b.value[b.metadata.minmax_pairs[m][0]][l]]);for(l=b.value[b.metadata.minmax_pairs[m][1]].length-1;0<=l;l--)f.push([b.dimension[0][l],
b.value[b.metadata.minmax_pairs[m][1]][l]]);f.closeLine=!0;f.fillLine=!0;d.push(f)}for(m=0;m<e.length;m++){g=e[m];f=[];for(l=0;l<b.value[g].length;l++)f.push([b.dimension[0][l],b.value[g][l]]);f.closeLine=!1;f.fillLine=!1;d.push(f)}d.name=b.name;return d};this.layer("data",l.main.append("g"),{dataBind:function(b){return this.selectAll("path.signal").data(l.formatted_data)},insert:function(){return this.append("path")},events:{merge:function(){return this.attr("class","signal").style("stroke",function(b,
d){return l.colors[2*b.color_index]}).style("fill",function(b,d){return b.fillLine?l.colors[2*b.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(b,d){return r(b)+(b.closeLine?"Z":"")})},enter:function(){return this.attr("class","signal").style("stroke",function(b,d){return l.colors[2*b.color_index]}).style("fill",function(b,d){return b.fillLine?l.colors[2*b.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(b,d){return r(b)+(b.closeLine?"Z":"")})},exit:function(){return this.remove()}}});
this.layer("labels",l.main.append("g"),{dataBind:function(b){return this.selectAll("text.pathlabel").data(l.formatted_data)},insert:function(){return this.append("text").attr("class","pathlabel")},events:{merge:function(){return this.attr("x",10).attr("y",function(b,d){return 20*d}).attr("dy","0.5em").style("font","10 Helvetica Neue").text(function(b){return b.name}).attr("fill",function(b,d){return l.colors[2*b.color_index]})},enter:function(){return this.attr("x",10).attr("y",function(b,d){return 20*
d}).attr("dy","0.5em").style("font","10 Helvetica Neue").text(function(b){return b.name}).attr("fill",function(b,d){return l.colors[2*b.color_index]})},exit:function(){return this.remove()}}});var n=function(){for(var b=0;b<l.source_data.length;b++)l.source_data[b].modifiers.min=l.brush.extent()[0],l.source_data[b].modifiers.max=l.brush.extent()[1];l.load_data();l.render()};this.layer("interactive",l.main,{dataBind:function(b){return this.selectAll("g.brush").data([l.data])},insert:function(){l.brush.clear();
return this.append("g").attr("class","brush")},events:{merge:function(){l.brush=d3.svg.brush().x(l.xScale).on("brushend",n);return this.call(l.brush).selectAll("rect").attr("y",0).attr("height",l._height)}}})}});
dataviewer=function(){var l={margin:{top:10,right:10,bottom:10,left:10},_width:100,_height:100,n_columns:10,n_rows:10,create:function(r){l.basenode=d3.select(r);l.width(parseInt(l.basenode.style("width")));l.height(parseInt(d3.min([l.width()/1.61803398875,l.basenode.style("height")])));l.base=l.basenode.append("svg").attr("width",function(b){return l.width()}).attr("height",function(b){return l.height()}).append("g").attr("transform",function(b){return"translate("+l.margin.left+","+l.margin.top+")"});
l.xScale=d3.scale.linear().domain([0,l.n_columns]).range([0,l._width]);l.yScale=d3.scale.linear().domain([0,l.n_rows]).range([l._height,0]);l.column_width=l._width/l.n_columns;l.row_height=l._height/l.n_rows;l.background_grid=l.base.append("g").attr("class","pagelet-grid");for(var n=0;n<=l.n_columns;n++)l.background_grid.append("line").attr("x1",function(){return Math.round(n*l.column_width)}).attr("x2",function(){return Math.round(n*l.column_width)}).attr("y1",0).attr("y2",l._height);for(n=0;n<=
l.n_rows;n++)l.background_grid.append("line").attr("x1",0).attr("x2",l._width).attr("y1",function(){return Math.round(n*l.row_height)}).attr("y2",function(){return Math.round(n*l.row_height)});return l},data:function(r){l.data=l.updateCoords(r)},draw:function(){for(var r=0;r<l.data.length;r++){var n=l.base.append("g").attr("class","chart").attr("transform","translate("+l.data[r].px_coords[0]+","+l.data[r].px_coords[3]+")").chart("dvTimeSeriesChart");n.width(l.data[r].px_coords[2]-l.data[r].px_coords[0]);
n.height(l.data[r].px_coords[1]-l.data[r].px_coords[3]);n.source(l.data[r].data);n.load_data();n.render()}},updateCoords:function(r){for(var n=0;n<r.length;n++){r[n].px_coords=[l.xScale(r[n].plot_coords[0]),l.yScale(r[n].plot_coords[1]),l.xScale(r[n].plot_coords[2]),l.yScale(r[n].plot_coords[3])];for(var b=0;b<r[n].data.length;b++)r[n].data[b].hasOwnProperty("modifiers")||(r[n].data[b].modifiers={}),r[n].data[b].modifiers.width=parseInt(l.xScale(r[n].plot_coords[2])-l.xScale(r[n].plot_coords[0]))}return r},
width:function(r){if(!arguments.length)return l._width+l.margin.left+l.margin.right;l._width=r-l.margin.left-l.margin.right},height:function(r){if(!arguments.length)return l._height+l.margin.top+l.margin.bottom;l._height=r-l.margin.top-l.margin.bottom}};return l}();var golden_ratio=1.61803398875;$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},0)})};
$(function(){$(".column").each(function(l){var r=this;$(r).sortable({connectWith:".column",handle:".portlet-header",update:function(l,b){$.cookie("sortorder"+r.id,$(r).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(l){l=$.cookie("sortorder"+this.id);var r=this;l&&$(l.split(",")).each(function(l,b){$("#"+b).appendTo(r)});$(this).sortable()});$(".portlet").each(function(l){(l=$.cookie(this.id))&&"collapsed"===l&&($(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide())});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=
function(){var l=this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:l[l.length-2]},function(l){window.location=l.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}
function autoPollSummaryDB(){var l=d3.select("#poll-summarydb-server");if(null!==l[0][0]&&"True"===l.text()){var r=null,n=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),b=d3.select("table.main-table tbody"),d=function(d){$.ajax({url:n,dataType:"json",async:!1}).done(function(e){r=new Date(e.timestamp);e=b.selectAll("tr").data(cross(e),function(b){return b[0].shot});e.enter().insert("tr","tr").style("background-color","yellow");var m=e.selectAll("td").data(function(b){return b});
m.enter().append("td").html(function(b,d){return'<a href="/summary/_/go_to_source/'+b.attr+"/"+b.shot+'/" >'+b.value+"</a>"});m.transition().duration(500).each(function(b){d3.select(this).html(function(b,d){return'<a href="/summary/_/go_to_source/'+b.attr+"/"+b.shot+'/" >'+b.value+"</a>"})});e.transition().duration(d).style("background-color","white");e.exit().remove()})};d(1E3);setInterval(function(){summaryUpdateRequired(r)&&d(3E5)},2E3)}}
function getLastShotInDisplayedPage(){var l=-1;d3.selectAll("table.main-table tr").each(function(r,n){if(0<n){var b=Number(d3.select(this).select("td").text());b>l&&(l=b)}});return l}function summaryUpdateRequired(l){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(l){latest_summdb_update=new Date(l.last_update)});return latest_summdb_update>l}
function updateSummaryDB(){var l=getLastShotInDisplayedPage(),r=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(l){r=Number(l.latest_shot)});r>l&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(l){})}
function cross(l){var r=[],n,b;for(n=0;n<l.data.length;n++)for(r[n]=[],r[n].shot,b=0;b<l.attributes.length;b++)r[n][b]={shot:l.data[n].shot,attr:l.attributes[b],value:l.data[n].d[b]};return r}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});d3.select(window).on("mousemove",mousemove).on("mouseup",mouseup);var rect,x0,x1,count,par_rect;
function mousedown(){x0=d3.mouse(this);count=0;par_rect=d3.select(this);rect=d3.select(this.parentNode).append("svg:rect").attr("y",par_rect.attr("y")).attr("height",par_rect.attr("height")).style("fill","#999").style("fill-opacity",0.5);d3.event.preventDefault()}function mousemove(){if(rect){x1=d3.mouse(rect.node());var l=Math.min(x0[0],x1[0]),r=Math.max(x0[0],x1[0]);Math.min(x0[1],x1[1]);Math.max(x0[1],x1[1]);rect.attr("x",l-0.5).attr("width",r-l+1)}}
function mouseup(){rect&&(rect.each(function(l){var r=l.xAxis.scale().invert(d3.select(this).attr("x"));l=l.xAxis.scale().invert(+d3.select(this).attr("x")+ +d3.select(this).attr("width"));var n=new H1DSUri(window.location.href),b=Number(n.getNextFilterID());0==b?n.appendFilter("dim_range",{min:r,max:l}):(b-=1,"dim_range"===n.h1ds_filters[String(b)].name?n.h1ds_filters[String(b)].kwargs={min:r,max:l}:n.appendFilter("dim_range",{min:r,max:l}));$(".h1ds-pagelet").each(function(){d3.select(this).html("");
populatePagelet($(this),n.renderUri())});Modernizr.history&&history.pushState(null,null,n.renderUri())}),rect.remove(),rect=null)}function getSpectrogramUri(l){l=new H1DSUri(l);l.addExtraFilter("slanted_baseline",{window:10});l.addExtraFilter("spectrogram",{bin_size:-1});l.addExtraFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});l.addExtraFilter("y_axis_energy_limit",{threshold:0.995});l.extra_non_h1ds_query.format="bin";l.extra_non_h1ds_query.bin_assert_dtype="uint8";return l}
function getPowerspectrumUri(l,r){var n=new H1DSUri(l);n.addExtraFilter("slanted_baseline",{window:10});n.addExtraFilter("power_spectrum",{});n.addExtraFilter("norm_dim_range",{min:0,max:0.5});n.addExtraFilter("resample_minmax",{n_bins:r});n.extra_non_h1ds_query.format="json";return n}function getRawUri(l,r){var n=new H1DSUri(l);n.addExtraFilter("resample_minmax",{n_bins:r});n.extra_non_h1ds_query.format="json";return n}
ProcessH1DSHeaders=function(l){l=l.split("\n");for(var r={},n=0;n<l.length;n++){var b=l[n].split(":");2===b.length&&b[0].match("^X-H1DS")&&(r[b[0]]=$.trim(b[1]))}return r};
ProcessBinaryData=function(l,r){for(var n=new Uint8Array(str2ab(l)),b=parseInt(r["X-H1DS-ndim"]),d=0,g={data:[],dim:[],n_dim:b},e=0;e<b;e++){g.dim[e]=[];for(var m=parseInt(r["X-H1DS-dim-"+e+"-length"]),f=parseFloat(r["X-H1DS-dim-"+e+"-delta"]),q=parseFloat(r["X-H1DS-dim-"+e+"-first"]),v=0;v<m;v++)g.dim[e][v]=f*v+q}e=parseFloat(r["X-H1DS-data-delta"]);m=parseFloat(r["X-H1DS-data-min"]);if(0<b)for(f=parseInt(r["X-H1DS-dim-0-length"]),parseFloat(r["X-H1DS-dim-0-delta"]),parseFloat(r["X-H1DS-dim-0-first"]),
q=0;q<f;q++)if(1<b){g.data[q]=[];v=parseInt(r["X-H1DS-dim-1-length"]);parseFloat(r["X-H1DS-dim-1-delta"]);parseFloat(r["X-H1DS-dim-1-first"]);for(var x=0;x<v;x++)if(2<b){g.data[q][x]=[];var y=parseInt(r["X-H2DS-dim-2-length"]);parseFloat(r["X-H1DS-dim-2-delta"]);parseFloat(r["X-H1DS-dim-2-first"]);for(var t=0;t<y;t++)g.data[q][x][t]=e*n[d]+m,d++}else g.data[q][x]=n[d],d++}else g.data[q]=e*n[d]+m,d++;return g};function ab2str(l){return String.fromCharCode.apply(null,new Uint8Array(l))}
function str2ab(l){for(var r=new ArrayBuffer(l.length),n=new Uint8Array(r),b=0,d=l.length;b<d;b++)n[b]=l.charCodeAt(b);return r}var plotState={};function datamap(l){}
function loadWorksheet(){var l=[{plot_coords:[0,0,10,10],modifiers:{},data:[{url:window.location.toString(),url_parser:function(l,b){var d=getRawUri(l,b.width);b.hasOwnProperty("min")&&d.updateOrAddBaseFilter("dim_range",{min:b.min,max:b.max});var g;$.ajax({url:d.renderExtraUri(),dataType:"json",async:!1}).done(function(b){g=b.data});return g}}]}],r=dataviewer.create("div.data.worksheet");r.data(l);r.draw()}
$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();$("div.data.worksheet").length&&loadWorksheet()});
