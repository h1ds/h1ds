window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var f=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,f):console.log.apply(console,f)}};
(function(f){function r(){}for(var m="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),a;a=m.pop();)f[a]=f[a]||r})(function(){try{return console.log(),window.console}catch(f){return window.console={}}}());
(function(f){function r(r){if("string"===typeof r.data){var a=r.handler,c=r.data.toLowerCase().split(" ");r.handler=function(e){if(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type){var h="keypress"!==e.type&&f.hotkeys.specialKeys[e.which],g=String.fromCharCode(e.which).toLowerCase(),q="",B={};e.altKey&&"alt"!==h&&(q+="alt+");e.ctrlKey&&"ctrl"!==h&&(q+="ctrl+");e.metaKey&&(!e.ctrlKey&&"meta"!==h)&&(q+="meta+");e.shiftKey&&"shift"!==h&&(q+="shift+");h?B[q+h]=!0:(B[q+
g]=!0,B[q+f.hotkeys.shiftNums[g]]=!0,"shift+"===q&&(B[f.hotkeys.shiftNums[g]]=!0));h=0;for(g=c.length;h<g;h++)if(B[c[h]])return a.apply(this,arguments)}}}}f.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",
110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};f.each(["keydown","keyup","keypress"],function(){f.event.special[this]={add:r}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var f=!1,r=!1,m=!1;(function(a){a.vakata={};a.vakata.css={get_css:function(a,c,g){a=a.toLowerCase();var e=g.cssRules||g.rules,h=0;do{if(e.length&&h>e.length+5)break;if(e[h].selectorText&&e[h].selectorText.toLowerCase()==a)return!0===c?(g.removeRule&&g.removeRule(h),g.deleteRule&&g.deleteRule(h),!0):e[h]}while(e[++h]);return!1},add_css:function(q,c){if(a.jstree.css.get_css(q,!1,c))return!1;c.insertRule?c.insertRule(q+" { }",0):c.addRule(q,null,0);return a.vakata.css.get_css(q)},
remove_css:function(q,c){return a.vakata.css.get_css(q,!0,c)},add_sheet:function(q){var c=!1,g=!0;if(q.str)return q.title&&(c=a("style[id='"+q.title+"-stylesheet']")[0]),c?g=!1:(c=document.createElement("style"),c.setAttribute("type","text/css"),q.title&&c.setAttribute("id",q.title+"-stylesheet")),c.styleSheet?g?(document.getElementsByTagName("head")[0].appendChild(c),c.styleSheet.cssText=q.str):c.styleSheet.cssText=c.styleSheet.cssText+" "+q.str:(c.appendChild(document.createTextNode(q.str)),document.getElementsByTagName("head")[0].appendChild(c)),
c.sheet||c.styleSheet;if(q.url)if(document.createStyleSheet)try{document.createStyleSheet(q.url)}catch(e){}else return c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.media="all",c.href=q.url,document.getElementsByTagName("head")[0].appendChild(c),c.styleSheet}};var c=[],e=-1,h={},g={};a.fn.jstree=function(q){var g="string"==typeof q,e=Array.prototype.slice.call(arguments,1),f=this;if(g){if("_"==q.substring(0,1))return f;this.each(function(){var g=c[a.data(this,"jstree_instance_id")],
g=g&&a.isFunction(g[q])?g[q].apply(g,e):g;if("undefined"!==typeof g&&(0===q.indexOf("is_")||!0!==g&&!1!==g))return f=g,!1})}else this.each(function(){var g=a.data(this,"jstree_instance_id"),B=[],f=q?a.extend({},!0,q):{},w=a(this),r=!1,m=[],B=B.concat(e);w.data("jstree")&&B.push(w.data("jstree"));f=B.length?a.extend.apply(null,[!0,f].concat(B)):f;"undefined"!==typeof g&&c[g]&&c[g].destroy();g=parseInt(c.push({}),10)-1;a.data(this,"jstree_instance_id",g);f.plugins=a.isArray(f.plugins)?f.plugins:a.jstree.defaults.plugins.slice();
f.plugins.unshift("core");f.plugins=f.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");r=a.extend(!0,{},a.jstree.defaults,f);r.plugins=f.plugins;a.each(h,function(q,c){-1===a.inArray(q,r.plugins)?(r[q]=null,delete r[q]):m.push(q)});r.plugins=m;c[g]=new a.jstree._instance(g,a(this).addClass("jstree jstree-"+g),r);a.each(c[g]._get_settings().plugins,function(a,q){c[g].data[q]={}});a.each(c[g]._get_settings().plugins,function(a,q){h[q]&&
h[q].__init.apply(c[g])});setTimeout(function(){c[g]&&c[g].init()},0)});return f};a.jstree={defaults:{plugins:[]},_focused:function(){return c[e]||null},_reference:function(q){if(c[q])return c[q];var g=a(q);g.length||"string"!==typeof q||(g=a("#"+q));return g.length?c[g.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(q,c,g){this.data={core:{}};this.get_settings=function(){return a.extend(!0,{},g)};this._get_settings=function(){return g};this.get_index=function(){return q};
this.get_container=function(){return c};this.get_container_ul=function(){return c.children("ul:eq(0)")};this._set_settings=function(q){g=a.extend(!0,{},g,q)}},_fn:{},plugin:function(q,c){c=a.extend({},{__init:a.noop,__destroy:a.noop,_fn:{},defaults:!1},c);h[q]=c;a.jstree.defaults[q]=c.defaults;a.each(c._fn,function(c,g){g.plugin=q;g.old=a.jstree._fn[c];a.jstree._fn[c]=function(){var q,e=g,h=Array.prototype.slice.call(arguments);q=new a.Event("before.jstree");var B=!1;if(!0!==this.data.core.locked||
"unlock"===c||"is_locked"===c){do{if(e&&e.plugin&&-1!==a.inArray(e.plugin,this._get_settings().plugins))break;e=e.old}while(e);if(e){if(0===c.indexOf("_"))q=e.apply(this,h);else{q=this.get_container().triggerHandler(q,{func:c,inst:this,args:h,plugin:e.plugin});if(!1===q)return;"undefined"!==typeof q&&(h=q);q=e.apply(a.extend({},this,{__callback:function(a){this.get_container().triggerHandler(c+".jstree",{inst:this,args:h,rslt:a,rlbk:B})},__rollback:function(){return B=this.get_rollback()},__call_old:function(a){return e.old.apply(this,
a?Array.prototype.slice.call(arguments,1):h)}}),h)}return q}}};a.jstree._fn[c].old=g.old;a.jstree._fn[c].plugin=q})},rollback:function(q){q&&(a.isArray(q)||(q=[q]),a.each(q,function(a,q){c[q.i].set_rollback(q.h,q.d)}))}};a.jstree._fn=a.jstree._instance.prototype={};a(function(){var q=navigator.userAgent.toLowerCase(),c=(q.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(q)&&6==parseInt(c,10)){f=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(q)&&
7==parseInt(c,10)&&(r=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(q)&&(/mozilla/.test(q)&&1.9>parseFloat(c,10))&&(m=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");a.vakata.css.add_sheet({str:g,title:"jstree"})});a.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",a.proxy(function(q){q=a(q.target);this.toggle_node(q)},this)).bind("mousedown.jstree",a.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",a.proxy(function(q,c){var g=this._get_node(c.rslt.obj),e=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li").each(function(){var q=a(this);q.data("jstree")&&a.each(q.data("jstree"),function(c,g){e.data[c]&&a.isFunction(e["_"+c+"_notify"])&&e["_"+c+"_notify"].call(e,q,g)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
a.proxy(function(q,c){var g=this._get_node(c.rslt.obj),e=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li.jstree-open:not(:has(ul))").each(function(){e.load_node(this,a.noop,a.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var q,g=this.get_index(),f=this._get_settings(),w=this;a.each(f.plugins,function(a,q){try{h[q].__destroy.apply(w)}catch(c){}});this.__callback();if(this.is_focused())for(q in c)if(c.hasOwnProperty(q)&&
q!=g){c[q].set_focus();break}g===e&&(e=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});a(document).unbind(".jstree-"+g).undelegate(".jstree-"+g);c[g]=null;delete c[g]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(q){var c=this,g=!0,e=[],h=[];q||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=a.map(a.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=a.map(a.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(a.each(this.data.core.to_load,function(c,q){if("#"==q)return!0;a(q).length?e.push(q):h.push(q)}),e.length&&(this.data.core.to_load=h,a.each(e,function(a,q){c._is_loaded(q)||(c.load_node(q,function(){c.reload_nodes(!0)},function(){c.reload_nodes(!0)}),
g=!1)})));this.data.core.to_open.length&&a.each(this.data.core.to_open,function(a,q){c.open_node(q,!1,!0)});g&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){c.__callback({},c)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var q=this;this.data.core.to_open.length&&a.each(this.data.core.to_open,function(a,c){q.open_node(c,!1,!0)});this.__callback({})},refresh:function(a){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var c=a.jstree._focused();c&&c.unset_focus();this.get_container().addClass("jstree-focused");e=this.get_index();this.__callback()}},is_focused:function(){return e==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),e=
-1);this.__callback()},_get_node:function(c){var g=a(c,this.get_container());if(g.is(".jstree")||-1==c)return-1;g=g.closest("li",this.get_container());return g.length?g:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):a.length?c?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(a,
c){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var g=a.parentsUntil(".jstree","li:eq(0)");return g.length?g:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):a.length?a.children("ul:eq(0)").children("li"):!1},get_path:function(a,c){var g=[],e=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){g.push(c?this.id:e.get_text(this))});g.reverse();g.push(c?a.attr("id"):this.get_text(a));return g},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,g){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&
c.call(),!1;var e=g||f?0:this._get_settings().core.animation,h=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){h.open_node(this,!1,!0)}),e&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),e?a.children("ul").stop(!0,!0).slideDown(e,function(){this.style.display="";h.after_open(a)}):h.after_open(a),this.__callback({obj:a}),c&&c.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){h.open_node(a,c,g)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var g=c||f?0:this._get_settings().core.animation,e=this;if(!a.length||!a.hasClass("jstree-open"))return!1;g&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");g?a.children("ul").stop(!0,!0).slideUp(g,function(){this.style.display="";e.after_close(a)}):
e.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,c,g){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());g?a=a.find("li.jstree-closed"):(g=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").addBack():a.find("li.jstree-closed"));var e=this;a.each(function(){var a=this;
e._is_loaded(this)?e.open_node(this,!1,!c):e.open_node(this,function(){e.open_all(a,c,g)},!c)});0===g.find("li.jstree-closed").length&&this.__callback({obj:g})},close_all:function(a,c){var g=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").addBack().each(function(){g.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(c){c=c&&-1!=c?a(c):this.get_container_ul();c=c.is("li")?c.find("li").addBack():c.find("li");c.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
c.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:c})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,g){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(c,g,e,h,f){c=this._get_node(c);g="undefined"===typeof g?
"last":g;var u=a("<li />"),r=this._get_settings().core,m;if(-1!==c&&!c.length)return!1;if(!f&&!this._is_loaded(c))return this.load_node(c,function(){this.create_node(c,g,e,h,!0)}),!1;this.__rollback();"string"===typeof e&&(e={data:e});e||(e={});e.attr&&u.attr(e.attr);e.metadata&&u.data(e.metadata);e.state&&u.addClass("jstree-"+e.state);e.data||(e.data=this._get_string("new_node"));a.isArray(e.data)||(m=e.data,e.data=[],e.data.push(m));a.each(e.data,function(c,g){m=a("<a />");a.isFunction(g)&&(g=g.call(this,
e));if("string"==typeof g)m.attr("href","#")[r.html_titles?"html":"text"](g);else g.attr||(g.attr={}),g.attr.href||(g.attr.href="#"),m.attr(g.attr)[r.html_titles?"html":"text"](g.title),g.language&&m.addClass(g.language);m.prepend("<ins class='jstree-icon'>&#160;</ins>");!g.icon&&e.icon&&(g.icon=e.icon);g.icon&&(-1===g.icon.indexOf("/")?m.children("ins").addClass(g.icon):m.children("ins").css("background","url('"+g.icon+"') center center no-repeat"));u.append(m)});u.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===c&&(c=this.get_container(),"before"===g&&(g="first"),"after"===g&&(g="last"));switch(g){case "before":c.before(u);m=this._get_parent(c);break;case "after":c.after(u);m=this._get_parent(c);break;case "inside":case "first":c.children("ul").length||c.append("<ul />");c.children("ul").prepend(u);m=c;break;case "last":c.children("ul").length||c.append("<ul />");c.children("ul").append(u);m=c;break;default:c.children("ul").length||c.append("<ul />"),g||(g=0),m=c.children("ul").children("li").eq(g),
m.length?m.before(u):c.children("ul").append(u),m=c}if(-1===m||m.get(0)===this.get_container().get(0))m=-1;this.clean_node(m);this.__callback({obj:u,parent:m});h&&h.call(this,u);return u},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var c=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(c)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,c){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var g=a.children("INS").clone();a.html(c).prepend(g);this.__callback({obj:a,name:c});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:c});return a.nodeValue=c},rename_node:function(a,c){a=this._get_node(a);this.__rollback();a&&(a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:a,name:c})},delete_node:function(c){c=
this._get_node(c);if(!c.length)return!1;this.__rollback();var g=this._get_parent(c),e=a([]),h=this;c.each(function(){e=e.add(h._get_prev(this))});c=c.detach();-1!==g&&0===g.find("> ul > li").length&&g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(g);this.__callback({obj:c,prev:e,parent:g});return c},prepare_move:function(c,e,h,f,m){var u={};u.ot=a.jstree._reference(c)||this;u.o=u.ot._get_node(c);u.r=-1===e?-1:this._get_node(e);u.p="undefined"===typeof h||!1===h?
"last":h;if(m||!g.o||g.o[0]!==u.o[0]||g.r[0]!==u.r[0]||g.p!==u.p){u.ot=a.jstree._reference(u.o)||this;u.rt=a.jstree._reference(u.r)||this;if(-1!==u.r&&u.r){if(!/^(before|after)$/.test(u.p)&&!this._is_loaded(u.r))return this.load_node(u.r,function(){this.prepare_move(c,e,h,f,!0)});switch(u.p){case "before":u.cp=u.r.index();u.cr=u.rt._get_parent(u.r);break;case "after":u.cp=u.r.index()+1;u.cr=u.rt._get_parent(u.r);break;case "inside":case "first":u.cp=0;u.cr=u.r;break;case "last":u.cp=u.r.find(" > ul > li").length;
u.cr=u.r;break;default:u.cp=u.p,u.cr=u.r}}else switch(u.cr=-1,u.p){case "first":case "before":case "inside":u.cp=0;break;case "after":case "last":u.cp=u.rt.get_container().find(" > ul > li").length;break;default:u.cp=u.p}u.np=-1==u.cr?u.rt.get_container():u.cr;u.op=u.ot._get_parent(u.o);u.cop=u.o.index();-1===u.op&&(u.op=u.ot?u.ot.get_container():this.get_container());!/^(before|after)$/.test(u.p)&&(u.op&&u.np&&u.op[0]===u.np[0]&&u.o.index()<u.cp)&&u.cp++;u.or=u.np.find(" > ul > li:nth-child("+(u.cp+
1)+")");g=u}this.__callback(g);f&&f.call(this,g)},check_move:function(){var a=g,c=!0,e=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(!a.cy){if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==e.parentsUntil(".jstree","li").addBack().index(this))return c=!1})}return c},move_node:function(c,e,h,f,m,u){if(!m)return this.prepare_move(c,e,h,function(a){this.move_node(a,!1,!1,f,!0,u)});f&&(g.cy=!0);if(!u&&!this.check_move())return!1;
this.__rollback();e=!1;f?(e=c.o.clone(!0),e.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):e=c.o;c.or.length?c.or.before(e):(c.np.children("ul").length||a("<ul />").appendTo(c.np),c.np.children("ul:eq(0)").append(e));try{c.ot.clean_node(c.op),c.rt.clean_node(c.np),c.op.find("> ul > li").length||c.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(r){}f&&(g.cy=!0,g.oc=e);this.__callback(g);return g},_get_move:function(){return g}}})})(jQuery);
(function(a){var c,e,h;a(function(){/msie/.test(navigator.userAgent.toLowerCase())?(e=a('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),h=a('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),c=e.width()-h.width(),e.add(h).remove()):(e=a("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),c=100-e.width(),e.parent().remove())});a.jstree.plugin("ui",{__init:function(){this.data.ui.selected=a();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",a.proxy(function(c){c.preventDefault();c.currentTarget.blur();a(c.currentTarget).hasClass("jstree-loading")||this.select_node(c.currentTarget,!0,c)},this)).delegate("a","mouseenter.jstree",a.proxy(function(c){a(c.currentTarget).hasClass("jstree-loading")||
this.hover_node(c.target)},this)).delegate("a","mouseleave.jstree",a.proxy(function(c){a(c.currentTarget).hasClass("jstree-loading")||this.dehover_node(c.target)},this)).bind("reopen.jstree",a.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",a.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",a.proxy(function(){this.reselect()},this)).bind("close_node.jstree",a.proxy(function(c,e){var h=this._get_settings().ui,f=this._get_node(e.rslt.obj),
w=f&&f.length?f.children("ul").find("a.jstree-clicked"):a(),m=this;!1!==h.selected_parent_close&&w.length&&w.each(function(){m.deselect_node(this);"select_parent"===h.selected_parent_close&&m.select_node(f)})},this)).bind("delete_node.jstree",a.proxy(function(a,c){var e=this._get_settings().ui.select_prev_on_delete,h=this._get_node(c.rslt.obj),h=h&&h.length?h.find("a.jstree-clicked"):[],f=this;h.each(function(){f.deselect_node(this)});e&&h.length&&c.rslt.prev.each(function(){if(this.parentNode)return f.select_node(this),
!1})},this)).bind("move_node.jstree",a.proxy(function(a,c){c.rslt.cy&&c.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(c,e){if("undefined"===typeof c||null===c)return e?this.data.ui.selected:this.data.ui.last_selected;var h=a(c,
this.get_container());if(h.is(".jstree")||-1==c)return-1;h=h.closest("li",this.get_container());return h.length?h:!1},_ui_notify:function(a,c){c.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var c=this,e=this.data.ui.to_select,e=a.map(a.makeArray(e),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});a.each(e,function(a,e){e&&"#"!==e&&c.select_node(e)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);
if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,c;if(!a||!a.length)return!1;c=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===c[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,c,e){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var h=this._get_settings().ui,
f="on"==h.select_multiple_modifier||!1!==h.select_multiple_modifier&&e&&e[h.select_multiple_modifier+"Key"],m=!1!==h.select_range_modifier&&e&&e[h.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],u=this.is_selected(a),r=!0,O=this;if(c){if(h.disable_selecting_children&&f&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
r=!1;switch(!0){case m:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==h.select_limit||a.length<h.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==O.data.ui.last_selected[0]&&O.deselect_node(this)}),u=!1,r=!0):r=!1;break;case u&&!f:this.deselect_all();u=!1;r=!0;break;case !u&&!f:if(-1==h.select_limit||
0<h.select_limit)this.deselect_all(),r=!0;break;case u&&f:this.deselect_node(a);break;case !u&&f:if(-1==h.select_limit||this.data.ui.selected.length+1<=h.select_limit)r=!0}}r&&!u&&(m||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),h.selected_parent_open&&a.parents(".jstree-closed").each(function(){O.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:e}))},_fix_scroll:function(a){var e=this.get_container()[0];
e.scrollHeight>e.offsetHeight&&(a=this._get_node(a))&&(-1!==a&&a.length&&a.is(":visible"))&&(a=a.offset().top-this.get_container().offset().top,0>a&&(e.scrollTop=e.scrollTop+a-1),a+this.data.core.li_height+(e.scrollWidth>e.offsetWidth?c:0)>e.offsetHeight&&(e.scrollTop+=a-e.offsetHeight+this.data.core.li_height+1+(e.scrollWidth>e.offsetWidth?c:0)))},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(c){return c?a(c).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(c){c=c?a(c).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();c.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=a([]);this.data.ui.last_selected=!1;this.__callback({obj:c})}}});a.jstree.defaults.plugins.push("ui")})(jQuery);(function(a){a.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",a.proxy(function(a,e){if(this._get_settings().crrm.move.open_onmove){var h=this;e.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){h.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(c,e){c=this._get_node(c);var h=this._get_settings().core.rtl,g=this._get_settings().crrm.input_width_limit,q=c.children("ins").width(),f=c.find("> a:visible > ins").width()*c.find("> a:visible > ins").length,U=this.get_text(c),m=a("<div />",{css:{position:"absolute",top:"-200px",left:h?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
r=c.css("position","relative").append(a("<input />",{value:U,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:h?"auto":q+f+4+"px",right:h?q+f+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:a.proxy(function(){var a=c.children(".jstree-rename-input"),g=a.val();""===g&&(g=U);m.remove();a.remove();this.set_text(c,U);this.rename_node(c,g);e.call(this,c,g,U);c.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=U,this.blur()):13==a?this.blur():r.width(Math.min(m.text("pW"+this.value).width(),g))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(c,"");m.css({fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||
"",wordSpacing:r.css("wordSpacing")||""});r.width(Math.min(m.text("pW"+r[0].value).width(),g))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var e=this.__callback;this._show_input(a,function(a,c,q){e.call(this,{obj:a,new_name:c,old_name:q})})},create:function(c,e,h,g,q){var f=this;(c=this._get_node(c))||(c=-1);this.__rollback();return this.create_node(c,e,h,function(c){var e=this._get_parent(c),h=a(c).index();g&&g.call(this,c);e.length&&e.hasClass("jstree-closed")&&this.open_node(e,
!1,!0);q?f.__callback({obj:c,name:this.get_text(c),parent:e,position:h}):this._show_input(c,function(a,c,g){f.__callback({obj:a,name:c,parent:e,position:h})})})},remove:function(a){a=this._get_node(a,!0);var e=this._get_parent(a),h=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:h,parent:e})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,e,h,g,q,f){var r=
this._get_settings().crrm.move;if(!q)return"undefined"===typeof h&&(h=r.default_position),"inside"!==h||r.default_position.match(/^(before|after)$/)||(h=r.default_position),this.__call_old(!0,a,e,h,g,!1,f);if(!0===r.always_copy||"multitree"===r.always_copy&&a.rt.get_index()!==a.ot.get_index())g=!0;this.__call_old(!0,a,e,h,g,!0,f)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var e=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:e})}}})})(jQuery);(function(a){var c=[];a.jstree._themes=!1;a.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",a.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",a.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(e,h){if(!e)return!1;h||(h=a.jstree._themes+e+"/style.css");-1==a.inArray(h,c)&&(a.vakata.css.add_sheet({url:h}),c.push(h));this.data.themes.theme!=e&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=e);this.get_container().addClass("jstree-"+e);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});a(function(){!1===a.jstree._themes&&a("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return a.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===a.jstree._themes&&(a.jstree._themes="themes/")});a.jstree.defaults.plugins.push("themes")})(jQuery);(function(a){var c=[];a.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof a.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";a.each(this._get_settings().hotkeys,function(e,h){!1!==h&&-1==a.inArray(e,c)&&(a(document).bind("keydown",e,function(c){a:{var h=a.jstree._focused(),f;if(h&&(h.data&&h.data.hotkeys&&h.data.hotkeys.enabled)&&(f=h._get_settings().hotkeys[e])){c=f.call(h,c);break a}c=void 0}return c}),c.push(e))});this.get_container().bind("lock.jstree",a.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",a.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(a){a.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,e){e.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,e,h){var g=this;this.load_node_json(a,function(){g.__callback({obj:g._get_node(a)});e.call(this)},h)},_is_loaded:function(c){var e=this._get_settings().json_data;
c=this._get_node(c);return-1==c||!c||!e.ajax&&!e.progressive_render&&!a.isFunction(e.data)||c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").length},refresh:function(c){c=this._get_node(c);var e=this._get_settings().json_data;c&&(-1!==c&&e.progressive_unload&&(a.isFunction(e.data)||e.ajax))&&c.removeData("jstree_children");return this.__call_old()},load_node_json:function(c,e,h){var g=this.get_settings().json_data,q,f=function(){};q=function(){};if((c=this._get_node(c))&&-1!==
c&&(g.progressive_render||g.progressive_unload)&&!c.is(".jstree-open, .jstree-leaf")&&0===c.children("ul").children("li").length&&c.data("jstree_children")){if(q=this._parse_json(c.data("jstree_children"),c))c.append(q),g.progressive_unload||c.removeData("jstree_children");this.clean_node(c);e&&e.call(this)}else{if(c&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case !g.data&&!g.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(g.data):g.data.call(this,
c,a.proxy(function(a){(a=this._parse_json(a,c))?(-1!==c&&c?(c.append(a).children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(a.children()),this.clean_node(c),e&&e.call(this)):(-1!==c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),g.correct_state&&this.correct_state(c)):g.correct_state&&this.get_container().children("ul").empty(),h&&h.call(this))},this));break;
case !!g.data&&!g.ajax||!!g.data&&!!g.ajax&&(!c||-1===c):c&&-1!=c||((q=this._parse_json(g.data,c))?(this.get_container().children("ul").empty().append(q.children()),this.clean_node()):g.correct_state&&this.get_container().children("ul").empty());e&&e.call(this);break;case !g.data&&!!g.ajax||!!g.data&&!!g.ajax&&c&&-1!==c:f=function(a,e,q){var f=this.get_settings().json_data.ajax.error;f&&f.call(this,a,e,q);-1!=c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),
"success"===e&&g.correct_state&&this.correct_state(c)):"success"===e&&g.correct_state&&this.get_container().children("ul").empty();h&&h.call(this)},q=function(h,q,r){var u=this.get_settings().json_data.ajax.success;u&&(h=u.call(this,h,q,r)||h);if(""===h||h&&h.toString&&""===h.toString().replace(/^[\s\n]+$/,"")||!a.isArray(h)&&!a.isPlainObject(h))return f.call(this,r,q,"");(h=this._parse_json(h,c))?(-1!==c&&c?(c.append(h).children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading")):
this.get_container().children("ul").empty().append(h.children()),this.clean_node(c),e&&e.call(this)):-1!==c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(c),e&&e.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},g.ajax.context=this,g.ajax.error=f,g.ajax.success=q,g.ajax.dataType||(g.ajax.dataType="json"),a.isFunction(g.ajax.url)&&(g.ajax.url=g.ajax.url.call(this,c)),
a.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,c)),a.ajax(g.ajax)}}},_parse_json:function(c,e,h){var g=!1,q=this._get_settings(),f=q.json_data,r=q.core.html_titles,m;if(!c)return g;f.progressive_unload&&(e&&-1!==e)&&e.data("jstree_children",g);if(a.isArray(c)){g=a("<ul>");if(!c.length)return!1;q=0;for(f=c.length;q<f;q++)m=this._parse_json(c[q],e,!0),m.length&&(g=g.append(m));g=g.children()}else{"string"==typeof c&&(c={data:c});if(!c.data&&""!==c.data)return g;g=a("<li />");c.attr&&
g.attr(c.attr);c.metadata&&g.data(c.metadata);c.state&&g.addClass("jstree-"+c.state);a.isArray(c.data)||(m=c.data,c.data=[],c.data.push(m));a.each(c.data,function(e,h){m=a("<a />");a.isFunction(h)&&(h=h.call(this,c));if("string"==typeof h)m.attr("href","#")[r?"html":"text"](h);else h.attr||(h.attr={}),h.attr.href||(h.attr.href="#"),m.attr(h.attr)[r?"html":"text"](h.title),h.language&&m.addClass(h.language);m.prepend("<ins class='jstree-icon'>&#160;</ins>");!h.icon&&c.icon&&(h.icon=c.icon);h.icon&&
(-1===h.icon.indexOf("/")?m.children("ins").addClass(h.icon):m.children("ins").css("background","url('"+h.icon+"') center center no-repeat"));g.append(m)});g.prepend("<ins class='jstree-icon'>&#160;</ins>");c.children&&(f.progressive_render&&"open"!==c.state?g.addClass("jstree-closed").data("jstree_children",c.children):(f.progressive_unload&&g.data("jstree_children",c.children),a.isArray(c.children)&&c.children.length&&(m=this._parse_json(c.children,e,!0),m.length&&(e=a("<ul />"),e.append(m),g.append(e)))))}h||
(h=a("<ul />"),h.append(g),g=h);return g},get_json:function(c,e,h,g){var q=[],f=this._get_settings(),r=this,m,H,u,N,O,T;(c=this._get_node(c))&&-1!==c||(c=this.get_container().find("> ul > li"));e=a.isArray(e)?e:["id","class"];!g&&this.data.types&&e.push(f.types.type_attr);h=a.isArray(h)?h:[];c.each(function(){u=a(this);m={data:[]};e.length&&(m.attr={});a.each(e,function(a,c){(H=u.attr(c))&&(H.length&&H.replace(/jstree[^ ]*/ig,"").length)&&(m.attr[c]=(" "+H).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))});u.hasClass("jstree-open")&&(m.state="open");u.hasClass("jstree-closed")&&(m.state="closed");u.data()&&(m.metadata=u.data());N=u.children("a");N.each(function(){O=a(this);h.length||-1!==a.inArray("languages",f.plugins)||O.children("ins").get(0).style.backgroundImage.length||O.children("ins").get(0).className&&O.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(T=!1,-1!==a.inArray("languages",f.plugins)&&(a.isArray(f.languages)&&f.languages.length)&&
a.each(f.languages,function(a,c){if(O.hasClass(c))return T=c,!1}),H={attr:{},title:r.get_text(O,T)},a.each(h,function(a,c){H.attr[c]=(" "+(O.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==a.inArray("languages",f.plugins)&&(a.isArray(f.languages)&&f.languages.length)&&a.each(f.languages,function(a,c){if(O.hasClass(c))return H.language=c,!0}),O.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(H.icon=
O.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),O.children("ins").get(0).style.backgroundImage.length&&(H.icon=O.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):H=r.get_text(O);1<N.length?m.data.push(H):m.data=H});u=u.find("> ul > li");u.length&&(m.children=r.get_json(u,e,h,!0));q.push(m)});return q}}})})(jQuery);(function(a){var c=!1;a.jstree.plugin("languages",{__init:function(){this._load_css()},
defaults:[],_fn:{set_lang:function(e){var h=this._get_settings().languages,g=!1,q=".jstree-"+this.get_index()+" a";if(!a.isArray(h)||0===h.length)return!1;if(-1==a.inArray(e,h))if(h[e])e=h[e];else return!1;if(e==this.data.languages.current_language)return!0;g=a.vakata.css.get_css(q+"."+this.data.languages.current_language,!1,c);!1!==g&&(g.style.display="none");g=a.vakata.css.get_css(q+"."+e,!1,c);!1!==g&&(g.style.display="");this.data.languages.current_language=e;this.__callback(e);return!0},get_lang:function(){return this.data.languages.current_language},
_get_string:function(c,h){var g=this._get_settings().languages,q=this._get_settings().core.strings;a.isArray(g)&&g.length&&(h=h&&-1!=a.inArray(h,g)?h:this.data.languages.current_language);return q[h]&&q[h][c]?q[h][c]:q[c]?q[c]:c},get_text:function(c,h){c=this._get_node(c)||this.data.ui.last_selected;if(!c.size())return!1;var g=this._get_settings().languages,q=this._get_settings().core.html_titles;a.isArray(g)&&g.length?(h=h&&-1!=a.inArray(h,g)?h:this.data.languages.current_language,c=c.children("a."+
h)):c=c.children("a:eq(0)");if(q)return c=c.clone(),c.children("INS").remove(),c.html();c=c.contents().filter(function(){return 3==this.nodeType})[0];return c.nodeValue},set_text:function(c,h,g){c=this._get_node(c)||this.data.ui.last_selected;if(!c.size())return!1;var q=this._get_settings().languages,f=this._get_settings().core.html_titles;a.isArray(q)&&q.length?(g=g&&-1!=a.inArray(g,q)?g:this.data.languages.current_language,c=c.children("a."+g)):c=c.children("a:eq(0)");if(f)return q=c.children("INS").clone(),
c.html(h).prepend(q),this.__callback({obj:c,name:h,lang:g}),!0;c=c.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:c,name:h,lang:g});return c.nodeValue=h},_load_css:function(){var e=this._get_settings().languages,h="/* languages css */",g=".jstree-"+this.get_index()+" a",q;if(a.isArray(e)&&e.length){this.data.languages.current_language=e[0];for(q=0;q<e.length;q++)h+=g+"."+e[q]+" {",e[q]!=this.data.languages.current_language&&(h+=" display:none; "),h+=" } ";c=a.vakata.css.add_sheet({str:h,
title:"jstree-languages"})}},create_node:function(c,h,g,q){return this.__call_old(!0,c,h,g,function(c){var g=this._get_settings().languages,h=c.children("a"),e;if(a.isArray(g)&&g.length){for(e=0;e<g.length;e++)h.is("."+g[e])||c.append(h.eq(0).clone().removeClass(g.join(" ")).addClass(g[e]));h.not("."+g.join(", .")).remove()}q&&q.call(this,c)})}}})})(jQuery);(function(a){a.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof a.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var c=this._get_settings().cookies,e;c.save_loaded&&(e=a.cookie(c.save_loaded))&&e.length&&(this.data.core.to_load=e.split(","));c.save_opened&&(e=a.cookie(c.save_opened))&&e.length&&(this.data.core.to_open=e.split(","));c.save_selected&&(e=a.cookie(c.save_selected))&&(e.length&&this.data.ui)&&(this.data.ui.to_select=e.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",a.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
a.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(c){if(!this.data.core.refreshing){var e=this._get_settings().cookies;if(c)switch(c){case "open_node":case "close_node":e.save_opened&&(this.save_opened(),a.cookie(e.save_opened,this.data.core.to_open.join(","),
e.cookie_options));e.save_loaded&&(this.save_loaded(),a.cookie(e.save_loaded,this.data.core.to_load.join(","),e.cookie_options));break;case "select_node":case "deselect_node":e.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(e.save_selected,this.data.ui.to_select.join(","),e.cookie_options))}else e.save_loaded&&(this.save_loaded(),a.cookie(e.save_loaded,this.data.core.to_load.join(","),e.cookie_options)),e.save_opened&&(this.save_opened(),a.cookie(e.save_opened,this.data.core.to_open.join(","),
e.cookie_options)),e.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(e.save_selected,this.data.ui.to_select.join(","),e.cookie_options))}}}})})(jQuery);(function(a){a.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",a.proxy(function(a,e){var h=this._get_node(e.rslt.obj),h=-1===h?this.get_container().children("ul"):h.children("ul");this.sort(h)},this)).bind("rename_node.jstree create_node.jstree create.jstree",a.proxy(function(a,e){this.sort(e.rslt.obj.parent())},
this)).bind("move_node.jstree",a.proxy(function(a,e){var h=-1==e.rslt.np?this.get_container():e.rslt.np;this.sort(h.children("ul"))},this))},defaults:function(a,e){return this.get_text(a)>this.get_text(e)?1:-1},_fn:{sort:function(c){var e=this._get_settings().sort,h=this;c.append(a.makeArray(c.children("li")).sort(a.proxy(e,h)));c.find("> li > ul").each(function(){h.sort(a(this))});this.clean_node(c)}}})})(jQuery);(function(a){var c=!1,e=!1,h=!1,g=!1,q=!1,f=!1,m=!1,r=!1,H=!1;a.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(c,g,h){a.vakata.dnd.is_drag&&a.vakata.drag_stop({});try{c.currentTarget.unselectable="on",c.currentTarget.onselectstart=function(){return!1},c.currentTarget.style&&(c.currentTarget.style.MozUserSelect="none")}catch(e){}a.vakata.dnd.init_x=c.pageX;a.vakata.dnd.init_y=c.pageY;a.vakata.dnd.user_data=g;a.vakata.dnd.is_down=!0;a.vakata.dnd.helper=a("<div id='vakata-dragged' />").html(h);
a(document).bind("mousemove",a.vakata.dnd.drag);a(document).bind("mouseup",a.vakata.dnd.drag_stop);return!1},drag:function(c){if(a.vakata.dnd.is_down){if(!a.vakata.dnd.is_drag)if(5<Math.abs(c.pageX-a.vakata.dnd.init_x)||5<Math.abs(c.pageY-a.vakata.dnd.init_y))a.vakata.dnd.helper.appendTo("body"),a.vakata.dnd.is_drag=!0,a(document).triggerHandler("drag_start.vakata",{event:c,data:a.vakata.dnd.user_data});else return;if("mousemove"===c.type){var g=a(document),h=g.scrollTop(),g=g.scrollLeft();20>c.pageY-
h?(f&&"down"===m&&(clearInterval(f),f=!1),f||(m="up",f=setInterval(function(){a(document).scrollTop(a(document).scrollTop()-a.vakata.dnd.scroll_spd)},150))):f&&"up"===m&&(clearInterval(f),f=!1);20>a(window).height()-(c.pageY-h)?(f&&"up"===m&&(clearInterval(f),f=!1),f||(m="down",f=setInterval(function(){a(document).scrollTop(a(document).scrollTop()+a.vakata.dnd.scroll_spd)},150))):f&&"down"===m&&(clearInterval(f),f=!1);20>c.pageX-g?(q&&"right"===r&&(clearInterval(q),q=!1),q||(r="left",q=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()-
a.vakata.dnd.scroll_spd)},150))):q&&"left"===r&&(clearInterval(q),q=!1);20>a(window).width()-(c.pageX-g)?(q&&"left"===r&&(clearInterval(q),q=!1),q||(r="right",q=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()+a.vakata.dnd.scroll_spd)},150))):q&&"right"===r&&(clearInterval(q),q=!1)}a.vakata.dnd.helper.css({left:c.pageX+a.vakata.dnd.helper_left+"px",top:c.pageY+a.vakata.dnd.helper_top+"px"});a(document).triggerHandler("drag.vakata",{event:c,data:a.vakata.dnd.user_data})}},drag_stop:function(c){q&&
clearInterval(q);f&&clearInterval(f);a(document).unbind("mousemove",a.vakata.dnd.drag);a(document).unbind("mouseup",a.vakata.dnd.drag_stop);a(document).triggerHandler("drag_stop.vakata",{event:c,data:a.vakata.dnd.user_data});a.vakata.dnd.helper.remove();a.vakata.dnd.init_x=0;a.vakata.dnd.init_y=0;a.vakata.dnd.user_data={};a.vakata.dnd.is_down=!1;a.vakata.dnd.is_drag=!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});a.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",a.proxy(function(e){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.themes&&(h.attr("class","jstree-"+this.data.themes.theme),g&&g.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
e.currentTarget===e.target&&(a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target)&&(e=a.jstree._reference(e.target),e.data.dnd.foreign?(e=e._get_settings().dnd.drag_check.call(this,{o:c,r:e.get_container(),is_root:!0}),!0!==e&&!0!==e.inside&&!0!==e.before&&!0!==e.after||a.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(e.prepare_move(c,e.get_container(),"last"),e.check_move()&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",a.proxy(function(g){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&g.currentTarget===g.target&&a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==g.target){var e=a.jstree._reference(g.currentTarget);e.data.dnd.foreign?(g=e._get_settings().dnd.drag_check.call(this,{o:c,r:e.get_container(),is_root:!0}),!0!==g&&!0!==g.inside&&!0!==g.before&&!0!==g.after||e._get_settings().dnd.drag_finish.call(this,
{o:c,r:e.get_container(),is_root:!0})):e.move_node(c,e.get_container(),"last",g[e._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",a.proxy(function(c){if(c.relatedTarget&&c.relatedTarget.id&&"jstree-marker-line"===c.relatedTarget.id)return!1;a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",a.proxy(function(c){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree){var g=this.get_container()[0];c.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft+=a.vakata.dnd.scroll_spd},g),100)):c.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft-=a.vakata.dnd.scroll_spd},g),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);c.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop+=a.vakata.dnd.scroll_spd},g),100)):c.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop-=
a.vakata.dnd.scroll_spd},g),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&(a.vakata.dnd.user_data.jstree&&h&&g)&&(h.hide(),g.hide())},this)).delegate("a","mousedown.jstree",a.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_enter(c.currentTarget)},this)).delegate("a",
"mousemove.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(e&&e.length&&e.children("a")[0]===c.currentTarget||this.dnd_enter(c.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=a(c.target).offset()),this.data.dnd.w=(c.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",a.proxy(function(c){if(a.vakata.dnd.is_drag&&
a.vakata.dnd.user_data.jstree){if(c.relatedTarget&&c.relatedTarget.id&&"jstree-marker-line"===c.relatedTarget.id)return!1;h&&h.hide();g&&g.hide();this.data.dnd.mto=setTimeout(function(a){return function(){a.dnd_leave(c)}}(this),0)}},this)).delegate("a","mouseup.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_finish(c)},this));a(document).bind("drag_stop.vakata",a.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;h&&h.css({top:"-2000px"});g&&g.css({top:"-2000px"})},this)).bind("drag_start.vakata",a.proxy(function(c,g){if(g.data.jstree){var e=a(g.event.target);
e.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(e)}},this));var q=this._get_settings().dnd;q.drag_target&&a(document).delegate(q.drag_target,"mousedown.jstree-"+this.get_index(),a.proxy(function(e){c=e.target;a.vakata.dnd.drag_start(e,{jstree:!0,obj:e.target},"<ins class='jstree-icon'></ins>"+a(e.target).text());this.data.themes&&(h&&h.attr("class","jstree-"+this.data.themes.theme),g&&g.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var q=this.get_container();this.data.dnd.cof=q.offset();this.data.dnd.cw=parseInt(q.width(),10);this.data.dnd.ch=parseInt(q.height(),10);this.data.dnd.foreign=!0;e.preventDefault()},this));q.drop_target&&a(document).delegate(q.drop_target,"mouseenter.jstree-"+this.get_index(),a.proxy(function(g){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:c,r:a(g.target),e:g})&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(q.drop_target,"mouseleave.jstree-"+this.get_index(),a.proxy(function(c){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(q.drop_target,"mouseup.jstree-"+this.get_index(),a.proxy(function(g){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:c,r:a(g.target),e:g})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:a.noop,drag_target:".jstree-draggable",drag_finish:a.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(e&&e.length){this.data.dnd.off=e.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+e.width());if(this.data.dnd.foreign){var a=this._get_settings().dnd.drag_check.call(this,{o:c,r:e});this.data.dnd.after=a.after;this.data.dnd.before=a.before;
this.data.dnd.inside=a.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(c,e,"before");this.data.dnd.before=this.check_move();this.prepare_move(c,e,"after");this.data.dnd.after=this.check_move();this._is_loaded(e)?(this.prepare_move(c,e,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var c=["before","inside","after"],e=!1,q=this._get_settings().core.rtl,
c=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];a.each(c,a.proxy(function(c,g){if(this.data.dnd[g])return a.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),e=g,!1},this));!1===e&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");c=q?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(e){case "before":h.css({left:c+"px",top:this.data.dnd.off.top-6+"px"}).show();g&&g.css({left:c+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":h.css({left:c+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();g&&g.css({left:c+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":h.css({left:c+(q?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();g&&g.hide();break;default:h.hide(),
g&&g.hide()}return H=e}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(e,a.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(a){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:c,r:e,p:H}):(this.dnd_prepare(),this.move_node(c,e,H,a[this._get_settings().dnd.copy_modifier+"Key"]));e=c=!1;h.hide();g&&g.hide()},dnd_enter:function(c){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var g=this._get_settings().dnd;this.data.dnd.prepared=!1;e=this._get_node(c);g.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(a.proxy(this.dnd_prepare,this),g.check_timeout)):this.dnd_prepare();g.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e&&(e.length&&e.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(a.proxy(this.dnd_open,this),g.open_timeout))):e&&(e.length&&e.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(c){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");h.hide();g&&g.hide();e&&e[0]===c.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(e,q){c=this._get_node(e);this.data.ui&&this.is_selected(c)&&(c=this._get_node(null,!0));var f=1<c.length?this._get_string("multiple_selection"):this.get_text(c),
m=this.get_container();this._get_settings().core.html_titles||(f=f.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));a.vakata.dnd.drag_start(q,{jstree:!0,obj:c},"<ins class='jstree-icon'></ins>"+f);this.data.themes&&(h&&h.attr("class","jstree-"+this.data.themes.theme),g&&g.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=m.offset();this.data.dnd.cw=parseInt(m.width(),10);this.data.dnd.ch=parseInt(m.height(),
10);this.data.dnd.active=!0}}});a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});h=a("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){h.hide();g.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");g=a("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(e&&e.length)return e.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(c){var q=a(c.relatedTarget);if((q.is(".jstree")||0===q.closest(".jstree").length)&&
e&&e.length)return e.children("a").trigger(c),h.hide(),g.hide(),c.preventDefault(),c.stopImmediatePropagation(),!1}).appendTo("body");a(document).bind("drag_start.vakata",function(a,c){c.data.jstree&&(h.show(),g&&g.show())});a(document).bind("drag_stop.vakata",function(a,c){c.data.jstree&&(h.hide(),g&&g.hide())})})})(jQuery);(function(a){a.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=a.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",a.proxy(function(a,e){this._prepare_checkboxes(e.rslt.obj)},this)).bind("loaded.jstree",a.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",a.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,e){e.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(c){c=c&&-1!=c?this._get_node(c):this.get_container().find("> ul > li");if(!1!==c){var e,h=this,g,q=this._get_settings().checkbox.two_state,f=this._get_settings().checkbox.real_checkboxes,m=this._get_settings().checkbox.real_checkboxes_names;c.each(function(){g=a(this);e=g.is("li")&&(g.hasClass("jstree-checked")||f&&g.children(":checked").length)?"jstree-checked":"jstree-unchecked";g.find("li").addBack().each(function(){var c=
a(this),g;c.children("a"+(h.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(q?"jstree-unchecked":e);f&&(c.children(":checkbox").length?c.children(":checkbox").addClass("jstree-real-checkbox"):(g=m.call(h,c),c.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+g[0]+"' name='"+g[0]+"' value='"+g[1]+"' />")));q?(c.hasClass("jstree-checked")||c.children(":checked").length)&&
c.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===e||c.hasClass("jstree-checked")||c.children(":checked").length)&&c.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});q||c.find(".jstree-checked").parent().parent().each(function(){h._repair_state(this)})}},change_state:function(c,e){c=this._get_node(c);var h=!1,g=this._get_settings().checkbox.real_checkboxes;if(!c||-1===c)return!1;e=!1===e||!0===e?e:c.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)e?(c.removeClass("jstree-checked").addClass("jstree-unchecked"),g&&c.children(":checkbox").prop("checked",!1)):(c.removeClass("jstree-unchecked").addClass("jstree-checked"),g&&c.children(":checkbox").prop("checked",!0));else{if(e){h=c.find("li").addBack();if(!h.filter(".jstree-checked, .jstree-undetermined").length)return!1;h.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");g&&h.children(":checkbox").prop("checked",!1)}else{h=
c.find("li").addBack();if(!h.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;h.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");g&&h.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=c);this.data.checkbox.last_selected=c}c.parentsUntil(".jstree","li").each(function(){var c=a(this);if(e){if(c.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return c.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
g&&c.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;c.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");g&&c.children(":checkbox").prop("checked",!1)}else{if(c.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return c.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),g&&c.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;c.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");g&&c.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(c);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var e=this;a.parents(".jstree-closed").each(function(){e.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,e){a=a&&-1!==a?this._get_node(a):this.get_container();return e||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,e){a=a&&-1!==a?this._get_node(a):this.get_container();return e||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var e=this._get_settings().checkbox.real_checkboxes,
h=a.find("> ul > .jstree-checked").length,g=a.find("> ul > .jstree-undetermined").length,q=a.find("> ul > li").length;0===q?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===h&&0===g?this.change_state(a,!0):h===q?this.change_state(a,!1):(a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var c=
this,e=this.data.ui.to_select,e=a.map(a.makeArray(e),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();a.each(e,function(a,g){c.check_node(g)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
a(function(){a.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(a){a.vakata.xslt=function(c,g,e){var f=!1,m,r,H;if(!1===f&&window.ActiveXObject)try{f=new ActiveXObject("Msxml2.XSLTemplate"),r=new ActiveXObject("Msxml2.DOMDocument"),r.loadXML(c),H=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),H.loadXML(g),f.stylesheet=H,m=f.createProcessor(),m.input=r,m.transform(),f=m.output}catch(u){}c=a.parseXML(c);g=a.parseXML(g);!1===f&&
"undefined"!==typeof XSLTProcessor&&(m=new XSLTProcessor,m.importStylesheet(g),f=m.transformToFragment(c,document),f=a("<div />").append(f).html());!1===f&&"undefined"!==typeof c.transformNode&&(f=c.transformNode(g));e.call(null,f)};var c={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
e=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};a.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,c,e){var f=this;this.load_node_xml(a,function(){f.__callback({obj:f._get_node(a)});c.call(this)},e)},_is_loaded:function(c){var g=this._get_settings().xml_data;c=this._get_node(c);return-1==c||
!c||!g.ajax&&!a.isFunction(g.data)||c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").size()},load_node_xml:function(c,g,e){var f=this.get_settings().xml_data,m=function(){},r=function(){};if((c=this._get_node(c))&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case !f.data&&!f.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(f.data):f.data.call(this,c,a.proxy(function(e){this.parse_xml(e,a.proxy(function(e){e&&(e=
e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length?(e=a(e),-1!==c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(e),c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),f.clean_node&&this.clean_node(c),g&&g.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(c),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},this));break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!c||-1===c):c&&-1!=c||this.parse_xml(f.data,a.proxy(function(e){e?(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length&&(e=a(e),this.get_container().children("ul").empty().append(e.children()),f.clean_node&&this.clean_node(c),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},this));break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&c&&-1!==c:m=function(a,g,m){var r=this.get_settings().xml_data.ajax.error;
r&&r.call(this,a,g,m);-1!==c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),"success"===g&&f.correct_state&&this.correct_state(c)):"success"===g&&f.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},r=function(e,q,r){e=r.responseText;var w=this.get_settings().xml_data.ajax.success;w&&(e=w.call(this,e,q,r)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return m.call(this,r,q,"");this.parse_xml(e,
a.proxy(function(e){e&&(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length?(e=a(e),-1!==c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(e),c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),f.clean_node&&this.clean_node(c),g&&g.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(c),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},f.ajax.context=this,f.ajax.error=m,f.ajax.success=r,f.ajax.dataType||(f.ajax.dataType="xml"),a.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,c)),a.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,c)),a.ajax(f.ajax)}},parse_xml:function(e,g){var f=this._get_settings().xml_data;a.vakata.xslt(e,c[f.xsl],g)},get_xml:function(c,g,f,m,r){var w="",H=this._get_settings(),u=this,N,O,T,Sa,Ha;c||(c="flat");r||(r=0);(g=this._get_node(g))&&-1!==g||(g=this.get_container().find("> ul > li"));
f=a.isArray(f)?f:["id","class"];!r&&(this.data.types&&-1===a.inArray(H.types.type_attr,f))&&f.push(H.types.type_attr);m=a.isArray(m)?m:[];r||(H.xml_data.get_include_preamble&&(w+='<?xml version="1.0" encoding="UTF-8"?>'),w+="<root>");g.each(function(){w+="<item";T=a(this);a.each(f,function(a,c){var g=T.attr(c);H.xml_data.get_skip_empty&&"undefined"===typeof g||(w+=" "+c+'="'+e((" "+(g||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});T.hasClass("jstree-open")&&
(w+=' state="open"');T.hasClass("jstree-closed")&&(w+=' state="closed"');"flat"===c&&(w+=' parent_id="'+e(r)+'"');w+=">";w+="<content>";Sa=T.children("a");Sa.each(function(){N=a(this);Ha=!1;w+="<name";-1!==a.inArray("languages",H.plugins)&&a.each(H.languages,function(a,c){if(N.hasClass(c))return w+=' lang="'+e(c)+'"',Ha=c,!1});m.length&&a.each(m,function(a,c){var g=N.attr(c);H.xml_data.get_skip_empty&&"undefined"===typeof g||(w+=" "+c+'="'+e((" "+g||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"')});N.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(w+=' icon="'+e(N.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');N.children("ins").get(0).style.backgroundImage.length&&(w+=' icon="'+e(N.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');w+=">";w+="<![CDATA["+
u.get_text(N,Ha)+"]]\x3e";w+="</name>"});w+="</content>";O=T[0].id||!0;T=T.find("> ul > li");O=T.length?u.get_xml(c,T,f,m,O):"";"nest"==c&&(w+=O);w+="</item>";"flat"==c&&(w+=O)});r||(w+="</root>");return w}}})})(jQuery);(function(a){8<=a().jquery.split(".")[1]?(a.expr[":"].jstree_contains=a.expr.createPseudo(function(a){return function(e){return 0<=(e.textContent||e.innerText||"").toLowerCase().indexOf(a.toLowerCase())}}),a.expr[":"].jstree_title_contains=a.expr.createPseudo(function(a){return function(e){return 0<=
(e.getAttribute("title")||"").toLowerCase().indexOf(a.toLowerCase())}})):(a.expr[":"].jstree_contains=function(a,e,h){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(h[3].toLowerCase())},a.expr[":"].jstree_title_contains=function(a,e,h){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(h[3].toLowerCase())});a.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=a();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(c,e){a(this).children("ul").find("li").hide().removeClass("jstree-last");e.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){a(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){a(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(c,e){if(""===a.trim(c))this.clear_search();else{var h=
this.get_settings().search,g=this,f=function(){};this.data.search.str=c;if(!e&&!1!==h.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(a,c,e){var g=this.get_settings().search.ajax.success;g&&(a=g.call(this,a,c,e)||a);this.data.search.to_open=a;this._search_open()};h.ajax.context=this;h.ajax.error=function(){};h.ajax.success=f;a.isFunction(h.ajax.url)&&(h.ajax.url=h.ajax.url.call(this,c));a.isFunction(h.ajax.data)&&(h.ajax.data=
h.ajax.data.call(this,c));h.ajax.data||(h.ajax.data={search_string:c});if(!h.ajax.dataType||/^json/.exec(h.ajax.dataType))h.ajax.dataType="json";a.ajax(h.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+h.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){g.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:c})}},clear_search:function(c){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=a()},_search_open:function(c){var e=this;c=!0;var h=[],g=[];this.data.search.to_open.length&&(a.each(this.data.search.to_open,function(c,e){if("#"==e)return!0;a(e).length&&a(e).is(".jstree-closed")?h.push(e):g.push(e)}),h.length&&(this.data.search.to_open=g,a.each(h,function(a,c){e.open_node(c,function(){e._search_open(!0)})}),c=!1));c&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(a){a.vakata.context={hide_on_mouseleave:!1,cnt:a("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(c,e,h,g,f,m,r){a.vakata.context.rtl=!!r;if(c=a.vakata.context.parse(c)){a.vakata.context.vis=!0;a.vakata.context.tgt=e;a.vakata.context.par=m||e||null;a.vakata.context.data=f||null;a.vakata.context.cnt.html(c).css({visibility:"hidden",display:"block",left:0,top:0});if(a.vakata.context.hide_on_mouseleave)a.vakata.context.cnt.one("mouseleave",
function(c){a.vakata.context.hide()});f=a.vakata.context.cnt.height();m=a.vakata.context.cnt.width();h+m>a(document).width()&&(h=a(document).width()-(m+5),a.vakata.context.cnt.find("li > ul").addClass("right"));g+f>a(document).height()&&(g-=f+e[0].offsetHeight,a.vakata.context.cnt.find("li > ul").addClass("bottom"));a.vakata.context.cnt.css({left:h,top:g}).find("li:has(ul)").bind("mouseenter",function(c){c=a(document).width();var e=a(document).height(),g=a(this).children("ul").show();c!==a(document).width()&&
g.toggleClass("right");e!==a(document).height()&&g.toggleClass("bottom")}).bind("mouseleave",function(c){a(this).children("ul").hide()}).end().css({visibility:"visible"}).show();a(document).triggerHandler("context_show.vakata")}},hide:function(){a.vakata.context.vis=!1;a.vakata.context.cnt.attr("class","").css({visibility:"hidden"});a(document).triggerHandler("context_hide.vakata")},parse:function(c,e){if(!c)return!1;var h="",g=!1,f=!0;e||(a.vakata.context.func={});h+="<ul>";a.each(c,function(c,e){if(!e)return!0;
a.vakata.context.func[c]=e.action;!f&&e.separator_before&&(h+="<li class='vakata-separator vakata-separator-before'></li>");f=!1;h+="<li class='"+(e._class||"")+(e._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";e.icon&&-1===e.icon.indexOf("/")&&(h+=" class='"+e.icon+"' ");e.icon&&-1!==e.icon.indexOf("/")&&(h+=" style='background:url("+e.icon+") center center no-repeat;' ");h+=">&#160;</ins><a href='#' rel='"+c+"'>";e.submenu&&(h+="<span style='float:"+(a.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");h+=e.label+"</a>";e.submenu&&(g=a.vakata.context.parse(e.submenu,!0))&&(h+=g);h+="</li>";e.separator_after&&(h+="<li class='vakata-separator vakata-separator-after'></li>",f=!0)});h=h.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");h+="</ul>";a(document).triggerHandler("context_parse.vakata");return 10<h.length?h:!1},exec:function(c){return a.isFunction(a.vakata.context.func[c])?(a.vakata.context.func[c].call(a.vakata.context.data,a.vakata.context.par),
!0):!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});a.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(c){!a(this).parent().hasClass("jstree-contextmenu-disabled")&&a.vakata.context.exec(a(this).attr("rel"))?a.vakata.context.hide():a(this).blur()}).delegate("a","mouseover",function(){a.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");a(document).bind("mousedown",function(c){a.vakata.context.vis&&!a.contains(a.vakata.context.cnt[0],c.target)&&
a.vakata.context.hide()});"undefined"!==typeof a.hotkeys&&a(document).bind("keydown","up",function(c){if(a.vakata.context.vis){var e=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();e.length||(e=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());e.addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","down",function(c){if(a.vakata.context.vis){var e=
a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();e.length||(e=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());e.addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","right",function(c){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
c.stopImmediatePropagation(),c.preventDefault())}).bind("keydown","left",function(c){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),c.stopImmediatePropagation(),c.preventDefault())}).bind("keydown","esc",function(c){a.vakata.context.hide();c.preventDefault()}).bind("keydown","space",function(c){a.vakata.context.cnt.find(".vakata-hover").last().children("a").click();c.preventDefault()})});a.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",a.proxy(function(c){c.preventDefault();a(c.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(c.currentTarget,c.pageX,c.pageY)},this)).delegate("a","click.jstree",a.proxy(function(c){this.data.contextmenu&&a.vakata.context.hide()},this)).bind("destroy.jstree",a.proxy(function(){this.data.contextmenu&&a.vakata.context.hide()},this));a(document).bind("context_hide.vakata",a.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(c,e,f){c=this._get_node(c);var g=this.get_settings().contextmenu,q=c.children("a:visible:eq(0)"),m=!1,m=!1;g.select_node&&(this.data.ui&&!this.is_selected(c))&&(this.deselect_all(),this.select_node(c,
!0));if(g.show_at_node||"undefined"===typeof e||"undefined"===typeof f)m=q.offset(),e=m.left,f=m.top+this.data.core.li_height;m=c.data("jstree")&&c.data("jstree").contextmenu?c.data("jstree").contextmenu:g.items;a.isFunction(m)&&(m=m.call(this,c));this.data.contextmenu=!0;a.vakata.context.show(m,q,e,f,this,c,this._get_settings().core.rtl);this.data.themes&&a.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(a){a.jstree.plugin("types",{__init:function(){var c=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",a.proxy(function(){var e=c.type_attr,f="",g=this;a.each(c.types,function(c,m){a.each(m,function(a,c){/^(max_depth|max_children|icon|valid_children)$/.test(a)||g.data.types.attach_to.push(a)});if(!m.icon)return!0;if(m.icon.image||m.icon.position)f="default"==c?f+(".jstree-"+g.get_index()+" a > .jstree-icon { "):f+(".jstree-"+g.get_index()+" li["+e+'="'+c+'"] > a > .jstree-icon { '),m.icon.image&&(f+=" background-image:url("+
m.icon.image+"); "),f=m.icon.position?f+(" background-position:"+m.icon.position+"; "):f+" background-position:0 0; ",f+="} "});""!==f&&a.vakata.css.add_sheet({str:f,title:"jstree-types"})},this)).bind("before.jstree",a.proxy(function(c,f){var g,q;if((g=(g=this._get_settings().types.use_data?this._get_node(f.args[0]):!1)&&-1!==g&&g.length?g.data("jstree"):!1)&&g.types&&!1===g.types[f.func]||-1!==a.inArray(f.func,this.data.types.attach_to)&&(f.args[0]&&(f.args[0].tagName||f.args[0].jquery))&&(g=this._get_settings().types.types,
q=this._get_type(f.args[0]),(g[q]&&"undefined"!==typeof g[q][f.func]||g["default"]&&"undefined"!==typeof g["default"][f.func])&&!1===this._check(f.func,f.args[0])))return c.stopImmediatePropagation(),!1},this));f&&this.get_container().bind("load_node.jstree set_type.jstree",a.proxy(function(c,f){var g=f&&f.rslt&&f.rslt.obj&&-1!==f.rslt.obj?this._get_node(f.rslt.obj).parent():this.get_container_ul(),q=!1,m=this._get_settings().types;a.each(m.types,function(a,c){c.icon&&(c.icon.image||c.icon.position)&&
(q="default"===a?g.find("li > a > .jstree-icon"):g.find("li["+m.type_attr+"='"+a+"'] > a > .jstree-icon"),c.icon.image&&q.css("backgroundImage","url("+c.icon.image+")"),q.css("backgroundPosition",c.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,e){e.type&&this._get_settings().types.use_data&&this.set_type(e.type,a)},_get_type:function(a){return(a=
this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,e){e=this._get_node(e);var f=e.length&&a?e.attr(this._get_settings().types.type_attr,a):!1;f&&this.__callback({obj:e,type:a});return f},_check:function(c,e,f){e=this._get_node(e);var g=!1,q=this._get_type(e),m=0,r=this,w=this._get_settings().types,H=!1;if(-1===e)if(w[c])g=w[c];else return;else{if(!1===q)return;(H=w.use_data?e.data("jstree"):!1)&&H.types&&"undefined"!==typeof H.types[c]?g=H.types[c]:
w.types[q]&&"undefined"!==typeof w.types[q][c]?g=w.types[q][c]:w.types["default"]&&"undefined"!==typeof w.types["default"][c]&&(g=w.types["default"][c])}a.isFunction(g)&&(g=g.call(this,e));"max_depth"===c&&(-1!==e&&!1!==f&&-2!==w.max_depth&&0!==g)&&e.children("a:eq(0)").parentsUntil(".jstree","li").each(function(a){if(-1!==w.max_depth&&0>=w.max_depth-(a+1))return g=0,!1;m=0===a?g:r._check(c,this,!1);if(-1!==m&&0>=m-(a+1))return g=0,!1;0<=m&&(m-(a+1)<g||0>g)&&(g=m-(a+1));0<=w.max_depth&&(w.max_depth-
(a+1)<g||0>g)&&(g=w.max_depth-(a+1))});return g},check_move:function(){if(!this.__call_old())return!1;var c=this._get_move(),e=c.rt._get_settings().types,f=c.rt._check("max_children",c.cr),g=c.rt._check("max_depth",c.cr),q=c.rt._check("valid_children",c.cr),m=0,r=1;if("none"===q||a.isArray(q)&&(c.ot&&c.ot._get_type)&&(c.o.each(function(){if(-1===a.inArray(c.ot._get_type(this),q))return r=!1}),!1===r)||-2!==e.max_children&&-1!==f&&(m=-1===c.cr?this.get_container().find("> ul > li").not(c.o).length:
c.cr.find("> ul > li").not(c.o).length,m+c.o.length>f))return!1;if(-2!==e.max_depth&&-1!==g){r=0;if(0===g)return!1;if("undefined"===typeof c.o.d){for(e=c.o;0<e.length;)e=e.find("> ul > li"),r++;c.o.d=r}if(0>g-c.o.d)return!1}return!0},create_node:function(c,e,f,g,q,m){if(!m&&(q||this._is_loaded(c))){var r="string"==typeof e&&e.match(/^before|after$/i)&&-1!==c?this._get_parent(c):this._get_node(c),w=this._get_settings().types,H=this._check("max_children",r),u=this._check("max_depth",r),N=this._check("valid_children",
r);"string"===typeof f&&(f={data:f});f||(f={});if("none"===N)return!1;if(a.isArray(N))if(!f.attr||!f.attr[w.type_attr])f.attr||(f.attr={}),f.attr[w.type_attr]=N[0];else if(-1===a.inArray(f.attr[w.type_attr],N))return!1;if(-2!==w.max_children&&-1!==H&&(r=-1===r?this.get_container().find("> ul > li").length:r.find("> ul > li").length,r+1>H)||-2!==w.max_depth&&-1!==u&&0>u-1)return!1}return this.__call_old(!0,c,e,f,g,q,m)}}})})(jQuery);(function(a){a.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=
this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,e,f){var g=this;this.load_node_html(a,function(){g.__callback({obj:g._get_node(a)});e.call(this)},f)},_is_loaded:function(c){c=this._get_node(c);return-1==c||!c||!this._get_settings().html_data.ajax&&!a.isFunction(this._get_settings().html_data.data)||
c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").size()},load_node_html:function(c,e,f){var g,q=this.get_settings().html_data,m=function(){};g=function(){};if((c=this._get_node(c))&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case a.isFunction(q.data):q.data.call(this,c,a.proxy(function(g){g&&""!==g&&g.toString&&""!==g.toString().replace(/^[\s\n]+$/,"")?(g=a(g),g.is("ul")||(g=a("<ul />").append(g)),-1!=c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),
c.append(g).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node(c),e&&e.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),q.correct_state&&(this.correct_state(c),e&&e.call(this))):q.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},this));break;case !q.data&&!q.ajax:c&&-1!=c||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());e&&e.call(this);break;case !!q.data&&!q.ajax||!!q.data&&!!q.ajax&&(!c||-1===c):c&&-1!=c||(g=a(q.data),g.is("ul")||(g=a("<ul />").append(g)),this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());e&&e.call(this);break;case !q.data&&!!q.ajax||!!q.data&&!!q.ajax&&c&&-1!==c:c=this._get_node(c),m=function(a,e,g){var m=this.get_settings().html_data.ajax.error;m&&m.call(this,a,e,g);-1!=c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),"success"===e&&q.correct_state&&this.correct_state(c)):"success"===e&&q.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},g=function(g,f,h){var r=this.get_settings().html_data.ajax.success;
r&&(g=r.call(this,g,f,h)||g);if(""===g||g&&g.toString&&""===g.toString().replace(/^[\s\n]+$/,""))return m.call(this,h,f,"");g?(g=a(g),g.is("ul")||(g=a("<ul />").append(g)),-1!=c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(g).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(c),e&&e.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),q.correct_state&&
(this.correct_state(c),e&&e.call(this))):q.correct_state&&(this.get_container().children("ul").empty(),e&&e.call(this))},q.ajax.context=this,q.ajax.error=m,q.ajax.success=g,q.ajax.dataType||(q.ajax.dataType="html"),a.isFunction(q.ajax.url)&&(q.ajax.url=q.ajax.url.call(this,c)),a.isFunction(q.ajax.data)&&(q.ajax.data=q.ajax.data.call(this,c)),a.ajax(q.ajax)}}}});a.jstree.defaults.plugins.push("html_data")})(jQuery);(function(a){a.jstree.plugin("themeroller",{__init:function(){var c=this._get_settings().themeroller;
this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(e){a(e.currentTarget).hasClass("jstree-loading")||a(this).addClass(c.item_h)}).delegate("a","mouseleave.jstree",function(){a(this).removeClass(c.item_h)}).bind("init.jstree",a.proxy(function(a,c){c.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",
a.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",a.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",a.proxy(function(a,f){f.rslt.obj.children("ins.jstree-icon").removeClass(c.opened+" "+c.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_open+" "+c.item_clsd).addClass(c.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",a.proxy(function(a,f){f.rslt.obj.children("a").addClass(c.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",a.proxy(function(a,f){this.get_container().find("a."+c.item_a).removeClass(c.item_a).end().find("a.jstree-clicked").addClass(c.item_a)},this)).bind("dehover_node.jstree",
a.proxy(function(a,f){f.rslt.obj.children("a").removeClass(c.item_h)},this)).bind("hover_node.jstree",a.proxy(function(a,f){this.get_container().find("a."+c.item_h).not(f.rslt.obj).removeClass(c.item_h);f.rslt.obj.children("a").addClass(c.item_h)},this)).bind("move_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var c=this._get_settings().themeroller,e=["ui-icon"];a.each(c,function(a,c){c=c.split(" ");c.length&&(e=e.concat(c))});
this.get_container().removeClass("ui-widget-content").find("."+e.join(", .")).removeClass(e.join(" "))},_fn:{_themeroller:function(a){var e=this._get_settings().themeroller;a=(a=a&&-1!=a?this._get_node(a):this.get_container_ul())&&-1!=a?a.parent():this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(e.opened).addClass("ui-icon "+e.closed).end().children("a").addClass(e.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(e.item_clsd,
"").replace(e.item_open,"").replace(e.item_leaf,"").indexOf("ui-icon-")}).removeClass(e.item_leaf+" "+e.item_open).addClass(e.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(e.closed).addClass("ui-icon "+e.opened).end().children("a").addClass(e.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(e.item_clsd,"").replace(e.item_open,"").replace(e.item_leaf,"").indexOf("ui-icon-")}).removeClass(e.item_leaf+
" "+e.item_clsd).addClass(e.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(e.closed+" ui-icon "+e.opened).end().children("a").addClass(e.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(e.item_clsd,"").replace(e.item_open,"").replace(e.item_leaf,"").indexOf("ui-icon-")}).removeClass(e.item_clsd+" "+e.item_open).addClass(e.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});a(function(){a.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(a){a.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
a.proxy(function(c,e){var f=[],g=!0,q;"move_node"==e.func&&(!0===e.args[4]&&e.args[0].o&&e.args[0].o.length)&&(e.args[0].o.children("a").each(function(){f.push(a(this).text().replace(/^\s+/g,""))}),g=this._check_unique(f,e.args[0].np.find("> ul > li").not(e.args[0].o),"move_node"));"create_node"==e.func&&(e.args[4]||this._is_loaded(e.args[0]))&&(g=this._get_node(e.args[0]),!e.args[1]||"before"!==e.args[1]&&"after"!==e.args[1]||(g=this._get_parent(e.args[0]))&&-1!==g||(g=this.get_container()),"string"===
typeof e.args[2]?f.push(e.args[2]):e.args[2]&&e.args[2].data?f.push(e.args[2].data):f.push(this._get_string("new_node")),g=this._check_unique(f,g.find("> ul > li"),"create_node"));"rename_node"==e.func&&(f.push(e.args[1]),q=this._get_node(e.args[0]),(g=this._get_parent(q))&&-1!==g||(g=this.get_container()),g=this._check_unique(f,g.find("> ul > li").not(q),"rename_node"));if(!g)return c.stopPropagation(),!1},this))},defaults:{error_callback:a.noop},_fn:{_check_unique:function(c,e,f){var g=[],q=!0;
e.children("a").each(function(){g.push(a(this).text().replace(/^\s+/g,""))});if(!g.length||!c.length)return!0;a.each(c,function(c,e){if(-1!==a.inArray(e,g))return q=!1});q||this._get_settings().unique.error_callback.call(null,c,e,f);return q},check_move:function(){if(!this.__call_old())return!1;var c=this._get_move(),e=[];return c.o&&c.o.length?(c.o.children("a").each(function(){e.push(a(this).text().replace(/^\s+/g,""))}),this._check_unique(e,c.np.find("> ul > li").not(c.o),"check_move")):!0}}})})(jQuery);
(function(a){a.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",a.proxy(function(a,e){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",a.proxy(function(a,e){this._prepare_wholerow_span(e&&e.rslt&&e.rslt.obj?e.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
a.proxy(function(a,e){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,c){return function(){a._prepare_wholerow_ul(c)}}(this,e&&e.rslt&&e.rslt.obj?e.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",a.proxy(function(a,e){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",a.proxy(function(c,e){e.rslt.obj.each(function(){e.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((a(this).offset().top-e.inst.get_container().offset().top+e.inst.get_container()[0].scrollTop)/e.inst.data.core.li_height,10)+")").children("a").attr("class",e.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",a.proxy(function(a,e){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((e.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",e.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(c){var e=a(c.currentTarget);"A"===c.target.tagName||"INS"===c.target.tagName&&e.closest("li").is(".jstree-open, .jstree-closed")||(e.closest("li").children("a:visible:eq(0)").click(),c.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",a.proxy(function(c){c.stopImmediatePropagation();if(a(c.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(c.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",a.proxy(function(c){a(c.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(c.currentTarget)},this));(r||f)&&a.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(c){c=c&&-1!=c?this._get_node(c):this.get_container().find("> ul > li");!1!==c&&c.each(function(){a(this).find("li").addBack().each(function(){var c=a(this);if(c.children(".jstree-wholerow-span").length)return!0;c.prepend("<span class='jstree-wholerow-span' style='width:"+18*c.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),
e=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==e&&(this.data.wholerow.last_html=e,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(r?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});a(function(){var c=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
m&&(c+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(r||f)c+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";a.vakata.css.add_sheet({str:c,title:"jstree"})})})(jQuery);(function(a){var c=
["getChildren","getChildrenCount","getAttr","getName","getProps"],e=function(c,e){var f=!0;c=c||{};e=[].concat(e);a.each(e,function(e,g){if(!a.isFunction(c[g]))return f=!1});return f};a.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(f,g){var q=-1==f?this._get_settings().model.object:f.data("jstree_model");if(!e(q,c))return g.call(null,!1);this._get_settings().model.async?q.getChildren(a.proxy(function(a){this.model_done(a,
g)},this)):this.model_done(q.getChildren(),g)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(c,e){var f=[],m=this._get_settings(),r=this;a.isArray(c)||(c=[c]);a.each(c,function(c,e){var g=e.getProps()||{};g.attr=e.getAttr()||{};e.getChildrenCount()&&(g.state="closed");g.data=e.getName();a.isArray(g.data)||(g.data=[g.data]);r.data.types&&a.isFunction(e.getType)&&(g.attr[m.types.type_attr]=e.getType());g.attr.id&&m.model.id_prefix&&(g.attr.id=m.model.id_prefix+g.attr.id);g.metadata||
(g.metadata={});g.metadata.jstree_model=e;f.push(g)});e.call(null,f)}}})})(jQuery)}})();
(function(f){f.color={};f.color.make=function(m,a,c,e){var h={};h.r=m||0;h.g=a||0;h.b=c||0;h.a=null!=e?e:1;h.add=function(a,c){for(var e=0;e<a.length;++e)h[a.charAt(e)]+=c;return h.normalize()};h.scale=function(a,c){for(var e=0;e<a.length;++e)h[a.charAt(e)]*=c;return h.normalize()};h.toString=function(){return 1<=h.a?"rgb("+[h.r,h.g,h.b].join()+")":"rgba("+[h.r,h.g,h.b,h.a].join()+")"};h.normalize=function(){function a(c,e,g){return e<c?c:e>g?g:e}h.r=a(0,parseInt(h.r),255);h.g=a(0,parseInt(h.g),255);
h.b=a(0,parseInt(h.b),255);h.a=a(0,h.a,1);return h};h.clone=function(){return f.color.make(h.r,h.b,h.g,h.a)};return h.normalize()};f.color.extract=function(m,a){var c;do{c=m.css(a).toLowerCase();if(""!=c&&"transparent"!=c)break;m=m.parent()}while(!f.nodeName(m.get(0),"body"));"rgba(0, 0, 0, 0)"==c&&(c="transparent");return f.color.parse(c)};f.color.parse=function(m){var a,c=f.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(m))return c(parseInt(a[1],10),parseInt(a[2],
10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(m))return c(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(m))return c(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(m))return c(2.55*
parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(m))return c(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(m))return c(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));m=f.trim(m).toLowerCase();if("transparent"==m)return c(255,255,255,0);a=r[m]||[0,0,0];return c(a[0],a[1],a[2])};var r={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(f,r,m){var a=r.event,c;a.special.smartresize={setup:function(){r(this).bind("resize",a.special.smartresize.handler)},teardown:function(){r(this).unbind("resize",a.special.smartresize.handler)},handler:function(a,e){var f=this,h=arguments;a.type="smartresize";c&&clearTimeout(c);c=setTimeout(function(){jQuery.event.handle.apply(f,h)},"execAsap"===e?0:100)}};r.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};r.Mason=function(a,c){this.element=
r(c);this._create(a);this._init()};var e=["position","height"];r.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1};r.Mason.prototype={_filterFindBricks:function(a){var c=this.options.itemSelector;return c?a.filter(c).add(a.find(c)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(a){this.options=r.extend(!0,{},r.Mason.settings,a);this.styleQueue=
[];this.reloadItems();a=this.element[0].style;this.originalStyle={};for(var c=0,h=e.length;c<h;c++){var m=e[c];this.originalStyle[m]=a[m]||""}this.element.css({position:"relative"});this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=r(document.createElement("div"));this.element.prepend(a);this.offset.y=Math.round(a.position().top);this.options.isRTL?(a.css({"float":"right",display:"inline-block"}),this.offset.x=Math.round(this.element.outerWidth()-a.position().left)):this.offset.x=
Math.round(a.position().left);a.remove();var w=this;setTimeout(function(){w.element.addClass("masonry")},0);this.options.isResizable&&r(f).bind("smartresize.masonry",function(){w.resize()})},_init:function(a){this._getColumns("masonry");this._reLayout(a)},option:function(a,c){r.isPlainObject(a)&&(this.options=r.extend(!0,this.options,a))},layout:function(a,c){for(var e,f,h,m,u,N,O=0,T=a.length;O<T;O++)if(e=r(a[O]),f=Math.ceil(e.outerWidth(!0)/this.columnWidth),f=Math.min(f,this.cols),1===f)this._placeBrick(e,
this.colYs);else{h=this.cols+1-f;m=[];for(N=0;N<h;N++)u=this.colYs.slice(N,N+f),m[N]=Math.max.apply(Math,u);this._placeBrick(e,m)}T={};T.height=Math.max.apply(Math,this.colYs)-this.offset.y;if(this.options.isFitWidth){e=0;for(O=this.cols;--O&&this.colYs[O]===this.offset.y;)e++;T.width=(this.cols-e)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:T});e=this.isLaidOut?this.options.isAnimated?"animate":"css":"css";f=this.options.animationOptions;O=0;for(T=this.styleQueue.length;O<
T;O++)h=this.styleQueue[O],h.$el[e](h.style,f);this.styleQueue=[];c&&c.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(a,c){for(var e=Math.min.apply(Math,c),f=0,h=0,m=c.length;h<m;h++)if(c[h]===
e){f=h;break}h={top:e};h[this.horizontalDirection]=this.columnWidth*f+this.offset.x;this.styleQueue.push({$el:a,style:h});e+=a.outerHeight(!0);m=this.cols+1-m;for(h=0;h<m;h++)this.colYs[f+h]=e},resize:function(){var a=this.cols;this._getColumns("masonry");this.cols!==a&&this._reLayout()},_reLayout:function(a){var c=this.cols;for(this.colYs=[];c--;)this.colYs.push(this.offset.y);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();
this._init(a)},appended:function(a,c,e){if(c){this._filterFindBricks(a).css({top:this.element.height()});var f=this;setTimeout(function(){f._appended(a,e)},1)}else this._appended(a,e)},_appended:function(a,c){var e=this._getBricks(a);this.$bricks=this.$bricks.add(e);this.layout(e,c)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});for(var a=this.element[0].style,
c=0,h=e.length;c<h;c++){var m=e[c];a[m]=this.originalStyle[m]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");r(f).unbind(".masonry")}};r.fn.imagesLoaded=function(a){function c(){0>=--r&&this.src!==u&&(setTimeout(e),h.unbind("load error",c))}function e(){a.call(f,h)}var f=this,h=f.find("img").add(f.filter("img")),r=h.length,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";r||e();h.bind("load error",c).each(function(){if(this.complete||this.complete===
m){var a=this.src;this.src=u;this.src=a}});return f};var h=function(a){this.console&&console.error(a)};r.fn.masonry=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var e=r.data(this,"masonry");e?r.isFunction(e[a])&&"_"!==a.charAt(0)?e[a].apply(e,c):h("no such method '"+a+"' for masonry instance"):h("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var c=r.data(this,"masonry");
c?(c.option(a||{}),c._init()):r.data(this,"masonry",new r.Mason(a,this))});return this}})(window,jQuery);
jQuery.cookie=function(f,r,m){if(1<arguments.length&&"[object Object]"!==String(r)){m=jQuery.extend({},m);if(null===r||void 0===r)m.expires=-1;if("number"===typeof m.expires){var a=m.expires,c=m.expires=new Date;c.setDate(c.getDate()+a)}r=String(r);return document.cookie=[encodeURIComponent(f),"=",m.raw?r:encodeURIComponent(r),m.expires?"; expires="+m.expires.toUTCString():"",m.path?"; path="+m.path:"",m.domain?"; domain="+m.domain:"",m.secure?"; secure":""].join("")}m=r||{};c=m.raw?function(a){return a}:
decodeURIComponent;return(a=RegExp("(?:^|; )"+encodeURIComponent(f)+"=([^;]*)").exec(document.cookie))?c(a[1]):null};
d3=function(){function f(d){return null!=d&&!isNaN(d)}function r(d){return d.length}function m(d,s){try{for(var a in s)Object.defineProperty(d.prototype,a,{value:s[a],enumerable:!1})}catch(c){d.prototype=s}}function a(){}function c(){}function e(d,s,a){return function(){var c=a.apply(s,arguments);return c===s?d:c}}function h(){}function g(d){function s(){for(var s,a=l,c=-1,M=a.length;++c<M;)(s=a[c].on)&&s.apply(this,arguments);return d}var l=[],c=new a;return s.on=function(s,a){var e,t=c.get(s);return 2>
arguments.length?t&&t.on:(t&&(t.on=null,l=l.slice(0,e=l.indexOf(t)).concat(l.slice(e+1)),c.remove(s)),a&&l.push(c.set(s,{on:a})),d)},s}function q(){n.event.stopPropagation();n.event.preventDefault()}function B(){for(var d,s=n.event;d=s.sourceEvent;)s=d;return s}function U(d,s){function a(){d.on(s,null)}d.on(s,function(){q();a()},!0);setTimeout(a,0)}function w(d){for(var s=new h,a=0,c=arguments.length;++a<c;)s[arguments[a]]=g(s);return s.of=function(a,l){return function(c){try{var M=c.sourceEvent=
n.event;c.target=d;n.event=c;s[c.type].apply(a,l)}finally{n.event=M}}},s}function H(d,s){var a=d.ownerSVGElement||d;if(a.createSVGPoint){var c=a.createSVGPoint();if(0>Ob&&(da.scrollX||da.scrollY)){var a=n.select(ha.body).append("svg").style("position","absolute").style("top",0).style("left",0),p=a[0][0].getScreenCTM();Ob=!(p.f||p.e);a.remove()}return Ob?(c.x=s.pageX,c.y=s.pageY):(c.x=s.clientX,c.y=s.clientY),c=c.matrixTransform(d.getScreenCTM().inverse()),[c.x,c.y]}a=d.getBoundingClientRect();return[s.clientX-
a.left-d.clientLeft,s.clientY-a.top-d.clientTop]}function u(d){for(var s=-1,a=d.length,c=[];++s<a;)c.push(d[s]);return c}function N(d){return Pb(d,Q),d}function O(d){return function(){return $c(d,this)}}function T(d){return function(){return ad(d,this)}}function Sa(d,s){function a(){this.removeAttribute(d)}function c(){this.removeAttributeNS(d.space,d.local)}function p(){this.setAttribute(d,s)}function v(){this.setAttributeNS(d.space,d.local,s)}function e(){var a=s.apply(this,arguments);null==a?this.removeAttribute(d):
this.setAttribute(d,a)}function t(){var a=s.apply(this,arguments);null==a?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,a)}return d=n.ns.qualify(d),null==s?d.local?c:a:"function"==typeof s?d.local?t:e:d.local?v:p}function Ha(d){return d.trim().replace(/\s+/g," ")}function Yc(d){return RegExp("(?:^|\\s+)"+n.requote(d)+"(?:\\s+|$)","g")}function Zc(d,s){function a(){for(var l=-1;++l<p;)d[l](this,s)}function c(){for(var a=-1,l=s.apply(this,arguments);++a<p;)d[a](this,l)}
d=d.trim().split(/\s+/).map(rf);var p=d.length;return"function"==typeof s?c:a}function rf(d){var s=Yc(d);return function(a,c){if(p=a.classList)return c?p.add(d):p.remove(d);var p=a.getAttribute("class")||"";c?(s.lastIndex=0,s.test(p)||a.setAttribute("class",Ha(p+" "+d))):a.setAttribute("class",Ha(p.replace(s," ")))}}function bd(d,s,a){function c(){this.style.removeProperty(d)}function p(){this.style.setProperty(d,s,a)}function v(){var c=s.apply(this,arguments);null==c?this.style.removeProperty(d):
this.style.setProperty(d,c,a)}return null==s?c:"function"==typeof s?v:p}function cd(d,s){function a(){delete this[d]}function c(){this[d]=s}function p(){var a=s.apply(this,arguments);null==a?delete this[d]:this[d]=a}return null==s?a:"function"==typeof s?p:c}function dd(d){return function(){return ed(this,d)}}function sf(d){return arguments.length||(d=n.ascending),function(s,a){return!s-!a||d(s.__data__,a.__data__)}}function aa(){}function fd(d,s,a){function c(){var s=this[e];s&&(this.removeEventListener(d,
s,s.$),delete this[e])}function p(){var p=L(s,wa(arguments));c.call(this);this.addEventListener(d,this[e]=p,p.$=a);p._=s}function v(){var s,a=RegExp("^__on([^.]+)"+n.requote(d)+"$"),l;for(l in this)if(s=l.match(a)){var c=this[l];this.removeEventListener(s[1],c,c.$);delete this[l]}}var e="__on"+d,t=d.indexOf("."),L=gd;0<t&&(d=d.substring(0,t));var f=Rb.get(d);return f&&(d=f,L=tf),t?s?p:c:s?aa:v}function gd(d,s){return function(a){var c=n.event;n.event=a;s[0]=this.__data__;try{d.apply(this,s)}finally{n.event=
c}}}function tf(d,s){var a=gd(d,s);return function(d){var s=d.relatedTarget;s&&(s===this||s.compareDocumentPosition(this)&8)||a.call(this,d)}}function xa(d,s){for(var a=0,c=d.length;c>a;a++)for(var p,v=d[a],e=0,t=v.length;t>e;e++)(p=v[e])&&s(p,e,a);return d}function id(d){return Pb(d,Ca),d}function Ia(){}function Ja(d,s,a){return new Sb(d,s,a)}function Sb(d,a,l){this.h=d;this.s=a;this.l=l}function cb(d,a,l){function c(d){return 360<d?d-=360:0>d&&(d+=360),60>d?p+(v-p)*d/60:180>d?v:240>d?p+(v-p)*(240-
d)/60:p}var p,v;return d%=360,0>d&&(d+=360),a=0>a?0:1<a?1:a,l=0>l?0:1<l?1:l,v=0.5>=l?l*(1+a):l+a-l*a,p=2*l-v,ra(Math.round(255*c(d+120)),Math.round(255*c(d)),Math.round(255*c(d-120)))}function jd(d){return(d=Math.sin(d/2))*d}function Ka(d,a,l){return new db(d,a,l)}function db(d,a,l){this.h=d;this.c=a;this.l=l}function Tb(d,a,l){return La(l,Math.cos(d*=F)*a,Math.sin(d)*a)}function La(d,a,l){return new eb(d,a,l)}function eb(d,a,l){this.l=d;this.a=a;this.b=l}function kd(d,a,l){d=(d+16)/116;a=d+a/500;
l=d-l/200;return a=Ub(a)*ld,d=Ub(d)*md,l=Ub(l)*nd,ra(Vb(3.2404542*a-1.5371385*d-0.4985314*l),Vb(-0.969266*a+1.8760108*d+0.041556*l),Vb(0.0556434*a-0.2040259*d+1.0572252*l))}function Ub(d){return 0.206893034<d?d*d*d:(d-4/29)/7.787037}function Wb(d){return 0.008856<d?Math.pow(d,1/3):7.787037*d+4/29}function Vb(d){return Math.round(255*(0.00304>=d?12.92*d:1.055*Math.pow(d,1/2.4)-0.055))}function ra(d,a,l){return new Xb(d,a,l)}function Xb(d,a,l){this.r=d;this.g=a;this.b=l}function Ma(d){return 16>d?"0"+
Math.max(0,d).toString(16):Math.min(255,d).toString(16)}function Yb(d,a,l){var c,p,v,e=0,t=0,L=0;if(c=/([a-z]+)\((.*)\)/i.exec(d))switch(p=c[2].split(","),c[1]){case "hsl":return l(parseFloat(p[0]),parseFloat(p[1])/100,parseFloat(p[2])/100);case "rgb":return a(Zb(p[0]),Zb(p[1]),Zb(p[2]))}return(v=fb.get(d))?a(v.r,v.g,v.b):(null!=d&&"#"===d.charAt(0)&&(4===d.length?(e=d.charAt(1),e+=e,t=d.charAt(2),t+=t,L=d.charAt(3),L+=L):7===d.length&&(e=d.substring(1,3),t=d.substring(3,5),L=d.substring(5,7)),e=
parseInt(e,16),t=parseInt(t,16),L=parseInt(L,16)),a(e,t,L))}function od(d,a,l){var c,p,v=Math.min(d/=255,a/=255,l/=255),e=Math.max(d,a,l),t=e-v,L=(e+v)/2;return t?(p=0.5>L?t/(e+v):t/(2-e-v),c=d==e?(a-l)/t+(l>a?6:0):a==e?(l-d)/t+2:(d-a)/t+4,c*=60):p=c=0,Ja(c,p,L)}function pd(d,a,l){d=$b(d);a=$b(a);l=$b(l);var c=Wb((0.4124564*d+0.3575761*a+0.1804375*l)/ld),p=Wb((0.2126729*d+0.7151522*a+0.072175*l)/md);d=Wb((0.0193339*d+0.119192*a+0.9503041*l)/nd);return La(116*p-16,500*(c-p),200*(p-d))}function $b(d){return 0.04045>=
(d/=255)?d/12.92:Math.pow((d+0.055)/1.055,2.4)}function Zb(d){var a=parseFloat(d);return"%"===d.charAt(d.length-1)?Math.round(2.55*a):a}function I(d){return"function"==typeof d?d:function(){return d}}function ja(d){return d}function uf(d){return 1===d.length?function(a,l){d(null==a?l:null)}:d}function qd(d,a){function l(d,l,c){3>arguments.length&&(c=l,l=null);var v=n.xhr(d,a,c);return v.row=function(d){return arguments.length?v.response(null==(l=d)?M:p(d)):l},v.row(l)}function M(d){return l.parse(d.responseText)}
function p(d){return function(a){return l.parse(a.responseText,d)}}function v(a){return a.map(e).join(d)}function e(d){return t.test(d)?'"'+d.replace(/\"/g,'""')+'"':d}var t=RegExp('["'+d+"\n]"),L=d.charCodeAt(0);return l.parse=function(d,a){var s;return l.parseRows(d,function(d,l){if(s)return s(d,l-1);var c=Function("d","return {"+d.map(function(d,a){return JSON.stringify(d)+": d["+a+"]"}).join(",")+"}");s=a?function(d,s){return a(c(d),s)}:c})},l.parseRows=function(d,a){function s(){if(t>=e)return M;
if(c)return c=!1,p;var a=t;if(34===d.charCodeAt(a)){for(var l=a;l++<e;)if(34===d.charCodeAt(l)){if(34!==d.charCodeAt(l+1))break;++l}t=l+2;var v=d.charCodeAt(l+1);return 13===v?(c=!0,10===d.charCodeAt(l+2)&&++t):10===v&&(c=!0),d.substring(a+1,l).replace(/""/g,'"')}for(;e>t;){v=d.charCodeAt(t++);l=1;if(10===v)c=!0;else if(13===v)c=!0,10===d.charCodeAt(t)&&(++t,++l);else if(v!==L)continue;return d.substring(a,t-l)}return d.substring(a)}for(var l,c,p={},M={},v=[],e=d.length,t=0,S=0;(l=s())!==M;){for(var f=
[];l!==p&&l!==M;)f.push(l),l=s();a&&!(f=a(f,S++))||v.push(f)}return v},l.format=function(a){if(Array.isArray(a[0]))return l.formatRows(a);var s=new c,p=[];return a.forEach(function(d){for(var a in d)s.has(a)||p.push(s.add(a))}),[p.map(e).join(d)].concat(a.map(function(a){return p.map(function(d){return e(a[d])}).join(d)})).join("\n")},l.formatRows=function(d){return d.map(v).join("\n")},l}function ac(){for(var d,a=Date.now(),l=Na;l;)d=a-l.then,d>=l.delay&&(l.flush=l.callback(d)),l=l.next;d=rd()-a;
24<d?(isFinite(d)&&(clearTimeout(gb),gb=setTimeout(ac,d)),hb=0):(hb=1,sd(ac))}function rd(){for(var d=null,a=Na,l=1/0;a;)a.flush?(delete bc[a.callback.id],a=d?d.next=a.next:Na=a.next):(l=Math.min(l,a.then+a.delay),a=(d=a).next);return l}function cc(d,a){return a-(d?Math.ceil(Math.log(d)/Math.LN10):1)}function vf(d){return d+""}function ib(d,a){d&&td.hasOwnProperty(d.type)&&td[d.type](d,a)}function dc(d,a,l){var c=-1,p=d.length-l;for(a.lineStart();++c<p;)l=d[c],a.point(l[0],l[1]);a.lineEnd()}function ud(d,
a){var l=-1,c=d.length;for(a.polygonStart();++l<c;)dc(d[l],a,1);a.polygonEnd()}function wf(){function d(d,a){d*=F;a=a*F/2+x/4;var s=d-c,l=Math.cos(a),e=Math.sin(a),f=v*e,g=jb,h=kb,n=p*l+f*Math.cos(s),s=f*Math.sin(s);jb=g*n-h*s;kb=h*n+g*s;c=d;p=l;v=e}var a,l,c,p,v;ya.point=function(e,t){ya.point=d;c=(a=e)*F;p=Math.cos(t=(l=t)*F/2+x/4);v=Math.sin(t)};ya.lineEnd=function(){d(a,l)}}function vd(d){function a(d,s){c>d&&(c=d);d>v&&(v=d);p>s&&(p=s);s>e&&(e=s)}function l(){t.point=t.lineEnd=aa}var c,p,v,e,
t={point:a,lineStart:aa,lineEnd:aa,polygonStart:function(){t.lineEnd=l},polygonEnd:function(){t.point=a}};return function(a){return e=v=-(c=p=1/0),n.geo.stream(a,d(t)),[[c,p],[v,e]]}}function wd(d,a){if(!ca){++la;d*=F;var l=Math.cos(a*=F);Y+=(l*Math.cos(d)-Y)/la;Z+=(l*Math.sin(d)-Z)/la;X+=(Math.sin(a)-X)/la}}function xf(){var d,a;ca=1;ec();ca=2;var l=ma.point;ma.point=function(c,p){l(d=c,a=p)};ma.lineEnd=function(){ma.point(d,a);fc();ma.lineEnd=fc}}function ec(){function d(d,v){d*=F;var e=Math.cos(v*=
F),t=e*Math.cos(d),e=e*Math.sin(d),L=Math.sin(v),f=Math.atan2(Math.sqrt((f=l*L-c*e)*f+(f=c*t-a*L)*f+(f=a*e-l*t)*f),a*t+l*e+c*L);la+=f;Y+=f*(a+(a=t));Z+=f*(l+(l=e));X+=f*(c+(c=L))}var a,l,c;1<ca||(1>ca&&(ca=1,la=Y=Z=X=0),ma.point=function(p,v){p*=F;var e=Math.cos(v*=F);a=e*Math.cos(p);l=e*Math.sin(p);c=Math.sin(v);ma.point=d})}function fc(){ma.point=wd}function lb(d){var a=d[0];d=d[1];var l=Math.cos(d);return[l*Math.cos(a),l*Math.sin(a),Math.sin(d)]}function mb(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*
a[2]}function xd(d,a){return[d[1]*a[2]-d[2]*a[1],d[2]*a[0]-d[0]*a[2],d[0]*a[1]-d[1]*a[0]]}function gc(d,a){d[0]+=a[0];d[1]+=a[1];d[2]+=a[2]}function nb(d,a){return[d[0]*a,d[1]*a,d[2]*a]}function Ta(){return!0}function hc(d){return[Math.atan2(d[1],d[0]),Math.asin(Math.max(-1,Math.min(1,d[2])))]}function ob(d,a){return Math.abs(d[0]-a[0])<K&&Math.abs(d[1]-a[1])<K}function yd(d,a,l,c,p){var v=[],e=[];if(d.forEach(function(d){if(!(0>=(a=d.length-1))){var a,s=d[0],l=d[a];if(ob(s,l)){p.lineStart();for(l=
0;a>l;++l)p.point((s=d[l])[0],s[1]);return p.lineEnd(),void 0}d={point:s,points:d,other:null,visited:!1,entry:!0,subject:!0};s={point:s,points:[s],other:d,visited:!1,entry:!1,subject:!1};d.other=s;v.push(d);e.push(s);d={point:l,points:[l],other:null,visited:!1,entry:!1,subject:!0};s={point:l,points:[l],other:d,visited:!1,entry:!0,subject:!1};d.other=s;v.push(d);e.push(s)}}),e.sort(a),zd(v),zd(e),v.length){if(l)for(d=1,l=!l(e[0].point),a=e.length;a>d;++d)e[d].entry=l=!l;for(var t,f=v[0];;){for(l=f;l.visited;)if((l=
l.next)===f)return;a=l.points;p.lineStart();do{if(l.visited=l.other.visited=!0,l.entry){if(l.subject)for(d=0;d<a.length;d++)p.point((t=a[d])[0],t[1]);else c(l.point,l.next.point,1,p);l=l.next}else{if(l.subject)for(a=l.prev.points,d=a.length;0<=--d;)p.point((t=a[d])[0],t[1]);else c(l.point,l.prev.point,-1,p);l=l.prev}l=l.other;a=l.points}while(!l.visited);p.lineEnd()}}}function zd(d){if(a=d.length){for(var a,l,c=0,p=d[0];++c<a;)p.next=l=d[c],l.prev=p,p=l;p.next=l=d[0];l.prev=p}}function Ad(d,a,l){return function(c){function p(a,
s){d(a,s)&&c.point(a,s)}function v(d,a){z.point(d,a)}function e(){A.point=v;z.lineStart()}function t(){A.point=p;z.lineEnd()}function f(d,a){J.point(d,a);y.push([d,a])}function g(){J.lineStart();y=[]}function h(){f(y[0][0],y[0][1]);J.lineEnd();var d;d=J.clean();var a=G.buffer(),s=a.length;if(!s)return C=!0,r+=Bd(y,-1),y=null,void 0;if(y=null,1&d){d=a[0];m+=Bd(d,1);var l,s=d.length-1,a=-1;for(c.lineStart();++a<s;)c.point((l=d[a])[0],l[1]);return c.lineEnd(),void 0}1<s&&2&d&&a.push(a.pop().concat(a.shift()));
q.push(a.filter(yf))}var q,m,r,C,y,z=a(c),A={point:p,lineStart:e,lineEnd:t,polygonStart:function(){A.point=f;A.lineStart=g;A.lineEnd=h;C=!1;r=m=0;q=[];c.polygonStart()},polygonEnd:function(){A.point=p;A.lineStart=e;A.lineEnd=t;q=n.merge(q);q.length?yd(q,zf,null,l,c):(-K>m||C&&-K>r)&&(c.lineStart(),l(null,null,1,c),c.lineEnd());c.polygonEnd();q=null},sphere:function(){c.polygonStart();c.lineStart();l(null,null,1,c);c.lineEnd();c.polygonEnd()}},G=Cd(),J=a(G);return A}}function yf(d){return 1<d.length}
function Cd(){var d,a=[];return{lineStart:function(){a.push(d=[])},point:function(a,s){d.push([a,s])},lineEnd:aa,buffer:function(){var l=a;return a=[],d=null,l},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Bd(d,a){if(!(l=d.length))return 0;var l,c,p,v=0,e=0;c=d[0];p=c[0];for(var t=c[1],f=Math.cos(t),g=Math.atan2(a*Math.sin(p)*f,Math.sin(t)),h=1-a*Math.cos(p)*f,n=g;++v<l;)c=d[v],f=Math.cos(t=c[1]),c=Math.atan2(a*Math.sin(p=c[0])*f,Math.sin(t)),p=1-a*Math.cos(p)*f,Math.abs(h-
2)<K&&Math.abs(p-2)<K||(Math.abs(p)<K||Math.abs(h)<K||(Math.abs(Math.abs(c-g)-x)<K?2<p+h&&(e+=4*(c-g)):e+=Math.abs(h-2)<K?4*(c-n):((3*x+c-g)%(2*x)-x)*(h+p)),n=g,g=c,h=p);return e}function zf(d,a){return(0>(d=d.point)[0]?d[1]-x/2-K:x/2-d[1])-(0>(a=a.point)[0]?a[1]-x/2-K:x/2-a[1])}function Af(d){function a(d,s){return Math.cos(d)*Math.cos(s)>p}function l(d,a,s){var l=lb(d),c=lb(a),v=[1,0,0],c=xd(l,c),M=mb(c,c),l=c[0],e=M-l*l;if(!e)return!s&&d;M=p*M/e;e=-p*l/e;l=xd(v,c);v=nb(v,M);c=nb(c,e);gc(v,c);c=
mb(v,l);M=mb(l,l);e=c*c-M*(mb(v,v)-1);if(!(0>e)){var t=Math.sqrt(e),e=nb(l,(-c-t)/M);if(gc(e,v),e=hc(e),!s)return e;var f;s=d[0];var S=a[0];d=d[1];a=a[1];s>S&&(f=s,s=S,S=f);var g=S-s,h=Math.abs(g-x)<K,n=h||K>g;if(!h&&d>a&&(f=d,d=a,a=f),n?h?0<d+a^e[1]<(Math.abs(e[0]-s)<K?d:a):d<=e[1]&&e[1]<=a:g>x^(s<=e[0]&&e[0]<=S))return f=nb(l,(-c+t)/M),gc(f,v),[e,hc(f)]}}function c(a,s){var l=v?d:x-d,p=0;return-l>a?p|=1:a>l&&(p|=2),-l>s?p|=4:s>l&&(p|=8),p}var p=Math.cos(d),v=0<p,e=Math.abs(p)>K,t=ic(d,6*F);return Ad(a,
function(d){var p,t,f,g,h;return{lineStart:function(){g=f=!1;h=1},point:function(n,q){var m,r=[n,q],G=a(n,q),J=v?G?0:c(n,q):G?c(n+(0>n?x:-x),q):0;if(!p&&(g=f=G)&&d.lineStart(),G!==f&&(m=l(p,r),(ob(p,m)||ob(r,m))&&(r[0]+=K,r[1]+=K,G=a(r[0],r[1]))),G!==f)h=0,G?(d.lineStart(),m=l(r,p),d.point(m[0],m[1])):(m=l(p,r),d.point(m[0],m[1]),d.lineEnd()),p=m;else if(e&&p&&v^G){var D;J&t||!(D=l(r,p,!0))||(h=0,v?(d.lineStart(),d.point(D[0][0],D[0][1]),d.point(D[1][0],D[1][1]),d.lineEnd()):(d.point(D[1][0],D[1][1]),
d.lineEnd(),d.lineStart(),d.point(D[0][0],D[0][1])))}!G||p&&ob(p,r)||d.point(r[0],r[1]);p=r;f=G;t=J},lineEnd:function(){f&&d.lineEnd();p=null},clean:function(){return h|(g&&f)<<1}}},t)}function Bf(d,a,l,c){function p(c,p){return Math.abs(c[0]-d)<K?0<p?0:3:Math.abs(c[0]-l)<K?0<p?2:1:Math.abs(c[1]-a)<K?0<p?1:0:0<p?3:2}function v(d,a){return e(d.point,a.point)}function e(d,a){var s=p(d,1),l=p(a,1);return s!==l?s-l:0===s?a[1]-d[1]:1===s?d[0]-a[0]:2===s?d[1]-a[1]:a[0]-d[0]}return function(t){function f(v){v=
p(v,-1);return g([0===v||3===v?d:l,1<v?c:a])}function g(d){for(var a=0,s=C.length,l=d[1],c=0;s>c;++c)for(var p=1,v=C[c],M=v.length,e=v[0];M>p;++p)b=v[p],e[1]<=l?b[1]>l&&0<(b[0]-e[0])*(d[1]-e[1])-(d[0]-e[0])*(b[1]-e[1])&&++a:b[1]<=l&&0>(b[0]-e[0])*(d[1]-e[1])-(d[0]-e[0])*(b[1]-e[1])&&--a,e=b;return 0!==a}function h(v,t,f,g){var L=0,n=0;if(null==v||(L=p(v,f))!==(n=p(t,f))||0>e(v,t)^0<f){do g.point(0===L||3===L?d:l,1<L?c:a);while((L=(L+f+4)%4)!==n)}else g.point(t[0],t[1])}function q(p,v){p>=d&&(l>=p&&
v>=a&&c>=v)&&t.point(p,v)}function m(p,v){p=Math.max(-pb,Math.min(pb,p));v=Math.max(-pb,Math.min(pb,v));var e=p>=d&&l>=p&&v>=a&&c>=v;if(C&&y.push([p,v]),ea)z=p,A=v,G=e,ea=!1,e&&(t.lineStart(),t.point(p,v));else if(e&&oa)t.point(p,v);else{var f=[J,D],g=[p,v],S=g[0]-f[0],L=g[1]-f[1],h=[0,1];(Math.abs(S)<K&&Math.abs(L)<K?d<=f[0]&&f[0]<=l&&a<=f[1]&&f[1]<=c:qb(d-f[0],S,h)&&(qb(f[0]-l,-S,h)&&qb(a-f[1],L,h)&&qb(f[1]-c,-L,h))&&(1>h[1]&&(g[0]=f[0]+h[1]*S,g[1]=f[1]+h[1]*L),0<h[0]&&(f[0]+=h[0]*S,f[1]+=h[0]*
L),!0))?(oa||(t.lineStart(),t.point(f[0],f[1])),t.point(g[0],g[1]),e||t.lineEnd()):(t.lineStart(),t.point(p,v))}J=p;D=v;oa=e}var r,C,y,z,A,G,J,D,oa,ea,V=t,u=Cd(),w={point:q,lineStart:function(){w.point=m;C&&C.push(y=[]);ea=!0;oa=!1;J=D=0/0},lineEnd:function(){r&&(m(z,A),G&&oa&&u.rejoin(),r.push(u.buffer()));w.point=q;oa&&t.lineEnd()},polygonStart:function(){t=u;r=[];C=[]},polygonEnd:function(){t=V;(r=n.merge(r)).length?(t.polygonStart(),yd(r,v,f,h,t),t.polygonEnd()):g([d,a])&&(t.polygonStart(),t.lineStart(),
h(null,null,1,t),t.lineEnd(),t.polygonEnd());r=C=y=null}};return w}}function qb(d,a,l){if(Math.abs(a)<K)return 0>=d;d/=a;if(0<a){if(d>l[1])return!1;d>l[0]&&(l[0]=d)}else{if(d<l[0])return!1;d<l[1]&&(l[1]=d)}return!0}function Dd(d,a){function l(l,c){return l=d(l,c),a(l[0],l[1])}return d.invert&&a.invert&&(l.invert=function(l,c){return l=a.invert(l,c),l&&d.invert(l[0],l[1])}),l}function Ed(d){function a(s){function c(a,l){a=d(a,l);s.point(a[0],a[1])}function M(){n=0/0;A.point=e;s.lineStart()}function e(a,
c){var M=lb([a,c]),t=d(a,c);l(n,q,h,m,r,z,n=t[0],q=t[1],h=a,m=M[0],r=M[1],z=M[2],p,s);s.point(n,q)}function f(){A.point=c;s.lineEnd()}function g(){var d,a,c,S,P,V;M();A.point=function(s,l){e(d=s,l);a=n;c=q;S=m;P=r;V=z;A.point=e};A.lineEnd=function(){l(n,q,h,m,r,z,a,c,d,S,P,V,p,s);A.lineEnd=f;f()}}var h,n,q,m,r,z,A={point:c,lineStart:M,lineEnd:f,polygonStart:function(){s.polygonStart();A.lineStart=g},polygonEnd:function(){s.polygonEnd();A.lineStart=M}};return A}function l(a,s,p,e,f,g,h,n,q,m,r,z,A,
G){var J=h-a,D=n-s,oa=J*J+D*D;if(oa>4*c&&A--){var ea=e+m,V=f+r,u=g+z,w=Math.sqrt(ea*ea+V*V+u*u),B=Math.asin(u/=w),H=Math.abs(Math.abs(u)-1)<K?(p+q)/2:Math.atan2(V,ea),x=d(H,B),B=x[0],x=x[1],U=B-a,F=x-s,O=D*U-J*F;(O*O/oa>c||0.3<Math.abs((J*U+D*F)/oa-0.5))&&(l(a,s,p,e,f,g,B,x,H,ea/=w,V/=w,u,A,G),G.point(B,x),l(B,x,H,ea,V,u,h,n,q,m,r,z,A,G))}}var c=0.5,p=16;return a.precision=function(d){return arguments.length?(p=0<(c=d*d)&&16,a):Math.sqrt(c)},a}function za(d){return jc(function(){return d})()}function jc(d){function a(d){return d=
e(d[0]*F,d[1]*F),[d[0]*h+t,f-d[1]*h]}function l(d){return d=e.invert((d[0]-t)/h,(f-d[1])/h),d&&[d[0]*W,d[1]*W]}function c(){e=Dd(v=kc(y,z,A),p);var d=p(r,C);return t=q-d[0]*h,f=m+d[1]*h,a}var p,v,e,t,f,g=Ed(function(d,a){return d=p(d,a),[d[0]*h+t,f-d[1]*h]}),h=150,q=480,m=250,r=0,C=0,y=0,z=0,A=0,G=Fd,J=ja,D=null,u=null;return a.stream=function(d){return Df(v,G(g(J(d))))},a.clipAngle=function(d){return arguments.length?(G=null==d?(D=d,Fd):Af((D=+d)*F),a):D},a.clipExtent=function(d){return arguments.length?
(u=d,J=null==d?ja:Bf(d[0][0],d[0][1],d[1][0],d[1][1]),a):u},a.scale=function(d){return arguments.length?(h=+d,c()):h},a.translate=function(d){return arguments.length?(q=+d[0],m=+d[1],c()):[q,m]},a.center=function(d){return arguments.length?(r=d[0]%360*F,C=d[1]%360*F,c()):[r*W,C*W]},a.rotate=function(d){return arguments.length?(y=d[0]%360*F,z=d[1]%360*F,A=2<d.length?d[2]%360*F:0,c()):[y*W,z*W,A*W]},n.rebind(a,g,"precision"),function(){return p=d.apply(this,arguments),a.invert=p.invert&&l,c()}}function Df(d,
a){return{point:function(l,c){c=d(l*F,c*F);l=c[0];a.point(l>x?l-2*x:-x>l?l+2*x:l,c[1])},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Ua(d,a){return[d,a]}function kc(d,a,l){return d?a||l?Dd(Gd(d),Hd(a,l)):Gd(d):a||l?Hd(a,l):Ua}function Id(d){return function(a,l){return a+=d,[a>x?a-2*x:-x>a?a+2*x:a,l]}}function Gd(d){var a=Id(d);return a.invert=Id(-d),a}function Hd(d,
a){function l(d,a){var s=Math.cos(a),l=Math.cos(d)*s,s=Math.sin(d)*s,f=Math.sin(a),g=f*c+l*p;return[Math.atan2(s*v-g*e,l*c-f*p),Math.asin(Math.max(-1,Math.min(1,g*v+s*e)))]}var c=Math.cos(d),p=Math.sin(d),v=Math.cos(a),e=Math.sin(a);return l.invert=function(d,a){var s=Math.cos(a),l=Math.cos(d)*s,s=Math.sin(d)*s,f=Math.sin(a),g=f*v-s*e;return[Math.atan2(s*v+f*e,l*c+g*p),Math.asin(Math.max(-1,Math.min(1,g*c-l*p)))]},l}function ic(d,a){var l=Math.cos(d),c=Math.sin(d);return function(p,v,e,t){null!=p?
(p=Jd(l,p),v=Jd(l,v),(0<e?v>p:p>v)&&(p+=2*e*x)):(p=d+2*e*x,v=d);for(var f,g=e*a;0<e?p>v:v>p;p-=g)t.point((f=hc([l,-c*Math.cos(p),-c*Math.sin(p)]))[0],f[1])}}function Jd(d,a){var l=lb(a);l[0]-=d;var c=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);l[0]/=c;l[1]/=c;l[2]/=c;c=Math.acos(Math.max(-1,Math.min(1,-l[1])));return((0>-l[2]?-c:c)+2*Math.PI-K)%(2*Math.PI)}function Kd(d,a,l){var c=n.range(d,a-K,l).concat(a);return function(d){return c.map(function(a){return[d,a]})}}function Ld(d,a,l){var c=n.range(d,
a-K,l).concat(a);return function(d){return c.map(function(a){return[a,d]})}}function lc(d){return d.source}function mc(d){return d.target}function Ef(d,a,l,c){var p=Math.cos(a),v=Math.sin(a),e=Math.cos(c),t=Math.sin(c),f=p*Math.cos(d),g=p*Math.sin(d),h=e*Math.cos(l),n=e*Math.sin(l),q=2*Math.asin(Math.sqrt(jd(c-a)+p*e*jd(l-d))),m=1/Math.sin(q);l=q?function(d){var a=Math.sin(d*=q)*m,l=Math.sin(q-d)*m;d=l*f+a*h;var s=l*g+a*n,a=l*v+a*t;return[Math.atan2(s,d)*W,Math.atan2(a,Math.sqrt(d*d+s*s))*W]}:function(){return[d*
W,a*W]};return l.distance=q,l}function nc(d){var a=0,l=x/3,c=jc(d);d=c(a,l);return d.parallels=function(d){return arguments.length?c(a=d[0]*x/180,l=d[1]*x/180):[180*(a/x),180*(l/x)]},d}function Md(d,a){function l(d,a){var l=Math.sqrt(v-2*p*Math.sin(a))/p;return[l*Math.sin(d*=p),e-l*Math.cos(d)]}var c=Math.sin(d),p=(c+Math.sin(a))/2,v=1+c*(2*p-c),e=Math.sqrt(v)/p;return l.invert=function(d,a){var l=e-a;return[Math.atan2(d,l)/p,Math.asin((v-(d*d+l*l)*p*p)/(2*p))]},l}function oc(d,a){var l=d(a[0]),c=
d([0.5*(a[0][0]+a[1][0]),a[0][1]]),p=d([a[1][0],a[0][1]]),v=d(a[1]),e=(c[1]-l[1])/(c[0]-l[0]),t=(p[1]-c[1])/(p[0]-c[0]),f=0.5*(e*t*(l[1]-p[1])+t*(l[0]+c[0])-e*(c[0]+p[0]))/(t-e),g=(0.5*(l[0]+c[0])-f)/e+0.5*(l[1]+c[1]),c=v[0]-f,v=v[1]-g,p=l[0]-f,l=l[1]-g,h=c*c+v*v,n=p*p+l*l,q=Math.atan2(v,c),m=Math.atan2(l,p);return function(a){var l=a[0]-f,s=a[1]-g,c=l*l+s*s,l=Math.atan2(s,l);return c>h&&n>c&&l>q&&m>l?d.invert(a):void 0}}function Ff(){function d(d,a){rb+=p*d-c*a;c=d;p=a}var a,l,c,p;Aa.point=function(v,
e){Aa.point=d;a=c=v;l=p=e};Aa.lineEnd=function(){d(a,l)}}function Gf(){function d(d,a){e.push("M",d,",",a,v)}function a(d,s){e.push("M",d,",",s);t.point=l}function l(d,a){e.push("L",d,",",a)}function c(){t.point=d}function p(){e.push("Z")}var v=Nd(4.5),e=[],t={point:d,lineStart:function(){t.point=a},lineEnd:c,polygonStart:function(){t.lineEnd=p},polygonEnd:function(){t.lineEnd=c;t.point=d},pointRadius:function(d){return v=Nd(d),t},result:function(){if(e.length){var d=e.join("");return e=[],d}}};return t}
function pc(d,a){ca||(Y+=d,Z+=a,++X)}function Od(){function d(d,c){var v=d-a,e=c-l,v=Math.sqrt(v*v+e*e);Y+=v*(a+d)/2;Z+=v*(l+c)/2;X+=v;a=d;l=c}var a,l;if(1!==ca){if(!(1>ca))return;ca=1;Y=Z=X=0}na.point=function(c,p){na.point=d;a=c;l=p}}function Pd(){na.point=pc}function Hf(){function d(d,a){var l=p*d-c*a;Y+=l*(c+d);Z+=l*(p+a);X+=3*l;c=d;p=a}var a,l,c,p;2>ca&&(ca=2,Y=Z=X=0);na.point=function(v,e){na.point=d;a=c=v;l=p=e};na.lineEnd=function(){d(a,l)}}function If(d){function a(l,s){d.moveTo(l,s);d.arc(l,
s,e,0,2*x)}function l(a,l){d.moveTo(a,l);f.point=c}function c(a,l){d.lineTo(a,l)}function p(){f.point=a}function v(){d.closePath()}var e=4.5,f={point:a,lineStart:function(){f.point=l},lineEnd:p,polygonStart:function(){f.lineEnd=v},polygonEnd:function(){f.lineEnd=p;f.point=a},pointRadius:function(d){return e=d,f},result:aa};return f}function Nd(d){return"m0,"+d+"a"+d+","+d+" 0 1,1 0,"+-2*d+"a"+d+","+d+" 0 1,1 0,"+2*d+"z"}function Jf(d){var a=Ed(function(a,s){return d([a*W,s*W])});return function(d){return d=
a(d),{point:function(a,s){d.point(a*F,s*F)},sphere:function(){d.sphere()},lineStart:function(){d.lineStart()},lineEnd:function(){d.lineEnd()},polygonStart:function(){d.polygonStart()},polygonEnd:function(){d.polygonEnd()}}}}function Va(d,a){function l(a,l){var s=Math.cos(a),c=Math.cos(l),s=d(s*c);return[s*c*Math.sin(a),s*Math.sin(l)]}return l.invert=function(d,l){var c=Math.sqrt(d*d+l*l),e=a(c),f=Math.sin(e),e=Math.cos(e);return[Math.atan2(d*f,c*e),Math.asin(c&&l*f/c)]},l}function Qd(d,a){function l(d,
a){var l=Math.abs(Math.abs(a)-x/2)<K?0:v/Math.pow(Math.tan(x/4+a/2),p);return[l*Math.sin(p*d),v-l*Math.cos(p*d)]}var c=Math.cos(d),p=d===a?Math.sin(d):Math.log(c/Math.cos(a))/Math.log(Math.tan(x/4+a/2)/Math.tan(x/4+d/2)),v=c*Math.pow(Math.tan(x/4+d/2),p)/p;return p?(l.invert=function(d,a){var l=v-a,s=(0<p?1:0>p?-1:0)*Math.sqrt(d*d+l*l);return[Math.atan2(d,l)/p,2*Math.atan(Math.pow(v/s,1/p))-x/2]},l):sb}function Rd(d,a){function l(d,a){var l=v-a;return[l*Math.sin(p*d),v-l*Math.cos(p*d)]}var c=Math.cos(d),
p=d===a?Math.sin(d):(c-Math.cos(a))/(a-d),v=c/p+d;return Math.abs(p)<K?Ua:(l.invert=function(d,a){var l=v-a;return[Math.atan2(d,l)/p,v-(0<p?1:0>p?-1:0)*Math.sqrt(d*d+l*l)]},l)}function sb(d,a){return[d,Math.log(Math.tan(x/4+a/2))]}function Sd(d){var a,l=za(d),c=l.scale,p=l.translate,v=l.clipExtent;return l.scale=function(){var d=c.apply(l,arguments);return d===l?a?l.clipExtent(null):l:d},l.translate=function(){var d=p.apply(l,arguments);return d===l?a?l.clipExtent(null):l:d},l.clipExtent=function(d){var e=
v.apply(l,arguments);if(e===l){if(a=null==d){var f=x*c(),g=p();v([[g[0]-f,g[1]-f],[g[0]+f,g[1]+f]])}}else a&&(e=null);return e},l.clipExtent(null)}function qc(d,a){var l=Math.cos(a)*Math.sin(d);return[Math.log((1+l)/(1-l))/2,Math.atan2(Math.tan(a),Math.cos(d))]}function Td(d){function a(s){function e(){S.push("M",v(d(h),f))}for(var g,S=[],h=[],n=-1,q=s.length,m=I(l),r=I(c);++n<q;)p.call(this,g=s[n],n)?h.push([+m.call(this,g,n),+r.call(this,g,n)]):h.length&&(e(),h=[]);return h.length&&e(),S.length?
S.join(""):null}var l=pa,c=sa,p=Ta,v=ka,e=v.key,f=0.7;return a.x=function(d){return arguments.length?(l=d,a):l},a.y=function(d){return arguments.length?(c=d,a):c},a.defined=function(d){return arguments.length?(p=d,a):p},a.interpolate=function(d){return arguments.length?(e="function"==typeof d?v=d:(v=rc.get(d)||ka).key,a):e},a.tension=function(d){return arguments.length?(f=d,a):f},a}function pa(d){return d[0]}function sa(d){return d[1]}function ka(d){return d.join("L")}function sc(d){for(var a=0,l=
d.length,c=d[0],p=[c[0],",",c[1]];++a<l;)p.push("V",(c=d[a])[1],"H",c[0]);return p.join("")}function tc(d){for(var a=0,l=d.length,c=d[0],p=[c[0],",",c[1]];++a<l;)p.push("H",(c=d[a])[0],"V",c[1]);return p.join("")}function tb(d,a){if(1>a.length||d.length!=a.length&&d.length!=a.length+2)return ka(d);var l=d.length!=a.length,c="",p=d[0],e=d[1],f=a[0],t=f,g=1;if(l&&(c+="Q"+(e[0]-2*f[0]/3)+","+(e[1]-2*f[1]/3)+","+e[0]+","+e[1],p=d[1],g=2),1<a.length)for(t=a[1],e=d[g],g++,c+="C"+(p[0]+f[0])+","+(p[1]+f[1])+
","+(e[0]-t[0])+","+(e[1]-t[1])+","+e[0]+","+e[1],p=2;p<a.length;p++,g++)e=d[g],t=a[p],c+="S"+(e[0]-t[0])+","+(e[1]-t[1])+","+e[0]+","+e[1];l&&(l=d[g],c+="Q"+(e[0]+2*t[0]/3)+","+(e[1]+2*t[1]/3)+","+l[0]+","+l[1]);return c}function uc(d,a){for(var l,c=[],p=(1-a)/2,e=d[0],f=d[1],t=1,g=d.length;++t<g;)l=e,e=f,f=d[t],c.push([p*(f[0]-l[0]),p*(f[1]-l[1])]);return c}function Ud(d){if(3>d.length)return ka(d);var a=1,l=d.length,c=d[0],p=c[0],e=c[1],f=[p,p,p,(c=d[1])[0]],t=[e,e,e,c[1]],p=[p,",",e];for(Wa(p,
f,t);++a<l;)c=d[a],f.shift(),f.push(c[0]),t.shift(),t.push(c[1]),Wa(p,f,t);for(a=-1;2>++a;)f.shift(),f.push(c[0]),t.shift(),t.push(c[1]),Wa(p,f,t);return p.join("")}function qa(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3]}function Wa(d,a,l){d.push("C",qa(Vd,a),",",qa(Vd,l),",",qa(Wd,a),",",qa(Wd,l),",",qa(Oa,a),",",qa(Oa,l))}function vc(d,a){return(a[1]-d[1])/(a[0]-d[0])}function Kf(d,a,l,c){var p,e,f,t,g,h,n;return p=c[d],e=p[0],f=p[1],p=c[a],t=p[0],g=p[1],p=c[l],h=p[0],n=p[1],0<(n-f)*(t-
e)-(g-f)*(h-e)}function wc(d,a,l){return(l[0]-a[0])*(d[1]-a[1])<(l[1]-a[1])*(d[0]-a[0])}function Xd(d,a,l,c){var p=d[0],e=l[0],f=a[0]-p,t=c[0]-e;d=d[1];l=l[1];a=a[1]-d;c=c[1]-l;e=(t*(d-l)-c*(p-e))/(c*f-t*a);return[p+e*f,d+e*a]}function xc(d,a){var l=d.map(function(d,a){return{index:a,x:d[0],y:d[1]}}).sort(function(d,a){return d.y<a.y?-1:d.y>a.y?1:d.x<a.x?-1:d.x>a.x?1:0}),c=null,p={list:[],leftEnd:null,rightEnd:null,init:function(){p.leftEnd=p.createHalfEdge(null,"l");p.rightEnd=p.createHalfEdge(null,
"l");p.leftEnd.r=p.rightEnd;p.rightEnd.l=p.leftEnd;p.list.unshift(p.leftEnd,p.rightEnd)},createHalfEdge:function(d,a){return{edge:d,side:a,vertex:null,l:null,r:null}},insert:function(d,a){a.l=d;a.r=d.r;d.r.l=a;d.r=a},leftBound:function(d){var a=p.leftEnd;do a=a.r;while(a!=p.rightEnd&&e.rightOf(a,d));return a.l},del:function(d){d.l.r=d.r;d.r.l=d.l;d.edge=null},right:function(d){return d.r},left:function(d){return d.l},leftRegion:function(d){return null==d.edge?c:d.edge.region[d.side]},rightRegion:function(d){return null==
d.edge?c:d.edge.region[yc[d.side]]}},e={bisect:function(d,a){var l={region:{l:d,r:a},ep:{l:null,r:null}},c=a.x-d.x,s=a.y-d.y;return l.c=d.x*c+d.y*s+0.5*(c*c+s*s),(0<c?c:-c)>(0<s?s:-s)?(l.a=1,l.b=s/c,l.c/=c):(l.b=1,l.a=c/s,l.c/=s),l},intersect:function(d,a){var l=d.edge,c=a.edge;if(!l||!c||l.region.r==c.region.r)return null;var s=l.a*c.b-l.b*c.a;if(1E-10>Math.abs(s))return null;var p,e,v=(l.c*c.b-c.c*l.b)/s,s=(c.c*l.a-l.c*c.a)/s,f=l.region.r,M=c.region.r;f.y<M.y||f.y==M.y&&f.x<M.x?(p=d,e=l):(p=a,e=
c);return(l=v>=e.region.r.x)&&"l"===p.side||!l&&"r"===p.side?null:{x:v,y:s}},rightOf:function(d,a){var l=d.edge,c=l.region.r,s=a.x>c.x;if(s&&"l"===d.side)return 1;if(!s&&"r"===d.side)return 0;if(1===l.a){var p=a.y-c.y,e=a.x-c.x,v=0,f=0;(!s&&0>l.b||s&&0<=l.b?f=v=p>=l.b*e:(f=a.x+a.y*l.b>l.c,0>l.b&&(f=!f),f||(v=1)),v)||(c=c.x-l.region.l.x,f=l.b*(e*e-p*p)<c*p*(1+2*e/c+l.b*l.b),0>l.b&&(f=!f))}else e=l.c-l.a*a.x,l=a.y-e,p=a.x-c.x,c=e-c.y,f=l*l>p*p+c*c;return"l"===d.side?f:!f},endPoint:function(d,l,c){d.ep[l]=
c;d.ep[yc[l]]&&a(d)},distance:function(d,a){var l=d.x-a.x,c=d.y-a.y;return Math.sqrt(l*l+c*c)}},f={list:[],insert:function(d,a,l){d.vertex=a;d.ystar=a.y+l;l=0;for(var c=f.list,s=c.length;s>l;l++){var p=c[l];if(!(d.ystar>p.ystar||d.ystar==p.ystar&&a.x>p.vertex.x))break}c.splice(l,0,d)},del:function(d){for(var a=0,l=f.list,c=l.length;c>a&&l[a]!=d;++a);l.splice(a,1)},empty:function(){return 0===f.list.length},nextEvent:function(d){for(var a=0,l=f.list,c=l.length;c>a;++a)if(l[a]==d)return l[a+1];return null},
min:function(){var d=f.list[0];return{x:d.vertex.x,y:d.ystar}},extractMin:function(){return f.list.shift()}};p.init();for(var c=l.shift(),t,g,h,n,q,m,r,C,y,z,A=l.shift();;)if(f.empty()||(t=f.min()),A&&(f.empty()||A.y<t.y||A.y==t.y&&A.x<t.x))g=p.leftBound(A),h=p.right(g),r=p.rightRegion(g),z=e.bisect(r,A),m=p.createHalfEdge(z,"l"),p.insert(g,m),(y=e.intersect(g,m))&&(f.del(g),f.insert(g,y,e.distance(y,A))),g=m,m=p.createHalfEdge(z,"r"),p.insert(g,m),(y=e.intersect(m,h))&&f.insert(m,y,e.distance(y,
A)),A=l.shift();else{if(f.empty())break;g=f.extractMin();n=p.left(g);h=p.right(g);q=p.right(h);r=p.leftRegion(g);m=p.rightRegion(h);y=g.vertex;e.endPoint(g.edge,g.side,y);e.endPoint(h.edge,h.side,y);p.del(g);f.del(h);p.del(h);g="l";r.y>m.y&&(C=r,r=m,m=C,g="r");z=e.bisect(r,m);m=p.createHalfEdge(z,g);p.insert(n,m);e.endPoint(z,yc[g],y);(y=e.intersect(n,m))&&(f.del(n),f.insert(n,y,e.distance(y,r)));(y=e.intersect(m,q))&&f.insert(m,y,e.distance(y,r))}for(g=p.right(p.leftEnd);g!=p.rightEnd;g=p.right(g))a(g.edge)}
function Lf(d){return d.x}function Mf(d){return d.y}function Yd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Xa(d,a,l,c,p,e){if(!d(a,l,c,p,e)){var f=0.5*(l+p),g=0.5*(c+e);a=a.nodes;a[0]&&Xa(d,a[0],l,c,f,g);a[1]&&Xa(d,a[1],f,c,p,g);a[2]&&Xa(d,a[2],l,g,f,e);a[3]&&Xa(d,a[3],f,g,p,e)}}function zc(d,a){d=n.rgb(d);a=n.rgb(a);var l=d.r,c=d.g,p=d.b,e=a.r-l,f=a.g-c,g=a.b-p;return function(d){return"#"+Ma(Math.round(l+e*d))+Ma(Math.round(c+f*d))+Ma(Math.round(p+g*d))}}function Zd(d){var a=[d.a,
d.b],l=[d.c,d.d],c=$d(a),p=a[0]*l[0]+a[1]*l[1],e=$d((l[0]+=-p*a[0],l[1]+=-p*a[1],l))||0;a[0]*l[1]<l[0]*a[1]&&(a[0]*=-1,a[1]*=-1,c*=-1,p*=-1);this.rotate=(c?Math.atan2(a[1],a[0]):Math.atan2(-l[0],l[1]))*W;this.translate=[d.e,d.f];this.scale=[c,e];this.skew=e?Math.atan2(p,e)*W:0}function $d(d){var a=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return a&&(d[0]/=a,d[1]/=a),a}function ta(d,a){return a-=d=+d,function(l){return d+a*l}}function ub(d,a){var l,c=[],p=[],e=n.transform(d),f=n.transform(a),g=e.translate,h=
f.translate,q=e.rotate,m=f.rotate,r=e.skew,E=f.skew,e=e.scale,f=f.scale;return g[0]!=h[0]||g[1]!=h[1]?(c.push("translate(",null,",",null,")"),p.push({i:1,x:ta(g[0],h[0])},{i:3,x:ta(g[1],h[1])})):h[0]||h[1]?c.push("translate("+h+")"):c.push(""),q!=m?(180<q-m?m+=360:180<m-q&&(q+=360),p.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:ta(q,m)})):m&&c.push(c.pop()+"rotate("+m+")"),r!=E?p.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:ta(r,E)}):E&&c.push(c.pop()+"skewX("+E+")"),e[0]!=f[0]||e[1]!=f[1]?(l=
c.push(c.pop()+"scale(",null,",",null,")"),p.push({i:l-4,x:ta(e[0],f[0])},{i:l-2,x:ta(e[1],f[1])})):(1!=f[0]||1!=f[1])&&c.push(c.pop()+"scale("+f+")"),l=p.length,function(d){for(var a,s=-1;++s<l;)c[(a=p[s]).i]=a.x(d);return c.join("")}}function ae(d,a){var l,c={},p={};for(l in d)l in a?c[l]=("transform"==l?ub:Da)(d[l],a[l]):p[l]=d[l];for(l in a)l in d||(p[l]=a[l]);return function(d){for(l in c)p[l]=c[l](d);return p}}function be(d,a){var l,c,p,e,f=0,g=[],h=[];d+="";a+="";for(c=vb.lastIndex=0;l=vb.exec(a);++c)l.index&&
g.push(a.substring(f,l.index)),h.push({i:g.length,x:l[0]}),g.push(null),f=vb.lastIndex;f<a.length&&g.push(a.substring(f));c=0;for(p=h.length;(l=vb.exec(d))&&p>c;++c)if(e=h[c],e.x==l[0]){if(e.i)if(null==g[e.i+1])for(g[e.i-1]+=e.x,g.splice(e.i,1),l=c+1;p>l;++l)h[l].i--;else for(g[e.i-1]+=e.x+g[e.i+1],g.splice(e.i,2),l=c+1;p>l;++l)h[l].i-=2;else if(null==g[e.i+1])g[e.i]=e.x;else for(g[e.i]=e.x+g[e.i+1],g.splice(e.i+1,1),l=c+1;p>l;++l)h[l].i--;h.splice(c,1);p--;c--}else e.x=ta(parseFloat(l[0]),parseFloat(e.x));
for(;p>c;)e=h.pop(),null==g[e.i+1]?g[e.i]=e.x:(g[e.i]=e.x+g[e.i+1],g.splice(e.i+1,1)),p--;return 1===g.length?null==g[0]?h[0].x:function(){return a}:function(d){for(c=0;p>c;++c)g[(e=h[c]).i]=e.x(d);return g.join("")}}function Da(d,a){for(var l,c=n.interpolators.length;0<=--c&&!(l=n.interpolators[c](d,a)););return l}function ce(d,a){var l,c=[],e=[],f=d.length,g=a.length,t=Math.min(d.length,a.length);for(l=0;t>l;++l)c.push(Da(d[l],a[l]));for(;f>l;++l)e[l]=d[l];for(;g>l;++l)e[l]=a[l];return function(d){for(l=
0;t>l;++l)e[l]=c[l](d);return e}}function Nf(d){return function(a){return 0>=a?0:1<=a?1:d(a)}}function de(d){return function(a){return 1-d(1-a)}}function ee(d){return function(a){return 0.5*(0.5>a?d(2*a):2-d(2-2*a))}}function Of(d){return d*d}function Pf(d){return d*d*d}function Qf(d){return 1-Math.cos(d*x/2)}function Rf(d){return Math.pow(2,10*(d-1))}function Sf(d){return 1-Math.sqrt(1-d*d)}function Tf(d){return 1/2.75>d?7.5625*d*d:2/2.75>d?7.5625*(d-=1.5/2.75)*d+0.75:2.5/2.75>d?7.5625*(d-=2.25/
2.75)*d+0.9375:7.5625*(d-=2.625/2.75)*d+0.984375}function fe(d,a){return a-=d,function(l){return Math.round(d+a*l)}}function Uf(d,a){return a=a-(d=+d)?1/(a-d):0,function(l){return(l-d)*a}}function Vf(d,a){return a=a-(d=+d)?1/(a-d):0,function(l){return Math.max(0,Math.min(1,(l-d)*a))}}function Wf(d){var a=d.source;d=d.target;var l;var c=d;if(a===c)l=a;else{l=ge(a);for(var c=ge(c),e=l.pop(),f=c.pop(),g=null;e===f;)g=e,e=l.pop(),f=c.pop();l=g}for(c=[a];a!==l;)a=a.parent,c.push(a);for(a=c.length;d!==
l;)c.splice(a,0,d),d=d.parent;return c}function ge(d){for(var a=[],l=d.parent;null!=l;)a.push(d),d=l,l=l.parent;return a.push(d),a}function Xf(d){d.fixed|=2}function Yf(d){d.fixed&=-7}function Zf(d){d.fixed|=4;d.px=d.x;d.py=d.y}function $f(d){d.fixed&=-5}function he(d,a,l){var c=0,e=0;if(d.charge=0,!d.leaf)for(var f,g=d.nodes,t=g.length,h=-1;++h<t;)f=g[h],null!=f&&(he(f,a,l),d.charge+=f.charge,c+=f.charge*f.cx,e+=f.charge*f.cy);d.point&&(d.leaf||(d.point.x+=Math.random()-0.5,d.point.y+=Math.random()-
0.5),a*=l[d.point.index],d.charge+=d.pointCharge=a,c+=a*d.point.x,e+=a*d.point.y);d.cx=c/d.charge;d.cy=e/d.charge}function Ya(d,a){return n.rebind(d,a,"sort","children","value"),d.nodes=d,d.links=ag,d}function bg(d){return d.children}function cg(d){return d.value}function dg(d,a){return a.value-d.value}function ag(d){return n.merge(d.map(function(d){return(d.children||[]).map(function(a){return{source:d,target:a}})}))}function eg(d){return d.x}function fg(d){return d.y}function gg(d,a,c){d.y0=a;d.y=
c}function Ac(d){return n.range(d.length)}function Bc(d){var a=-1;d=d[0].length;for(var c=[];++a<d;)c[a]=0;return c}function hg(d){for(var a,c=1,e=0,p=d[0][1],f=d.length;f>c;++c)(a=d[c][1])>p&&(e=c,p=a);return e}function ig(d){return d.reduce(jg,0)}function jg(d,a){return d+a[1]}function kg(d,a){return ie(d,Math.ceil(Math.log(a.length)/Math.LN2+1))}function ie(d,a){for(var c=-1,e=+d[0],p=(d[1]-e)/a,f=[];++c<=a;)f[c]=p*c+e;return f}function lg(d){return[n.min(d),n.max(d)]}function je(d,a){return d.parent==
a.parent?1:2}function Cc(d){var a=d.children;return a&&a.length?a[0]:d._tree.thread}function Dc(d){var a,c=d.children;return c&&(a=c.length)?c[a-1]:d._tree.thread}function wb(d,a){var c=d.children;if(c&&(p=c.length))for(var e,p,f=-1;++f<p;)0<a(e=wb(c[f],a),d)&&(d=e);return d}function mg(d,a){return d.x-a.x}function ng(d,a){return a.x-d.x}function og(d,a){return d.depth-a.depth}function ua(d,a){function c(d,e){var f=d.children;if(f&&(t=f.length))for(var g,t,h=null,n=-1;++n<t;)g=f[n],c(g,h),h=g;a(d,
e)}c(d,null)}function pg(d,a){return d.value-a.value}function Ec(d,a){var c=d._pack_next;d._pack_next=a;a._pack_prev=d;a._pack_next=c;c._pack_prev=a}function ke(d,a){d._pack_next=a;a._pack_prev=d}function le(d,a){var c=a.x-d.x,e=a.y-d.y,p=d.r+a.r;return 0.001<p*p-c*c-e*e}function me(d){function a(d){q=Math.min(d.x-d.r,q);m=Math.max(d.x+d.r,m);r=Math.min(d.y-d.r,r);Qb=Math.max(d.y+d.r,Qb)}if((c=d.children)&&(n=c.length)){var c,e,p,f,g,t,h,n,q=1/0,m=-1/0,r=1/0,Qb=-1/0;if(c.forEach(qg),e=c[0],e.x=-e.r,
e.y=0,a(e),1<n&&(p=c[1],p.x=p.r,p.y=0,a(p),2<n))for(f=c[2],ne(e,p,f),a(f),Ec(e,f),e._pack_prev=f,Ec(f,p),p=e._pack_next,g=3;n>g;g++){ne(e,p,f=c[g]);var C=0,y=1,z=1;for(t=p._pack_next;t!==p;t=t._pack_next,y++)if(le(t,f)){C=1;break}if(1==C)for(h=e._pack_prev;h!==t._pack_prev&&!le(h,f);h=h._pack_prev,z++);C?(z>y||y==z&&p.r<e.r?ke(e,p=t):ke(e=h,p),g--):(Ec(e,f),p=f,a(f))}e=(q+m)/2;p=(r+Qb)/2;for(g=t=0;n>g;g++)f=c[g],f.x-=e,f.y-=p,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));d.r=t;c.forEach(rg)}}function qg(d){d._pack_next=
d._pack_prev=d}function rg(d){delete d._pack_next;delete d._pack_prev}function oe(d,a,c,e){var p=d.children;if(d.x=a+=e*d.x,d.y=c+=e*d.y,d.r*=e,p){d=-1;for(var f=p.length;++d<f;)oe(p[d],a,c,e)}}function ne(d,a,c){var e=d.r+c.r,p=a.x-d.x,f=a.y-d.y;if(e&&(p||f)){var g=a.r+c.r,t=p*p+f*f,g=g*g,e=e*e;a=0.5+(e-g)/(2*t);g=Math.sqrt(Math.max(0,2*g*(e+t)-(e-=t)*e-g*g))/(2*t);c.x=d.x+a*p+g*f;c.y=d.y+a*f-g*p}else c.x=d.x+e,c.y=d.y}function sg(d){return 1+n.max(d,function(d){return d.y})}function tg(d){return d.reduce(function(d,
a){return d+a.x},0)/d.length}function pe(d){var a=d.children;return a&&a.length?pe(a[0]):d}function qe(d){var a,c=d.children;return c&&(a=c.length)?qe(c[a-1]):d}function Fc(d){return{x:d.x,y:d.y,dx:d.dx,dy:d.dy}}function re(d,a){var c=d.x+a[3],e=d.y+a[0],p=d.dx-a[1]-a[3],f=d.dy-a[0]-a[2];return 0>p&&(c+=p/2,p=0),0>f&&(e+=f/2,f=0),{x:c,y:e,dx:p,dy:f}}function Za(d){var a=d[0];d=d[d.length-1];return d>a?[a,d]:[d,a]}function xb(d){return d.rangeExtent?d.rangeExtent():Za(d.range())}function ug(d,a,c,
e){var p=c(d[0],d[1]),f=e(a[0],a[1]);return function(d){return f(p(d))}}function yb(d,a){var c,e=0,p=d.length-1,f=d[e],g=d[p];return f>g&&(c=e,e=p,p=c,c=f,f=g,g=c),(a=a(g-f))&&(d[e]=a.floor(f),d[p]=a.ceil(g)),d}function vg(d,a,c,e){var p=[],f=[],g=0,t=Math.min(d.length,a.length)-1;for(d[t]<d[0]&&(d=d.slice().reverse(),a=a.slice().reverse());++g<=t;)p.push(c(d[g-1],d[g])),f.push(e(a[g-1],a[g]));return function(a){var c=n.bisect(d,a,1,t)-1;return f[c](p[c](a))}}function se(d,a,c,e){function p(){var p=
2<Math.min(d.length,a.length)?vg:ug,h=e?Vf:Uf;return g=p(d,a,h,c),t=p(a,d,h,Da),f}function f(d){return g(d)}var g,t;return f.invert=function(d){return t(d)},f.domain=function(a){return arguments.length?(d=a.map(Number),p()):d},f.range=function(d){return arguments.length?(a=d,p()):a},f.rangeRound=function(d){return f.range(d).interpolate(fe)},f.clamp=function(d){return arguments.length?(e=d,p()):e},f.interpolate=function(d){return arguments.length?(c=d,p()):c},f.ticks=function(a){return Gc(d,a)},f.tickFormat=
function(a,c){return Hc(d,a,c)},f.nice=function(){return yb(d,te),p()},f.copy=function(){return se(d,a,c,e)},p()}function ue(d,a){return n.rebind(d,a,"range","rangeRound","interpolate","clamp")}function te(d){return d=Math.pow(10,Math.round(Math.log(d)/Math.LN10)-1),d&&{floor:function(a){return Math.floor(a/d)*d},ceil:function(a){return Math.ceil(a/d)*d}}}function ve(d,a){var c=Za(d),e=c[1]-c[0],p=Math.pow(10,Math.floor(Math.log(e/a)/Math.LN10)),e=a/e*p;return 0.15>=e?p*=10:0.35>=e?p*=5:0.75>=e&&
(p*=2),c[0]=Math.ceil(c[0]/p)*p,c[1]=Math.floor(c[1]/p)*p+0.5*p,c[2]=p,c}function Gc(d,a){return n.range.apply(n,ve(d,a))}function Hc(d,a,c){var e=-Math.floor(Math.log(ve(d,a)[2])/Math.LN10+0.01);return n.format(c?c.replace(we,function(d,a,c,l,s,f,g,h,n,q){return[a,c,l,s,f,g,h,n||"."+(e-2*("%"===q)),q].join("")}):",."+e+"f")}function xe(d,a,c,e){function p(a){return d(c(a))}return p.invert=function(a){return e(d.invert(a))},p.domain=function(a){return arguments.length?(0>a[0]?(c=Ic,e=wg):(c=ye,e=
ze),d.domain(a.map(c)),p):d.domain().map(e)},p.base=function(d){return arguments.length?(a=+d,p):a},p.nice=function(){return d.domain(yb(d.domain(),xg(a))),p},p.ticks=function(){var p=Za(d.domain()),f=[];if(p.every(isFinite)){var g=Math.log(a),h=Math.floor(p[0]/g),g=Math.ceil(p[1]/g),n=e(p[0]),p=e(p[1]),q=a%1?2:a;if(c===Ic)for(f.push(-Math.pow(a,-h));h++<g;)for(var m=q-1;0<m;m--)f.push(-Math.pow(a,-h)*m);else{for(;g>h;h++)for(m=1;q>m;m++)f.push(Math.pow(a,h)*m);f.push(Math.pow(a,h))}for(h=0;f[h]<
n;h++);for(g=f.length;f[g-1]>p;g--);f=f.slice(h,g)}return f},p.tickFormat=function(d,f){if(2>arguments.length&&(f=yg),!arguments.length)return f;var g,h=Math.log(a),n=Math.max(0.1,d/p.ticks().length),q=c===Ic?(g=-1E-12,Math.floor):(g=1E-12,Math.ceil);return function(d){return d/e(h*q(c(d)/h+g))<=n?f(d):""}},p.copy=function(){return xe(d.copy(),a,c,e)},ue(p,d)}function ye(d){return Math.log(0>d?0:d)}function ze(d){return Math.exp(d)}function Ic(d){return-Math.log(0<d?0:-d)}function wg(d){return-Math.exp(-d)}
function xg(d){d=Math.log(d);var a={floor:function(a){return Math.floor(a/d)*d},ceil:function(a){return Math.ceil(a/d)*d}};return function(){return a}}function Ae(d,a){function c(a){return d(e(a))}var e=zb(a),p=zb(1/a);return c.invert=function(a){return p(d.invert(a))},c.domain=function(a){return arguments.length?(d.domain(a.map(e)),c):d.domain().map(p)},c.ticks=function(d){return Gc(c.domain(),d)},c.tickFormat=function(d,a){return Hc(c.domain(),d,a)},c.nice=function(){return c.domain(yb(c.domain(),
te))},c.exponent=function(d){if(!arguments.length)return a;var f=c.domain();return e=zb(a=d),p=zb(1/a),c.domain(f)},c.copy=function(){return Ae(d.copy(),a)},ue(c,d)}function zb(d){return function(a){return 0>a?-Math.pow(-a,d):Math.pow(a,d)}}function Be(d,c){function l(a){return f[((p.get(a)||p.set(a,d.push(a)))-1)%f.length]}function e(a,c){return n.range(d.length).map(function(d){return a+c*d})}var p,f,g;return l.domain=function(e){if(!arguments.length)return d;d=[];p=new a;for(var f,g=-1,v=e.length;++g<
v;)p.has(f=e[g])||p.set(f,d.push(f));return l[c.t].apply(l,c.a)},l.range=function(d){return arguments.length?(f=d,g=0,c={t:"range",a:arguments},l):f},l.rangePoints=function(a,p){2>arguments.length&&(p=0);var h=a[0],n=a[1],q=(n-h)/(Math.max(1,d.length-1)+p);return f=e(2>d.length?(h+n)/2:h+q*p/2,q),g=0,c={t:"rangePoints",a:arguments},l},l.rangeBands=function(a,p,h){2>arguments.length&&(p=0);3>arguments.length&&(h=p);var n=a[1]<a[0],q=a[n-0],m=(a[1-n]-q)/(d.length-p+2*h);return f=e(q+m*h,m),n&&f.reverse(),
g=m*(1-p),c={t:"rangeBands",a:arguments},l},l.rangeRoundBands=function(a,p,h){2>arguments.length&&(p=0);3>arguments.length&&(h=p);var n=a[1]<a[0],q=a[n-0],m=a[1-n],r=Math.floor((m-q)/(d.length-p+2*h));return f=e(q+Math.round((m-q-(d.length-p)*r)/2),r),n&&f.reverse(),g=Math.round(r*(1-p)),c={t:"rangeRoundBands",a:arguments},l},l.rangeBand=function(){return g},l.rangeExtent=function(){return Za(c.a[0])},l.copy=function(){return Be(d,c)},l.domain(d)}function Ce(d,a){function c(){var l=0,f=a.length;for(p=
[];++l<f;)p[l-1]=n.quantile(d,l/f);return e}function e(d){return isNaN(d=+d)?0/0:a[n.bisect(p,d)]}var p;return e.domain=function(a){return arguments.length?(d=a.filter(function(d){return!isNaN(d)}).sort(n.ascending),c()):d},e.range=function(d){return arguments.length?(a=d,c()):a},e.quantiles=function(){return p},e.copy=function(){return Ce(d,a)},c()}function De(d,a,c){function e(a){return c[Math.max(0,Math.min(g,Math.floor(f*(a-d))))]}function p(){return f=c.length/(a-d),g=c.length-1,e}var f,g;return e.domain=
function(c){return arguments.length?(d=+c[0],a=+c[c.length-1],p()):[d,a]},e.range=function(d){return arguments.length?(c=d,p()):c},e.copy=function(){return De(d,a,c)},p()}function Ee(d,a){function c(l){return a[n.bisect(d,l)]}return c.domain=function(a){return arguments.length?(d=a,c):d},c.range=function(d){return arguments.length?(a=d,c):a},c.copy=function(){return Ee(d,a)},c}function Fe(d){function a(d){return+d}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(d=c.map(a),
a):d},a.ticks=function(a){return Gc(d,a)},a.tickFormat=function(a,c){return Hc(d,a,c)},a.copy=function(){return Fe(d)},a}function zg(d){return d.innerRadius}function Ag(d){return d.outerRadius}function Ge(d){return d.startAngle}function He(d){return d.endAngle}function Ie(d){for(var a,c,e,p=-1,f=d.length;++p<f;)a=d[p],c=a[0],e=a[1]+Ea,a[0]=c*Math.cos(e),a[1]=c*Math.sin(e);return d}function Je(d){function a(s){function h(){A.push("M",t(d(J),m),q,n(d(G.reverse()),m),"Z")}for(var L,r,z,A=[],G=[],J=[],
D=-1,u=s.length,w=I(c),V=I(p),B=c===e?function(){return r}:I(e),Cf=p===f?function(){return z}:I(f);++D<u;)g.call(this,L=s[D],D)?(G.push([r=+w.call(this,L,D),z=+V.call(this,L,D)]),J.push([+B.call(this,L,D),+Cf.call(this,L,D)])):G.length&&(h(),G=[],J=[]);return G.length&&h(),A.length?A.join(""):null}var c=pa,e=pa,p=0,f=sa,g=Ta,t=ka,h=t.key,n=t,q="L",m=0.7;return a.x=function(d){return arguments.length?(c=e=d,a):e},a.x0=function(d){return arguments.length?(c=d,a):c},a.x1=function(d){return arguments.length?
(e=d,a):e},a.y=function(d){return arguments.length?(p=f=d,a):f},a.y0=function(d){return arguments.length?(p=d,a):p},a.y1=function(d){return arguments.length?(f=d,a):f},a.defined=function(d){return arguments.length?(g=d,a):g},a.interpolate=function(d){return arguments.length?(h="function"==typeof d?t=d:(t=rc.get(d)||ka).key,n=t.reverse||t,q=t.closed?"M":"L",a):h},a.tension=function(d){return arguments.length?(m=d,a):m},a}function Bg(d){return d.radius}function Ke(d){return[d.x,d.y]}function Cg(d){return function(){var a=
d.apply(this,arguments),c=a[0],a=a[1]+Ea;return[c*Math.cos(a),c*Math.sin(a)]}}function Dg(){return 64}function Eg(){return"circle"}function Le(d){d=Math.sqrt(d/x);return"M0,"+d+"A"+d+","+d+" 0 1,1 0,"+-d+"A"+d+","+d+" 0 1,1 0,"+d+"Z"}function $a(d,a){return Pb(d,ba),d.id=a,d}function Jc(d,a,c,e){var p=d.id;return xa(d,"function"==typeof c?function(d,f,g){d.__transition__[p].tween.set(a,e(c.call(d,d.__data__,f,g)))}:(c=e(c),function(d){d.__transition__[p].tween.set(a,c)}))}function Fg(d){return null==
d&&(d=""),function(){this.textContent=d}}function Ab(d,c,l,e){var p=d.__transition__||(d.__transition__={active:0,count:0}),f=p[l];if(!f){var g=e.time;return f=p[l]={tween:new a,event:n.dispatch("start","end"),time:g,ease:e.ease,delay:e.delay,duration:e.duration},++p.count,n.timer(function(a){function e(a){return p.active>l?M():(p.active=l,r.start.call(d,q,c),f.tween.forEach(function(a,l){(l=l.call(d,q,c))&&z.push(l)}),h(a)||n.timer(h,0,g),1)}function h(a){if(p.active!==l)return M();a=(a-C)/y;for(var e=
m(a),f=z.length;0<f;)z[--f].call(d,e);return 1<=a?(M(),r.end.call(d,q,c),1):void 0}function M(){return--p.count?delete p[l]:delete d.__transition__,1}var q=d.__data__,m=f.ease,r=f.event,C=f.delay,y=f.duration,z=[];return a>=C?e(a):n.timer(e,C,g),1},0,g),f}}function Me(d,a){d.attr("transform",function(d){return"translate("+a(d)+",0)"})}function Ne(d,a){d.attr("transform",function(d){return"translate(0,"+a(d)+")"})}function Gg(d,a,c){if(e=[],c&&1<a.length){for(var e,p,f=Za(d.domain()),g=-1,t=a.length,
h=(a[1]-a[0])/++c;++g<t;)for(d=c;0<--d;)(p=+a[g]-d*h)>=f[0]&&e.push(p);--g;for(d=0;++d<c&&(p=+a[g]+d*h)<f[1];)e.push(p)}return e}function Fa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ga(d,a,c){function e(a){var c=d(a),l=f(c,1);return l-a>a-c?c:l}function p(c){return a(c=d(new fa(c-1)),1),c}function f(d,c){return a(d=new fa(+d),c),d}function g(d,e,f){d=p(d);var v=[];if(1<f)for(;e>d;)c(d)%f||v.push(new Date(+d)),a(d,1);else for(;e>d;)v.push(new Date(+d)),
a(d,1);return v}d.floor=d;d.round=e;d.ceil=p;d.offset=f;d.range=g;var t=d.utc=Bb(d);return t.floor=t,t.round=Bb(e),t.ceil=Bb(p),t.offset=Bb(f),t.range=function(d,a,c){try{fa=Fa;var l=new Fa;return l._=d,g(l,a,c)}finally{fa=Date}},d}function Bb(d){return function(a,c){try{fa=Fa;var e=new Fa;return e._=a,d(e,c)._}finally{fa=Date}}}function Cb(d,a,c,e){for(var p,f,g=0,t=a.length,h=c.length;t>g;){if(e>=h)return-1;if(p=a.charCodeAt(g++),37===p){if(f=Hg[a.charAt(g++)],!f||0>(e=f(d,c,e)))return-1}else if(p!=
c.charCodeAt(e++))return-1}return e}function Db(d){return RegExp("^(?:"+d.map(n.requote).join("|")+")","i")}function Oe(d){for(var c=new a,l=-1,e=d.length;++l<e;)c.set(d[l].toLowerCase(),l);return c}function ia(d,a,c){d+="";var e=d.length;return c>e?Array(c-e+1).join(a)+d:d}function Pe(d,a,c){ga.lastIndex=0;return(a=ga.exec(a.substring(c,c+2)))?(d.d=+a[0],c+a[0].length):-1}function Qe(d,a,c){ga.lastIndex=0;return(a=ga.exec(a.substring(c,c+2)))?(d.H=+a[0],c+a[0].length):-1}function Kc(d){return d.toISOString()}
function Lc(d,a,c){function e(a){return d(a)}return e.invert=function(a){return Mc(d.invert(a))},e.domain=function(a){return arguments.length?(d.domain(a),e):d.domain().map(Mc)},e.nice=function(d){return e.domain(yb(e.domain(),function(){return d}))},e.ticks=function(c,l){var f,g=e.domain();f=g[0];g=g[g.length-1];f=g>f?[f,g]:[g,f];if("function"!=typeof c){var g=(f[1]-f[0])/c,h=n.bisect(Eb,g);if(h==Eb.length)return a.year(f,c);if(!h)return d.ticks(c).map(Mc);Math.log(g/Eb[h-1])<Math.log(Eb[h]/g)&&
--h;c=a[h];l=c[1];c=c[0].range}return c(f[0],new Date(+f[1]+1),l)},e.tickFormat=function(){return c},e.copy=function(){return Lc(d.copy(),a,c)},n.rebind(e,d,"range","rangeRound","interpolate","clamp")}function Mc(d){return new Date(d)}function Re(d){return function(a){for(var c=d.length-1,e=d[c];!e[1](a);)e=d[--c];return e[0](a)}}function Nc(d){var a=new Date(d,0,1);return a.setFullYear(d),a}function Ig(d){var a=d.getFullYear(),c=Nc(a),e=Nc(a+1);return a+(d-c)/(e-c)}function Oc(d){var a=new Date(Date.UTC(d,
0,1));return a.setUTCFullYear(d),a}function Jg(d){var a=d.getUTCFullYear(),c=Oc(a),e=Oc(a+1);return a+(d-c)/(e-c)}function Kg(d){return d.responseText}function Lg(d){return JSON.parse(d.responseText)}function Mg(d){var a=ha.createRange();return a.selectNode(ha.body),a.createContextualFragment(d.responseText)}function Ng(d){return d.responseXML}var n={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var ha=document,da=window;try{ha.createElement("div").style.setProperty("opacity",
0,"")}catch(rh){var Se=da.CSSStyleDeclaration.prototype,Og=Se.setProperty;Se.setProperty=function(d,a,c){Og.call(this,d,a+"",c)}}n.ascending=function(d,a){return a>d?-1:d>a?1:d>=a?0:0/0};n.descending=function(d,a){return d>a?-1:a>d?1:a>=d?0:0/0};n.min=function(d,a){var c,e,f=-1,g=d.length;if(1===arguments.length){for(;++f<g&&(null==(c=d[f])||c!=c);)c=void 0;for(;++f<g;)null!=(e=d[f])&&c>e&&(c=e)}else{for(;++f<g&&(null==(c=a.call(d,d[f],f))||c!=c);)c=void 0;for(;++f<g;)null!=(e=a.call(d,d[f],f))&&
c>e&&(c=e)}return c};n.max=function(d,a){var c,e,f=-1,g=d.length;if(1===arguments.length){for(;++f<g&&(null==(c=d[f])||c!=c);)c=void 0;for(;++f<g;)null!=(e=d[f])&&e>c&&(c=e)}else{for(;++f<g&&(null==(c=a.call(d,d[f],f))||c!=c);)c=void 0;for(;++f<g;)null!=(e=a.call(d,d[f],f))&&e>c&&(c=e)}return c};n.extent=function(d,a){var c,e,f,g=-1,h=d.length;if(1===arguments.length){for(;++g<h&&(null==(c=f=d[g])||c!=c);)c=f=void 0;for(;++g<h;)null!=(e=d[g])&&(c>e&&(c=e),e>f&&(f=e))}else{for(;++g<h&&(null==(c=f=
a.call(d,d[g],g))||c!=c);)c=void 0;for(;++g<h;)null!=(e=a.call(d,d[g],g))&&(c>e&&(c=e),e>f&&(f=e))}return[c,f]};n.sum=function(d,a){var c,e=0,f=d.length,g=-1;if(1===arguments.length)for(;++g<f;)isNaN(c=+d[g])||(e+=c);else for(;++g<f;)isNaN(c=+a.call(d,d[g],g))||(e+=c);return e};n.mean=function(d,a){var c,e=d.length,p=0,g=-1,h=0;if(1===arguments.length)for(;++g<e;)f(c=d[g])&&(p+=(c-p)/++h);else for(;++g<e;)f(c=a.call(d,d[g],g))&&(p+=(c-p)/++h);return h?p:void 0};n.quantile=function(d,a){var c=(d.length-
1)*a+1,e=Math.floor(c),f=+d[e-1];return(c-=e)?f+c*(d[e]-f):f};n.median=function(d,a){return 1<arguments.length&&(d=d.map(a)),d=d.filter(f),d.length?n.quantile(d.sort(n.ascending),0.5):void 0};n.bisector=function(d){return{left:function(a,c,e,f){3>arguments.length&&(e=0);for(4>arguments.length&&(f=a.length);f>e;){var g=e+f>>>1;d.call(a,a[g],g)<c?e=g+1:f=g}return e},right:function(a,c,e,f){3>arguments.length&&(e=0);for(4>arguments.length&&(f=a.length);f>e;){var g=e+f>>>1;c<d.call(a,a[g],g)?f=g:e=g+
1}return e}}};var Te=n.bisector(function(d){return d});n.bisectLeft=Te.left;n.bisect=n.bisectRight=Te.right;n.shuffle=function(d){for(var a,c,e=d.length;e;)c=Math.random()*e--|0,a=d[e],d[e]=d[c],d[c]=a;return d};n.permute=function(d,a){for(var c=[],e=-1,f=a.length;++e<f;)c[e]=d[a[e]];return c};n.zip=function(){if(!(e=arguments.length))return[];for(var d=-1,a=n.min(arguments,r),c=Array(a);++d<a;)for(var e,f=-1,g=c[d]=Array(e);++f<e;)g[f]=arguments[f][d];return c};n.transpose=function(d){return n.zip.apply(n,
d)};n.keys=function(d){var a=[],c;for(c in d)a.push(c);return a};n.values=function(d){var a=[],c;for(c in d)a.push(d[c]);return a};n.entries=function(d){var a=[],c;for(c in d)a.push({key:c,value:d[c]});return a};n.merge=function(d){return Array.prototype.concat.apply([],d)};n.range=function(d,a,c){if(3>arguments.length&&(c=1,2>arguments.length&&(a=d,d=0)),1/0===(a-d)/c)throw Error("infinite range");var e,f=[],g;e=Math.abs(c);for(g=1;e*g%1;)g*=10;var h=-1;if(d*=g,a*=g,c*=g,0>c)for(;(e=d+c*++h)>a;)f.push(e/
g);else for(;(e=d+c*++h)<a;)f.push(e/g);return f};n.map=function(d){var c=new a,e;for(e in d)c.set(e,d[e]);return c};m(a,{has:function(d){return Ba+d in this},get:function(d){return this[Ba+d]},set:function(d,a){return this[Ba+d]=a},remove:function(d){return d=Ba+d,d in this&&delete this[d]},keys:function(){var d=[];return this.forEach(function(a){d.push(a)}),d},values:function(){var d=[];return this.forEach(function(a,c){d.push(c)}),d},entries:function(){var d=[];return this.forEach(function(a,c){d.push({key:a,
value:c})}),d},forEach:function(d){for(var a in this)a.charCodeAt(0)===Ue&&d.call(this,a.substring(1),this[a])}});var Ba="\x00",Ue=Ba.charCodeAt(0);n.nest=function(){function d(c,s,h){if(h>=g.length)return f?f.call(p,s):e?s.sort(e):s;for(var n,q,m,r,S=-1,y=s.length,z=g[h++],A=new a;++S<y;)(r=A.get(n=z(q=s[S])))?r.push(q):A.set(n,[q]);return c?(q=c(),m=function(a,e){q.set(a,d(c,e,h))}):(q={},m=function(a,e){q[a]=d(c,e,h)}),A.forEach(m),q}function c(d,a){if(a>=g.length)return d;var e=[],l=h[a++];return d.forEach(function(d,
l){e.push({key:d,values:c(l,a)})}),l?e.sort(function(d,a){return l(d.key,a.key)}):e}var e,f,p={},g=[],h=[];return p.map=function(a,c){return d(c,a,0)},p.entries=function(a){return c(d(n.map,a,0),0)},p.key=function(d){return g.push(d),p},p.sortKeys=function(d){return h[g.length-1]=d,p},p.sortValues=function(d){return e=d,p},p.rollup=function(d){return f=d,p},p};n.set=function(d){var a=new c;if(d)for(var e=0;e<d.length;e++)a.add(d[e]);return a};m(c,{has:function(d){return Ba+d in this},add:function(d){return this[Ba+
d]=!0,d},remove:function(d){return d=Ba+d,d in this&&delete this[d]},values:function(){var d=[];return this.forEach(function(a){d.push(a)}),d},forEach:function(d){for(var a in this)a.charCodeAt(0)===Ue&&d.call(this,a.substring(1))}});n.behavior={};n.rebind=function(d,a){for(var c,f=1,p=arguments.length;++f<p;)d[c=arguments[f]]=e(d,a,a[c]);return d};n.dispatch=function(){for(var d=new h,a=-1,c=arguments.length;++a<c;)d[arguments[a]]=g(d);return d};h.prototype.on=function(d,a){var c=d.indexOf("."),
e="";if(0<=c&&(e=d.substring(c+1),d=d.substring(0,c)),d)return 2>arguments.length?this[d].on(e):this[d].on(e,a);if(2===arguments.length){if(null==a)for(d in this)this.hasOwnProperty(d)&&this[d].on(e,null);return this}};n.event=null;n.mouse=function(d){return H(d,B())};var Ob=/WebKit/.test(da.navigator.userAgent)?-1:0,wa=function(d){return Array.prototype.slice.call(d)};try{wa(ha.documentElement.childNodes)[0].nodeType}catch(sh){wa=u}var Pb=[].__proto__?function(d,a){d.__proto__=a}:function(d,a){for(var c in a)d[c]=
a[c]};n.touches=function(d,a){return 2>arguments.length&&(a=B().touches),a?wa(a).map(function(a){var c=H(d,a);return c.identifier=a.identifier,c}):[]};n.behavior.drag=function(){function d(){this.on("mousedown.drag",a).on("touchstart.drag",a)}function a(){function d(){var a=s.parentNode;return null!=r?n.touches(a).filter(function(d){return d.identifier===r})[0]:n.mouse(a)}function f(){h({type:"dragend"});E&&(q(),n.event.target===m&&U(u,"click"));u.on(null!=r?"touchmove.drag-"+r:"mousemove.drag",null).on(null!=
r?"touchend.drag-"+r:"mouseup.drag",null)}var g,s=this,h=c.of(s,arguments),m=n.event.target,r=n.event.touches?n.event.changedTouches[0].identifier:null,R=d(),E=0,u=n.select(da).on(null!=r?"touchmove.drag-"+r:"mousemove.drag",function(){if(!s.parentNode)return f();var a=d(),c=a[0]-R[0],e=a[1]-R[1];E|=c|e;R=a;q();h({type:"drag",x:a[0]+g[0],y:a[1]+g[1],dx:c,dy:e})}).on(null!=r?"touchend.drag-"+r:"mouseup.drag",f,!0);e?(g=e.apply(s,arguments),g=[g.x-R[0],g.y-R[1]]):g=[0,0];null==r&&q();h({type:"dragstart"})}
var c=w(d,"drag","dragstart","dragend"),e=null;return d.origin=function(a){return arguments.length?(e=a,d):e},n.rebind(d,c,"on")};var $c=function(d,a){return a.querySelector(d)},ad=function(d,a){return a.querySelectorAll(d)},Pa=ha.documentElement,Pg=Pa.matchesSelector||Pa.webkitMatchesSelector||Pa.mozMatchesSelector||Pa.msMatchesSelector||Pa.oMatchesSelector,ed=function(d,a){return Pg.call(d,a)};"function"==typeof Sizzle&&($c=function(d,a){return Sizzle(d,a)[0]||null},ad=function(d,a){return Sizzle.uniqueSort(Sizzle(d,
a))},ed=Sizzle.matchesSelector);var Q=[];n.selection=function(){return ab};n.selection.prototype=Q;Q.select=function(d){var a,c,e,f,g=[];"function"!=typeof d&&(d=O(d));for(var h=-1,t=this.length;++h<t;){g.push(a=[]);a.parentNode=(e=this[h]).parentNode;for(var n=-1,q=e.length;++n<q;)(f=e[n])?(a.push(c=d.call(f,f.__data__,n)),c&&"__data__"in f&&(c.__data__=f.__data__)):a.push(null)}return N(g)};Q.selectAll=function(d){var a,c,e=[];"function"!=typeof d&&(d=T(d));for(var f=-1,g=this.length;++f<g;)for(var h=
this[f],t=-1,n=h.length;++t<n;)(c=h[t])&&(e.push(a=wa(d.call(c,c.__data__,t))),a.parentNode=c);return N(e)};var Pc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:Pc,qualify:function(d){var a=d.indexOf(":"),c=d;return 0<=a&&(c=d.substring(0,a),d=d.substring(a+1)),Pc.hasOwnProperty(c)?{space:Pc[c],local:d}:d}};Q.attr=function(d,a){if(2>arguments.length){if("string"==
typeof d){var c=this.node();return d=n.ns.qualify(d),d.local?c.getAttributeNS(d.space,d.local):c.getAttribute(d)}for(a in d)this.each(Sa(a,d[a]));return this}return this.each(Sa(d,a))};n.requote=function(d){return d.replace(Qg,"\\$&")};var Qg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Q.classed=function(d,a){if(2>arguments.length){if("string"==typeof d){var c=this.node(),e=(d=d.trim().split(/^|\s+/g)).length,f=-1;if(a=c.classList)for(;++f<e;){if(!a.contains(d[f]))return!1}else for(a=c.getAttribute("class");++f<
e;)if(!Yc(d[f]).test(a))return!1;return!0}for(a in d)this.each(Zc(a,d[a]));return this}return this.each(Zc(d,a))};Q.style=function(d,a,c){var e=arguments.length;if(3>e){if("string"!=typeof d){2>e&&(a="");for(c in d)this.each(bd(c,d[c],a));return this}if(2>e)return da.getComputedStyle(this.node(),null).getPropertyValue(d);c=""}return this.each(bd(d,a,c))};Q.property=function(d,a){if(2>arguments.length){if("string"==typeof d)return this.node()[d];for(a in d)this.each(cd(a,d[a]));return this}return this.each(cd(d,
a))};Q.text=function(d){return arguments.length?this.each("function"==typeof d?function(){var a=d.apply(this,arguments);this.textContent=null==a?"":a}:null==d?function(){this.textContent=""}:function(){this.textContent=d}):this.node().textContent};Q.html=function(d){return arguments.length?this.each("function"==typeof d?function(){var a=d.apply(this,arguments);this.innerHTML=null==a?"":a}:null==d?function(){this.innerHTML=""}:function(){this.innerHTML=d}):this.node().innerHTML};Q.append=function(d){function a(){return this.appendChild(ha.createElementNS(this.namespaceURI,
d))}function c(){return this.appendChild(ha.createElementNS(d.space,d.local))}return d=n.ns.qualify(d),this.select(d.local?c:a)};Q.insert=function(d,a){function c(e,l){return this.insertBefore(ha.createElementNS(this.namespaceURI,d),a.call(this,e,l))}function e(c,l){return this.insertBefore(ha.createElementNS(d.space,d.local),a.call(this,c,l))}return d=n.ns.qualify(d),"function"!=typeof a&&(a=O(a)),this.select(d.local?e:c)};Q.remove=function(){return this.each(function(){var d=this.parentNode;d&&
d.removeChild(this)})};Q.data=function(d,c){function e(d,l){var f,g,p,h=d.length,v=l.length,n=Math.min(h,v),M=Array(v),r=Array(v),S=Array(h);if(c){var u=new a,w=new a,V=[];for(f=-1;++f<h;)n=c.call(g=d[f],g.__data__,f),u.has(n)?S[f]=g:u.set(n,g),V.push(n);for(f=-1;++f<v;)n=c.call(l,p=l[f],f),(g=u.get(n))?(M[f]=g,g.__data__=p):w.has(n)||(r[f]={__data__:p}),w.set(n,p),u.remove(n);for(f=-1;++f<h;)u.has(V[f])&&(S[f]=d[f])}else{for(f=-1;++f<n;)g=d[f],p=l[f],g?(g.__data__=p,M[f]=g):r[f]={__data__:p};for(;v>
f;++f)r[f]={__data__:l[f]};for(;h>f;++f)S[f]=d[f]}r.update=M;r.parentNode=M.parentNode=S.parentNode=d.parentNode;t.push(r);q.push(M);m.push(S)}var f,g,h=-1,n=this.length;if(!arguments.length){for(d=Array(n=(f=this[0]).length);++h<n;)(g=f[h])&&(d[h]=g.__data__);return d}var t=id([]),q=N([]),m=N([]);if("function"==typeof d)for(;++h<n;)e(f=this[h],d.call(f,f.parentNode.__data__,h));else for(;++h<n;)e(f=this[h],d);return q.enter=function(){return t},q.exit=function(){return m},q};Q.datum=function(d){return arguments.length?
this.property("__data__",d):this.property("__data__")};Q.filter=function(d){var a,c,e,f=[];"function"!=typeof d&&(d=dd(d));for(var g=0,h=this.length;h>g;g++){f.push(a=[]);a.parentNode=(c=this[g]).parentNode;for(var t=0,n=c.length;n>t;t++)(e=c[t])&&d.call(e,e.__data__,t)&&a.push(e)}return N(f)};Q.order=function(){for(var d=-1,a=this.length;++d<a;)for(var c,e=this[d],f=e.length-1,g=e[f];0<=--f;)(c=e[f])&&(g&&g!==c.nextSibling&&g.parentNode.insertBefore(c,g),g=c);return this};Q.sort=function(d){d=sf.apply(this,
arguments);for(var a=-1,c=this.length;++a<c;)this[a].sort(d);return this.order()};Q.on=function(d,a,c){var e=arguments.length;if(3>e){if("string"!=typeof d){2>e&&(a=!1);for(c in d)this.each(fd(c,d[c],a));return this}if(2>e)return(e=this.node()["__on"+d])&&e._;c=!1}return this.each(fd(d,a,c))};var Rb=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});Rb.forEach(function(d){"on"+d in ha&&Rb.remove(d)});Q.each=function(d){return xa(this,function(a,c,e){d.call(a,a.__data__,c,e)})};Q.call=function(d){var a=
wa(arguments);return d.apply(a[0]=this,a),this};Q.empty=function(){return!this.node()};Q.node=function(){for(var d=0,a=this.length;a>d;d++)for(var c=this[d],e=0,f=c.length;f>e;e++){var g=c[e];if(g)return g}return null};var Ca=[];n.selection.enter=id;n.selection.enter.prototype=Ca;Ca.append=Q.append;Ca.insert=Q.insert;Ca.empty=Q.empty;Ca.node=Q.node;Ca.select=function(d){for(var a,c,e,f,g,h=[],t=-1,n=this.length;++t<n;){e=(f=this[t]).update;h.push(a=[]);a.parentNode=f.parentNode;for(var q=-1,m=f.length;++q<
m;)(g=f[q])?(a.push(e[q]=c=d.call(f.parentNode,g.__data__,q)),c.__data__=g.__data__):a.push(null)}return N(h)};Q.transition=function(){var d,a,c=bb||++Ve,e=[],f=Object.create(Fb);f.time=Date.now();for(var g=-1,h=this.length;++g<h;){e.push(d=[]);for(var t=this[g],n=-1,q=t.length;++n<q;)(a=t[n])&&Ab(a,n,c,f),d.push(a)}return $a(e,c)};var ab=N([[ha]]);ab[0].parentNode=Pa;n.select=function(d){return"string"==typeof d?ab.select(d):N([[d]])};n.selectAll=function(d){return"string"==typeof d?ab.selectAll(d):
N([wa(d)])};n.behavior.zoom=function(){function d(){this.on("mousedown.zoom",h).on("mousemove.zoom",m).on(Rg+".zoom",t).on("dblclick.zoom",r).on("touchstart.zoom",P).on("touchmove.zoom",R).on("touchend.zoom",P)}function a(d){return[(d[0]-J[0])/D,(d[1]-J[1])/D]}function c(a){D=Math.max(B[0],Math.min(B[1],a))}function e(a,d){d=[d[0]*D+J[0],d[1]*D+J[1]];J[0]+=a[0]-d[0];J[1]+=a[1]-d[1]}function f(){y&&y.domain(C.range().map(function(a){return(a-J[0])/D}).map(C.invert));A&&A.domain(z.range().map(function(a){return(a-
J[1])/D}).map(z.invert))}function g(a){f();n.event.preventDefault();a({type:"zoom",scale:D,translate:J})}function h(){var d=this,c=ea.of(d,arguments),l=n.event.target,f=0,p=n.select(da).on("mousemove.zoom",function(){f=1;e(n.mouse(d),t);g(c)}).on("mouseup.zoom",function(){f&&q();p.on("mousemove.zoom",null).on("mouseup.zoom",null);f&&n.event.target===l&&U(p,"click.zoom")}),t=a(n.mouse(d));da.focus();q()}function t(){E||(E=a(n.mouse(this)));c(Math.pow(2,0.002*Gb())*D);e(n.mouse(this),E);g(ea.of(this,
arguments))}function m(){E=null}function r(){var d=n.mouse(this),f=a(d),p=Math.log(D)/Math.LN2;c(Math.pow(2,n.event.shiftKey?Math.ceil(p)-1:Math.floor(p)+1));e(d,f);g(ea.of(this,arguments))}function P(){var d=n.touches(this),f=Date.now();if(u=D,E={},d.forEach(function(d){E[d.identifier]=a(d)}),q(),1===d.length){if(500>f-G){var p=d[0],d=a(d[0]);c(2*D);e(p,d);g(ea.of(this,arguments))}G=f}}function R(){var d=n.touches(this),a=d[0],f=E[a.identifier];if(d=d[1]){var p=E[d.identifier],a=[(a[0]+d[0])/2,(a[1]+
d[1])/2],f=[(f[0]+p[0])/2,(f[1]+p[1])/2];c(n.event.scale*u)}e(a,f);G=null;g(ea.of(this,arguments))}var E,u,C,y,z,A,G,J=[0,0],D=1,B=We,ea=w(d,"zoom");return d.translate=function(a){return arguments.length?(J=a.map(Number),f(),d):J},d.scale=function(a){return arguments.length?(D=+a,f(),d):D},d.scaleExtent=function(a){return arguments.length?(B=null==a?We:a.map(Number),d):B},d.x=function(a){return arguments.length?(y=a,C=a.copy(),J=[0,0],D=1,d):y},d.y=function(a){return arguments.length?(A=a,z=a.copy(),
J=[0,0],D=1,d):A},n.rebind(d,ea,"on")};var Gb,We=[0,1/0],Rg="onwheel"in ha?(Gb=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ha?(Gb=function(){return n.event.wheelDelta},"mousewheel"):(Gb=function(){return-n.event.detail},"MozMousePixelScroll");Ia.prototype.toString=function(){return this.rgb()+""};n.hsl=function(a,c,e){return 1===arguments.length?a instanceof Sb?Ja(a.h,a.s,a.l):Yb(""+a,od,Ja):Ja(+a,+c,+e)};var Qc=Sb.prototype=new Ia;Qc.brighter=function(a){return a=
Math.pow(0.7,arguments.length?a:1),Ja(this.h,this.s,this.l/a)};Qc.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),Ja(this.h,this.s,a*this.l)};Qc.rgb=function(){return cb(this.h,this.s,this.l)};var x=Math.PI,K=1E-6,F=x/180,W=180/x;n.hcl=function(a,c,e){var f;if(1===arguments.length)if(a instanceof db)f=Ka(a.h,a.c,a.l);else if(a instanceof eb)f=Ka(Math.atan2(a.b,a.a)*W,Math.sqrt(a.a*a.a+a.b*a.b),a.l);else{f=(a=pd((a=n.rgb(a)).r,a.g,a.b)).l;var g=a.a,h=a.b;f=Ka(Math.atan2(h,g)*W,Math.sqrt(g*
g+h*h),f)}else f=Ka(+a,+c,+e);return f};var Rc=db.prototype=new Ia;Rc.brighter=function(a){return Ka(this.h,this.c,Math.min(100,this.l+Hb*(arguments.length?a:1)))};Rc.darker=function(a){return Ka(this.h,this.c,Math.max(0,this.l-Hb*(arguments.length?a:1)))};Rc.rgb=function(){return Tb(this.h,this.c,this.l).rgb()};n.lab=function(a,c,e){return 1===arguments.length?a instanceof eb?La(a.l,a.a,a.b):a instanceof db?Tb(a.l,a.c,a.h):pd((a=n.rgb(a)).r,a.g,a.b):La(+a,+c,+e)};var Hb=18,ld=0.95047,md=1,nd=1.08883,
Sc=eb.prototype=new Ia;Sc.brighter=function(a){return La(Math.min(100,this.l+Hb*(arguments.length?a:1)),this.a,this.b)};Sc.darker=function(a){return La(Math.max(0,this.l-Hb*(arguments.length?a:1)),this.a,this.b)};Sc.rgb=function(){return kd(this.l,this.a,this.b)};n.rgb=function(a,c,e){return 1===arguments.length?a instanceof Xb?ra(a.r,a.g,a.b):Yb(""+a,ra,cb):ra(~~a,~~c,~~e)};var Ib=Xb.prototype=new Ia;Ib.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,e=this.g,f=this.b;return c||
e||f?(c&&30>c&&(c=30),e&&30>e&&(e=30),f&&30>f&&(f=30),ra(Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(e/a)),Math.min(255,Math.floor(f/a)))):ra(30,30,30)};Ib.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),ra(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};Ib.hsl=function(){return od(this.r,this.g,this.b)};Ib.toString=function(){return"#"+Ma(this.r)+Ma(this.g)+Ma(this.b)};var fb=n.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",
azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",
darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",
greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});fb.forEach(function(a,c){fb.set(a,Yb(c,ra,cb))});n.functor=I;n.xhr=function(a,c,e){function f(){var a=m.status;!a&&m.responseText||200<=a&&300>a||304===a?h.load.call(g,t.call(g,m)):h.error.call(g,m)}var g={},h=
n.dispatch("progress","load","error"),q={},t=ja,m=new (da.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in m?m.onload=m.onerror=f:m.onreadystatechange=function(){3<m.readyState&&f()},m.onprogress=function(a){var d=n.event;n.event=a;try{h.progress.call(g,m)}finally{n.event=d}},g.header=function(a,d){return a=(a+"").toLowerCase(),2>arguments.length?q[a]:(null==d?delete q[a]:q[a]=d+"",g)},g.mimeType=function(a){return arguments.length?(c=null==a?null:a+"",g):
c},g.response=function(a){return t=a,g},["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(wa(arguments)))}}),g.send=function(e,f,l){if(2===arguments.length&&"function"==typeof f&&(l=f,f=null),m.open(e,a,!0),null==c||"accept"in q||(q.accept=c+",*/*"),m.setRequestHeader)for(var h in q)m.setRequestHeader(h,q[h]);return null!=c&&m.overrideMimeType&&m.overrideMimeType(c),null!=l&&g.on("error",l).on("load",function(a){l(null,a)}),m.send(null==f?null:f),g},g.abort=function(){return m.abort(),
g},n.rebind(g,h,"on"),2===arguments.length&&"function"==typeof c&&(e=c,c=null),null==e?g:g.get(uf(e))};n.csv=qd(",","text/csv");n.tsv=qd("\t","text/tab-separated-values");var hb,gb,Sg=0,bc={},Na=null;n.timer=function(a,c,e){if(3>arguments.length){if(2>arguments.length)c=0;else if(!isFinite(c))return;e=Date.now()}var f=bc[a.id];f&&f.callback===a?(f.then=e,f.delay=c):bc[a.id=++Sg]=Na={callback:a,then:e,delay:c,next:Na};hb||(gb=clearTimeout(gb),hb=1,sd(ac))};n.timer.flush=function(){for(var a,c=Date.now(),
e=Na;e;)a=c-e.then,e.delay||(e.flush=e.callback(a)),e=e.next;rd()};var sd=da.requestAnimationFrame||da.webkitRequestAnimationFrame||da.mozRequestAnimationFrame||da.oRequestAnimationFrame||da.msRequestAnimationFrame||function(a){setTimeout(a,17)},Jb=[3,3],Tg="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,c){var e=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/e}:function(a){return a*e},symbol:a}});n.formatPrefix=function(a,c){var e=0;return a&&(0>a&&(a*=-1),c&&
(a=n.round(a,cc(a,c))),e=1+Math.floor(1E-12+Math.log(a)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((0>=e?e+1:e-1)/3)))),Tg[8+e/3]};n.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};n.format=function(a){a=we.exec(a);var c=a[1]||" ",e=a[2]||">",f=a[3]||"",g=a[4]||"",h=a[5],q=+a[6],t=a[7],m=a[8],r=a[9],P=1,R="",E=!1;switch(m&&(m=+m.substring(1)),(h||"0"===c&&"="===e)&&(h=c="0",e="=",t&&(q-=Math.floor((q-1)/4))),r){case "n":t=!0;r="g";break;case "%":P=100;R="%";
r="f";break;case "p":P=100;R="%";r="r";break;case "b":case "o":case "x":case "X":g&&(g="0"+r.toLowerCase());case "c":case "d":E=!0;m=0;break;case "s":P=-1,r="r"}"#"===g&&(g="");"r"!=r||m||(r="g");null!=m&&("g"==r?m=Math.max(1,Math.min(21,m)):("e"==r||"f"==r)&&(m=Math.max(0,Math.min(20,m))));var r=Ug.get(r)||vf,u=h&&t;return function(a){if(E&&a%1)return"";var d=0>a||0===a&&0>1/a?(a=-a,"-"):f;if(0>P){var z=n.formatPrefix(a,m);a=z.scale(a);R=z.symbol}else a*=P;a=r(a,m);!h&&t&&(a=Tc(a));var z=g.length+
a.length+(u?0:d.length),A=q>z?Array(z=q-z+1).join(c):"";return u&&(a=Tc(A+a)),a.replace(".","."),d+=g,("<"===e?d+a+A:">"===e?A+d+a:"^"===e?A.substring(0,z>>=1)+d+a+A.substring(z):d+(u?a:A+a))+R}};var we=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ug=n.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,
c){return a.toPrecision(c)},e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=n.round(a,cc(a,c))).toFixed(Math.max(0,Math.min(20,cc(a*(1+1E-15),c))))}}),Tc=ja;if(Jb)var Vg=Jb.length,Tc=function(a){for(var c=a.lastIndexOf("."),e=0<=c?"."+a.substring(c+1):(c=a.length,""),f=[],g=0,h=Jb[0];0<c&&0<h;)f.push(a.substring(c-=h,c+h)),h=Jb[g=(g+1)%Vg];return f.reverse().join(",")+e};n.geo={};n.geo.stream=function(a,c){a&&Xe.hasOwnProperty(a.type)?Xe[a.type](a,
c):ib(a,c)};var Xe={Feature:function(a,c){ib(a.geometry,c)},FeatureCollection:function(a,c){for(var e=a.features,f=-1,g=e.length;++f<g;)ib(e[f].geometry,c)}},td={Sphere:function(a,c){c.sphere()},Point:function(a,c){var e=a.coordinates;c.point(e[0],e[1])},MultiPoint:function(a,c){for(var e,f=a.coordinates,g=-1,h=f.length;++g<h;)e=f[g],c.point(e[0],e[1])},LineString:function(a,c){dc(a.coordinates,c,0)},MultiLineString:function(a,c){for(var e=a.coordinates,f=-1,g=e.length;++f<g;)dc(e[f],c,0)},Polygon:function(a,
c){ud(a.coordinates,c)},MultiPolygon:function(a,c){for(var e=a.coordinates,f=-1,g=e.length;++f<g;)ud(e[f],c)},GeometryCollection:function(a,c){for(var e=a.geometries,f=-1,g=e.length;++f<g;)ib(e[f],c)}};n.geo.area=function(a){return Qa=0,n.geo.stream(a,ya),Qa};var Qa,jb,kb,ya={sphere:function(){Qa+=4*x},point:aa,lineStart:aa,lineEnd:aa,polygonStart:function(){jb=1;kb=0;ya.lineStart=wf},polygonEnd:function(){var a=2*Math.atan2(kb,jb);Qa+=0>a?4*x+a:a;ya.lineStart=ya.lineEnd=ya.point=aa}};n.geo.bounds=
vd(ja);n.geo.centroid=function(a){ca=la=Y=Z=X=0;n.geo.stream(a,ma);var c;return la&&Math.abs(c=Math.sqrt(Y*Y+Z*Z+X*X))>K?[Math.atan2(Z,Y)*W,Math.asin(Math.max(-1,Math.min(1,X/c)))*W]:void 0};var ca,la,Y,Z,X,ma={sphere:function(){2>ca&&(ca=2,la=Y=Z=X=0)},point:wd,lineStart:ec,lineEnd:fc,polygonStart:function(){2>ca&&(ca=2,la=Y=Z=X=0);ma.lineStart=xf},polygonEnd:function(){ma.lineStart=ec}},Fd=Ad(Ta,function(a){var c,e=0/0,f=0/0,g=0/0;return{lineStart:function(){a.lineStart();c=1},point:function(h,
n){var t=0<h?x:-x,q=Math.abs(h-e);if(Math.abs(q-x)<K)a.point(e,f=0<(f+n)/2?x/2:-x/2),a.point(g,f),a.lineEnd(),a.lineStart(),a.point(t,f),a.point(h,f),c=0;else if(g!==t&&q>=x){Math.abs(e-g)<K&&(e-=g*K);Math.abs(h-t)<K&&(h-=t*K);var q=e,m=f,r=h,R,E,u=Math.sin(q-r);f=Math.abs(u)>K?Math.atan((Math.sin(m)*(E=Math.cos(n))*Math.sin(r)-Math.sin(n)*(R=Math.cos(m))*Math.sin(q))/(R*E*u)):(m+n)/2;a.point(g,f);a.lineEnd();a.lineStart();a.point(t,f);c=0}a.point(e=h,f=n);g=t},lineEnd:function(){a.lineEnd();e=f=
0/0},clean:function(){return 2-c}}},function(a,c,e,f){null==a?(e=e*x/2,f.point(-x,e),f.point(0,e),f.point(x,e),f.point(x,0),f.point(x,-e),f.point(0,-e),f.point(-x,-e),f.point(-x,0),f.point(-x,e)):Math.abs(a[0]-c[0])>K?(a=(a[0]<c[0]?1:-1)*x,e=e*a/2,f.point(-a,e),f.point(0,e),f.point(a,e)):f.point(c[0],c[1])}),pb=1E9;n.geo.projection=za;n.geo.projectionMutator=jc;(n.geo.equirectangular=function(){return za(Ua)}).raw=Ua.invert=Ua;n.geo.rotation=function(a){function c(e){return e=a(e[0]*F,e[1]*F),e[0]*=
W,e[1]*=W,e}return a=kc(a[0]%360*F,a[1]*F,2<a.length?a[2]*F:0),c.invert=function(c){return c=a.invert(c[0]*F,c[1]*F),c[0]*=W,c[1]*=W,c},c};n.geo.circle=function(){function a(){var d="function"==typeof f?f.apply(this,arguments):f,c=kc(-d[0]*F,-d[1]*F,0).invert,g=[];return e(null,null,1,{point:function(a,d){g.push(a=c(a,d));a[0]*=W;a[1]*=W}}),{type:"Polygon",coordinates:[g]}}var c,e,f=[0,0],g=6;return a.origin=function(c){return arguments.length?(f=c,a):f},a.angle=function(f){return arguments.length?
(e=ic((c=+f)*F,g*F),a):c},a.precision=function(f){return arguments.length?(e=ic(c*F,(g=+f)*F),a):g},a.angle(90)};n.geo.distance=function(a,c){var e,f=(c[0]-a[0])*F,g=a[1]*F,h=c[1]*F,n=Math.sin(f),f=Math.cos(f),t=Math.sin(g),g=Math.cos(g),q=Math.sin(h),h=Math.cos(h);return Math.atan2(Math.sqrt((e=h*n)*e+(e=g*q-t*h*f)*e),t*q+g*h*f)};n.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return n.range(Math.ceil(h/z)*z,g,z).map(E).concat(n.range(Math.ceil(r/
A)*A,m,A).map(u)).concat(n.range(Math.ceil(f/C)*C,e,C).filter(function(a){return Math.abs(a%z)>K}).map(P)).concat(n.range(Math.ceil(t/y)*y,q,y).filter(function(a){return Math.abs(a%A)>K}).map(R))}var e,f,g,h,q,t,m,r,P,R,E,u,C=10,y=C,z=90,A=360,G=2.5;return a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[E(h).concat(u(m).slice(1),E(g).reverse().slice(1),u(r).reverse().slice(1))]}},a.extent=function(c){return arguments.length?
a.majorExtent(c).minorExtent(c):a.minorExtent()},a.majorExtent=function(c){return arguments.length?(h=+c[0][0],g=+c[1][0],r=+c[0][1],m=+c[1][1],h>g&&(c=h,h=g,g=c),r>m&&(c=r,r=m,m=c),a.precision(G)):[[h,r],[g,m]]},a.minorExtent=function(c){return arguments.length?(f=+c[0][0],e=+c[1][0],t=+c[0][1],q=+c[1][1],f>e&&(c=f,f=e,e=c),t>q&&(c=t,t=q,q=c),a.precision(G)):[[f,t],[e,q]]},a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()},a.majorStep=function(c){return arguments.length?
(z=+c[0],A=+c[1],a):[z,A]},a.minorStep=function(c){return arguments.length?(C=+c[0],y=+c[1],a):[C,y]},a.precision=function(c){return arguments.length?(G=+c,P=Kd(t,q,90),R=Ld(f,e,G),E=Kd(r,m,90),u=Ld(h,g,G),a):G},a.majorExtent([[-180,-90+K],[180,90-K]]).minorExtent([[-180,-80-K],[180,80+K]])};n.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||f.apply(this,arguments),e||g.apply(this,arguments)]}}var c,e,f=lc,g=mc;return a.distance=function(){return n.geo.distance(c||f.apply(this,
arguments),e||g.apply(this,arguments))},a.source=function(e){return arguments.length?(f=e,c="function"==typeof e?null:e,a):f},a.target=function(c){return arguments.length?(g=c,e="function"==typeof c?null:c,a):g},a.precision=function(){return arguments.length?a:0},a};n.geo.interpolate=function(a,c){return Ef(a[0]*F,a[1]*F,c[0]*F,c[1]*F)};n.geo.length=function(a){return Kb=0,n.geo.stream(a,Ra),Kb};var Kb,Ra={sphere:aa,point:aa,lineStart:function(){function a(d,g){var h=Math.sin(g*=F),t=Math.cos(g),
n=Math.abs((d*=F)-c),q=Math.cos(n);Kb+=Math.atan2(Math.sqrt((n=t*Math.sin(n))*n+(n=f*h-e*t*q)*n),e*h+f*t*q);c=d;e=h;f=t}var c,e,f;Ra.point=function(g,h){c=g*F;e=Math.sin(h*=F);f=Math.cos(h);Ra.point=a};Ra.lineEnd=function(){Ra.point=Ra.lineEnd=aa}},lineEnd:aa,polygonStart:aa,polygonEnd:aa};(n.geo.conicEqualArea=function(){return nc(Md)}).raw=Md;n.geo.albersUsa=function(){function a(d){var c=d[0],e=d[1];return(50<e?h:-140>c?q:21>e?t:g)(d)}var c,e,f,g=n.geo.conicEqualArea().rotate([98,0]).center([0,
38]).parallels([29.5,45.5]),h=n.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),q=n.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),t=n.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return a.invert=function(a){return c(a)||e(a)||f(a)||g.invert(a)},a.scale=function(c){return arguments.length?(g.scale(c),h.scale(0.6*c),q.scale(c),t.scale(1.5*c),a.translate(g.translate())):g.scale()},a.translate=function(n){if(!arguments.length)return g.translate();
var m=g.scale(),r=n[0],R=n[1];return g.translate(n),h.translate([r-0.4*m,R+0.17*m]),q.translate([r-0.19*m,R+0.2*m]),t.translate([r+0.58*m,R+0.43*m]),c=oc(h,[[-180,50],[-130,72]]),e=oc(q,[[-164,18],[-154,24]]),f=oc(t,[[-67.5,17.5],[-65,19]]),a},a.scale(1E3)};var Lb,rb,Aa={point:aa,lineStart:aa,lineEnd:aa,polygonStart:function(){rb=0;Aa.lineStart=Ff},polygonEnd:function(){Aa.lineStart=Aa.lineEnd=Aa.point=aa;Lb+=Math.abs(rb/2)}},na={point:pc,lineStart:Od,lineEnd:Pd,polygonStart:function(){na.lineStart=
Hf},polygonEnd:function(){na.point=pc;na.lineStart=Od;na.lineEnd=Pd}};n.geo.path=function(){function a(d){return d&&n.geo.stream(d,f(g.pointRadius("function"==typeof h?+h.apply(this,arguments):h))),g.result()}var c,e,f,g,h=4.5;return a.area=function(a){return Lb=0,n.geo.stream(a,f(Aa)),Lb},a.centroid=function(a){return ca=Y=Z=X=0,n.geo.stream(a,f(na)),X?[Y/X,Z/X]:void 0},a.bounds=function(a){return vd(f)(a)},a.projection=function(e){return arguments.length?(f=(c=e)?e.stream||Jf(e):ja,a):c},a.context=
function(c){return arguments.length?(g=null==(e=c)?new Gf:new If(c),a):e},a.pointRadius=function(c){return arguments.length?(h="function"==typeof c?c:+c,a):h},a.projection(n.geo.albersUsa()).context(null)};n.geo.albers=function(){return n.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1E3)};var Ye=Va(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(n.geo.azimuthalEqualArea=function(){return za(Ye)}).raw=Ye;var Ze=Va(function(a){return(a=
Math.acos(a))&&a/Math.sin(a)},ja);(n.geo.azimuthalEquidistant=function(){return za(Ze)}).raw=Ze;(n.geo.conicConformal=function(){return nc(Qd)}).raw=Qd;(n.geo.conicEquidistant=function(){return nc(Rd)}).raw=Rd;var $e=Va(function(a){return 1/a},Math.atan);(n.geo.gnomonic=function(){return za($e)}).raw=$e;sb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-x/2]};(n.geo.mercator=function(){return Sd(sb)}).raw=sb;var af=Va(function(){return 1},Math.asin);(n.geo.orthographic=function(){return za(af)}).raw=
af;var bf=Va(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(n.geo.stereographic=function(){return za(bf)}).raw=bf;qc.invert=function(a,c){var e=Math.atan2((Math.exp(a)-Math.exp(-a))/2,Math.cos(c)),f;f=Math.sin(c)/((Math.exp(a)+Math.exp(-a))/2);f=1<f?x/2:-1>f?-x/2:Math.asin(f);return[e,f]};(n.geo.transverseMercator=function(){return Sd(qc)}).raw=qc;n.geom={};n.svg={};n.svg.line=function(){return Td(ja)};var rc=n.map({linear:ka,"linear-closed":function(a){return ka(a)+"Z"},"step-before":sc,
"step-after":tc,basis:Ud,"basis-open":function(a){if(4>a.length)return ka(a);for(var c,e=[],f=-1,g=a.length,h=[0],n=[0];3>++f;)c=a[f],h.push(c[0]),n.push(c[1]);e.push(qa(Oa,h)+","+qa(Oa,n));for(--f;++f<g;)c=a[f],h.shift(),h.push(c[0]),n.shift(),n.push(c[1]),Wa(e,h,n);return e.join("")},"basis-closed":function(a){for(var c,e,f=-1,g=a.length,h=g+4,n=[],t=[];4>++f;)e=a[f%g],n.push(e[0]),t.push(e[1]);c=[qa(Oa,n),",",qa(Oa,t)];for(--f;++f<h;)e=a[f%g],n.shift(),n.push(e[0]),t.shift(),t.push(e[1]),Wa(c,
n,t);return c.join("")},bundle:function(a,c){var e=a.length-1;if(e)for(var f,g,h=a[0][0],n=a[0][1],t=a[e][0]-h,q=a[e][1]-n,m=-1;++m<=e;)f=a[m],g=m/e,f[0]=c*f[0]+(1-c)*(h+g*t),f[1]=c*f[1]+(1-c)*(n+g*q);return Ud(a)},cardinal:function(a,c){return 3>a.length?ka(a):a[0]+tb(a,uc(a,c))},"cardinal-open":function(a,c){return 4>a.length?ka(a):a[1]+tb(a.slice(1,a.length-1),uc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?ka(a):a[0]+tb((a.push(a[0]),a),uc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>
a.length)a=ka(a);else{var c=a[0],e,f,g,h,n=[],t;e=0;t=a.length-1;for(var q=[],m=a[1],r=q[0]=vc(a[0],m);++e<t;)q[e]=(r+(r=vc(m,m=a[e+1])))/2;t=(q[e]=r,q);q=-1;for(m=a.length-1;++q<m;)e=vc(a[q],a[q+1]),1E-6>Math.abs(e)?t[q]=t[q+1]=0:(f=t[q]/e,g=t[q+1]/e,h=f*f+g*g,9<h&&(h=3*e/Math.sqrt(h),t[q]=h*f,t[q+1]=h*g));for(q=-1;++q<=m;)h=(a[Math.min(m,q+1)][0]-a[Math.max(0,q-1)][0])/(6*(1+t[q]*t[q])),n.push([h||0,t[q]*h||0]);a=c+tb(a,n)}return a}});rc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});
var Vd=[0,2/3,1/3,0],Wd=[0,1/3,2/3,0],Oa=[0,1/6,2/3,1/6];n.geom.hull=function(a){function c(a){if(3>a.length)return[];var d,g,h,s,n,q,m,r,u,C;r=I(e);u=I(f);C=a.length;var y=C-1,z=[],A=[],G=0;if(r===pa&&f===sa)d=a;else for(h=0,d=[];C>h;++h)d.push([+r.call(this,g=a[h],h),+u.call(this,g,h)]);for(h=1;C>h;++h)d[h][1]<d[G][1]?G=h:d[h][1]==d[G][1]&&(G=d[h][0]<d[G][0]?h:G);for(h=0;C>h;++h)h!==G&&(n=d[h][1]-d[G][1],s=d[h][0]-d[G][0],z.push({angle:Math.atan2(n,s),index:h}));z.sort(function(a,d){return a.angle-
d.angle});C=z[0].angle;u=z[0].index;r=0;for(h=1;y>h;++h)g=z[h].index,C==z[h].angle?(s=d[u][0]-d[G][0],n=d[u][1]-d[G][1],q=d[g][0]-d[G][0],m=d[g][1]-d[G][1],s*s+n*n>=q*q+m*m?z[h].index=-1:(z[r].index=-1,C=z[h].angle,r=h,u=g)):(C=z[h].angle,r=h,u=g);A.push(G);for(g=h=0;2>h;++g)-1!==z[g].index&&(A.push(z[g].index),h++);for(s=A.length;y>g;++g)if(-1!==z[g].index){for(;!Kf(A[s-2],A[s-1],z[g].index,d);)--s;A[s++]=z[g].index}d=[];for(h=0;s>h;++h)d.push(a[A[h]]);return d}var e=pa,f=sa;return arguments.length?
c(a):(c.x=function(a){return arguments.length?(e=a,c):e},c.y=function(a){return arguments.length?(f=a,c):f},c)};n.geom.polygon=function(a){return a.area=function(){for(var c=0,e=a.length,f=a[e-1][1]*a[0][0]-a[e-1][0]*a[0][1];++c<e;)f+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return 0.5*f},a.centroid=function(c){var e,f,g=-1,h=a.length,n=0,q=0,m=a[h-1];for(arguments.length||(c=-1/(6*a.area()));++g<h;)e=m,m=a[g],f=e[0]*m[1]-m[0]*e[1],n+=(e[0]+m[0])*f,q+=(e[1]+m[1])*f;return[n*c,q*c]},a.clip=function(c){for(var e,
f,g,h,n,q,m=-1,r=a.length,P=a[r-1];++m<r;){e=c.slice();c.length=0;h=a[m];n=e[(g=e.length)-1];for(f=-1;++f<g;)q=e[f],wc(q,P,h)?(wc(n,P,h)||c.push(Xd(n,q,P,h)),c.push(q)):wc(n,P,h)&&c.push(Xd(n,q,P,h)),n=q;P=h}return c},a};n.geom.delaunay=function(a){var c=a.map(function(){return[]}),e=[];return xc(a,function(e){c[e.region.l.index].push(a[e.region.r.index])}),c.forEach(function(c,f){var g=a[f],h=g[0],s=g[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-h,a[1]-s)});c.sort(function(a,d){return a.angle-
d.angle});for(var n=0,q=c.length-1;q>n;n++)e.push([g,c[n],c[n+1]])}),e};n.geom.voronoi=function(a){function c(a){var d,f,s,q=a.map(function(){return[]}),m=I(g),r=I(h),M=a.length;if(m===pa&&r===sa)d=a;else for(d=[],s=0;M>s;++s)d.push([+m.call(this,f=a[s],s),+r.call(this,f,s)]);if(xc(d,function(a){var d,c,e,f,g,l;1===a.a&&0<=a.b?(d=a.ep.r,c=a.ep.l):(d=a.ep.l,c=a.ep.r);1===a.a?(g=d?d.y:-1E6,e=a.c-a.b*g,l=c?c.y:1E6,f=a.c-a.b*l):(e=d?d.x:-1E6,g=a.c-a.a*e,f=c?c.x:1E6,l=a.c-a.a*f);d=[e,g];f=[f,l];q[a.region.l.index].push(d,
f);q[a.region.r.index].push(d,f)}),q=q.map(function(a,c){var e=d[c][0],f=d[c][1],g=a.map(function(a){return Math.atan2(a[0]-e,a[1]-f)}),l=n.range(a.length).sort(function(a,d){return g[a]-g[d]});return l.filter(function(a,d){return!d||g[a]-g[l[d-1]]>K}).map(function(d){return a[d]})}),q.forEach(function(a,c){var e=a.length;if(!e)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<e)){var f=d[c],g=a[0],l=a[1],e=f[0],f=f[1],h=g[0],g=g[1],p=l[0],s=l[1],n=Math.abs(p-h),l=s-g;Math.abs(l)<
K?(e=g>f?-1E6:1E6,a.push([-1E6,e],[1E6,e])):K>n?(e=h>e?-1E6:1E6,a.push([e,-1E6],[e,1E6])):(e=(h-e)*(s-g)>(p-h)*(g-f)?1E6:-1E6,f=Math.abs(l)-n,Math.abs(f)<K?a.push([0>l?e:-e,e]):(0<f&&(e*=-1),a.push([-1E6,e],[1E6,e])))}}),e)for(s=0;M>s;++s)e(q[s]);for(s=0;M>s;++s)q[s].point=a[s];return q}var e,f=null,g=pa,h=sa;return arguments.length?c(a):(c.x=function(a){return arguments.length?(g=a,c):g},c.y=function(a){return arguments.length?(h=a,c):h},c.size=function(a){return arguments.length?(null==a?e=null:
(f=[+a[0],+a[1]],e=n.geom.polygon([[0,0],[0,f[1]],f,[f[0],0]]).clip),c):f},c.links=function(a){var d,c,e,f=a.map(function(){return[]}),l=[],s=I(g),n=I(h),q=a.length;if(s===pa&&n===sa)d=a;else for(e=0;q>e;++e)d.push([+s.call(this,c=a[e],e),+n.call(this,c,e)]);return xc(d,function(d){var c=d.region.l.index;d=d.region.r.index;f[c][d]||(f[c][d]=f[d][c]=!0,l.push({source:a[c],target:a[d]}))}),l},c.triangles=function(a){if(g===pa&&h===sa)return n.geom.delaunay(a);var d,c,e,f,l,s=I(g),q=I(h);f=0;d=[];for(l=
a.length;l>f;++f)c=[+s.call(this,e=a[f],f),+q.call(this,e,f)],c.data=e,d.push(c);return n.geom.delaunay(d).map(function(a){return a.map(function(a){return a.data})})},c)};var yc={l:"r",r:"l"};n.geom.quadtree=function(a,c,e,f,g){function h(a){function d(a,c,e,f,g,l,h,p){if(!isNaN(e)&&!isNaN(f))if(a.leaf){var s=a.x,n=a.y;if(null!=s){if(!(0.01>Math.abs(s-e)+Math.abs(n-f))){var q=a.point;a.x=a.y=a.point=null;r(a,q,s,n,g,l,h,p)}r(a,c,e,f,g,l,h,p)}else a.x=e,a.y=f,a.point=c}else r(a,c,e,f,g,l,h,p)}function r(a,
c,e,f,g,l,h,p){var s=0.5*(g+h),n=0.5*(l+p),q=e>=s,m=f>=n,t=(m<<1)+q;a.leaf=!1;a=a.nodes[t]||(a.nodes[t]=Yd());q?g=s:h=s;m?l=n:p=n;d(a,c,e,f,g,l,h,p)}var v,u,C,y,z,A,G,J,D,w=I(q),B=I(m);if(null!=c)A=c,G=e,J=f,D=g;else if(J=D=-(A=G=1/0),u=[],C=[],z=a.length,n)for(y=0;z>y;++y)v=a[y],v.x<A&&(A=v.x),v.y<G&&(G=v.y),v.x>J&&(J=v.x),v.y>D&&(D=v.y),u.push(v.x),C.push(v.y);else for(y=0;z>y;++y){var V=+w(v=a[y],y);v=+B(v,y);A>V&&(A=V);G>v&&(G=v);V>J&&(J=V);v>D&&(D=v);u.push(V);C.push(v)}V=J-A;v=D-G;V>v?D=G+V:
J=A+v;var x=Yd();if(x.add=function(a){d(x,a,+w(a,++y),+B(a,y),A,G,J,D)},x.visit=function(a){Xa(a,x,A,G,J,D)},y=-1,null==c){for(;++y<z;)d(x,a[y],u[y],C[y],A,G,J,D);--y}else a.forEach(x.add);return u=C=a=v=null,x}var n,q=pa,m=sa;return(n=arguments.length)?(q=Lf,m=Mf,3===n&&(g=e,f=c,e=c=0),h(a)):(h.x=function(a){return arguments.length?(q=a,h):q},h.y=function(a){return arguments.length?(m=a,h):m},h.size=function(a){return arguments.length?(null==a?c=e=f=g=null:(c=e=0,f=+a[0],g=+a[1]),h):null==c?null:
[f,g]},h)};n.interpolateRgb=zc;n.transform=function(a){var c=ha.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(a){c.setAttribute("transform",a);a=c.transform.baseVal.consolidate();return new Zd(a?a.matrix:Wg)})(a)};Zd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Wg={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateNumber=ta;n.interpolateTransform=ub;n.interpolateObject=ae;n.interpolateString=be;var vb=
/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;n.interpolate=Da;n.interpolators=[function(a,c){var e=typeof c;return("string"===e||e!==typeof a?fb.has(c)||/^(#|rgb\(|hsl\()/.test(c)?zc:be:c instanceof Ia?zc:"object"===e?Array.isArray(c)?ce:ae:ta)(a,c)}];n.interpolateArray=ce;var cf=function(){return ja},Xg=n.map({linear:cf,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Of},cubic:function(){return Pf},sin:function(){return Qf},exp:function(){return Rf},circle:function(){return Sf},
elastic:function(a,c){var e;return 2>arguments.length&&(c=0.45),arguments.length?e=c/(2*x)*Math.asin(1/a):(a=1,e=c/4),function(f){return 1+a*Math.pow(2,10*-f)*Math.sin(2*(f-e)*x/c)}},back:function(a){return a||(a=1.70158),function(c){return c*c*((a+1)*c-a)}},bounce:function(){return Tf}}),Yg=n.map({"in":ja,out:de,"in-out":ee,"out-in":function(a){return ee(de(a))}});n.ease=function(a){var c=a.indexOf("-"),e=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in";return e=Xg.get(e)||cf,c=Yg.get(c)||ja,
Nf(c(e.apply(null,Array.prototype.slice.call(arguments,1))))};n.interpolateHcl=function(a,c){a=n.hcl(a);c=n.hcl(c);var e=a.h,f=a.c,g=a.l,h=c.h-e,q=c.c-f,m=c.l-g;return 180<h?h-=360:-180>h&&(h+=360),function(a){return Tb(e+h*a,f+q*a,g+m*a)+""}};n.interpolateHsl=function(a,c){a=n.hsl(a);c=n.hsl(c);var e=a.h,f=a.s,g=a.l,h=c.h-e,q=c.s-f,m=c.l-g;return 180<h?h-=360:-180>h&&(h+=360),function(a){return cb(e+h*a,f+q*a,g+m*a)+""}};n.interpolateLab=function(a,c){a=n.lab(a);c=n.lab(c);var e=a.l,f=a.a,g=a.b,
h=c.l-e,q=c.a-f,m=c.b-g;return function(a){return kd(e+h*a,f+q*a,g+m*a)+""}};n.interpolateRound=fe;n.layout={};n.layout.bundle=function(){return function(a){for(var c=[],e=-1,f=a.length;++e<f;)c.push(Wf(a[e]));return c}};n.layout.chord=function(){function a(){var d,u,w,C,y,z={},A=[],G=n.range(h),J=[];e=[];f=[];d=0;for(C=-1;++C<h;){u=0;for(y=-1;++y<h;)u+=g[C][y];A.push(u);J.push(n.range(h));d+=u}q&&G.sort(function(a,d){return q(A[a],A[d])});m&&J.forEach(function(a,d){a.sort(function(a,c){return m(g[d][a],
g[d][c])})});d=(2*x-P*h)/d;u=0;for(C=-1;++C<h;){w=u;for(y=-1;++y<h;){var D=G[C],B=J[D][y],hd=g[D][B],V=u,H=u+=hd*d;z[D+"-"+B]={index:D,subindex:B,startAngle:V,endAngle:H,value:hd}}f[D]={index:D,startAngle:w,endAngle:u,value:(u-w)/d};u+=P}for(C=-1;++C<h;)for(y=C-1;++y<h;)d=z[C+"-"+y],u=z[y+"-"+C],(d.value||u.value)&&e.push(d.value<u.value?{source:u,target:d}:{source:d,target:u});r&&c()}function c(){e.sort(function(a,d){return r((a.source.value+a.target.value)/2,(d.source.value+d.target.value)/2)})}
var e,f,g,h,q,m,r,u={},P=0;return u.matrix=function(a){return arguments.length?(h=(g=a)&&g.length,e=f=null,u):g},u.padding=function(a){return arguments.length?(P=a,e=f=null,u):P},u.sortGroups=function(a){return arguments.length?(q=a,e=f=null,u):q},u.sortSubgroups=function(a){return arguments.length?(m=a,e=null,u):m},u.sortChords=function(a){return arguments.length?(r=a,e&&c(),u):r},u.chords=function(){return e||a(),e},u.groups=function(){return f||a(),f},u};n.layout.force=function(){function a(d){return function(a,
c,e,f){if(a.point!==d){e=a.cx-d.x;var g=a.cy-d.y,l=1/Math.sqrt(e*e+g*g);if(y>(f-c)*l)return c=a.charge*l*l,d.px-=e*c,d.py-=g*c,!0;a.point&&isFinite(l)&&(c=a.pointCharge*l*l,d.px-=e*c,d.py-=g*c)}return!a.charge}}function c(a){a.px=n.event.x;a.py=n.event.y;m.resume()}var e,f,g,h,q,m={},r=n.dispatch("start","tick","end"),u=[1,1],P=0.9,w=Zg,E=$g,B=-30,C=0.1,y=0.8,z=[],A=[];return m.tick=function(){if(0.005>(f*=0.99))return r.end({type:"end",alpha:f=0}),!0;var c,e,l,m,s,t,y,E,w=z.length,R=A.length;for(e=
0;R>e;++e)l=A[e],c=l.source,m=l.target,y=m.x-c.x,E=m.y-c.y,(s=y*y+E*E)&&(s=f*h[e]*((s=Math.sqrt(s))-g[e])/s,y*=s,E*=s,m.x-=y*(t=c.weight/(m.weight+c.weight)),m.y-=E*t,c.x+=y*(t=1-t),c.y+=E*t);if((t=f*C)&&(y=u[0]/2,E=u[1]/2,e=-1,t))for(;++e<w;)l=z[e],l.x+=(y-l.x)*t,l.y+=(E-l.y)*t;if(B)for(he(c=n.geom.quadtree(z),f,q),e=-1;++e<w;)(l=z[e]).fixed||c.visit(a(l));for(e=-1;++e<w;)l=z[e],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*P,l.y-=(l.py-(l.py=l.y))*P);r.tick({type:"tick",alpha:f})},m.nodes=
function(a){return arguments.length?(z=a,m):z},m.links=function(a){return arguments.length?(A=a,m):A},m.size=function(a){return arguments.length?(u=a,m):u},m.linkDistance=function(a){return arguments.length?(w="function"==typeof a?a:+a,m):w},m.distance=m.linkDistance,m.linkStrength=function(a){return arguments.length?(E="function"==typeof a?a:+a,m):E},m.friction=function(a){return arguments.length?(P=+a,m):P},m.charge=function(a){return arguments.length?(B="function"==typeof a?a:+a,m):B},m.gravity=
function(a){return arguments.length?(C=+a,m):C},m.theta=function(a){return arguments.length?(y=+a,m):y},m.alpha=function(a){return arguments.length?(a=+a,f?f=0<a?a:0:0<a&&(r.start({type:"start",alpha:f=a}),n.timer(m.tick)),m):f},m.start=function(){function a(f,g){var h,p;if(!e){e=[];for(c=0;l>c;++c)e[c]=[];for(c=0;n>c;++c)h=A[c],e[h.source.index].push(h.target),e[h.target.index].push(h.source)}p=e[d];for(var q=-1,m=p.length;++q<m;)if(!isNaN(h=p[q][f]))return h;return Math.random()*g}var d,c,e,f,l=
z.length,n=A.length,s=u[0],r=u[1];for(d=0;l>d;++d)(f=z[d]).index=d,f.weight=0;for(d=0;n>d;++d)f=A[d],"number"==typeof f.source&&(f.source=z[f.source]),"number"==typeof f.target&&(f.target=z[f.target]),++f.source.weight,++f.target.weight;for(d=0;l>d;++d)f=z[d],isNaN(f.x)&&(f.x=a("x",s)),isNaN(f.y)&&(f.y=a("y",r)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);if(g=[],"function"==typeof w)for(d=0;n>d;++d)g[d]=+w.call(this,A[d],d);else for(d=0;n>d;++d)g[d]=w;if(h=[],"function"==typeof E)for(d=0;n>d;++d)h[d]=
+E.call(this,A[d],d);else for(d=0;n>d;++d)h[d]=E;if(q=[],"function"==typeof B)for(d=0;l>d;++d)q[d]=+B.call(this,z[d],d);else for(d=0;l>d;++d)q[d]=B;return m.resume()},m.resume=function(){return m.alpha(0.1)},m.stop=function(){return m.alpha(0)},m.drag=function(){return e||(e=n.behavior.drag().origin(ja).on("dragstart.force",Xf).on("drag.force",c).on("dragend.force",Yf)),arguments.length?(this.on("mouseover.force",Zf).on("mouseout.force",$f).call(e),void 0):e},n.rebind(m,r,"on")};var Zg=20,$g=1;n.layout.hierarchy=
function(){function a(c,n,q){var m=g.call(e,c,n);if(c.depth=n,q.push(c),m&&(s=m.length)){for(var s,r=-1,u=c.children=[],w=0,C=n+1;++r<s;)n=a(m[r],C,q),n.parent=c,u.push(n),w+=n.value;f&&u.sort(f);h&&(c.value=w)}else h&&(c.value=+h.call(e,c,n)||0);return c}function c(a,d){var f=a.children,g=0;if(f&&(p=f.length))for(var p,n=-1,q=d+1;++n<p;)g+=c(f[n],q);else h&&(g=+h.call(e,a,d)||0);return h&&(a.value=g),g}function e(c){var f=[];return a(c,0,f),f}var f=dg,g=bg,h=cg;return e.sort=function(a){return arguments.length?
(f=a,e):f},e.children=function(a){return arguments.length?(g=a,e):g},e.value=function(a){return arguments.length?(h=a,e):h},e.revalue=function(a){return c(a,0),a},e};n.layout.partition=function(){function a(c,e,f,g){var l=c.children;if(c.x=e,c.y=c.depth*g,c.dx=f,c.dy=g,l&&(h=l.length)){var h,p,n=-1;for(f=c.value?f/c.value:0;++n<h;)a(p=l[n],e,c=p.value*f,g),e+=c}}function c(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,f=-1;++f<e;)d=Math.max(d,c(a[f]));return 1+d}function e(l,h){var n=f.call(this,
l,h);return a(n[0],0,g[0],g[1]/c(n[0])),n}var f=n.layout.hierarchy(),g=[1,1];return e.size=function(a){return arguments.length?(g=a,e):g},Ya(e,f)};n.layout.pie=function(){function a(h){var q=h.map(function(e,f){return+c.call(a,e,f)}),m=+("function"==typeof f?f.apply(this,arguments):f),r=(("function"==typeof g?g.apply(this,arguments):g)-m)/n.sum(q),u=n.range(h.length);null!=e&&u.sort(e===df?function(a,d){return q[d]-q[a]}:function(a,d){return e(h[a],h[d])});var w=[];return u.forEach(function(a){var d;
w[a]={data:h[a],value:d=q[a],startAngle:m,endAngle:m+=d*r}}),w}var c=Number,e=df,f=0,g=2*x;return a.value=function(e){return arguments.length?(c=e,a):c},a.sort=function(c){return arguments.length?(e=c,a):e},a.startAngle=function(c){return arguments.length?(f=c,a):f},a.endAngle=function(c){return arguments.length?(g=c,a):g},a};var df={};n.layout.stack=function(){function a(m,r){var u=m.map(function(e,f){return c.call(a,e,f)}),w=u.map(function(c){return c.map(function(c,e){return[h.call(a,c,e),q.call(a,
c,e)]})}),B=e.call(a,w,r),u=n.permute(u,B),w=n.permute(w,B),E,x,C=f.call(a,w,r),y=u.length,z=u[0].length;for(E=0;z>E;++E)for(g.call(a,u[0][E],x=C[E],w[0][E][1]),B=1;y>B;++B)g.call(a,u[B][E],x+=w[B-1][E][1],w[B][E][1]);return m}var c=ja,e=Ac,f=Bc,g=gg,h=eg,q=fg;return a.values=function(e){return arguments.length?(c=e,a):c},a.order=function(c){return arguments.length?(e="function"==typeof c?c:ah.get(c)||Ac,a):e},a.offset=function(c){return arguments.length?(f="function"==typeof c?c:bh.get(c)||Bc,a):
f},a.x=function(c){return arguments.length?(h=c,a):h},a.y=function(c){return arguments.length?(q=c,a):q},a.out=function(c){return arguments.length?(g=c,a):g},a};var ah=n.map({"inside-out":function(a){var c,e=a.length,f=a.map(hg),g=a.map(ig),h=n.range(e).sort(function(a,d){return f[a]-f[d]}),q=0,m=0,r=[],u=[];for(a=0;e>a;++a)c=h[a],m>q?(q+=g[c],r.push(c)):(m+=g[c],u.push(c));return u.reverse().concat(r)},reverse:function(a){return n.range(a.length).reverse()},"default":Ac}),bh=n.map({silhouette:function(a){var c,
e,f,g=a.length,h=a[0].length,n=[],q=0,m=[];for(e=0;h>e;++e){for(f=c=0;g>c;c++)f+=a[c][e][1];f>q&&(q=f);n.push(f)}for(e=0;h>e;++e)m[e]=(q-n[e])/2;return m},wiggle:function(a){var c,e,f,g,h,n,q,m,r,u=a.length,w=a[0],E=w.length,B=[];B[0]=m=r=0;for(e=1;E>e;++e){for(g=c=0;u>c;++c)g+=a[c][e][1];h=c=0;for(q=w[e][0]-w[e-1][0];u>c;++c){f=0;for(n=(a[c][e][1]-a[c][e-1][1])/(2*q);c>f;++f)n+=(a[f][e][1]-a[f][e-1][1])/q;h+=n*a[c][e][1]}B[e]=m-=g?h/g*q:0;r>m&&(r=m)}for(e=0;E>e;++e)B[e]-=r;return B},expand:function(a){var c,
e,f,g=a.length,h=a[0].length,n=1/g,q=[];for(e=0;h>e;++e){for(f=c=0;g>c;c++)f+=a[c][e][1];if(f)for(c=0;g>c;c++)a[c][e][1]/=f;else for(c=0;g>c;c++)a[c][e][1]=n}for(e=0;h>e;++e)q[e]=0;return q},zero:Bc});n.layout.histogram=function(){function a(d,h){var q,m,r=[],u=d.map(e,this),w=f.call(this,u,h),B=g.call(this,w,u,h);h=-1;for(var x=u.length,C=B.length-1,y=c?1:1/x;++h<C;)q=r[h]=[],q.dx=B[h+1]-(q.x=B[h]),q.y=0;if(0<C)for(h=-1;++h<x;)m=u[h],m>=w[0]&&m<=w[1]&&(q=r[n.bisect(B,m,1,C)-1],q.y+=y,q.push(d[h]));
return r}var c=!0,e=Number,f=lg,g=kg;return a.value=function(c){return arguments.length?(e=c,a):e},a.range=function(c){return arguments.length?(f=I(c),a):f},a.bins=function(c){return arguments.length?(g="number"==typeof c?function(a){return ie(a,c)}:I(c),a):g},a.frequency=function(e){return arguments.length?(c=!!e,a):c},a};n.layout.tree=function(){function a(d,g){function h(a,d){var c=a.children,f=a._tree;if(c&&(g=c.length)){for(var g,p,q,n=c[0],m=n,s=-1;++s<g;){q=c[s];h(q,p);var r=q;if(p){for(var t=
void 0,v=r,u=r,C=r.parent.children[0],y=v._tree.mod,w=u._tree.mod,M=p._tree.mod,B=C._tree.mod;p=Dc(p),v=Cc(v),p&&v;){C=Cc(C);u=Dc(u);u._tree.ancestor=r;t=p._tree.prelim+M-v._tree.prelim-y+e(p,v);if(0<t){var E=p._tree.ancestor.parent==r.parent?p._tree.ancestor:m,L=r,P=t,E=E._tree,L=L._tree,x=P/(L.number-E.number);E.change+=x;L.change-=x;L.shift+=P;L.prelim+=P;L.mod+=P;y+=t;w+=t}M+=p._tree.mod;y+=v._tree.mod;B+=C._tree.mod;w+=u._tree.mod}p&&!Dc(u)&&(u._tree.thread=p,u._tree.mod+=M-w);v&&!Cc(C)&&(C._tree.thread=
v,C._tree.mod+=y-B,m=r)}p=q}s=g=0;r=a.children;for(m=r.length;0<=--m;)c=r[m]._tree,c.prelim+=g,c.mod+=g,g+=c.shift+(s+=c.change);q=0.5*(n._tree.prelim+q._tree.prelim);d?(f.prelim=d._tree.prelim+e(a,d),f.mod=f.prelim-q):f.prelim=q}else d&&(f.prelim=d._tree.prelim+e(a,d))}function q(a,d){a.x=a._tree.prelim+d;var c=a.children;if(c&&(e=c.length)){var e,f=-1;for(d+=a._tree.mod;++f<e;)q(c[f],d)}}var n=c.call(this,d,g),m=n[0];ua(m,function(a,d){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:d?
d._tree.number+1:0}});h(m);q(m,-m._tree.prelim);var r=wb(m,ng),u=wb(m,mg),w=wb(m,og),B=r.x-e(r,u)/2,C=u.x+e(u,r)/2,y=w.depth||1;return ua(m,function(a){a.x=(a.x-B)/(C-B)*f[0];a.y=a.depth/y*f[1];delete a._tree}),n}var c=n.layout.hierarchy().sort(null).value(null),e=je,f=[1,1];return a.separation=function(c){return arguments.length?(e=c,a):e},a.size=function(c){return arguments.length?(f=c,a):f},Ya(a,c)};n.layout.pack=function(){function a(d,g){var h=c.call(this,d,g),q=h[0];q.x=0;q.y=0;ua(q,function(a){a.r=
Math.sqrt(a.value)});ua(q,me);var m=f[0],n=f[1],r=Math.max(2*q.r/m,2*q.r/n);if(0<e){var u=e*r/2;ua(q,function(a){a.r+=u});ua(q,me);ua(q,function(a){a.r-=u});r=Math.max(2*q.r/m,2*q.r/n)}return oe(q,m/2,n/2,1/r),h}var c=n.layout.hierarchy().sort(pg),e=0,f=[1,1];return a.size=function(c){return arguments.length?(f=c,a):f},a.padding=function(c){return arguments.length?(e=+c,a):e},Ya(a,c)};n.layout.cluster=function(){function a(d,g){var h,q=c.call(this,d,g),m=q[0],n=0;ua(m,function(a){var d=a.children;
d&&d.length?(a.x=tg(d),a.y=sg(d)):(a.x=h?n+=e(a,h):0,a.y=0,h=a)});var r=pe(m),u=qe(m),w=r.x-e(r,u)/2,B=u.x+e(u,r)/2;return ua(m,function(a){a.x=(a.x-w)/(B-w)*f[0];a.y=(1-(m.y?a.y/m.y:1))*f[1]}),q}var c=n.layout.hierarchy().sort(null).value(null),e=je,f=[1,1];return a.separation=function(c){return arguments.length?(e=c,a):e},a.size=function(c){return arguments.length?(f=c,a):f},Ya(a,c)};n.layout.treemap=function(){function a(d,c){for(var e,f,g=-1,h=d.length;++g<h;)f=(e=d[g]).value*(0>c?0:c),e.area=
isNaN(f)||0>=f?0:f}function c(e){var g=e.children;if(g&&g.length){var h,l=w(e),p=[],q=g.slice(),m=1/0,n="slice"===E?l.dx:"dice"===E?l.dy:"slice-dice"===E?e.depth&1?l.dy:l.dx:Math.min(l.dx,l.dy);a(q,l.dx*l.dy/e.value);for(p.area=0;0<(e=q.length);){p.push(e=q[e-1]);p.area+=e.area;var r;if(!(r="squarify"!==E)){e=n;h=void 0;var t=p.area;r=0;for(var v=1/0,u=-1,B=p.length;++u<B;)(h=p[u].area)&&(v>h&&(v=h),h>r&&(r=h));r=(h=(t*=t,e*=e,t?Math.max(e*r*x/t,t/(e*v*x)):1/0))<=m}r?(q.pop(),m=h):(p.area-=p.pop().area,
f(p,n,l,!1),n=Math.min(l.dx,l.dy),p.length=p.area=0,m=1/0)}p.length&&(f(p,n,l,!0),p.length=p.area=0);g.forEach(c)}}function e(c){var g=c.children;if(g&&g.length){var h=w(c),p=g.slice(),q=[];a(p,h.dx*h.dy/c.value);for(q.area=0;c=p.pop();)q.push(c),q.area+=c.area,null!=c.z&&(f(q,c.z?h.dx:h.dy,h,!p.length),q.length=q.area=0);g.forEach(e)}}function f(a,d,c,e){var g,h=-1,l=a.length,p=c.x,q=c.y,n=d?m(a.area/d):0;if(d==c.dx){for((e||n>c.dy)&&(n=c.dy);++h<l;)g=a[h],g.x=p,g.y=q,g.dy=n,p+=g.dx=Math.min(c.x+
c.dx-p,n?m(g.area/n):0);g.z=!0;g.dx+=c.x+c.dx-p;c.y+=n;c.dy-=n}else{for((e||n>c.dx)&&(n=c.dx);++h<l;)g=a[h],g.x=p,g.y=q,g.dx=n,q+=g.dy=Math.min(c.y+c.dy-q,n?m(g.area/n):0);g.z=!1;g.dy+=c.y+c.dy-q;c.x+=n;c.dx-=n}}function g(f){f=h||q(f);var p=f[0];return p.x=0,p.y=0,p.dx=r[0],p.dy=r[1],h&&q.revalue(p),a([p],p.dx*p.dy/p.value),(h?e:c)(p),B&&(h=f),f}var h,q=n.layout.hierarchy(),m=Math.round,r=[1,1],u=null,w=Fc,B=!1,E="squarify",x=0.5*(1+Math.sqrt(5));return g.size=function(a){return arguments.length?
(r=a,g):r},g.padding=function(a){function d(c){var e=a.call(g,c,c.depth);return null==e?Fc(c):re(c,"number"==typeof e?[e,e,e,e]:e)}function c(d){return re(d,a)}if(!arguments.length)return u;var e;return w=null==(u=a)?Fc:"function"==(e=typeof a)?d:"number"===e?(a=[a,a,a,a],c):c,g},g.round=function(a){return arguments.length?(m=a?Math.round:Number,g):m!=Number},g.sticky=function(a){return arguments.length?(B=a,h=null,g):B},g.ratio=function(a){return arguments.length?(x=a,g):x},g.mode=function(a){return arguments.length?
(E=a+"",g):E},Ya(g,q)};n.random={normal:function(a,c){var e=arguments.length;return 2>e&&(c=1),1>e&&(a=0),function(){var e,f;do e=2*Math.random()-1,f=2*Math.random()-1,f=e*e+f*f;while(!f||1<f);return a+c*e*Math.sqrt(-2*Math.log(f)/f)}},logNormal:function(){var a=n.random.normal.apply(n,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,e=0;a>e;e++)c+=Math.random();return c/a}}};n.scale={};n.scale.linear=function(){return se([0,1],[0,1],Da,!1)};
n.scale.log=function(){return xe(n.scale.linear().domain([0,Math.LN10]),10,ye,ze)};var yg=n.format(".0e");n.scale.pow=function(){return Ae(n.scale.linear(),1)};n.scale.sqrt=function(){return n.scale.pow().exponent(0.5)};n.scale.ordinal=function(){return Be([],{t:"range",a:[[]]})};n.scale.category10=function(){return n.scale.ordinal().range(ch)};n.scale.category20=function(){return n.scale.ordinal().range(dh)};n.scale.category20b=function(){return n.scale.ordinal().range(eh)};n.scale.category20c=function(){return n.scale.ordinal().range(fh)};
var ch="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),dh="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),eh="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),fh="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
n.scale.quantile=function(){return Ce([],[])};n.scale.quantize=function(){return De(0,1,[0,1])};n.scale.threshold=function(){return Ee([0.5],[0,1])};n.scale.identity=function(){return Fe([0,1])};n.svg.arc=function(){function a(){var d=c.apply(this,arguments),h=e.apply(this,arguments),q=f.apply(this,arguments)+Ea,n=g.apply(this,arguments)+Ea,m=(q>n&&(m=q,q=n,n=m),n-q),r=x>m?"0":"1",u=Math.cos(q),q=Math.sin(q),w=Math.cos(n),n=Math.sin(n);return m>=gh?d?"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+
" 0 1,1 0,"+h+"M0,"+d+"A"+d+","+d+" 0 1,0 0,"+-d+"A"+d+","+d+" 0 1,0 0,"+d+"Z":"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"Z":d?"M"+h*u+","+h*q+"A"+h+","+h+" 0 "+r+",1 "+h*w+","+h*n+"L"+d*w+","+d*n+"A"+d+","+d+" 0 "+r+",0 "+d*u+","+d*q+"Z":"M"+h*u+","+h*q+"A"+h+","+h+" 0 "+r+",1 "+h*w+","+h*n+"L0,0Z"}var c=zg,e=Ag,f=Ge,g=He;return a.innerRadius=function(e){return arguments.length?(c=I(e),a):c},a.outerRadius=function(c){return arguments.length?(e=I(c),a):e},a.startAngle=function(c){return arguments.length?
(f=I(c),a):f},a.endAngle=function(c){return arguments.length?(g=I(c),a):g},a.centroid=function(){var a=(c.apply(this,arguments)+e.apply(this,arguments))/2,d=(f.apply(this,arguments)+g.apply(this,arguments))/2+Ea;return[Math.cos(d)*a,Math.sin(d)*a]},a};var Ea=-x/2,gh=2*x-1E-6;n.svg.line.radial=function(){var a=Td(Ie);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};sc.reverse=tc;tc.reverse=sc;n.svg.area=function(){return Je(ja)};n.svg.area.radial=function(){var a=Je(Ie);return a.radius=a.x,
delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};n.svg.chord=function(){function a(d,g){var h=c(this,e,d,g),p=c(this,f,d,g);return"M"+h.p0+("A"+h.r+","+h.r+" 0 "+ +(h.a1-h.a0>x)+",1 "+h.p1)+(h.a0==p.a0&&h.a1==p.a1?"Q 0,0 "+h.p0:"Q 0,0 "+p.p0+("A"+p.r+","+p.r+" 0 "+ +(p.a1-p.a0>x)+",1 "+p.p1)+("Q 0,0 "+h.p0))+"Z"}function c(a,d,e,f){var l=d.call(a,e,f);d=g.call(a,l,f);e=h.call(a,l,f)+Ea;a=q.call(a,
l,f)+Ea;return{r:d,a0:e,a1:a,p0:[d*Math.cos(e),d*Math.sin(e)],p1:[d*Math.cos(a),d*Math.sin(a)]}}var e=lc,f=mc,g=Bg,h=Ge,q=He;return a.radius=function(c){return arguments.length?(g=I(c),a):g},a.source=function(c){return arguments.length?(e=I(c),a):e},a.target=function(c){return arguments.length?(f=I(c),a):f},a.startAngle=function(c){return arguments.length?(h=I(c),a):h},a.endAngle=function(c){return arguments.length?(q=I(c),a):q},a};n.svg.diagonal=function(){function a(d,g){var h=c.call(this,d,g),
q=e.call(this,d,g),n=(h.y+q.y)/2,h=[h,{x:h.x,y:n},{x:q.x,y:n},q];return h=h.map(f),"M"+h[0]+"C"+h[1]+" "+h[2]+" "+h[3]}var c=lc,e=mc,f=Ke;return a.source=function(e){return arguments.length?(c=I(e),a):c},a.target=function(c){return arguments.length?(e=I(c),a):e},a.projection=function(c){return arguments.length?(f=c,a):f},a};n.svg.diagonal.radial=function(){var a=n.svg.diagonal(),c=Ke,e=a.projection;return a.projection=function(a){return arguments.length?e(Cg(c=a)):c},a};n.svg.symbol=function(){function a(d,
f){return(ef.get(c.call(this,d,f))||Le)(e.call(this,d,f))}var c=Eg,e=Dg;return a.type=function(e){return arguments.length?(c=I(e),a):c},a.size=function(c){return arguments.length?(e=I(c),a):e},a};var ef=n.map({circle:Le,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*ff));var c=a*ff;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+
-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Mb);var c=a*Mb/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Mb);var c=a*Mb/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});n.svg.symbolTypes=ef.keys();var bb,Mb=Math.sqrt(3),ff=Math.tan(30*F),ba=[],Ve=0,Fb={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,e=c*a;return 4*(0.5>a?e:3*(a-c)+e-0.75)},delay:0,duration:250};ba.call=Q.call;ba.empty=Q.empty;
ba.node=Q.node;n.transition=function(a){return arguments.length?bb?a.transition():a:ab.transition()};n.transition.prototype=ba;ba.select=function(a){var c,e,f,g=this.id,h=[];"function"!=typeof a&&(a=O(a));for(var q=-1,n=this.length;++q<n;){h.push(c=[]);for(var m=this[q],r=-1,u=m.length;++r<u;)(f=m[r])&&(e=a.call(f,f.__data__,r))?("__data__"in f&&(e.__data__=f.__data__),Ab(e,r,g,f.__transition__[g]),c.push(e)):c.push(null)}return $a(h,g)};ba.selectAll=function(a){var c,e,f,g,h=this.id,q=[];"function"!=
typeof a&&(a=T(a));for(var n=-1,m=this.length;++n<m;)for(var r=this[n],u=-1,w=r.length;++u<w;)if(c=r[u]){g=c.__transition__[h];e=a.call(c,c.__data__,u);q.push(c=[]);for(var B=-1,x=e.length;++B<x;)Ab(f=e[B],B,h,g),c.push(f)}return $a(q,h)};ba.filter=function(a){var c,e,f,g=[];"function"!=typeof a&&(a=dd(a));for(var h=0,q=this.length;q>h;h++){g.push(c=[]);e=this[h];for(var n=0,m=e.length;m>n;n++)(f=e[n])&&a.call(f,f.__data__,n)&&c.push(f)}return $a(g,this.id,this.time).ease(this.ease())};ba.tween=function(a,
c){var e=this.id;return 2>arguments.length?this.node().__transition__[e].tween.get(a):xa(this,null==c?function(c){c.__transition__[e].tween.remove(a)}:function(f){f.__transition__[e].tween.set(a,c)})};ba.attr=function(a,c){function e(){this.removeAttribute(h)}function f(){this.removeAttributeNS(h.space,h.local)}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var g="transform"==a?ub:Da,h=n.ns.qualify(a);return Jc(this,"attr."+a,c,function(a){function c(){var d,e=this.getAttribute(h);
return e!==a&&(d=g(e,a),function(a){this.setAttribute(h,d(a))})}function d(){var c,e=this.getAttributeNS(h.space,h.local);return e!==a&&(c=g(e,a),function(a){this.setAttributeNS(h.space,h.local,c(a))})}return null==a?h.local?f:e:(a+="",h.local?d:c)})};ba.attrTween=function(a,c){function e(a,d){var f=c.call(this,a,d,this.getAttribute(g));return f&&function(a){this.setAttribute(g,f(a))}}function f(a,d){var e=c.call(this,a,d,this.getAttributeNS(g.space,g.local));return e&&function(a){this.setAttributeNS(g.space,
g.local,e(a))}}var g=n.ns.qualify(a);return this.tween("attr."+a,g.local?f:e)};ba.style=function(a,c,e){function f(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(e in a)this.style(e,a[e],c);return this}e=""}var h="transform"==a?ub:Da;return Jc(this,"style."+a,c,function(c){function g(){var f,q=da.getComputedStyle(this,null).getPropertyValue(a);return q!==c&&(f=h(q,c),function(c){this.style.setProperty(a,f(c),e)})}return null==c?f:(c+="",g)})};
ba.styleTween=function(a,c,e){return 3>arguments.length&&(e=""),this.tween("style."+a,function(f,g){var h=c.call(this,f,g,da.getComputedStyle(this,null).getPropertyValue(a));return h&&function(c){this.style.setProperty(a,h(c),e)}})};ba.text=function(a){return Jc(this,"text",a,Fg)};ba.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};ba.ease=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].ease:
("function"!=typeof a&&(a=n.ease.apply(n,arguments)),xa(this,function(e){e.__transition__[c].ease=a}))};ba.delay=function(a){var c=this.id;return xa(this,"function"==typeof a?function(e,f,g){e.__transition__[c].delay=a.call(e,e.__data__,f,g)|0}:(a|=0,function(e){e.__transition__[c].delay=a}))};ba.duration=function(a){var c=this.id;return xa(this,"function"==typeof a?function(e,f,g){e.__transition__[c].duration=Math.max(1,a.call(e,e.__data__,f,g)|0)}:(a=Math.max(1,0|a),function(e){e.__transition__[c].duration=
a}))};ba.each=function(a,c){var e=this.id;if(2>arguments.length){var f=Fb,g=bb;bb=e;xa(this,function(c,f,g){Fb=c.__transition__[e];a.call(c,c.__data__,f,g)});Fb=f;bb=g}else xa(this,function(f){f.__transition__[e].event.on(a,c)});return this};ba.transition=function(){for(var a,c,e,f,g=this.id,h=++Ve,q=[],n=0,m=this.length;m>n;n++){q.push(a=[]);c=this[n];for(var r=0,u=c.length;u>r;r++)(e=c[r])&&(f=Object.create(e.__transition__[g]),f.delay+=f.duration,Ab(e,r,h,f)),a.push(e)}return $a(q,h)};n.svg.axis=
function(){function a(d){d.each(function(){var a,d=n.select(this),B=null==u?e.ticks?e.ticks.apply(e,r):e.domain():u,y=null==c?e.tickFormat?e.tickFormat.apply(e,r):String:c,z=Gg(e,B,w),A=d.selectAll(".tick.minor").data(z,String),z=A.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),x=n.transition(A.exit()).style("opacity",1E-6).remove(),A=n.transition(A).style("opacity",1),H=d.selectAll(".tick.major").data(B,String),B=H.enter().insert("g","path").attr("class","tick major").style("opacity",
1E-6),D=n.transition(H.exit()).style("opacity",1E-6).remove(),U=n.transition(H).style("opacity",1),R=xb(e),d=d.selectAll(".domain").data([0]),d=(d.enter().append("path").attr("class","domain"),n.transition(d)),F=e.copy(),K=this.__chart__||F;this.__chart__=F;B.append("line");B.append("text");var O=B.select("line"),N=U.select("line"),y=H.select("text").text(y),H=B.select("text"),I=U.select("text");switch(f){case "bottom":a=Me;z.attr("y2",h);A.attr("x2",0).attr("y2",h);O.attr("y2",g);H.attr("y",Math.max(g,
0)+m);N.attr("x2",0).attr("y2",g);I.attr("x",0).attr("y",Math.max(g,0)+m);y.attr("dy",".71em").style("text-anchor","middle");d.attr("d","M"+R[0]+","+q+"V0H"+R[1]+"V"+q);break;case "top":a=Me;z.attr("y2",-h);A.attr("x2",0).attr("y2",-h);O.attr("y2",-g);H.attr("y",-(Math.max(g,0)+m));N.attr("x2",0).attr("y2",-g);I.attr("x",0).attr("y",-(Math.max(g,0)+m));y.attr("dy","0em").style("text-anchor","middle");d.attr("d","M"+R[0]+","+-q+"V0H"+R[1]+"V"+-q);break;case "left":a=Ne;z.attr("x2",-h);A.attr("x2",
-h).attr("y2",0);O.attr("x2",-g);H.attr("x",-(Math.max(g,0)+m));N.attr("x2",-g).attr("y2",0);I.attr("x",-(Math.max(g,0)+m)).attr("y",0);y.attr("dy",".32em").style("text-anchor","end");d.attr("d","M"+-q+","+R[0]+"H0V"+R[1]+"H"+-q);break;case "right":a=Ne,z.attr("x2",h),A.attr("x2",h).attr("y2",0),O.attr("x2",g),H.attr("x",Math.max(g,0)+m),N.attr("x2",g).attr("y2",0),I.attr("x",Math.max(g,0)+m).attr("y",0),y.attr("dy",".32em").style("text-anchor","start"),d.attr("d","M"+q+","+R[0]+"H0V"+R[1]+"H"+q)}if(e.ticks)B.call(a,
K),U.call(a,F),D.call(a,F),z.call(a,K),A.call(a,F),x.call(a,F);else{var Q=F.rangeBand()/2,z=function(a){return F(a)+Q};B.call(a,z);U.call(a,z)}})}var c,e=n.scale.linear(),f=gf,g=6,h=6,q=6,m=3,r=[10],u=null,w=0;return a.scale=function(c){return arguments.length?(e=c,a):e},a.orient=function(c){return arguments.length?(f=c in hh?c+"":gf,a):f},a.ticks=function(){return arguments.length?(r=arguments,a):r},a.tickValues=function(c){return arguments.length?(u=c,a):u},a.tickFormat=function(e){return arguments.length?
(c=e,a):c},a.tickSize=function(c,e){if(!arguments.length)return g;var f=arguments.length-1;return g=+c,h=1<f?+e:g,q=0<f?+arguments[f]:g,a},a.tickPadding=function(c){return arguments.length?(m=+c,a):m},a.tickSubdivide=function(c){return arguments.length?(w=+c,a):w},a};var gf="bottom",hh={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function a(h){h.each(function(){var h,q=n.select(this),m=q.selectAll(".background").data([0]),v=q.selectAll(".extent").data([0]),w=q.selectAll(".resize").data(B,
String);q.style("pointer-events","all").on("mousedown.brush",g).on("touchstart.brush",g);m.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");v.enter().append("rect").attr("class","extent").style("cursor","move");w.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ih[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");w.style("display",a.empty()?"none":null);w.exit().remove();r&&(h=xb(r),m.attr("x",h[0]).attr("width",h[1]-h[0]),e(q));u&&(h=xb(u),m.attr("y",h[0]).attr("height",h[1]-h[0]),f(q));c(q)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+x[+/e$/.test(a)][0]+","+x[+/^s/.test(a)][1]+")"})}function e(a){a.select(".extent").attr("x",x[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",x[1][0]-x[0][0])}function f(a){a.select(".extent").attr("y",
x[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",x[1][1]-x[0][1])}function g(){function p(){var a=n.event.changedTouches;return a?n.touches(A,a)[0]:n.mouse(A)}function w(){var a=p(),d=!1;z&&(a[0]+=z[0],a[1]+=z[1]);N||(n.event.altKey?(y||(y=[(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2]),I[0]=x[+(a[0]<y[0])][0],I[1]=x[+(a[1]<y[1])][1]):y=null);O&&B(a,r,0)&&(e(D),d=!0);K&&B(a,u,1)&&(f(D),d=!0);d&&(c(D),U({type:"brush",mode:N?"move":"resize"}))}function B(a,c,d){var e,f,g=xb(c);c=g[0];var g=
g[1],l=I[d],q=x[1][d]-x[0][d];return N&&(c-=l,g-=q+l),e=Math.max(c,Math.min(g,a[d])),N?f=(e+=l)+q:(y&&(l=Math.max(c,Math.min(g,2*y[d]-e))),e>l?(f=e,e=l):f=l),x[0][d]!==e||x[1][d]!==f?(h=null,x[0][d]=e,x[1][d]=f,!0):void 0}function C(){w();D.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);n.select("body").style("cursor",null);Q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",
null);U({type:"brushend"});q()}var y,z,A=this,H=n.select(n.event.target),U=m.of(A,arguments),D=n.select(A),F=H.datum(),O=!/^(n|s)$/.test(F)&&r,K=!/^(e|w)$/.test(F)&&u,N=H.classed("extent"),I=p(),Q=n.select(da).on("mousemove.brush",w).on("mouseup.brush",C).on("touchmove.brush",w).on("touchend.brush",C).on("keydown.brush",function(){32==n.event.keyCode&&(N||(y=null,I[0]-=x[1][0],I[1]-=x[1][1],N=2),q())}).on("keyup.brush",function(){32==n.event.keyCode&&2==N&&(I[0]+=x[1][0],I[1]+=x[1][1],N=0,q())});
if(N)I[0]=x[0][0]-I[0],I[1]=x[0][1]-I[1];else if(F){var T=+/w$/.test(F),F=+/^n/.test(F);z=[x[1-T][0]-I[0],x[1-F][1]-I[1]];I[0]=x[T][0];I[1]=x[F][1]}else n.event.altKey&&(y=I.slice());D.style("pointer-events","none").selectAll(".resize").style("display",null);n.select("body").style("cursor",H.style("cursor"));U({type:"brushstart"});w();q()}var h,m=w(a,"brushstart","brush","brushend"),r=null,u=null,B=Uc[0],x=[[0,0],[0,0]];return a.x=function(c){return arguments.length?(r=c,B=Uc[!r<<1|!u],a):r},a.y=
function(c){return arguments.length?(u=c,B=Uc[!r<<1|!u],a):u},a.extent=function(c){var e,f,g,l,q;return arguments.length?(h=[[0,0],[0,0]],r&&(e=c[0],f=c[1],u&&(e=e[0],f=f[0]),h[0][0]=e,h[1][0]=f,r.invert&&(e=r(e),f=r(f)),e>f&&(q=e,e=f,f=q),x[0][0]=0|e,x[1][0]=0|f),u&&(g=c[0],l=c[1],r&&(g=g[1],l=l[1]),h[0][1]=g,h[1][1]=l,u.invert&&(g=u(g),l=u(l)),g>l&&(q=g,g=l,l=q),x[0][1]=0|g,x[1][1]=0|l),a):(c=h||x,r&&(e=c[0][0],f=c[1][0],h||(e=x[0][0],f=x[1][0],r.invert&&(e=r.invert(e),f=r.invert(f)),e>f&&(q=e,
e=f,f=q))),u&&(g=c[0][1],l=c[1][1],h||(g=x[0][1],l=x[1][1],u.invert&&(g=u.invert(g),l=u.invert(l)),g>l&&(q=g,g=l,l=q))),r&&u?[[e,g],[f,l]]:r?[e,f]:u&&[g,l])},a.clear=function(){return h=null,x[0][0]=x[0][1]=x[1][0]=x[1][1]=0,a},a.empty=function(){return r&&x[0][0]===x[1][0]||u&&x[0][1]===x[1][1]},n.rebind(a,m,"on")};var ih={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Uc=["n e s w nw ne se sw".split(" "),["e","w"],["n",
"s"],[]];n.time={};var fa=Date;Fa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){va.setUTCDate.apply(this._,arguments)},setDay:function(){va.setUTCDay.apply(this._,arguments)},setFullYear:function(){va.setUTCFullYear.apply(this._,arguments)},setHours:function(){va.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){va.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){va.setUTCMinutes.apply(this._,arguments)},setMonth:function(){va.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){va.setUTCSeconds.apply(this._,arguments)},setTime:function(){va.setTime.apply(this._,arguments)}};var va=Date.prototype,hf="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),jf="Sun Mon Tue Wed Thu Fri Sat".split(" "),Vc="January February March April May June July August September October November December".split(" "),Wc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");n.time.year=Ga(function(a){return a=n.time.day(a),a.setMonth(0,1),
a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});n.time.years=n.time.year.range;n.time.years.utc=n.time.year.utc.range;n.time.day=Ga(function(a){var c=new fa(1970,0);return c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});n.time.days=n.time.day.range;n.time.days.utc=n.time.day.utc.range;n.time.dayOfYear=function(a){var c=n.time.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-
c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var e=n.time[a]=Ga(function(a){return(a=n.time.day(a)).setDate(a.getDate()-(a.getDay()+c)%7),a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var d=n.time.year(a).getDay();return Math.floor((n.time.dayOfYear(a)+(d+c)%7)/7)-(d!==c)});n.time[a+"s"]=e.range;n.time[a+"s"].utc=e.utc.range;n.time[a+"OfYear"]=function(a){var d=n.time.year(a).getDay();
return Math.floor((n.time.dayOfYear(a)+(d+c)%7)/7)}});n.time.week=n.time.sunday;n.time.weeks=n.time.sunday.range;n.time.weeks.utc=n.time.sunday.utc.range;n.time.weekOfYear=n.time.sundayOfYear;n.time.format=function(a){function c(f){for(var g,h,q,n=[],m=-1,r=0;++m<e;)37===a.charCodeAt(m)&&(n.push(a.substring(r,m)),null!=(h=jh[g=a.charAt(++m)])&&(g=a.charAt(++m)),(q=Nb[g])&&(g=q(f,null==h?"e"===g?" ":"0":h)),n.push(g),r=m+1);return n.push(a.substring(r,m)),n.join("")}var e=a.length;return c.parse=function(c){var e=
{y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Cb(e,a,c,0)!=c.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);c=new fa;return c.setFullYear(e.y,e.m,e.d),c.setHours(e.H,e.M,e.S,e.L),c},c.toString=function(){return a},c};var kf=Db(hf),lf=Db(jf),mf=Db(Vc),kh=Oe(Vc),nf=Db(Wc),lh=Oe(Wc),jh={"-":"",_:" ",0:"0"},Nb={a:function(a){return jf[a.getDay()]},A:function(a){return hf[a.getDay()]},b:function(a){return Wc[a.getMonth()]},B:function(a){return Vc[a.getMonth()]},c:n.time.format("%a %b %e %X %Y"),d:function(a,c){return ia(a.getDate(),
c,2)},e:function(a,c){return ia(a.getDate(),c,2)},H:function(a,c){return ia(a.getHours(),c,2)},I:function(a,c){return ia(a.getHours()%12||12,c,2)},j:function(a,c){return ia(1+n.time.dayOfYear(a),c,3)},L:function(a,c){return ia(a.getMilliseconds(),c,3)},m:function(a,c){return ia(a.getMonth()+1,c,2)},M:function(a,c){return ia(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ia(a.getSeconds(),c,2)},U:function(a,c){return ia(n.time.sundayOfYear(a),c,2)},w:function(a){return a.getDay()},
W:function(a,c){return ia(n.time.mondayOfYear(a),c,2)},x:n.time.format("%m/%d/%Y"),X:n.time.format("%H:%M:%S"),y:function(a,c){return ia(a.getFullYear()%100,c,2)},Y:function(a,c){return ia(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var e=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ia(e,"0",2)+ia(c,"0",2)},"%":function(){return"%"}},Hg={a:function(a,c,e){lf.lastIndex=0;return(a=lf.exec(c.substring(e)))?e+a[0].length:-1},A:function(a,c,e){kf.lastIndex=0;return(a=
kf.exec(c.substring(e)))?e+a[0].length:-1},b:function(a,c,e){nf.lastIndex=0;return(c=nf.exec(c.substring(e)))?(a.m=lh.get(c[0].toLowerCase()),e+c[0].length):-1},B:function(a,c,e){mf.lastIndex=0;return(c=mf.exec(c.substring(e)))?(a.m=kh.get(c[0].toLowerCase()),e+c[0].length):-1},c:function(a,c,e){return Cb(a,""+Nb.c,c,e)},d:Pe,e:Pe,H:Qe,I:Qe,L:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+3)))?(a.L=+c[0],e+c[0].length):-1},m:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,
e+2)))?(a.m=c[0]-1,e+c[0].length):-1},M:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+2)))?(a.M=+c[0],e+c[0].length):-1},p:function(a,c,e){c=mh.get(c.substring(e,e+=2).toLowerCase());return null==c?-1:(a.p=c,e)},S:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+2)))?(a.S=+c[0],e+c[0].length):-1},x:function(a,c,e){return Cb(a,""+Nb.x,c,e)},X:function(a,c,e){return Cb(a,""+Nb.X,c,e)},y:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+2)))?(a.y=+c[0]+
(68<+c[0]?1900:2E3),e+c[0].length):-1},Y:function(a,c,e){ga.lastIndex=0;return(c=ga.exec(c.substring(e,e+4)))?(a.y=+c[0],e+c[0].length):-1}},ga=/^\s*\d+/,mh=n.map({am:0,pm:1});n.time.format.utc=function(a){function c(a){try{fa=Fa;var d=new fa;return d._=a,e(d)}finally{fa=Date}}var e=n.time.format(a);return c.parse=function(a){try{fa=Fa;var c=e.parse(a);return c&&c._}finally{fa=Date}},c.toString=e.toString,c};var of=n.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");n.time.format.iso=Date.prototype.toISOString&&
+new Date("2000-01-01T00:00:00.000Z")?Kc:of;Kc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Kc.toString=of.toString;n.time.second=Ga(function(a){return new fa(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});n.time.seconds=n.time.second.range;n.time.seconds.utc=n.time.second.utc.range;n.time.minute=Ga(function(a){return new fa(6E4*Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+6E4*Math.floor(c))},function(a){return a.getMinutes()});
n.time.minutes=n.time.minute.range;n.time.minutes.utc=n.time.minute.utc.range;n.time.hour=Ga(function(a){var c=a.getTimezoneOffset()/60;return new fa(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});n.time.hours=n.time.hour.range;n.time.hours.utc=n.time.hour.utc.range;n.time.month=Ga(function(a){return a=n.time.day(a),a.setDate(1),a},function(a,c){a.setMonth(a.getMonth()+c)},function(a){return a.getMonth()});n.time.months=n.time.month.range;
n.time.months.utc=n.time.month.utc.range;var Eb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Xc=[[n.time.second,1],[n.time.second,5],[n.time.second,15],[n.time.second,30],[n.time.minute,1],[n.time.minute,5],[n.time.minute,15],[n.time.minute,30],[n.time.hour,1],[n.time.hour,3],[n.time.hour,6],[n.time.hour,12],[n.time.day,1],[n.time.day,2],[n.time.week,1],[n.time.month,1],[n.time.month,3],[n.time.year,1]],nh=[[n.time.format("%Y"),Ta],[n.time.format("%B"),
function(a){return a.getMonth()}],[n.time.format("%b %d"),function(a){return 1!=a.getDate()}],[n.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[n.time.format("%I %p"),function(a){return a.getHours()}],[n.time.format("%I:%M"),function(a){return a.getMinutes()}],[n.time.format(":%S"),function(a){return a.getSeconds()}],[n.time.format(".%L"),function(a){return a.getMilliseconds()}]],pf=n.scale.linear(),oh=Re(nh);Xc.year=function(a,c){return pf.domain(a.map(Ig)).ticks(c).map(Nc)};
n.time.scale=function(){return Lc(n.scale.linear(),Xc,oh)};var qf=Xc.map(function(a){return[a[0].utc,a[1]]}),ph=[[n.time.format.utc("%Y"),Ta],[n.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[n.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[n.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[n.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[n.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[n.time.format.utc(":%S"),
function(a){return a.getUTCSeconds()}],[n.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],qh=Re(ph);return qf.year=function(a,c){return pf.domain(a.map(Jg)).ticks(c).map(Oc)},n.time.scale.utc=function(){return Lc(n.scale.linear(),qf,qh)},n.text=function(){return n.xhr.apply(n,arguments).response(Kg)},n.json=function(a,c){return n.xhr(a,"application/json",c).response(Lg)},n.html=function(a,c){return n.xhr(a,"text/html",c).response(Mg)},n.xml=function(){return n.xhr.apply(n,arguments).response(Ng)},
n}();
(function(f){var r=f.d3,m=Error("d3.layer must be initialized with a base"),a=Error("d3.layer must specify a `dataBind` method."),c=Error("d3.layer must specify an `insert` method."),e=function(a){if(!a)throw m;this._base=a;this._handlers={}};e.prototype.dataBind=function(){throw a;};e.prototype.insert=function(){throw c;};e.prototype.on=function(a,c,e){e=e||{};a in this._handlers||(this._handlers[a]=[]);this._handlers[a].push({callback:c,chart:e.chart||null})};e.prototype.off=function(a,c){var e,f=
this._handlers[a];if(f){if(1===arguments.length)return f.length=0,void 0;for(e=f.length-1;-1<e;--e)f[e].callback===c&&f.splice(e,1)}};e.prototype.draw=function(a){var c,e,f,m,w;if(c=this.dataBind.call(this._base,a),!(c instanceof r.selection))throw Error("Invalid selection defined by `dataBind` method.");a=c.enter();a._chart=this._base._chart;c=[{name:"update",selection:c},{name:"enter",selection:this.insert.bind(a)},{name:"merge",selection:c},{name:"exit",selection:c.exit.bind(c)}];for(var H=0,u=
c.length;u>H;++H){if(f=c[H].name,e=c[H].selection,"function"==typeof e&&(e=e()),!(e instanceof r.selection))throw Error('Invalid selection defined for "'+f+"' lifecycle event.");if(a=this._handlers[f])for(m=0,w=a.length;w>m;++m)e._chart=a[m].chart||this._base._chart,e.call(a[m].callback);if(a=this._handlers[f+":transition"],a&&a.length)for(e=e.transition(),m=0,w=a.length;w>m;++m)e._chart=a[m].chart||this._base._chart,e.call(a[m].callback)}};r.selection.prototype.layer=function(a){var c,f=new e(this);
if(f.dataBind=a.dataBind,f.insert=a.insert,"events"in a)for(c in a.events)f.on(c,a.events[c]);return this.on=function(){return f.on.apply(f,arguments)},this.off=function(){return f.off.apply(f,arguments)},this.draw=function(){return f.draw.apply(f,arguments)},this}})(this);
(function(f,r){function m(a){var c,e,f,g;if(!a)return a;e=arguments.length;for(c=1;e>c;c++)if(f=arguments[c])for(g in f)a[g]=f[g];return a}var a=f.d3,c=function(a){this.constructor=a},e=function(a,e){var f;return c.prototype=a.prototype,f=new c(a),a.apply(f,e),f},h=function(a,c){var e=this.constructor.__super__;e&&h.call(e,a,c);Object.hasOwnProperty.call(this.constructor.prototype,"initialize")&&this.initialize.apply(a,c)},g=function(a){this.base=a;this._layers={};this._mixins=[];this._events={};
h.call(this,this,Array.prototype.slice.call(arguments,1))};g.prototype.unlayer=function(a){var c=this.layer(a),c=this._layerList.indexOf(c);return delete this._layers[a],this._layerList.splice(c,1),this};g.prototype.layer=function(a,c,e){var f;return 1===arguments.length?this._layers[a]:(f=c.layer(e),this._layers[a]=f,c._chart=this,f)};g.prototype.initialize=function(){};g.prototype.transform=function(a){return a};g.prototype.mixin=function(a,c){var f=Array.prototype.slice.call(arguments,2);f.unshift(c);
f=e(g[a],f);return this._mixins.push(f),f};g.prototype.draw=function(a){var c,e;a=this.transform(a);for(c in this._layers)this._layers[c].draw(a);for(e in this._mixins)this._mixins[e].draw(a)};g.prototype.on=function(a,c,e){return(this._events[a]||(this._events[a]=[])).push({callback:c,context:e||this,_chart:this}),this};g.prototype.once=function(a,c,e){var f=this,g=function(){f.off(a,g);c.apply(this,arguments)};return this.on(a,g,e)};g.prototype.off=function(a,c,e){var f,g,h,m,r;if(0===arguments.length){for(a in this._events)this._events[a].length=
0;return this}if(1===arguments.length)return g=this._events[a],g&&(g.length=0),this;f=a?[a]:Object.keys(this._events);for(m=0;f.length>m;m++)for(g=f[m],g=this._events[g],r=g.length;r--;)h=g[r],(c&&c===h.callback||e&&e===h.context)&&g.splice(r,1);return this};g.prototype.trigger=function(a){var c,e,f=Array.prototype.slice.call(arguments,1),g=this._events[a];if(g!==r)for(c=0;g.length>c;c++)e=g[c],e.callback.apply(e.context,f);return this};g.extend=function(a,c,e){var f,h=this;f=c&&Object.hasOwnProperty.call(c,
"constructor")?c.constructor:function(){return h.apply(this,arguments)};m(f,h,e);e=function(){this.constructor=f};return e.prototype=h.prototype,f.prototype=new e,c&&m(f.prototype,c),f.__super__=h.prototype,g[a]=f,f};a.chart=function(a){return 0===arguments.length?g:1===arguments.length?g[a]:g.extend.apply(g,arguments)};a.selection.prototype.chart=function(a){if(0===arguments.length)return this._chart;var c=Array.prototype.slice.call(arguments,1);c.unshift(this);return e(g[a],c)};a.selection.enter.prototype.chart=
function(){return this._chart};a.transition.prototype.chart=a.selection.enter.prototype.chart})(this);function sortByKey(f,r){return f.sort(function(f,a){var c=f[r],e=a[r];return c<e?-1:c>e?1:0})}function parseUri(f){var r=parseUri.options;f=r.parser[r.strictMode?"strict":"loose"].exec(f);for(var m={},a=14;a--;)m[r.key[a]]=f[a]||"";m[r.q.name]={};m[r.key[12]].replace(r.q.parser,function(a,e,f){e&&(m[r.q.name][e]=f)});return m}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(f){var r="";f.protocol&&(r+=f.protocol+"://");f.user&&(r+=f.user);f.password&&(r+=":"+f.password);if(f.user||f.password)r+="@";f.host&&(r+=f.host);f.port&&(r+=":"+f.port);f.path&&(r+=f.path);var m=f.queryKey,a=[];for(k in m)if(m.hasOwnProperty(k)){var c=encodeURIComponent(m[k]);k=encodeURIComponent(k);c?a.push(k+"="+c):a.push(k)}0<a.length&&(r+="?"+a.join("&"));f.anchor&&(r+="#"+f.anchor);return r}
function H1DSUri(f){this.base_uri=f;this.base_uri_components=parseUri(f);this.base_h1ds_filters=[];this.base_non_h1ds_query={};this.extra_h1ds_filters=[];this.extra_non_h1ds_query={};f={fids:[]};var r=/^f(\d+)(_(\w+))?/,m;for(m in this.base_uri_components.queryKey)if(this.base_uri_components.queryKey.hasOwnProperty(m)){var a=r.exec(m);a?(f.hasOwnProperty(a[1])||(f.fids.push(a[1]),f[a[1]]={name:"",kwargs:{},fid:parseInt(a[1])}),"undefined"===typeof a[2]?f[a[1]].name=this.base_uri_components.queryKey[m]:
f[a[1]].kwargs[a[3]]=this.base_uri_components.queryKey[m]):this.base_non_h1ds_query[m]=this.base_uri_components.queryKey[m]}for(m=0;m<f.fids.length;m++)this.base_h1ds_filters.push(f[f.fids[m]]);this.sortH1DSFilters()}H1DSUri.prototype.sortH1DSFilters=function(){this.base_h1ds_filters=sortByKey(this.base_h1ds_filters,"fid");this.extra_h1ds_filters=sortByKey(this.extra_h1ds_filters,"fid")};
H1DSUri.prototype.updateOrAddBaseFilter=function(f,r){var m=this.base_h1ds_filters.length;0<m&&this.base_h1ds_filters[m-1].name==f?this.base_h1ds_filters[m-1].kwargs=r:this.addBaseFilter(f,r)};H1DSUri.prototype.shiftExtraH1DSFilterFIDs=function(f){for(var r=0;r<this.extra_h1ds_filters.length;r++)this.extra_h1ds_filters[r].fid+=f};
H1DSUri.prototype.shiftExtraFilterIDs=function(){this.sortH1DSFilters();if(0<this.extra_h1ds_filters.length){var f=new_fid-this.extra_h1ds_filters[0].fid;0<=f&&this.shiftExtraH1DSFilterFIDs(f+1)}};H1DSUri.prototype.addBaseFilter=function(f,r){this.sortH1DSFilters();var m=this.base_h1ds_filters.length;this.base_h1ds_filters.push({name:f,kwargs:r,fid:0<m?this.base_h1ds_filters[m-1].fid+1:0});this.shiftExtraH1DSFilterFIDs(1)};
H1DSUri.prototype.addExtraFilter=function(f,r){this.sortH1DSFilters();var m=this.extra_h1ds_filters.length,a=this.base_h1ds_filters.length;this.extra_h1ds_filters.push({name:f,kwargs:r,fid:0<m?this.extra_h1ds_filters[m-1].fid+1:0<a?this.base_h1ds_filters[a-1].fid+1:0})};H1DSUri.prototype.packFilterIDs=function(){console.log(this.extra_h1ds_filters)};
H1DSUri.prototype.changeFilterID=function(f,r){for(var m=0;m<this.base_h1ds_filters.length;m++)this.base_h1ds_filters[m].fid==parseInt(f)&&(this.base_h1ds_filters[m].fid=parseInt(r));for(m=0;m<this.extra_h1ds_filters.length;m++)this.extra_h1ds_filters[m].fid==parseInt(f)&&(this.extra_h1ds_filters[m].fid=parseInt(r));this.shiftExtraFilterIDs()};
H1DSUri.prototype.renderBaseUri=function(){var f={},r;for(r in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(r)&&(f[r]=this.base_non_h1ds_query[r]);for(r=0;r<this.base_h1ds_filters.length;r++){var m=this.base_h1ds_filters[r].fid;f["f"+m]=this.base_h1ds_filters[r].name;for(var a in this.base_h1ds_filters[r].kwargs)f["f"+m+"_"+a]=this.base_h1ds_filters[r].kwargs[a]}a=jQuery.extend({},this.base_uri_components);a.queryKey=f;return makeUri(a)};
H1DSUri.prototype.renderExtraUri=function(){var f={},r;for(r in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(r)&&(f[r]=this.base_non_h1ds_query[r]);for(var m=0;m<this.base_h1ds_filters.length;m++){var a=this.base_h1ds_filters[m].fid;f["f"+a]=this.base_h1ds_filters[m].name;for(var c in this.base_h1ds_filters[m].kwargs)f["f"+a+"_"+c]=this.base_h1ds_filters[m].kwargs[c]}for(r in this.extra_non_h1ds_query)this.extra_non_h1ds_query.hasOwnProperty(r)&&(f[r]=this.extra_non_h1ds_query[r]);
for(m=0;m<this.extra_h1ds_filters.length;m++)for(c in a=this.extra_h1ds_filters[m].fid,f["f"+a]=this.extra_h1ds_filters[m].name,this.extra_h1ds_filters[m].kwargs)f["f"+a+"_"+c]=this.extra_h1ds_filters[m].kwargs[c];r=jQuery.extend({},this.base_uri_components);r.queryKey=f;return makeUri(r)};H1DSUri.prototype.isBinary=function(){return"bin"===this.base_non_h1ds_query.format};
H1DSUri.prototype.getShot=function(){var f=this.uri_components.path;"/"!==f[f.length-1]&&(f+="/");f=f.match(/\/\d+\//);return null===f?0:Number(f[0].substring(1,f[0].length-1))};H1DSUri.prototype.setShot=function(f){var r=this.uri_components.path;"/"!==r[r.length-1]&&(r+="/");f=r.replace(/\/\d+\//,"/"+f+"/");this.uri_components.path=f};d3.chart("dvBaseChart",{initialize:function(){var f=this,r=this.base.append("g").classed("graph-background",!0);f.main=f.base.append("g").attr("class","chart-main");f.brush=d3.svg.brush();f.margin={top:10,right:10,bottom:10,left:10};f._width=100;f._height=100;f.rmin=function(m){if(m.hasOwnProperty("length")){for(var a=[],c=0;c<m.length;c++)a.push(f.rmin(m[c]));return d3.min(a)}return m};f.rmax=function(m){if(m.hasOwnProperty("length")){for(var a=[],c=0;c<m.length;c++)a.push(f.rmax(m[c]));return d3.max(a)}return m};
this.source=function(f){arguments.length||this.source_data;this.source_data=f};this.load_data=function(){f.data=[];for(var m=0;m<f.source_data.length;m++)f.data.push(f.source_data[m].url_parser(f.source_data[m].url,f.source_data[m].modifiers));f.formatted_data=f.format_data(f.data)};this.render=function(){f.draw(f.data)};this.set_margin=function(m){var a=f._width+f.margin.left+f.margin.right,c=f._height+f.margin.bottom+f.margin.top;f.margin=m;f.base.select("g.chart-main").attr("transform","translate("+
f.margin.left+","+f.margin.top+")");f._width=a-f.margin.left-f.margin.right;f._height=c-f.margin.top-f.margin.bottom};this.set_margin({top:10,right:10,bottom:10,left:10});this.layer("background",r,{dataBind:function(f){return this.selectAll("rect.background").data([f])},insert:function(){return this.insert("rect").attr("class","background").attr("x",0).attr("y",0).attr("width",f._width+f.margin.left+f.margin.right).attr("height",f._height+f.margin.top+f.margin.bottom)}})},width:function(f){if(!arguments.length)return this._width+
this.margin.left+this.margin.right;this._width=f-this.margin.left-this.margin.right;this.base.select("g rect.background").attr("width",f);return this},height:function(f){if(!arguments.length)return this._height+this.margin.top+this.margin.bottom;this._height=f-this.margin.top-this.margin.bottom;this.base.select("g rect.background").attr("y",f).attr("height",f);return this}});
d3.chart("dvBaseChart").extend("dvTimeSeriesChart",{initialize:function(){var f=this;this.set_margin({top:50,right:50,bottom:50,left:50});this.xScale=d3.scale.linear().range([0,f._width]);this.yScale=d3.scale.linear().range([f._height,0]);this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom");this.yAxis=d3.svg.axis().scale(this.yScale).orient("left");this.colors=d3.scale.category20().range();this.layer("xAxis",f.main.append("g"),{dataBind:function(a){return this.selectAll("g.x.axis").data([a])},
insert:function(){return this.insert("g").attr("class","x axis").attr("transform",function(a){return"translate(0,"+f._height+")"})},events:{merge:function(){f.xScale.range([0,f._width]).domain([d3.min(f.data,function(a){return f.rmin(a.dimension)}),d3.max(f.data,function(a){return f.rmax(a.dimension)})]);return this.call(f.xAxis)},enter:function(){f.xScale.range([0,f._width]).domain([d3.min(f.data,function(a){return f.rmin(a.dimension)}),d3.max(f.data,function(a){return f.rmax(a.dimension)})]);return this.call(f.xAxis)},
exit:function(){return this.remove()}}});this.layer("yAxis",f.main.append("g"),{dataBind:function(a){return this.selectAll("g.y.axis").data([a])},insert:function(){return this.append("g").attr("class","y axis").attr("transform",function(a){return"translate(0,0)"})},events:{merge:function(){var a=d3.min(f.data,function(a){return f.rmin(a.value)}),c=d3.max(f.data,function(a){return f.rmax(a.value)}),e=0.05*(c-a);f.yScale.range([f._height,0]).domain([a-e,c+e]);return this.call(f.yAxis)},enter:function(){var a=
d3.min(f.data,function(a){return f.rmin(a.value)}),c=d3.max(f.data,function(a){return f.rmax(a.value)}),e=0.05*(c-a);f.yScale.range([f._height,0]).domain([a-e,c+e]);return this.call(f.yAxis)},exit:function(){return this.remove()}}});var r=d3.svg.line().x(function(a){return f.xScale(a[0])}).y(function(a){return f.yScale(a[1])});f.format_data=function(a){for(var c=[],e=0,h=0;h<a.length;h++)for(var g=f.format_datum(a[h]),m=0;m<g.length;m++){var r=g[m];r.color_index=e;r.name=g.name;c.push(r);++e}return c};
f.format_datum=function(a){var c=[],e=0;"undefined"!==typeof a.metadata.minmax_pairs&&(e=a.metadata.minmax_pairs.length);var f=d3.range(a.value.length);if(0<e)for(var g=0;g<e;g++){f.splice(f.indexOf(a.metadata.minmax_pairs[g][0]),1);f.splice(f.indexOf(a.metadata.minmax_pairs[g][1]),1);for(var m=[],r=0;r<a.value[a.metadata.minmax_pairs[g][0]].length;r++)m.push([a.dimension[0][r],a.value[a.metadata.minmax_pairs[g][0]][r]]);for(r=a.value[a.metadata.minmax_pairs[g][1]].length-1;0<=r;r--)m.push([a.dimension[0][r],
a.value[a.metadata.minmax_pairs[g][1]][r]]);m.closeLine=!0;m.fillLine=!0;c.push(m)}for(g=0;g<f.length;g++){e=f[g];m=[];for(r=0;r<a.value[e].length;r++)m.push([a.dimension[0][r],a.value[e][r]]);m.closeLine=!1;m.fillLine=!1;c.push(m)}c.name=a.name;return c};this.layer("data",f.main.append("g"),{dataBind:function(a){return this.selectAll("path.signal").data(f.formatted_data)},insert:function(){return this.append("path")},events:{merge:function(){return this.attr("class","signal").style("stroke",function(a,
c){return f.colors[2*a.color_index]}).style("fill",function(a,c){return a.fillLine?f.colors[2*a.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(a,c){return r(a)+(a.closeLine?"Z":"")})},enter:function(){return this.attr("class","signal").style("stroke",function(a,c){return f.colors[2*a.color_index]}).style("fill",function(a,c){return a.fillLine?f.colors[2*a.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(a,c){return r(a)+(a.closeLine?"Z":"")})},exit:function(){return this.remove()}}});
this.layer("labels",f.main.append("g"),{dataBind:function(a){return this.selectAll("text.pathlabel").data(f.formatted_data)},insert:function(){return this.append("text").attr("class","pathlabel")},events:{merge:function(){return this.attr("x",10).attr("y",function(a,c){return 20*c}).attr("dy","0.5em").style("font","10 Helvetica Neue").text(function(a){return a.name}).attr("fill",function(a,c){return f.colors[2*a.color_index]})},enter:function(){return this.attr("x",10).attr("y",function(a,c){return 20*
c}).attr("dy","0.5em").style("font","10 Helvetica Neue").text(function(a){return a.name}).attr("fill",function(a,c){return f.colors[2*a.color_index]})},exit:function(){return this.remove()}}});var m=function(){for(var a=0;a<f.source_data.length;a++)f.source_data[a].modifiers.min=f.brush.extent()[0],f.source_data[a].modifiers.max=f.brush.extent()[1];f.load_data();f.render()};this.layer("interactive",f.main,{dataBind:function(a){return this.selectAll("g.brush").data([f.data])},insert:function(){f.brush.clear();
return this.append("g").attr("class","brush")},events:{merge:function(){f.brush=d3.svg.brush().x(f.xScale).on("brushend",m);return this.call(f.brush).selectAll("rect").attr("y",0).attr("height",f._height)}}})}});
dataviewer=function(){var f={margin:{top:10,right:10,bottom:10,left:10},_width:100,_height:100,n_columns:10,n_rows:10,create:function(r){f.basenode=d3.select(r);f.width(parseInt(f.basenode.style("width")));f.height(parseInt(d3.min([f.width()/1.61803398875,f.basenode.style("height")])));f.base=f.basenode.append("svg").attr("width",function(a){return f.width()}).attr("height",function(a){return f.height()}).append("g").attr("transform",function(a){return"translate("+f.margin.left+","+f.margin.top+")"});
f.xScale=d3.scale.linear().domain([0,f.n_columns]).range([0,f._width]);f.yScale=d3.scale.linear().domain([0,f.n_rows]).range([f._height,0]);f.column_width=f._width/f.n_columns;f.row_height=f._height/f.n_rows;f.background_grid=f.base.append("g").attr("class","pagelet-grid");for(var m=0;m<=f.n_columns;m++)f.background_grid.append("line").attr("x1",function(){return Math.round(m*f.column_width)}).attr("x2",function(){return Math.round(m*f.column_width)}).attr("y1",0).attr("y2",f._height);for(m=0;m<=
f.n_rows;m++)f.background_grid.append("line").attr("x1",0).attr("x2",f._width).attr("y1",function(){return Math.round(m*f.row_height)}).attr("y2",function(){return Math.round(m*f.row_height)});return f},data:function(r){f.data=f.updateCoords(r)},draw:function(){for(var r=0;r<f.data.length;r++){var m=f.base.append("g").attr("class","chart").attr("transform","translate("+f.data[r].px_coords[0]+","+f.data[r].px_coords[3]+")").chart("dvTimeSeriesChart");m.width(f.data[r].px_coords[2]-f.data[r].px_coords[0]);
m.height(f.data[r].px_coords[1]-f.data[r].px_coords[3]);m.source(f.data[r].data);m.load_data();m.render()}},updateCoords:function(r){for(var m=0;m<r.length;m++){r[m].px_coords=[f.xScale(r[m].plot_coords[0]),f.yScale(r[m].plot_coords[1]),f.xScale(r[m].plot_coords[2]),f.yScale(r[m].plot_coords[3])];for(var a=0;a<r[m].data.length;a++)r[m].data[a].hasOwnProperty("modifiers")||(r[m].data[a].modifiers={}),r[m].data[a].modifiers.width=parseInt(f.xScale(r[m].plot_coords[2])-f.xScale(r[m].plot_coords[0]))}return r},
width:function(r){if(!arguments.length)return f._width+f.margin.left+f.margin.right;f._width=r-f.margin.left-f.margin.right},height:function(r){if(!arguments.length)return f._height+f.margin.top+f.margin.bottom;f._height=r-f.margin.top-f.margin.bottom}};return f}();var golden_ratio=1.61803398875;$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},0)})};
$(function(){$(".column").each(function(f){var r=this;$(r).sortable({connectWith:".column",handle:".portlet-header",update:function(f,a){$.cookie("sortorder"+r.id,$(r).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(f){f=$.cookie("sortorder"+this.id);var r=this;f&&$(f.split(",")).each(function(f,a){$("#"+a).appendTo(r)});$(this).sortable()});$(".portlet").each(function(f){(f=$.cookie(this.id))&&"collapsed"===f&&($(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide())});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=
function(){var f=this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:f[f.length-2]},function(f){window.location=f.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}
function autoPollSummaryDB(){var f=d3.select("#poll-summarydb-server");if(null!==f[0][0]&&"True"===f.text()){var r=null,m=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),a=d3.select("table.main-table tbody"),c=function(c){$.ajax({url:m,dataType:"json",async:!1}).done(function(f){r=new Date(f.timestamp);f=a.selectAll("tr").data(cross(f),function(a){return a[0].shot});f.enter().insert("tr","tr").style("background-color","yellow");var g=f.selectAll("td").data(function(a){return a});
g.enter().append("td").html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"});g.transition().duration(500).each(function(a){d3.select(this).html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"})});f.transition().duration(c).style("background-color","white");f.exit().remove()})};c(1E3);setInterval(function(){summaryUpdateRequired(r)&&c(3E5)},2E3)}}
function getLastShotInDisplayedPage(){var f=-1;d3.selectAll("table.main-table tr").each(function(r,m){if(0<m){var a=Number(d3.select(this).select("td").text());a>f&&(f=a)}});return f}function summaryUpdateRequired(f){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(f){latest_summdb_update=new Date(f.last_update)});return latest_summdb_update>f}
function updateSummaryDB(){var f=getLastShotInDisplayedPage(),r=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(f){r=Number(f.latest_shot)});r>f&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(f){})}
function cross(f){var r=[],m,a;for(m=0;m<f.data.length;m++)for(r[m]=[],r[m].shot,a=0;a<f.attributes.length;a++)r[m][a]={shot:f.data[m].shot,attr:f.attributes[a],value:f.data[m].d[a]};return r}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});d3.select(window).on("mousemove",mousemove).on("mouseup",mouseup);var rect,x0,x1,count,par_rect;
function mousedown(){x0=d3.mouse(this);count=0;par_rect=d3.select(this);rect=d3.select(this.parentNode).append("svg:rect").attr("y",par_rect.attr("y")).attr("height",par_rect.attr("height")).style("fill","#999").style("fill-opacity",0.5);d3.event.preventDefault()}function mousemove(){if(rect){x1=d3.mouse(rect.node());var f=Math.min(x0[0],x1[0]),r=Math.max(x0[0],x1[0]);Math.min(x0[1],x1[1]);Math.max(x0[1],x1[1]);rect.attr("x",f-0.5).attr("width",r-f+1)}}
function mouseup(){rect&&(rect.each(function(f){var r=f.xAxis.scale().invert(d3.select(this).attr("x"));f=f.xAxis.scale().invert(+d3.select(this).attr("x")+ +d3.select(this).attr("width"));var m=new H1DSUri(window.location.href),a=Number(m.getNextFilterID());0==a?m.appendFilter("dim_range",{min:r,max:f}):(a-=1,"dim_range"===m.h1ds_filters[String(a)].name?m.h1ds_filters[String(a)].kwargs={min:r,max:f}:m.appendFilter("dim_range",{min:r,max:f}));$(".h1ds-pagelet").each(function(){d3.select(this).html("");
populatePagelet($(this),m.renderUri())});Modernizr.history&&history.pushState(null,null,m.renderUri())}),rect.remove(),rect=null)}function getSpectrogramUri(f){f=new H1DSUri(f);f.addExtraFilter("slanted_baseline",{window:10});f.addExtraFilter("spectrogram",{bin_size:-1});f.addExtraFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});f.addExtraFilter("y_axis_energy_limit",{threshold:0.995});f.extra_non_h1ds_query.format="bin";f.extra_non_h1ds_query.bin_assert_dtype="uint8";return f}
function getPowerspectrumUri(f,r){var m=new H1DSUri(f);m.addExtraFilter("slanted_baseline",{window:10});m.addExtraFilter("power_spectrum",{});m.addExtraFilter("norm_dim_range",{min:0,max:0.5});m.addExtraFilter("resample_minmax",{n_bins:r});m.extra_non_h1ds_query.format="json";return m}function getRawUri(f,r){var m=new H1DSUri(f);m.addExtraFilter("resample_minmax",{n_bins:r});m.extra_non_h1ds_query.format="json";return m}
ProcessH1DSHeaders=function(f){f=f.split("\n");for(var r={},m=0;m<f.length;m++){var a=f[m].split(":");2===a.length&&a[0].match("^X-H1DS")&&(r[a[0]]=$.trim(a[1]))}return r};
ProcessBinaryData=function(f,r){for(var m=new Uint8Array(str2ab(f)),a=parseInt(r["X-H1DS-ndim"]),c=0,e={data:[],dim:[],n_dim:a},h=0;h<a;h++){e.dim[h]=[];for(var g=parseInt(r["X-H1DS-dim-"+h+"-length"]),q=parseFloat(r["X-H1DS-dim-"+h+"-delta"]),B=parseFloat(r["X-H1DS-dim-"+h+"-first"]),U=0;U<g;U++)e.dim[h][U]=q*U+B}h=parseFloat(r["X-H1DS-data-delta"]);g=parseFloat(r["X-H1DS-data-min"]);if(0<a)for(q=parseInt(r["X-H1DS-dim-0-length"]),parseFloat(r["X-H1DS-dim-0-delta"]),parseFloat(r["X-H1DS-dim-0-first"]),
B=0;B<q;B++)if(1<a){e.data[B]=[];U=parseInt(r["X-H1DS-dim-1-length"]);parseFloat(r["X-H1DS-dim-1-delta"]);parseFloat(r["X-H1DS-dim-1-first"]);for(var w=0;w<U;w++)if(2<a){e.data[B][w]=[];var H=parseInt(r["X-H2DS-dim-2-length"]);parseFloat(r["X-H1DS-dim-2-delta"]);parseFloat(r["X-H1DS-dim-2-first"]);for(var u=0;u<H;u++)e.data[B][w][u]=h*m[c]+g,c++}else e.data[B][w]=m[c],c++}else e.data[B]=h*m[c]+g,c++;return e};function ab2str(f){return String.fromCharCode.apply(null,new Uint8Array(f))}
function str2ab(f){for(var r=new ArrayBuffer(f.length),m=new Uint8Array(r),a=0,c=f.length;a<c;a++)m[a]=f.charCodeAt(a);return r}var plotState={};function datamap(f){}
function loadWorksheet(){var f=[{plot_coords:[0,0,10,10],modifiers:{},data:[{url:window.location.toString(),url_parser:function(f,a){var c=getRawUri(f,a.width);a.hasOwnProperty("min")&&c.updateOrAddBaseFilter("dim_range",{min:a.min,max:a.max});var e;$.ajax({url:c.renderExtraUri(),dataType:"json",async:!1}).done(function(a){e=a.data});return e}}]}],r=dataviewer.create("div.data.worksheet");r.data(f);r.draw()}$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();loadWorksheet()});
