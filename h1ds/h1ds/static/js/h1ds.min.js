d3=function(){function m(a){return null!=a&&!isNaN(a)}function r(a){return a.length}function p(a,c){try{for(var h in c)Object.defineProperty(a.prototype,h,{value:c[h],enumerable:!1})}catch(v){a.prototype=c}}function b(){}function d(){}function g(a,c,h){return function(){var v=h.apply(c,arguments);return v===c?a:v}}function e(a,c){if(c in a)return c;c=c.charAt(0).toUpperCase()+c.substring(1);for(var h=0,v=Ad.length;h<v;++h){var n=Ad[h]+c;if(n in a)return n}}function l(){}function f(){}function q(a){function c(){for(var c=
h,v=-1,b=c.length,d;++v<b;)(d=c[v].on)&&d.apply(this,arguments);return a}var h=[],v=new b;c.on=function(c,w){var b=v.get(c),d;if(2>arguments.length)return b&&b.on;b&&(b.on=null,h=h.slice(0,d=h.indexOf(b)).concat(h.slice(d+1)),v.remove(c));w&&h.push(v.set(c,{on:w}));return a};return c}function u(){s.event.preventDefault()}function x(){for(var a=s.event,c;c=a.sourceEvent;)a=c;return a}function y(a){for(var c=new f,h=0,v=arguments.length;++h<v;)c[arguments[h]]=q(c);c.of=function(h,v){return function(b){try{var d=
b.sourceEvent=s.event;b.target=a;s.event=b;c[b.type].apply(h,v)}finally{s.event=d}}};return c}function t(a){ob(a,K);return a}function B(a){return"function"===typeof a?a:function(){return nc(a,this)}}function z(a){return"function"===typeof a?a:function(){return oc(a,this)}}function N(a,c){function h(){this.removeAttribute(a)}function v(){this.removeAttributeNS(a.space,a.local)}function n(){this.setAttribute(a,c)}function w(){this.setAttributeNS(a.space,a.local,c)}function b(){var h=c.apply(this,arguments);
null==h?this.removeAttribute(a):this.setAttribute(a,h)}function d(){var h=c.apply(this,arguments);null==h?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,h)}a=s.ns.qualify(a);return null==c?a.local?v:h:"function"===typeof c?a.local?d:b:a.local?w:n}function aa(a){return a.trim().replace(/\s+/g," ")}function Z(a){return RegExp("(?:^|\\s+)"+s.requote(a)+"(?:\\s+|$)","g")}function E(a,c){function h(){for(var h=-1;++h<n;)a[h](this,c)}function v(){for(var h=-1,v=c.apply(this,
arguments);++h<n;)a[h](this,v)}a=a.trim().split(/\s+/).map(Ua);var n=a.length;return"function"===typeof c?v:h}function Ua(a){var c=Z(a);return function(h,v){if(n=h.classList)return v?n.add(a):n.remove(a);var n=h.getAttribute("class")||"";v?(c.lastIndex=0,c.test(n)||h.setAttribute("class",aa(n+" "+a))):h.setAttribute("class",aa(n.replace(c," ")))}}function L(a,c,h){function v(){this.style.removeProperty(a)}function n(){this.style.setProperty(a,c,h)}function w(){var v=c.apply(this,arguments);null==
v?this.style.removeProperty(a):this.style.setProperty(a,v,h)}return null==c?v:"function"===typeof c?w:n}function sa(a,c){function h(){delete this[a]}function v(){this[a]=c}function n(){var h=c.apply(this,arguments);null==h?delete this[a]:this[a]=h}return null==c?h:"function"===typeof c?n:v}function A(a){return"function"===typeof a?a:(a=s.ns.qualify(a)).local?function(){return ga.createElementNS(a.space,a.local)}:function(){return ga.createElementNS(this.namespaceURI,a)}}function H(a){return function(){return Bd(this,
a)}}function J(a){arguments.length||(a=s.ascending);return function(c,h){return c&&h?a(c.__data__,h.__data__):!c-!h}}function V(a,c){for(var h=0,v=a.length;h<v;h++)for(var n=a[h],w=0,b=n.length,d;w<b;w++)(d=n[w])&&c(d,w,h);return a}function Cd(a){ob(a,ta);return a}function Rf(a){var c,h;return function(v,n,w){v=a[w].update;var b=v.length;w!=h&&(h=w,c=0);for(n>=c&&(c=n+1);!(n=v[c])&&++c<b;);return n}}function pb(){var a=this.__transition__;a&&++a.active}function Dd(a,c,h){function v(){var c=this[b];
c&&(this.removeEventListener(a,c,c.$),delete this[b])}function n(){var n=f(c,Ba(arguments));v.call(this);this.addEventListener(a,this[b]=n,n.$=h);n._=c}function w(){var c=RegExp("^__on([^.]+)"+s.requote(a)+"$"),h,v;for(v in this)if(h=v.match(c)){var n=this[v];this.removeEventListener(h[1],n,n.$);delete this[v]}}var b="__on"+a,d=a.indexOf("."),f=Fd;0<d&&(a=a.substring(0,d));var e=pc.get(a);e&&(a=e,f=Tf);return d?c?n:v:c?l:w}function Fd(a,c){return function(h){var v=s.event;s.event=h;c[0]=this.__data__;
try{a.apply(this,c)}finally{s.event=v}}}function Tf(a,c){var h=Fd(a,c);return function(a){var c=a.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||h.call(this,a)}}function qb(){var a=".dragsuppress-"+ ++Uf,c="touchmove"+a,h="selectstart"+a,v="dragstart"+a,n="click"+a,w=s.select(X).on(c,u).on(h,u).on(v,u),b=Ca.style,d=b[qc];b[qc]="none";return function(c){w.on(a,null);b[qc]=d;if(c){var h=function(){w.on(n,null)};w.on(n,function(){u();h()},!0);setTimeout(h,0)}}}function Gd(a,c){c.changedTouches&&
(c=c.changedTouches[0]);var h=a.ownerSVGElement||a;if(h.createSVGPoint){var v=h.createSVGPoint();if(0>rc&&(X.scrollX||X.scrollY)){var h=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),n=h[0][0].getScreenCTM();rc=!(n.f||n.e);h.remove()}rc?(v.x=c.pageX,v.y=c.pageY):(v.x=c.clientX,v.y=c.clientY);v=v.matrixTransform(a.getScreenCTM().inverse());return[v.x,v.y]}h=a.getBoundingClientRect();return[c.clientX-h.left-a.clientLeft,c.clientY-
h.top-a.clientTop]}function Ka(a){return 1<a?D/2:-1>a?-D/2:Math.asin(a)}function sc(a){return(Math.exp(a)-Math.exp(-a))/2}function rb(a){return(Math.exp(a)+Math.exp(-a))/2}function Hd(a){return(a=Math.sin(a/2))*a}function Va(){}function Wa(a,c,h){return new tc(a,c,h)}function tc(a,c,h){this.h=a;this.s=c;this.l=h}function uc(a,c,h){function v(a){360<a?a-=360:0>a&&(a+=360);return 60>a?n+(w-n)*a/60:180>a?w:240>a?n+(w-n)*(240-a)/60:n}var n,w;a=isNaN(a)?0:0>(a%=360)?a+360:a;c=isNaN(c)?0:0>c?0:1<c?1:c;
h=0>h?0:1<h?1:h;w=0.5>=h?h*(1+c):h+c-h*c;n=2*h-w;return ma(Math.round(255*v(a+120)),Math.round(255*v(a)),Math.round(255*v(a-120)))}function Xa(a,c,h){return new sb(a,c,h)}function sb(a,c,h){this.h=a;this.c=c;this.l=h}function vc(a,c,h){isNaN(a)&&(a=0);isNaN(c)&&(c=0);return Ya(h,Math.cos(a*=F)*c,Math.sin(a)*c)}function Ya(a,c,h){return new tb(a,c,h)}function tb(a,c,h){this.l=a;this.a=c;this.b=h}function Id(a,c,h){a=(a+16)/116;h=a-h/200;c=wc(a+c/500)*Jd;a=wc(a)*Kd;h=wc(h)*Ld;return ma(xc(3.2404542*
c-1.5371385*a-0.4985314*h),xc(-0.969266*c+1.8760108*a+0.041556*h),xc(0.0556434*c-0.2040259*a+1.0572252*h))}function Md(a,c,h){return 0<a?Xa(Math.atan2(h,c)*P,Math.sqrt(c*c+h*h),a):Xa(NaN,NaN,a)}function wc(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function yc(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function xc(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function ub(a){return ma(a>>16,a>>8&255,a&255)+""}function ma(a,c,h){return new zc(a,c,h)}function zc(a,
c,h){this.r=a;this.g=c;this.b=h}function Za(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Nd(a,c,h){var v=0,n=0,w=0,b,d;if(b=/([a-z]+)\((.*)\)/i.exec(a))switch(d=b[2].split(","),b[1]){case "hsl":return h(parseFloat(d[0]),parseFloat(d[1])/100,parseFloat(d[2])/100);case "rgb":return c(Ac(d[0]),Ac(d[1]),Ac(d[2]))}if(h=vb.get(a))return c(h.r,h.g,h.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(v=a.charAt(1),v+=v,n=a.charAt(2),n+=n,w=a.charAt(3),w+=w):7===a.length&&
(v=a.substring(1,3),n=a.substring(3,5),w=a.substring(5,7)),v=parseInt(v,16),n=parseInt(n,16),w=parseInt(w,16));return c(v,n,w)}function Od(a,c,h){var v=Math.min(a/=255,c/=255,h/=255),n=Math.max(a,c,h),w=n-v,b=(n+v)/2;w?(v=0.5>b?w/(n+v):w/(2-n-v),a=60*(a==n?(c-h)/w+(c<h?6:0):c==n?(h-a)/w+2:(a-c)/w+4)):(a=NaN,v=0<b&&1>b?0:a);return Wa(a,v,b)}function Pd(a,c,h){a=Bc(a);c=Bc(c);h=Bc(h);var v=yc((0.4124564*a+0.3575761*c+0.1804375*h)/Jd),n=yc((0.2126729*a+0.7151522*c+0.072175*h)/Kd);a=yc((0.0193339*a+0.119192*
c+0.9503041*h)/Ld);return Ya(116*n-16,500*(v-n),200*(n-a))}function Bc(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function Ac(a){var c=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*c):c}function M(a){return"function"===typeof a?a:function(){return a}}function W(a){return a}function Cc(a){return function(c,h,v){2===arguments.length&&"function"===typeof h&&(v=h,h=null);return Dc(c,h,a,v)}}function Dc(a,c,h,v){function n(){var a=f.status,c;if(!a&&f.responseText||
200<=a&&300>a||304===a){try{c=h.call(w,f)}catch(v){b.error.call(w,v);return}b.load.call(w,c)}else b.error.call(w,f)}var w={},b=s.dispatch("beforesend","progress","load","error"),d={},f=new XMLHttpRequest,e=null;!X.XDomainRequest||("withCredentials"in f||!/^(http(s)?:)?\/\//.test(a))||(f=new XDomainRequest);"onload"in f?f.onload=f.onerror=n:f.onreadystatechange=function(){3<f.readyState&&n()};f.onprogress=function(a){var c=s.event;s.event=a;try{b.progress.call(w,f)}finally{s.event=c}};w.header=function(a,
c){a=(a+"").toLowerCase();if(2>arguments.length)return d[a];null==c?delete d[a]:d[a]=c+"";return w};w.mimeType=function(a){if(!arguments.length)return c;c=null==a?null:a+"";return w};w.responseType=function(a){if(!arguments.length)return e;e=a;return w};w.response=function(a){h=a;return w};["get","post"].forEach(function(a){w[a]=function(){return w.send.apply(w,[a].concat(Ba(arguments)))}});w.send=function(h,v,n){2===arguments.length&&"function"===typeof v&&(n=v,v=null);f.open(h,a,!0);null==c||"accept"in
d||(d.accept=c+",*/*");if(f.setRequestHeader)for(var g in d)f.setRequestHeader(g,d[g]);null!=c&&f.overrideMimeType&&f.overrideMimeType(c);null!=e&&(f.responseType=e);if(null!=n)w.on("error",n).on("load",function(a){n(null,a)});b.beforesend.call(w,f);f.send(null==v?null:v);return w};w.abort=function(){f.abort();return w};s.rebind(w,b,"on");return null==v?w:w.get(Vf(v))}function Vf(a){return 1===a.length?function(c,h){a(null==c?h:null)}:a}function Ec(){var a=Qd(),a=Rd()-a;24<a?(isFinite(a)&&(clearTimeout(wb),
wb=setTimeout(Ec,a)),xb=0):(xb=1,Sd(Ec))}function Td(a,c,h){var v=arguments.length;2>v&&(c=0);3>v&&(h=Date.now());na.callback=a;na.time=h+c}function Qd(){var a=Date.now();for(na=yb;na;)a>=na.time&&(na.flush=na.callback(a-na.time)),na=na.next;return a}function Rd(){for(var a,c=yb,h=Infinity;c;)c.flush?c=a?a.next=c.next:yb=c.next:(c.time<h&&(h=c.time),c=(a=c).next);zb=a;return h}function Fc(a,c){return c-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Wf(a){return a+""}function Gc(){}function Ud(a,
c,h){var v=h.s=a+c,n=v-a;h.t=a-(v-n)+(c-n)}function Ab(a,c){if(a&&Vd.hasOwnProperty(a.type))Vd[a.type](a,c)}function Hc(a,c,h){var v=-1;h=a.length-h;var n;for(c.lineStart();++v<h;)n=a[v],c.point(n[0],n[1],n[2]);c.lineEnd()}function Wd(a,c){var h=-1,v=a.length;for(c.polygonStart();++h<v;)Hc(a[h],c,1);c.polygonEnd()}function Xf(){function a(a,c){a*=F;c=c*F/2+D/4;var h=a-v,b=Math.cos(c),d=Math.sin(c),f=w*d,e=n*b+f*Math.cos(h),h=f*Math.sin(h);La.add(Math.atan2(h,e));v=a;n=b;w=d}var c,h,v,n,w;ea.point=
function(b,d){ea.point=a;v=(c=b)*F;n=Math.cos(d=(h=d)*F/2+D/4);w=Math.sin(d)};ea.lineEnd=function(){a(c,h)}}function Ma(a){var c=a[0];a=a[1];var h=Math.cos(a);return[h*Math.cos(c),h*Math.sin(c),Math.sin(a)]}function Bb(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}function $a(a,c){return[a[1]*c[2]-a[2]*c[1],a[2]*c[0]-a[0]*c[2],a[0]*c[1]-a[1]*c[0]]}function Ic(a,c){a[0]+=c[0];a[1]+=c[1];a[2]+=c[2]}function Cb(a,c){return[a[0]*c,a[1]*c,a[2]*c]}function Db(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);
a[0]/=c;a[1]/=c;a[2]/=c}function Eb(a){return[Math.atan2(a[1],a[0]),Ka(a[2])]}function Fb(a,c){return Math.abs(a[0]-c[0])<G&&Math.abs(a[1]-c[1])<G}function Jc(a,c){a*=F;var h=Math.cos(c*=F);fb(h*Math.cos(a),h*Math.sin(a),Math.sin(c))}function fb(a,c,h){++gb;ua+=(a-ua)/gb;va+=(c-va)/gb;oa+=(h-oa)/gb}function Xd(){function a(a,w){a*=F;var b=Math.cos(w*=F),d=b*Math.cos(a),b=b*Math.sin(a),f=Math.sin(w),e=Math.atan2(Math.sqrt((e=h*f-v*b)*e+(e=v*d-c*f)*e+(e=c*b-h*d)*e),c*d+h*b+v*f);ab+=e;ha+=e*(c+(c=d));
ia+=e*(h+(h=b));da+=e*(v+(v=f));fb(c,h,v)}var c,h,v;ka.point=function(n,w){n*=F;var b=Math.cos(w*=F);c=b*Math.cos(n);h=b*Math.sin(n);v=Math.sin(w);ka.point=a;fb(c,h,v)}}function Yd(){ka.point=Jc}function Yf(){function a(a,c){a*=F;var h=Math.cos(c*=F),b=h*Math.cos(a),h=h*Math.sin(a),d=Math.sin(c),f=n*d-w*h,e=w*b-v*d,g=v*h-n*b,l=Math.sqrt(f*f+e*e+g*g),q=v*b+n*h+w*d,u=l&&-(1<q?0:-1>q?D:Math.acos(q))/l,l=Math.atan2(l,q);Da+=u*f;Ea+=u*e;pa+=u*g;ab+=l;ha+=l*(v+(v=b));ia+=l*(n+(n=h));da+=l*(w+(w=d));fb(v,
n,w)}var c,h,v,n,w;ka.point=function(b,d){c=b;h=d;ka.point=a;b*=F;var f=Math.cos(d*=F);v=f*Math.cos(b);n=f*Math.sin(b);w=Math.sin(d);fb(v,n,w)};ka.lineEnd=function(){a(c,h);ka.lineEnd=Yd;ka.point=Jc}}function hb(){return!0}function Zd(a,c,h,v,n){var w=[],b=[];a.forEach(function(a){if(!(0>=(c=a.length-1))){var c,h=a[0],v=a[c];if(Fb(h,v)){n.lineStart();for(v=0;v<c;++v)n.point((h=a[v])[0],h[1]);n.lineEnd()}else a={point:h,points:a,other:null,visited:!1,entry:!0,subject:!0},h={point:h,points:[h],other:a,
visited:!1,entry:!1,subject:!1},a.other=h,w.push(a),b.push(h),a={point:v,points:[v],other:null,visited:!1,entry:!1,subject:!0},h={point:v,points:[v],other:a,visited:!1,entry:!0,subject:!1},a.other=h,w.push(a),b.push(h)}});b.sort(c);$d(w);$d(b);if(w.length){if(h)for(a=1,h=!h(b[0].point),c=b.length;a<c;++a)b[a].entry=h=!h;h=w[0];for(var d,f;;){for(c=h;c.visited;)if((c=c.next)===h)return;d=c.points;n.lineStart();do{c.visited=c.other.visited=!0;if(c.entry){if(c.subject)for(a=0;a<d.length;a++)n.point((f=
d[a])[0],f[1]);else v(c.point,c.next.point,1,n);c=c.next}else{if(c.subject)for(d=c.prev.points,a=d.length;0<=--a;)n.point((f=d[a])[0],f[1]);else v(c.point,c.prev.point,-1,n);c=c.prev}c=c.other;d=c.points}while(!c.visited);n.lineEnd()}}}function $d(a){if(c=a.length){for(var c,h=0,v=a[0],n;++h<c;)v.next=n=a[h],n.prev=v,v=n;v.next=n=a[0];n.prev=v}}function ae(a,c,h,v){return function(n){function w(c,h){a(c,h)&&n.point(c,h)}function b(a,c){q.point(a,c)}function d(){u.point=b;q.lineStart()}function f(){u.point=
w;q.lineEnd()}function e(a,c){x.point(a,c);Q.push([a,c])}function g(){x.lineStart();Q=[]}function l(){e(Q[0][0],Q[0][1]);x.lineEnd();var a=x.clean(),c=t.buffer(),h=c.length;Q.pop();T.push(Q);Q=null;if(h)if(a&1){var a=c[0],h=a.length-1,c=-1,v;for(n.lineStart();++c<h;)n.point((v=a[c])[0],v[1]);n.lineEnd()}else 1<h&&a&2&&c.push(c.pop().concat(c.shift())),m.push(c.filter(Zf))}var q=c(n),u={point:w,lineStart:d,lineEnd:f,polygonStart:function(){u.point=e;u.lineStart=g;u.lineEnd=l;m=[];T=[];n.polygonStart()},
polygonEnd:function(){u.point=w;u.lineStart=d;u.lineEnd=f;m=s.merge(m);m.length?Zd(m,$f,null,h,n):v(T)&&(n.lineStart(),h(null,null,1,n),n.lineEnd());n.polygonEnd();m=T=null},sphere:function(){n.polygonStart();n.lineStart();h(null,null,1,n);n.lineEnd();n.polygonEnd()}},m,t=be(),x=c(t),T,Q;return u}}function Zf(a){return 1<a.length}function be(){var a=[],c;return{lineStart:function(){a.push(c=[])},point:function(a,v){c.push([a,v])},lineEnd:l,buffer:function(){var h=a;a=[];c=null;return h},rejoin:function(){1<
a.length&&a.push(a.pop().concat(a.shift()))}}}function $f(a,c){return(0>(a=a.point)[0]?a[1]-D/2-G:D/2-a[1])-(0>(c=c.point)[0]?c[1]-D/2-G:D/2-c[1])}function ce(a,c){var h=a[0],v=a[1],n=[Math.sin(h),-Math.cos(h),0],w=0,b=!1,d=!1,f=0;La.reset();for(var e=0,g=c.length;e<g;++e){var l=c[e],q=l.length;if(q){for(var u=l[0],m=u[0],t=u[1]/2+D/4,s=Math.sin(t),T=Math.cos(t),t=1;;){t===q&&(t=0);a=l[t];var Q=a[0],S=a[1]/2+D/4,x=Math.sin(S),y=Math.cos(S),p=Q-m,r=Math.abs(p)>D,s=s*x;La.add(Math.atan2(s*Math.sin(p),
T*y+s*Math.cos(p)));Math.abs(S)<G&&(d=!0);w+=r?p+(0<=p?2:-2)*D:p;r^m>=h^Q>=h&&(u=$a(Ma(u),Ma(a)),Db(u),u=$a(n,u),Db(u),u=(r^0<=p?-1:1)*Ka(u[2]),v>u&&(f+=r^0<=p?1:-1));if(!t++)break;m=Q;s=x;T=y;u=a}Math.abs(w)>G&&(b=!0)}}return(!d&&!b&&0>La||w<-G)^f&1}function ag(a){function c(a,c){return Math.cos(a)*Math.cos(c)>n}function h(a,c,h){var v=Ma(a),w=Ma(c),b=[1,0,0],w=$a(v,w),d=Bb(w,w),v=w[0],f=d-v*v;if(!f)return!h&&a;d=n*d/f;f=-n*v/f;v=$a(b,w);b=Cb(b,d);w=Cb(w,f);Ic(b,w);w=Bb(b,v);d=Bb(v,v);f=w*w-d*(Bb(b,
b)-1);if(!(0>f)){var eb=Math.sqrt(f),f=Cb(v,(-w-eb)/d);Ic(f,b);f=Eb(f);if(!h)return f;h=a[0];var I=c[0];a=a[1];c=c[1];var e;I<h&&(e=h,h=I,I=e);var O=I-h,g=Math.abs(O-D)<G,l=g||O<G;!g&&c<a&&(e=a,a=c,c=e);if(l?g?0<a+c^f[1]<(Math.abs(f[0]-h)<G?a:c):a<=f[1]&&f[1]<=c:O>D^(h<=f[0]&&f[0]<=I))return c=Cb(v,(-w+eb)/d),Ic(c,b),[f,Eb(c)]}}function v(c,h){var v=w?a:D-a,n=0;c<-v?n|=1:c>v&&(n|=2);h<-v?n|=4:h>v&&(n|=8);return n}var n=Math.cos(a),w=0<n,b=[a,0],d=Math.abs(n)>G,f=Mc(a,6*F);return ae(c,function(a){var n,
b,f,I,e;return{lineStart:function(){I=f=!1;e=1},point:function(O,g){var l=[O,g],q,u=c(O,g),m=w?u?0:v(O,g):u?v(O+(0>O?D:-D),g):0;!n&&(I=f=u)&&a.lineStart();u!==f&&(q=h(n,l),Fb(n,q)||Fb(l,q))&&(l[0]+=G,l[1]+=G,u=c(l[0],l[1]));if(u!==f)e=0,u?(a.lineStart(),q=h(l,n),a.point(q[0],q[1])):(q=h(n,l),a.point(q[0],q[1]),a.lineEnd()),n=q;else if(d&&n&&w^u){var t;m&b||!(t=h(l,n,!0))||(e=0,w?(a.lineStart(),a.point(t[0][0],t[0][1]),a.point(t[1][0],t[1][1]),a.lineEnd()):(a.point(t[1][0],t[1][1]),a.lineEnd(),a.lineStart(),
a.point(t[0][0],t[0][1])))}!u||n&&Fb(n,l)||a.point(l[0],l[1]);n=l;f=u;b=m},lineEnd:function(){f&&a.lineEnd();n=null},clean:function(){return e|(I&&f)<<1}}},f,function(a){return ce(b,a)})}function de(a,c,h,v){function n(v,n){return Math.abs(v[0]-a)<G?0<n?0:3:Math.abs(v[0]-h)<G?0<n?2:1:Math.abs(v[1]-c)<G?0<n?1:0:0<n?3:2}function w(a,c){return b(a.point,c.point)}function b(a,c){var h=n(a,1),v=n(c,1);return h!==v?h-v:0===h?c[1]-a[1]:1===h?a[0]-c[0]:2===h?a[1]-c[1]:c[0]-a[0]}return function(f){function d(w){w=
n(w,-1);return e([0===w||3===w?a:h,1<w?v:c])}function e(a){for(var c=0,h=x.length,v=a[1],n=0;n<h;++n)for(var w=1,b=x[n],f=b.length,d=b[0],I;w<f;++w)I=b[w],d[1]<=v?I[1]>v&&0<(I[0]-d[0])*(a[1]-d[1])-(a[0]-d[0])*(I[1]-d[1])&&++c:I[1]<=v&&0>(I[0]-d[0])*(a[1]-d[1])-(a[0]-d[0])*(I[1]-d[1])&&--c,d=I;return 0!==c}function g(w,f,d,eb){var e=0,O=0;if(null==w||(e=n(w,d))!==(O=n(f,d))||0>b(w,f)^0<d){do eb.point(0===e||3===e?a:h,1<e?v:c);while((e=(e+d+4)%4)!==O)}else eb.point(f[0],f[1])}function l(n,w){a<=n&&
(n<=h&&c<=w&&w<=v)&&f.point(n,w)}function q(n,w){n=Math.max(-Gb,Math.min(Gb,n));w=Math.max(-Gb,Math.min(Gb,w));var b=a<=n&&n<=h&&c<=w&&w<=v;x&&T.push([n,w]);if(z)S=n,y=w,p=b,z=!1,b&&(f.lineStart(),f.point(n,w));else if(b&&B)f.point(n,w);else{var d=[r,A],I=[n,w],e;e=I[0]-d[0];var g=I[1]-d[1],O=[0,1];Math.abs(e)<G&&Math.abs(g)<G?e=a<=d[0]&&d[0]<=h&&c<=d[1]&&d[1]<=v:Hb(a-d[0],e,O)&&Hb(d[0]-h,-e,O)&&Hb(c-d[1],g,O)&&Hb(d[1]-v,-g,O)?(1>O[1]&&(I[0]=d[0]+O[1]*e,I[1]=d[1]+O[1]*g),0<O[0]&&(d[0]+=O[0]*e,d[1]+=
O[0]*g),e=!0):e=!1;e?(B||(f.lineStart(),f.point(d[0],d[1])),f.point(I[0],I[1]),b||f.lineEnd()):b&&(f.lineStart(),f.point(n,w))}r=n;A=w;B=b}var u=f,m=be(),t,x,T,Q={point:l,lineStart:function(){Q.point=q;x&&x.push(T=[]);z=!0;B=!1;r=A=NaN},lineEnd:function(){t&&(q(S,y),p&&B&&m.rejoin(),t.push(m.buffer()));Q.point=l;B&&f.lineEnd()},polygonStart:function(){f=m;t=[];x=[]},polygonEnd:function(){f=u;(t=s.merge(t)).length?(f.polygonStart(),Zd(t,w,d,g,f),f.polygonEnd()):e([a,c])&&(f.polygonStart(),f.lineStart(),
g(null,null,1,f),f.lineEnd(),f.polygonEnd());t=x=T=null}},S,y,p,r,A,B,z;return Q}}function Hb(a,c,h){if(Math.abs(c)<G)return 0>=a;a/=c;if(0<c){if(a>h[1])return!1;a>h[0]&&(h[0]=a)}else{if(a<h[0])return!1;a<h[1]&&(h[1]=a)}return!0}function ee(a,c){function h(h,n){return h=a(h,n),c(h[0],h[1])}a.invert&&c.invert&&(h.invert=function(h,n){return h=c.invert(h,n),h&&a.invert(h[0],h[1])});return h}function Oc(a){var c=0,h=D/3,v=Pc(a);a=v(c,h);a.parallels=function(a){return arguments.length?v(c=a[0]*D/180,
h=a[1]*D/180):[180*(c/D),180*(h/D)]};return a}function fe(a,c){function h(a,c){var h=Math.sqrt(w-2*n*Math.sin(c))/n;return[h*Math.sin(a*=n),b-h*Math.cos(a)]}var v=Math.sin(a),n=(v+Math.sin(c))/2,w=1+v*(2*n-v),b=Math.sqrt(w)/n;h.invert=function(a,c){var h=b-c;return[Math.atan2(a,h)/n,Ka((w-(a*a+h*h)*n*n)/(2*n))]};return h}function bg(){function a(a,c){Ib+=n*a-v*c;v=a;n=c}var c,h,v,n;Fa.point=function(w,b){Fa.point=a;c=v=w;h=n=b};Fa.lineEnd=function(){a(c,h)}}function cg(){function a(a,c){b.push("M",
a,",",c,w)}function c(a,c){b.push("M",a,",",c);d.point=h}function h(a,c){b.push("L",a,",",c)}function v(){d.point=a}function n(){b.push("Z")}var w=ge(4.5),b=[],d={point:a,lineStart:function(){d.point=c},lineEnd:v,polygonStart:function(){d.lineEnd=n},polygonEnd:function(){d.lineEnd=v;d.point=a},pointRadius:function(a){w=ge(a);return d},result:function(){if(b.length){var a=b.join("");b=[];return a}}};return d}function ge(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}
function Oa(a,c){ua+=a;va+=c;++oa}function he(){function a(a,n){var w=a-c,b=n-h,w=Math.sqrt(w*w+b*b);ha+=w*(c+a)/2;ia+=w*(h+n)/2;da+=w;Oa(c=a,h=n)}var c,h;la.point=function(v,n){la.point=a;Oa(c=v,h=n)}}function ie(){la.point=Oa}function dg(){function a(a,c){var h=a-v,b=c-n,h=Math.sqrt(h*h+b*b);ha+=h*(v+a)/2;ia+=h*(n+c)/2;da+=h;h=n*a-v*c;Da+=h*(v+a);Ea+=h*(n+c);pa+=3*h;Oa(v=a,n=c)}var c,h,v,n;la.point=function(w,b){la.point=a;Oa(c=v=w,h=n=b)};la.lineEnd=function(){a(c,h)}}function eg(a){function c(c,
h){a.moveTo(c,h);a.arc(c,h,b,0,2*D)}function h(c,h){a.moveTo(c,h);d.point=v}function v(c,h){a.lineTo(c,h)}function n(){d.point=c}function w(){a.closePath()}var b=4.5,d={point:c,lineStart:function(){d.point=h},lineEnd:n,polygonStart:function(){d.lineEnd=w},polygonEnd:function(){d.lineEnd=n;d.point=c},pointRadius:function(a){b=a;return d},result:l};return d}function je(a){function c(c){function n(h,v){h=a(h,v);c.point(h[0],h[1])}function v(){y=NaN;z.point=b;c.lineStart()}function b(n,v){var d=Ma([n,
v]),f=a(n,v);h(y,p,x,r,A,B,y=f[0],p=f[1],x=n,r=d[0],A=d[1],B=d[2],w,c);c.point(y,p)}function d(){z.point=n;c.lineEnd()}function f(){v();z.point=e;z.lineEnd=g}function e(a,c){b(l=a,c);q=y;u=p;m=r;t=A;s=B;z.point=b}function g(){h(y,p,x,r,A,B,q,u,l,m,t,s,w,c);z.lineEnd=d;d()}var l,q,u,m,t,s,x,y,p,r,A,B,z={point:n,lineStart:v,lineEnd:d,polygonStart:function(){c.polygonStart();z.lineStart=f},polygonEnd:function(){c.polygonEnd();z.lineStart=v}};return z}function h(c,w,b,d,f,e,g,l,q,u,m,t,s,x){var y=g-c,
p=l-w,r=y*y+p*p;if(r>4*v&&s--){var A=d+u,B=f+m,z=e+t,H=Math.sqrt(A*A+B*B+z*z),J=Math.asin(z/=H),L=Math.abs(Math.abs(z)-1)<G?(b+q)/2:Math.atan2(B,A),Na=a(L,J),J=Na[0],Na=Na[1],C=J-c,D=Na-w,E=p*C-y*D;if(E*E/r>v||0.3<Math.abs((y*C+p*D)/r-0.5)||d*u+f*m+e*t<n)h(c,w,b,d,f,e,J,Na,L,A/=H,B/=H,z,s,x),x.point(J,Na),h(J,Na,L,A,B,z,g,l,q,u,m,t,s,x)}}var v=0.5,n=Math.cos(30*F),w=16;c.precision=function(a){if(!arguments.length)return Math.sqrt(v);w=0<(v=a*a)&&16;return c};return c}function Jb(a){this.stream=a}
function fg(a){var c=je(function(c,v){return a([c*P,v*P])});return function(a){var v=new Jb(a=c(a));v.point=function(c,v){a.point(c*F,v*F)};return v}}function Ga(a){return Pc(function(){return a})()}function Pc(a){function c(a){a=d(a[0]*F,a[1]*F);return[a[0]*e+T,Q-a[1]*e]}function h(a){return(a=d.invert((a[0]-T)/e,(Q-a[1])/e))&&[a[0]*P,a[1]*P]}function v(){d=ee(b=Qc(m,t,x),w);var a=w(q,u);T=g-a[0]*e;Q=l+a[1]*e;return n()}function n(){A&&(A.valid=!1,A=null);return c}var w,b,d,f=je(function(a,c){a=
w(a,c);return[a[0]*e+T,Q-a[1]*e]}),e=150,g=480,l=250,q=0,u=0,m=0,t=0,x=0,T,Q,S=ke,y=W,p=null,r=null,A;c.stream=function(a){A&&(A.valid=!1);A=gg(b,S(f(y(a))));A.valid=!0;return A};c.clipAngle=function(a){if(!arguments.length)return p;S=null==a?(p=a,ke):ag((p=+a)*F);return n()};c.clipExtent=function(a){if(!arguments.length)return r;y=(r=a)?de(a[0][0],a[0][1],a[1][0],a[1][1]):W;return n()};c.scale=function(a){if(!arguments.length)return e;e=+a;return v()};c.translate=function(a){if(!arguments.length)return[g,
l];g=+a[0];l=+a[1];return v()};c.center=function(a){if(!arguments.length)return[q*P,u*P];q=a[0]%360*F;u=a[1]%360*F;return v()};c.rotate=function(a){if(!arguments.length)return[m*P,t*P,x*P];m=a[0]%360*F;t=a[1]%360*F;x=2<a.length?a[2]%360*F:0;return v()};s.rebind(c,f,"precision");return function(){w=a.apply(this,arguments);c.invert=w.invert&&h;return v()}}function gg(a,c){var h=new Jb(c);h.point=function(h,n){n=a(h*F,n*F);h=n[0];c.point(h>D?h-2*D:h<-D?h+2*D:h,n[1])};return h}function ib(a,c){return[a,
c]}function Qc(a,c,h){return a?c||h?ee(le(a),me(c,h)):le(a):c||h?me(c,h):ib}function ne(a){return function(c,h){return c+=a,[c>D?c-2*D:c<-D?c+2*D:c,h]}}function le(a){var c=ne(a);c.invert=ne(-a);return c}function me(a,c){function h(a,c){var h=Math.cos(c),d=Math.cos(a)*h,h=Math.sin(a)*h,f=Math.sin(c),e=f*v+d*n;return[Math.atan2(h*w-e*b,d*v-f*n),Ka(e*w+h*b)]}var v=Math.cos(a),n=Math.sin(a),w=Math.cos(c),b=Math.sin(c);h.invert=function(a,c){var h=Math.cos(c),d=Math.cos(a)*h,h=Math.sin(a)*h,f=Math.sin(c),
e=f*w-h*b;return[Math.atan2(h*w+f*b,d*v+e*n),Ka(e*v-d*n)]};return h}function Mc(a,c){var h=Math.cos(a),v=Math.sin(a);return function(n,w,b,d){var f=b*c;if(null!=n){if(n=oe(h,n),w=oe(h,w),0<b?n<w:n>w)n+=2*b*D}else n=a+2*b*D,w=a-0.5*f;for(var e;0<b?n>w:n<w;n-=f)d.point((e=Eb([h,-v*Math.cos(n),-v*Math.sin(n)]))[0],e[1])}}function oe(a,c){var h=Ma(c);h[0]-=a;Db(h);var v=1<-h[1]?0:-1>-h[1]?D:Math.acos(-h[1]);return((0>-h[2]?-v:v)+2*Math.PI-G)%(2*Math.PI)}function pe(a,c,h){var v=s.range(a,c-G,h).concat(c);
return function(a){return v.map(function(c){return[a,c]})}}function qe(a,c,h){var v=s.range(a,c-G,h).concat(c);return function(a){return v.map(function(c){return[c,a]})}}function Rc(a){return a.source}function Sc(a){return a.target}function hg(a,c,h,v){var n=Math.cos(c),w=Math.sin(c),b=Math.cos(v),d=Math.sin(v),f=n*Math.cos(a),e=n*Math.sin(a),g=b*Math.cos(h),l=b*Math.sin(h),q=2*Math.asin(Math.sqrt(Hd(v-c)+n*b*Hd(h-a))),u=1/Math.sin(q);h=q?function(a){var c=Math.sin(a*=q)*u,h=Math.sin(q-a)*u;a=h*f+
c*g;var n=h*e+c*l,c=h*w+c*d;return[Math.atan2(n,a)*P,Math.atan2(c,Math.sqrt(a*a+n*n))*P]}:function(){return[a*P,c*P]};h.distance=q;return h}function jb(a,c){function h(c,h){var w=Math.cos(c),b=Math.cos(h),w=a(w*b);return[w*b*Math.sin(c),w*Math.sin(h)]}h.invert=function(a,h){var w=Math.sqrt(a*a+h*h),b=c(w),d=Math.sin(b),b=Math.cos(b);return[Math.atan2(a*d,w*b),Math.asin(w&&h*d/w)]};return h}function re(a,c){function h(a,c){var h=Math.abs(Math.abs(c)-D/2)<G?0:b/Math.pow(Math.tan(D/4+c/2),n);return[h*
Math.sin(n*a),b-h*Math.cos(n*a)]}var v=Math.cos(a),n=a===c?Math.sin(a):Math.log(v/Math.cos(c))/Math.log(Math.tan(D/4+c/2)/Math.tan(D/4+a/2)),b=v*Math.pow(Math.tan(D/4+a/2),n)/n;if(!n)return Kb;h.invert=function(a,c){var h=b-c,v=(0<n?1:0>n?-1:0)*Math.sqrt(a*a+h*h);return[Math.atan2(a,h)/n,2*Math.atan(Math.pow(b/v,1/n))-D/2]};return h}function se(a,c){function h(a,c){var h=b-c;return[h*Math.sin(n*a),b-h*Math.cos(n*a)]}var v=Math.cos(a),n=a===c?Math.sin(a):(v-Math.cos(c))/(c-a),b=v/n+a;if(Math.abs(n)<
G)return ib;h.invert=function(a,c){var h=b-c;return[Math.atan2(a,h)/n,b-(0<n?1:0>n?-1:0)*Math.sqrt(a*a+h*h)]};return h}function Kb(a,c){return[a,Math.log(Math.tan(D/4+c/2))]}function te(a){var c=Ga(a),h=c.scale,v=c.translate,n=c.clipExtent,b;c.scale=function(){var a=h.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a};c.translate=function(){var a=v.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a};c.clipExtent=function(a){var d=n.apply(c,arguments);if(d===c){if(b=null==a){var f=D*h(),
e=v();n([[e[0]-f,e[1]-f],[e[0]+f,e[1]+f]])}}else b&&(d=null);return d};return c.clipExtent(null)}function Tc(a,c){var h=Math.cos(c)*Math.sin(a);return[Math.log((1+h)/(1-h))/2,Math.atan2(Math.tan(c),Math.cos(a))]}function ue(a){function c(c){function d(){e.push("M",b(a(g),f))}for(var e=[],g=[],l=-1,I=c.length,q,u=M(h),m=M(v);++l<I;)n.call(this,q=c[l],l)?g.push([+u.call(this,q,l),+m.call(this,q,l)]):g.length&&(d(),g=[]);g.length&&d();return e.length?e.join(""):null}var h=qa,v=wa,n=hb,b=fa,d=b.key,f=
0.7;c.x=function(a){if(!arguments.length)return h;h=a;return c};c.y=function(a){if(!arguments.length)return v;v=a;return c};c.defined=function(a){if(!arguments.length)return n;n=a;return c};c.interpolate=function(a){if(!arguments.length)return d;d="function"===typeof a?b=a:(b=Uc.get(a)||fa).key;return c};c.tension=function(a){if(!arguments.length)return f;f=a;return c};return c}function qa(a){return a[0]}function wa(a){return a[1]}function fa(a){return a.join("L")}function Vc(a){for(var c=0,h=a.length,
v=a[0],n=[v[0],",",v[1]];++c<h;)n.push("V",(v=a[c])[1],"H",v[0]);return n.join("")}function Wc(a){for(var c=0,h=a.length,v=a[0],n=[v[0],",",v[1]];++c<h;)n.push("H",(v=a[c])[0],"V",v[1]);return n.join("")}function Lb(a,c){if(1>c.length||a.length!=c.length&&a.length!=c.length+2)return fa(a);var h=a.length!=c.length,v="",n=a[0],b=a[1],d=c[0],f=d,e=1;h&&(v+="Q"+(b[0]-2*d[0]/3)+","+(b[1]-2*d[1]/3)+","+b[0]+","+b[1],n=a[1],e=2);if(1<c.length)for(f=c[1],b=a[e],e++,v+="C"+(n[0]+d[0])+","+(n[1]+d[1])+","+
(b[0]-f[0])+","+(b[1]-f[1])+","+b[0]+","+b[1],n=2;n<c.length;n++,e++)b=a[e],f=c[n],v+="S"+(b[0]-f[0])+","+(b[1]-f[1])+","+b[0]+","+b[1];h&&(h=a[e],v+="Q"+(b[0]+2*f[0]/3)+","+(b[1]+2*f[1]/3)+","+h[0]+","+h[1]);return v}function Xc(a,c){for(var h=[],b=(1-c)/2,n,w=a[0],d=a[1],f=1,e=a.length;++f<e;)n=w,w=d,d=a[f],h.push([b*(d[0]-n[0]),b*(d[1]-n[1])]);return h}function ve(a){if(3>a.length)return fa(a);var c=1,h=a.length,b=a[0],n=b[0],w=b[1],d=[n,n,n,(b=a[1])[0]],f=[w,w,w,b[1]],n=[n,",",w,"L",ja(Ha,d),
",",ja(Ha,f)];for(a.push(a[h-1]);++c<=h;)b=a[c],d.shift(),d.push(b[0]),f.shift(),f.push(b[1]),Yc(n,d,f);a.pop();n.push("L",b);return n.join("")}function ja(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]}function Yc(a,c,h){a.push("C",ja(we,c),",",ja(we,h),",",ja(xe,c),",",ja(xe,h),",",ja(Ha,c),",",ja(Ha,h))}function Zc(a,c){return(c[1]-a[1])/(c[0]-a[0])}function ig(a,c,h,b){var n,w,d;a=b[a];n=a[0];w=a[1];a=b[c];c=a[0];d=a[1];a=b[h];return 0<(a[1]-w)*(c-n)-(d-w)*(a[0]-n)}function $c(a,c,h){return(h[0]-
c[0])*(a[1]-c[1])<(h[1]-c[1])*(a[0]-c[0])}function ye(a,c,h,b){var n=a[0],w=h[0],d=c[0]-n,f=b[0]-w;a=a[1];h=h[1];c=c[1]-a;b=b[1]-h;w=(f*(a-h)-b*(n-w))/(b*d-f*c);return[n+w*d,a+w*c]}function ze(a){var c=a[0];a=a[a.length-1];return!(c[0]-a[0]||c[1]-a[1])}function ad(a,c){var h=a.map(function(a,c){return{index:c,x:a[0],y:a[1]}}).sort(function(a,c){return a.y<c.y?-1:a.y>c.y?1:a.x<c.x?-1:a.x>c.x?1:0}),b=null,n={list:[],leftEnd:null,rightEnd:null,init:function(){n.leftEnd=n.createHalfEdge(null,"l");n.rightEnd=
n.createHalfEdge(null,"l");n.leftEnd.r=n.rightEnd;n.rightEnd.l=n.leftEnd;n.list.unshift(n.leftEnd,n.rightEnd)},createHalfEdge:function(a,c){return{edge:a,side:c,vertex:null,l:null,r:null}},insert:function(a,c){c.l=a;c.r=a.r;a.r.l=c;a.r=c},leftBound:function(a){var c=n.leftEnd;do c=c.r;while(c!=n.rightEnd&&w.rightOf(c,a));return c=c.l},del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?b:a.edge.region[a.side]},
rightRegion:function(a){return null==a.edge?b:a.edge.region[bd[a.side]]}},w={bisect:function(a,c){var h={region:{l:a,r:c},ep:{l:null,r:null}},b=c.x-a.x,n=c.y-a.y;h.c=a.x*b+a.y*n+0.5*(b*b+n*n);(0<b?b:-b)>(0<n?n:-n)?(h.a=1,h.b=n/b,h.c/=b):(h.b=1,h.a=b/n,h.c/=n);return h},intersect:function(a,c){var h=a.edge,b=c.edge;if(!h||!b||h.region.r==b.region.r)return null;var n=h.a*b.b-h.b*b.a;if(1E-10>Math.abs(n))return null;var v=(h.c*b.b-b.c*h.b)/n,n=(b.c*h.a-h.c*b.a)/n,d=h.region.r,w=b.region.r;d.y<w.y||d.y==
w.y&&d.x<w.x?d=a:(d=c,h=b);return(h=v>=h.region.r.x)&&"l"===d.side||!h&&"r"===d.side?null:{x:v,y:n}},rightOf:function(a,c){var h=a.edge,b=h.region.r,n=c.x>b.x;if(n&&"l"===a.side)return 1;if(!n&&"r"===a.side)return 0;if(1===h.a){var v=c.y-b.y,d=c.x-b.x,w=0,f=0;!n&&0>h.b||n&&0<=h.b?f=w=v>=h.b*d:(f=c.x+c.y*h.b>h.c,0>h.b&&(f=!f),f||(w=1));w||(b=b.x-h.region.l.x,f=h.b*(d*d-v*v)<b*v*(1+2*d/b+h.b*h.b),0>h.b&&(f=!f))}else d=h.c-h.a*c.x,h=c.y-d,v=c.x-b.x,b=d-b.y,f=h*h>v*v+b*b;return"l"===a.side?f:!f},endPoint:function(a,
h,b){a.ep[h]=b;a.ep[bd[h]]&&c(a)},distance:function(a,c){var h=a.x-c.x,b=a.y-c.y;return Math.sqrt(h*h+b*b)}},d={list:[],insert:function(a,c,h){a.vertex=c;a.ystar=c.y+h;h=0;for(var b=d.list,n=b.length;h<n;h++){var v=b[h];if(!(a.ystar>v.ystar||a.ystar==v.ystar&&c.x>v.vertex.x))break}b.splice(h,0,a)},del:function(a){for(var c=0,h=d.list,b=h.length;c<b&&h[c]!=a;++c);h.splice(c,1)},empty:function(){return 0===d.list.length},nextEvent:function(a){for(var c=0,h=d.list,b=h.length;c<b;++c)if(h[c]==a)return h[c+
1];return null},min:function(){var a=d.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return d.list.shift()}};n.init();for(var b=h.shift(),f=h.shift(),e,g,l,q,u,m,t,s,x;;)if(d.empty()||(e=d.min()),f&&(d.empty()||f.y<e.y||f.y==e.y&&f.x<e.x)){g=n.leftBound(f);l=n.right(g);t=n.rightRegion(g);x=w.bisect(t,f);m=n.createHalfEdge(x,"l");n.insert(g,m);if(s=w.intersect(g,m))d.del(g),d.insert(g,s,w.distance(s,f));g=m;m=n.createHalfEdge(x,"r");n.insert(g,m);(s=w.intersect(m,l))&&d.insert(m,s,
w.distance(s,f));f=h.shift()}else if(d.empty())break;else{g=d.extractMin();q=n.left(g);l=n.right(g);u=n.right(l);t=n.leftRegion(g);m=n.rightRegion(l);s=g.vertex;w.endPoint(g.edge,g.side,s);w.endPoint(l.edge,l.side,s);n.del(g);d.del(l);n.del(l);g="l";t.y>m.y&&(g=t,t=m,m=g,g="r");x=w.bisect(t,m);m=n.createHalfEdge(x,g);n.insert(q,m);w.endPoint(x,bd[g],s);if(s=w.intersect(q,m))d.del(q),d.insert(q,s,w.distance(s,t));(s=w.intersect(m,u))&&d.insert(m,s,w.distance(s,t))}for(g=n.right(n.leftEnd);g!=n.rightEnd;g=
n.right(g))c(g.edge)}function jg(a){return a.x}function kg(a){return a.y}function Ae(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function kb(a,c,h,b,n,d){if(!a(c,h,b,n,d)){var f=0.5*(h+n),e=0.5*(b+d);c=c.nodes;c[0]&&kb(a,c[0],h,b,f,e);c[1]&&kb(a,c[1],f,b,n,e);c[2]&&kb(a,c[2],h,e,f,d);c[3]&&kb(a,c[3],f,e,n,d)}}function cd(a,c){a=s.rgb(a);c=s.rgb(c);var h=a.r,b=a.g,n=a.b,d=c.r-h,f=c.g-b,e=c.b-n;return function(a){return"#"+Za(Math.round(h+d*a))+Za(Math.round(b+f*a))+Za(Math.round(n+e*a))}}function Be(a,
c){var h={},b={},n;for(n in a)n in c?h[n]=Pa(a[n],c[n]):b[n]=a[n];for(n in c)n in a||(b[n]=c[n]);return function(a){for(n in h)b[n]=h[n](a);return b}}function xa(a,c){c-=a=+a;return function(h){return a+c*h}}function Ce(a,c){var h,b,n=0,d=[],f=[],e,g;a+="";c+="";for(b=Mb.lastIndex=0;h=Mb.exec(c);++b)h.index&&d.push(c.substring(n,h.index)),f.push({i:d.length,x:h[0]}),d.push(null),n=Mb.lastIndex;n<c.length&&d.push(c.substring(n));b=0;for(e=f.length;(h=Mb.exec(a))&&b<e;++b)if(g=f[b],g.x==h[0]){if(g.i)if(null==
d[g.i+1])for(d[g.i-1]+=g.x,d.splice(g.i,1),h=b+1;h<e;++h)f[h].i--;else for(d[g.i-1]+=g.x+d[g.i+1],d.splice(g.i,2),h=b+1;h<e;++h)f[h].i-=2;else if(null==d[g.i+1])d[g.i]=g.x;else for(d[g.i]=g.x+d[g.i+1],d.splice(g.i+1,1),h=b+1;h<e;++h)f[h].i--;f.splice(b,1);e--;b--}else g.x=xa(parseFloat(h[0]),parseFloat(g.x));for(;b<e;)g=f.pop(),null==d[g.i+1]?d[g.i]=g.x:(d[g.i]=g.x+d[g.i+1],d.splice(g.i+1,1)),e--;return 1===d.length?null==d[0]?(g=f[0].x,function(a){return g(a)+""}):function(){return c}:function(a){for(b=
0;b<e;++b)d[(g=f[b]).i]=g.x(a);return d.join("")}}function Pa(a,c){for(var h=s.interpolators.length,b;0<=--h&&!(b=s.interpolators[h](a,c)););return b}function Nb(a,c){var h=[],b=[],n=a.length,d=c.length,f=Math.min(a.length,c.length),e;for(e=0;e<f;++e)h.push(Pa(a[e],c[e]));for(;e<n;++e)b[e]=a[e];for(;e<d;++e)b[e]=c[e];return function(a){for(e=0;e<f;++e)b[e]=h[e](a);return b}}function lg(a){return function(c){return 0>=c?0:1<=c?1:a(c)}}function De(a){return function(c){return 1-a(1-c)}}function Ee(a){return function(c){return 0.5*
(0.5>c?a(2*c):2-a(2-2*c))}}function mg(a){return a*a}function ng(a){return a*a*a}function og(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,h=c*a;return 4*(0.5>a?h:3*(a-c)+h-0.75)}function pg(a){return 1-Math.cos(a*D/2)}function qg(a){return Math.pow(2,10*(a-1))}function rg(a){return 1-Math.sqrt(1-a*a)}function sg(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Fe(a,c){c-=a;return function(h){return Math.round(a+
c*h)}}function Ge(a){var c=[a.a,a.b],h=[a.c,a.d],b=He(c),n=c[0]*h[0]+c[1]*h[1],d=-n;h[0]+=d*c[0];h[1]+=d*c[1];d=He(h)||0;c[0]*h[1]<h[0]*c[1]&&(c[0]*=-1,c[1]*=-1,b*=-1,n*=-1);this.rotate=(b?Math.atan2(c[1],c[0]):Math.atan2(-h[0],h[1]))*P;this.translate=[a.e,a.f];this.scale=[b,d];this.skew=d?Math.atan2(n,d)*P:0}function He(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);c&&(a[0]/=c,a[1]/=c);return c}function Ie(a,c){var h=[],b=[],n,d=s.transform(a),f=s.transform(c),e=d.translate,g=f.translate,l=d.rotate,q=
f.rotate,u=d.skew,m=f.skew,d=d.scale,f=f.scale;e[0]!=g[0]||e[1]!=g[1]?(h.push("translate(",null,",",null,")"),b.push({i:1,x:xa(e[0],g[0])},{i:3,x:xa(e[1],g[1])})):g[0]||g[1]?h.push("translate("+g+")"):h.push("");l!=q?(180<l-q?q+=360:180<q-l&&(l+=360),b.push({i:h.push(h.pop()+"rotate(",null,")")-2,x:xa(l,q)})):q&&h.push(h.pop()+"rotate("+q+")");u!=m?b.push({i:h.push(h.pop()+"skewX(",null,")")-2,x:xa(u,m)}):m&&h.push(h.pop()+"skewX("+m+")");d[0]!=f[0]||d[1]!=f[1]?(n=h.push(h.pop()+"scale(",null,",",
null,")"),b.push({i:n-4,x:xa(d[0],f[0])},{i:n-2,x:xa(d[1],f[1])})):1==f[0]&&1==f[1]||h.push(h.pop()+"scale("+f+")");n=b.length;return function(a){for(var c=-1,d;++c<n;)h[(d=b[c]).i]=d.x(a);return h.join("")}}function tg(a,c){c=c-(a=+a)?1/(c-a):0;return function(h){return(h-a)*c}}function ug(a,c){c=c-(a=+a)?1/(c-a):0;return function(h){return Math.max(0,Math.min(1,(h-a)*c))}}function vg(a){var c=a.source;a=a.target;var h;var b=a;if(c===b)h=c;else{h=Je(c);for(var b=Je(b),n=h.pop(),d=b.pop(),f=null;n===
d;)f=n,n=h.pop(),d=b.pop();h=f}for(b=[c];c!==h;)c=c.parent,b.push(c);for(c=b.length;a!==h;)b.splice(c,0,a),a=a.parent;return b}function Je(a){for(var c=[],h=a.parent;null!=h;)c.push(a),a=h,h=h.parent;c.push(a);return c}function wg(a){a.fixed|=2}function xg(a){a.fixed&=-7}function yg(a){a.fixed|=4;a.px=a.x;a.py=a.y}function zg(a){a.fixed&=-5}function Ke(a,c,h){var b=0,n=0;a.charge=0;if(!a.leaf)for(var d=a.nodes,f=d.length,e=-1,g;++e<f;)g=d[e],null!=g&&(Ke(g,c,h),a.charge+=g.charge,b+=g.charge*g.cx,
n+=g.charge*g.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),c*=h[a.point.index],a.charge+=a.pointCharge=c,b+=c*a.point.x,n+=c*a.point.y);a.cx=b/a.charge;a.cy=n/a.charge}function lb(a,c){s.rebind(a,c,"sort","children","value");a.nodes=a;a.links=Ag;return a}function Bg(a){return a.children}function Cg(a){return a.value}function Dg(a,c){return c.value-a.value}function Ag(a){return s.merge(a.map(function(a){return(a.children||[]).map(function(h){return{source:a,target:h}})}))}
function Eg(a){return a.x}function Fg(a){return a.y}function Gg(a,c,h){a.y0=c;a.y=h}function dd(a){return s.range(a.length)}function ed(a){var c=-1;a=a[0].length;for(var h=[];++c<a;)h[c]=0;return h}function Hg(a){for(var c=1,h=0,b=a[0][1],n,d=a.length;c<d;++c)(n=a[c][1])>b&&(h=c,b=n);return h}function Ig(a){return a.reduce(Jg,0)}function Jg(a,c){return a+c[1]}function Kg(a,c){return Le(a,Math.ceil(Math.log(c.length)/Math.LN2+1))}function Le(a,c){for(var h=-1,b=+a[0],n=(a[1]-b)/c,d=[];++h<=c;)d[h]=
n*h+b;return d}function Lg(a){return[s.min(a),s.max(a)]}function Me(a,c){return a.parent==c.parent?1:2}function fd(a){var c=a.children;return c&&c.length?c[0]:a._tree.thread}function gd(a){var c=a.children,h;return c&&(h=c.length)?c[h-1]:a._tree.thread}function Ob(a,c){var h=a.children;if(h&&(n=h.length))for(var b,n,d=-1;++d<n;)0<c(b=Ob(h[d],c),a)&&(a=b);return a}function Mg(a,c){return a.x-c.x}function Ng(a,c){return c.x-a.x}function Og(a,c){return a.depth-c.depth}function ya(a,c){function h(a,b){var d=
a.children;if(d&&(l=d.length))for(var f,e=null,g=-1,l;++g<l;)f=d[g],h(f,e),e=f;c(a,b)}h(a,null)}function Pg(a,c){return a.value-c.value}function hd(a,c){var h=a._pack_next;a._pack_next=c;c._pack_prev=a;c._pack_next=h;h._pack_prev=c}function Ne(a,c){a._pack_next=c;c._pack_prev=a}function Oe(a,c){var h=c.x-a.x,b=c.y-a.y,n=a.r+c.r;return 0.999*n*n>h*h+b*b}function Pe(a){function c(a){b=Math.min(a.x-a.r,b);n=Math.max(a.x+a.r,n);d=Math.min(a.y-a.r,d);f=Math.max(a.y+a.r,f)}if((h=a.children)&&(t=h.length)){var h,
b=Infinity,n=-Infinity,d=Infinity,f=-Infinity,e,g,l,q,u,m,t;h.forEach(Qg);e=h[0];e.x=-e.r;e.y=0;c(e);if(1<t&&(g=h[1],g.x=g.r,g.y=0,c(g),2<t))for(l=h[2],Qe(e,g,l),c(l),hd(e,l),e._pack_prev=l,hd(l,g),g=e._pack_next,q=3;q<t;q++){Qe(e,g,l=h[q]);var s=0,x=1,y=1;for(u=g._pack_next;u!==g;u=u._pack_next,x++)if(Oe(u,l)){s=1;break}if(1==s)for(m=e._pack_prev;m!==u._pack_prev&&!Oe(m,l);m=m._pack_prev,y++);s?(x<y||x==y&&g.r<e.r?Ne(e,g=u):Ne(e=m,g),q--):(hd(e,l),g=l,c(l))}e=(b+n)/2;g=(d+f)/2;for(q=u=0;q<t;q++)l=
h[q],l.x-=e,l.y-=g,u=Math.max(u,l.r+Math.sqrt(l.x*l.x+l.y*l.y));a.r=u;h.forEach(Rg)}}function Qg(a){a._pack_next=a._pack_prev=a}function Rg(a){delete a._pack_next;delete a._pack_prev}function Re(a,c,h,b){var d=a.children;a.x=c+=b*a.x;a.y=h+=b*a.y;a.r*=b;if(d){a=-1;for(var f=d.length;++a<f;)Re(d[a],c,h,b)}}function Qe(a,c,h){var b=a.r+h.r,d=c.x-a.x,f=c.y-a.y;if(b&&(d||f)){var e=c.r+h.r,g=d*d+f*f,e=e*e,b=b*b;c=0.5+(b-e)/(2*g);e=Math.sqrt(Math.max(0,2*e*(b+g)-(b-=g)*b-e*e))/(2*g);h.x=a.x+c*d+e*f;h.y=
a.y+c*f-e*d}else h.x=a.x+b,h.y=a.y}function Sg(a){return 1+s.max(a,function(a){return a.y})}function Tg(a){return a.reduce(function(a,h){return a+h.x},0)/a.length}function Se(a){var c=a.children;return c&&c.length?Se(c[0]):a}function Te(a){var c=a.children,h;return c&&(h=c.length)?Te(c[h-1]):a}function id(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ue(a,c){var h=a.x+c[3],b=a.y+c[0],d=a.dx-c[1]-c[3],f=a.dy-c[0]-c[2];0>d&&(h+=d/2,d=0);0>f&&(b+=f/2,f=0);return{x:h,y:b,dx:d,dy:f}}function bb(a){var c=
a[0];a=a[a.length-1];return c<a?[c,a]:[a,c]}function Pb(a){return a.rangeExtent?a.rangeExtent():bb(a.range())}function Ug(a,c,h,b){var d=h(a[0],a[1]),f=b(c[0],c[1]);return function(a){return f(d(a))}}function Qb(a,c){var h=0,b=a.length-1,d=a[h],f=a[b],e;f<d&&(e=h,h=b,b=e,e=d,d=f,f=e);a[h]=c.floor(d);a[b]=c.ceil(f);return a}function Ve(a){return a?{floor:function(c){return Math.floor(c/a)*a},ceil:function(c){return Math.ceil(c/a)*a}}:Vg}function Wg(a,c,h,b){var d=[],f=[],e=0,g=Math.min(a.length,c.length)-
1;a[g]<a[0]&&(a=a.slice().reverse(),c=c.slice().reverse());for(;++e<=g;)d.push(h(a[e-1],a[e])),f.push(b(c[e-1],c[e]));return function(c){var h=s.bisect(a,c,1,g)-1;return f[h](d[h](c))}}function We(a,c,h,b){function d(){var n=2<Math.min(a.length,c.length)?Wg:Ug,l=b?ug:tg;e=n(a,c,l,h);g=n(c,a,l,Pa);return f}function f(a){return e(a)}var e,g;f.invert=function(a){return g(a)};f.domain=function(c){if(!arguments.length)return a;a=c.map(Number);return d()};f.range=function(a){if(!arguments.length)return c;
c=a;return d()};f.rangeRound=function(a){return f.range(a).interpolate(Fe)};f.clamp=function(a){if(!arguments.length)return b;b=a;return d()};f.interpolate=function(a){if(!arguments.length)return h;h=a;return d()};f.ticks=function(c){return s.range.apply(s,Ia(a,c))};f.tickFormat=function(c,h){return jd(a,c,h)};f.nice=function(c){Qb(a,Ve(Ia(a,c)[2]));return d()};f.copy=function(){return We(a,c,h,b)};return d()}function kd(a,c){return s.rebind(a,c,"range","rangeRound","interpolate","clamp")}function Ia(a,
c){null==c&&(c=10);var h=bb(a),b=h[1]-h[0],d=Math.pow(10,Math.floor(Math.log(b/c)/Math.LN10)),b=c/b*d;0.15>=b?d*=10:0.35>=b?d*=5:0.75>=b&&(d*=2);h[0]=Math.ceil(h[0]/d)*d;h[1]=Math.floor(h[1]/d)*d+0.5*d;h[2]=d;return h}function jd(a,c,h){var b=-Math.floor(Math.log(Ia(a,c)[2])/Math.LN10+0.01);return s.format(h?h.replace(Xe,function(a,c,h,d,f,e,g,l,q,u){return[c,h,d,f,e,g,l,q||"."+(b-2*("%"===u)),u].join("")}):",."+b+"f")}function Ye(a,c,h,b){function d(a){return(h?Math.log(0>a?0:a):-Math.log(0<a?0:
-a))/Math.log(c)}function f(a){return h?Math.pow(c,a):-Math.pow(c,-a)}function e(c){return a(d(c))}e.invert=function(c){return f(a.invert(c))};e.domain=function(c){if(!arguments.length)return b;h=0<=c[0];a.domain((b=c.map(Number)).map(d));return e};e.base=function(h){if(!arguments.length)return c;c=+h;a.domain(b.map(d));return e};e.nice=function(){var c=Qb(b.map(d),h?Math:Xg);a.domain(c);b=c.map(f);return e};e.ticks=function(){var a=bb(b),e=[],g=a[0],a=a[1],l=Math.floor(d(g)),q=Math.ceil(d(a)),u=
c%1?2:c;if(isFinite(q-l)){if(h){for(;l<q;l++)for(var I=1;I<u;I++)e.push(f(l)*I);e.push(f(l))}else for(e.push(f(l));l++<q;)for(I=u-1;0<I;I--)e.push(f(l)*I);for(l=0;e[l]<g;l++);for(q=e.length;e[q-1]>a;q--);e=e.slice(l,q)}return e};e.tickFormat=function(a,c){if(!arguments.length)return Ze;2>arguments.length?c=Ze:"function"!==typeof c&&(c=s.format(c));var b=Math.max(0.1,a/e.ticks().length),v=h?(g=1E-12,Math.ceil):(g=-1E-12,Math.floor),g;return function(a){return a/f(v(d(a)+g))<=b?c(a):""}};e.copy=function(){return Ye(a.copy(),
c,h,b)};return kd(e,a)}function $e(a,c,h){function b(c){return a(d(c))}var d=Rb(c),f=Rb(1/c);b.invert=function(c){return f(a.invert(c))};b.domain=function(c){if(!arguments.length)return h;a.domain((h=c.map(Number)).map(d));return b};b.ticks=function(a){return s.range.apply(s,Ia(h,a))};b.tickFormat=function(a,c){return jd(h,a,c)};b.nice=function(a){return b.domain(Qb(h,Ve(Ia(h,a)[2])))};b.exponent=function(e){if(!arguments.length)return c;d=Rb(c=e);f=Rb(1/c);a.domain(h.map(d));return b};b.copy=function(){return $e(a.copy(),
c,h)};return kd(b,a)}function Rb(a){return function(c){return 0>c?-Math.pow(-c,a):Math.pow(c,a)}}function af(a,c){function h(c){return w[((f.get(c)||f.set(c,a.push(c)))-1)%w.length]}function d(c,h){return s.range(a.length).map(function(a){return c+h*a})}var f,w,e;h.domain=function(d){if(!arguments.length)return a;a=[];f=new b;for(var v=-1,w=d.length,e;++v<w;)f.has(e=d[v])||f.set(e,a.push(e));return h[c.t].apply(h,c.a)};h.range=function(a){if(!arguments.length)return w;w=a;e=0;c={t:"range",a:arguments};
return h};h.rangePoints=function(b,f){2>arguments.length&&(f=0);var n=b[0],g=b[1],l=(g-n)/(Math.max(1,a.length-1)+f);w=d(2>a.length?(n+g)/2:n+l*f/2,l);e=0;c={t:"rangePoints",a:arguments};return h};h.rangeBands=function(b,f,n){2>arguments.length&&(f=0);3>arguments.length&&(n=f);var g=b[1]<b[0],l=b[g-0],q=(b[1-g]-l)/(a.length-f+2*n);w=d(l+q*n,q);g&&w.reverse();e=q*(1-f);c={t:"rangeBands",a:arguments};return h};h.rangeRoundBands=function(b,f,n){2>arguments.length&&(f=0);3>arguments.length&&(n=f);var g=
b[1]<b[0],l=b[g-0],q=b[1-g],u=Math.floor((q-l)/(a.length-f+2*n));w=d(l+Math.round((q-l-(a.length-f)*u)/2),u);g&&w.reverse();e=Math.round(u*(1-f));c={t:"rangeRoundBands",a:arguments};return h};h.rangeBand=function(){return e};h.rangeExtent=function(){return bb(c.a[0])};h.copy=function(){return af(a,c)};return h.domain(a)}function bf(a,c){function h(){var h=0,f=c.length;for(d=[];++h<f;)d[h-1]=s.quantile(a,h/f);return b}function b(a){if(!isNaN(a=+a))return c[s.bisect(d,a)]}var d;b.domain=function(c){if(!arguments.length)return a;
a=c.filter(function(a){return!isNaN(a)}).sort(s.ascending);return h()};b.range=function(a){if(!arguments.length)return c;c=a;return h()};b.quantiles=function(){return d};b.invertExtent=function(h){h=c.indexOf(h);return 0>h?[NaN,NaN]:[0<h?d[h-1]:a[0],h<d.length?d[h]:a[a.length-1]]};b.copy=function(){return bf(a,c)};return h()}function cf(a,c,h){function b(c){return h[Math.max(0,Math.min(e,Math.floor(f*(c-a))))]}function d(){f=h.length/(c-a);e=h.length-1;return b}var f,e;b.domain=function(h){if(!arguments.length)return[a,
c];a=+h[0];c=+h[h.length-1];return d()};b.range=function(a){if(!arguments.length)return h;h=a;return d()};b.invertExtent=function(c){c=h.indexOf(c);c=0>c?NaN:c/f+a;return[c,c+1/f]};b.copy=function(){return cf(a,c,h)};return d()}function df(a,c){function h(h){if(h<=h)return c[s.bisect(a,h)]}h.domain=function(c){if(!arguments.length)return a;a=c;return h};h.range=function(a){if(!arguments.length)return c;c=a;return h};h.invertExtent=function(h){h=c.indexOf(h);return[a[h-1],a[h]]};h.copy=function(){return df(a,
c)};return h}function ef(a){function c(a){return+a}c.invert=c;c.domain=c.range=function(h){if(!arguments.length)return a;a=h.map(c);return c};c.ticks=function(c){return s.range.apply(s,Ia(a,c))};c.tickFormat=function(c,b){return jd(a,c,b)};c.copy=function(){return ef(a)};return c}function Yg(a){return a.innerRadius}function Zg(a){return a.outerRadius}function ff(a){return a.startAngle}function gf(a){return a.endAngle}function hf(a){for(var c,h=-1,b=a.length,d,f;++h<b;)c=a[h],d=c[0],f=c[1]+Qa,c[0]=
d*Math.cos(f),c[1]=d*Math.sin(f);return a}function jf(a){function c(c){function l(){O.push("M",g(a(s),m),u,q(a(t.reverse()),m),"Z")}for(var O=[],t=[],s=[],x=-1,y=c.length,p,r=M(h),A=M(d),B=h===b?function(){return H}:M(b),z=d===f?function(){return J}:M(f),H,J;++x<y;)e.call(this,p=c[x],x)?(t.push([H=+r.call(this,p,x),J=+A.call(this,p,x)]),s.push([+B.call(this,p,x),+z.call(this,p,x)])):t.length&&(l(),t=[],s=[]);t.length&&l();return O.length?O.join(""):null}var h=qa,b=qa,d=0,f=wa,e=hb,g=fa,l=g.key,q=
g,u="L",m=0.7;c.x=function(a){if(!arguments.length)return b;h=b=a;return c};c.x0=function(a){if(!arguments.length)return h;h=a;return c};c.x1=function(a){if(!arguments.length)return b;b=a;return c};c.y=function(a){if(!arguments.length)return f;d=f=a;return c};c.y0=function(a){if(!arguments.length)return d;d=a;return c};c.y1=function(a){if(!arguments.length)return f;f=a;return c};c.defined=function(a){if(!arguments.length)return e;e=a;return c};c.interpolate=function(a){if(!arguments.length)return l;
l="function"===typeof a?g=a:(g=Uc.get(a)||fa).key;q=g.reverse||g;u=g.closed?"M":"L";return c};c.tension=function(a){if(!arguments.length)return m;m=a;return c};return c}function $g(a){return a.radius}function kf(a){return[a.x,a.y]}function ah(a){return function(){var c=a.apply(this,arguments),h=c[0],c=c[1]+Qa;return[h*Math.cos(c),h*Math.sin(c)]}}function bh(){return 64}function ch(){return"circle"}function lf(a){a=Math.sqrt(a/D);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}
function mb(a,c){ob(a,U);a.id=c;return a}function ld(a,c,h,b){var d=a.id;return V(a,"function"===typeof h?function(a,f,e){a.__transition__[d].tween.set(c,b(h.call(a,a.__data__,f,e)))}:(h=b(h),function(a){a.__transition__[d].tween.set(c,h)}))}function dh(a){null==a&&(a="");return function(){this.textContent=a}}function Sb(a,c,h,d){var f=a.__transition__||(a.__transition__={active:0,count:0}),e=f[h];if(!e){var g=d.time,e=f[h]={tween:new b,time:g,ease:d.ease,delay:d.delay,duration:d.duration};++f.count;
s.timer(function(b){function d(b){if(f.active>h)return l();f.active=h;e.event&&e.event.start.call(a,q,c);e.tween.forEach(function(h,b){(b=b.call(a,q,c))&&s.push(b)});if(v(b))return 1;Td(v,0,g)}function v(b){if(f.active!==h)return l();b=(b-m)/t;for(var d=u(b),g=s.length;0<g;)s[--g].call(a,d);if(1<=b)return e.event&&e.event.end.call(a,q,c),l()}function l(){--f.count?delete f[h]:delete a.__transition__;return 1}var q=a.__data__,u=e.ease,m=e.delay,t=e.duration,s=[];if(m<=b)return d(b);Td(d,m,g)},0,g)}}
function mf(a,c){a.attr("transform",function(a){return"translate("+c(a)+",0)"})}function nf(a,c){a.attr("transform",function(a){return"translate(0,"+c(a)+")"})}function za(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ra(a,c,h){function b(c){var h=a(c),d=f(h,1);return c-h<d-c?h:d}function d(h){c(h=a(new Y(h-1)),1);return h}function f(a,h){c(a=new Y(+a),h);return a}function e(a,b,f){a=d(a);var v=[];if(1<f)for(;a<b;)h(a)%f||v.push(new Date(+a)),c(a,1);else for(;a<
b;)v.push(new Date(+a)),c(a,1);return v}a.floor=a;a.round=b;a.ceil=d;a.offset=f;a.range=e;var g=a.utc=Tb(a);g.floor=g;g.round=Tb(b);g.ceil=Tb(d);g.offset=Tb(f);g.range=function(a,c,h){try{Y=za;var b=new za;b._=a;return e(b,c,h)}finally{Y=Date}};return a}function Tb(a){return function(c,h){try{Y=za;var b=new za;b._=c;return a(b,h)._}finally{Y=Date}}}function ba(a){function c(c){for(var b=[],d=-1,f=0,e,g;++d<h;)if(37===a.charCodeAt(d)){b.push(a.substring(f,d));null!=(e=of[f=a.charAt(++d)])&&(f=a.charAt(++d));
if(g=Ub[f])f=g(c,null==e?"e"===f?" ":"0":e);b.push(f);f=d+1}b.push(a.substring(f,d));return b.join("")}var h=a.length;c.parse=function(c){var h={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(Vb(h,a,c,0)!=c.length)return null;"p"in h&&(h.H=h.H%12+12*h.p);c=null!=h.Z&&Y!==za;var b=new (c?za:Y);"j"in h?b.setFullYear(h.y,0,h.j):"w"in h&&("W"in h||"U"in h)?(b.setFullYear(h.y,0,1),b.setFullYear(h.y,0,"W"in h?(h.w+6)%7+7*h.W-(b.getDay()+5)%7:h.w+7*h.U-(b.getDay()+6)%7)):b.setFullYear(h.y,h.m,h.d);b.setHours(h.H+
Math.floor(h.Z/100),h.M+h.Z%100,h.S,h.L);return c?b._:b};c.toString=function(){return a};return c}function Vb(a,c,h,b){for(var d,f=0,e=c.length,g=h.length;f<e;){if(b>=g)return-1;d=c.charCodeAt(f++);if(37===d){if(d=c.charAt(f++),d=eh[d in of?c.charAt(f++):d],!d||0>(b=d(a,h,b)))return-1}else if(d!=h.charCodeAt(b++))return-1}return b}function Wb(a){return RegExp("^(?:"+a.map(s.requote).join("|")+")","i")}function Xb(a){for(var c=new b,h=-1,d=a.length;++h<d;)c.set(a[h].toLowerCase(),h);return c}function ca(a,
c,h){var b=0>a?"-":"";a=(b?-a:a)+"";var d=a.length;return b+(d<h?Array(h-d+1).join(c)+a:a)}function pf(a,c,h){R.lastIndex=0;return(c=R.exec(c.substring(h,h+2)))?(a.d=+c[0],h+c[0].length):-1}function qf(a,c,h){R.lastIndex=0;return(c=R.exec(c.substring(h,h+2)))?(a.H=+c[0],h+c[0].length):-1}function ra(a){function c(a){try{Y=za;var c=new Y;c._=a;return h(c)}finally{Y=Date}}var h=ba(a);c.parse=function(a){try{Y=za;var c=h.parse(a);return c&&c._}finally{Y=Date}};c.toString=h.toString;return c}function md(a){return a.toISOString()}
function nd(a,c,h){function b(c){return a(c)}function d(a,h){var b=(a[1]-a[0])/h,f=s.bisect(Yb,b);return f==Yb.length?[c.year,Ia(a.map(function(a){return a/31536E6}),h)[2]]:f?c[b/Yb[f-1]<Yb[f]/b?f-1:f]:[fh,Ia(a,h)[2]]}b.invert=function(c){return Sa(a.invert(c))};b.domain=function(c){if(!arguments.length)return a.domain().map(Sa);a.domain(c);return b};b.nice=function(a,c){function h(b){return!isNaN(b)&&!a.range(b,Sa(+b+1),c).length}var f=b.domain(),e=bb(f);if(e=null==a?d(e,10):"number"===typeof a&&
d(e,a))a=e[0],c=e[1];return b.domain(Qb(f,1<c?{floor:function(c){for(;h(c=a.floor(c));)c=Sa(c-1);return c},ceil:function(c){for(;h(c=a.ceil(c));)c=Sa(+c+1);return c}}:a))};b.ticks=function(a,c){var h=bb(b.domain()),f=null==a?d(h,10):"number"===typeof a?d(h,a):!a.range&&[{range:a},c];f&&(a=f[0],c=f[1]);return a.range(h[0],Sa(+h[1]+1),c)};b.tickFormat=function(){return h};b.copy=function(){return nd(a.copy(),c,h)};return kd(b,a)}function Sa(a){return new Date(a)}function rf(a){return function(c){for(var h=
a.length-1,b=a[h];!b[1](c);)b=a[--h];return b[0](c)}}function gh(a){return JSON.parse(a.responseText)}function hh(a){var c=ga.createRange();c.selectNode(ga.body);return c.createContextualFragment(a.responseText)}var s={version:"3.3.3"};Date.now||(Date.now=function(){return+new Date});var ih=[].slice,Ba=function(a){return ih.call(a)},ga=document,Ca=ga.documentElement,X=window;try{Ba(Ca.childNodes)[0].nodeType}catch(Rh){Ba=function(a){for(var c=a.length,h=Array(c);c--;)h[c]=a[c];return h}}try{ga.createElement("div").style.setProperty("opacity",
0,"")}catch(Sh){var Zb=X.Element.prototype,jh=Zb.setAttribute,kh=Zb.setAttributeNS,sf=X.CSSStyleDeclaration.prototype,lh=sf.setProperty;Zb.setAttribute=function(a,c){jh.call(this,a,c+"")};Zb.setAttributeNS=function(a,c,h){kh.call(this,a,c,h+"")};sf.setProperty=function(a,c,h){lh.call(this,a,c+"",h)}}s.ascending=function(a,c){return a<c?-1:a>c?1:a>=c?0:NaN};s.descending=function(a,c){return c<a?-1:c>a?1:c>=a?0:NaN};s.min=function(a,c){var h=-1,b=a.length,d,f;if(1===arguments.length){for(;++h<b&&!(null!=
(d=a[h])&&d<=d);)d=void 0;for(;++h<b;)null!=(f=a[h])&&d>f&&(d=f)}else{for(;++h<b&&!(null!=(d=c.call(a,a[h],h))&&d<=d);)d=void 0;for(;++h<b;)null!=(f=c.call(a,a[h],h))&&d>f&&(d=f)}return d};s.max=function(a,c){var h=-1,b=a.length,d,f;if(1===arguments.length){for(;++h<b&&!(null!=(d=a[h])&&d<=d);)d=void 0;for(;++h<b;)null!=(f=a[h])&&f>d&&(d=f)}else{for(;++h<b&&!(null!=(d=c.call(a,a[h],h))&&d<=d);)d=void 0;for(;++h<b;)null!=(f=c.call(a,a[h],h))&&f>d&&(d=f)}return d};s.extent=function(a,c){var h=-1,b=
a.length,d,f,e;if(1===arguments.length){for(;++h<b&&!(null!=(d=e=a[h])&&d<=d);)d=e=void 0;for(;++h<b;)null!=(f=a[h])&&(d>f&&(d=f),e<f&&(e=f))}else{for(;++h<b&&!(null!=(d=e=c.call(a,a[h],h))&&d<=d);)d=void 0;for(;++h<b;)null!=(f=c.call(a,a[h],h))&&(d>f&&(d=f),e<f&&(e=f))}return[d,e]};s.sum=function(a,c){var h=0,b=a.length,d,f=-1;if(1===arguments.length)for(;++f<b;)isNaN(d=+a[f])||(h+=d);else for(;++f<b;)isNaN(d=+c.call(a,a[f],f))||(h+=d);return h};s.mean=function(a,c){var h=a.length,b,d=0,f=-1,e=0;
if(1===arguments.length)for(;++f<h;)m(b=a[f])&&(d+=(b-d)/++e);else for(;++f<h;)m(b=c.call(a,a[f],f))&&(d+=(b-d)/++e);return e?d:void 0};s.quantile=function(a,c){var h=(a.length-1)*c+1,b=Math.floor(h),d=+a[b-1];return(h-=b)?d+h*(a[b]-d):d};s.median=function(a,c){1<arguments.length&&(a=a.map(c));a=a.filter(m);return a.length?s.quantile(a.sort(s.ascending),0.5):void 0};s.bisector=function(a){return{left:function(c,h,b,d){3>arguments.length&&(b=0);4>arguments.length&&(d=c.length);for(;b<d;){var f=b+d>>>
1;a.call(c,c[f],f)<h?b=f+1:d=f}return b},right:function(c,h,b,d){3>arguments.length&&(b=0);4>arguments.length&&(d=c.length);for(;b<d;){var f=b+d>>>1;h<a.call(c,c[f],f)?d=f:b=f+1}return b}}};var tf=s.bisector(function(a){return a});s.bisectLeft=tf.left;s.bisect=s.bisectRight=tf.right;s.shuffle=function(a){for(var c=a.length,h,b;c;)b=Math.random()*c--|0,h=a[c],a[c]=a[b],a[b]=h;return a};s.permute=function(a,c){for(var h=c.length,b=Array(h);h--;)b[h]=a[c[h]];return b};s.pairs=function(a){for(var c=0,
h=a.length-1,b=a[0],d=Array(0>h?0:h);c<h;)d[c]=[b,b=a[++c]];return d};s.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,c=s.min(arguments,r),h=Array(c);++a<c;)for(var b=-1,d,f=h[a]=Array(d);++b<d;)f[b]=arguments[b][a];return h};s.transpose=function(a){return s.zip.apply(s,a)};s.keys=function(a){var c=[],h;for(h in a)c.push(h);return c};s.values=function(a){var c=[],h;for(h in a)c.push(a[h]);return c};s.entries=function(a){var c=[],h;for(h in a)c.push({key:h,value:a[h]});return c};s.merge=
function(a){return Array.prototype.concat.apply([],a)};s.range=function(a,c,h){3>arguments.length&&(h=1,2>arguments.length&&(c=a,a=0));if(Infinity===(c-a)/h)throw Error("infinite range");var b=[],d;d=Math.abs(h);for(var f=1;d*f%1;)f*=10;d=f;var f=-1,e;a*=d;c*=d;h*=d;if(0>h)for(;(e=a+h*++f)>c;)b.push(e/d);else for(;(e=a+h*++f)<c;)b.push(e/d);return b};s.map=function(a){var c=new b;if(a instanceof b)a.forEach(function(a,h){c.set(a,h)});else for(var h in a)c.set(h,a[h]);return c};p(b,{has:function(a){return Ja+
a in this},get:function(a){return this[Ja+a]},set:function(a,c){return this[Ja+a]=c},remove:function(a){a=Ja+a;return a in this&&delete this[a]},keys:function(){var a=[];this.forEach(function(c){a.push(c)});return a},values:function(){var a=[];this.forEach(function(c,h){a.push(h)});return a},entries:function(){var a=[];this.forEach(function(c,h){a.push({key:c,value:h})});return a},forEach:function(a){for(var c in this)c.charCodeAt(0)===uf&&a.call(this,c.substring(1),this[c])}});var Ja="\x00",uf=Ja.charCodeAt(0);
s.nest=function(){function a(c,f,n){if(n>=d.length)return g?g.call(h,f):e?f.sort(e):f;for(var l=-1,q=f.length,u=d[n++],m,t,s=new b,x;++l<q;)(x=s.get(m=u(t=f[l])))?x.push(t):s.set(m,[t]);c?(t=c(),f=function(h,b){t.set(h,a(c,b,n))}):(t={},f=function(h,b){t[h]=a(c,b,n)});s.forEach(f);return t}function c(a,h){if(h>=d.length)return a;var b=[],e=f[h++];a.forEach(function(a,d){b.push({key:a,values:c(d,h)})});return e?b.sort(function(a,c){return e(a.key,c.key)}):b}var h={},d=[],f=[],e,g;h.map=function(c,
h){return a(h,c,0)};h.entries=function(h){return c(a(s.map,h,0),0)};h.key=function(a){d.push(a);return h};h.sortKeys=function(a){f[d.length-1]=a;return h};h.sortValues=function(a){e=a;return h};h.rollup=function(a){g=a;return h};return h};s.set=function(a){var c=new d;if(a)for(var h=0,b=a.length;h<b;++h)c.add(a[h]);return c};p(d,{has:function(a){return Ja+a in this},add:function(a){this[Ja+a]=!0;return a},remove:function(a){a=Ja+a;return a in this&&delete this[a]},values:function(){var a=[];this.forEach(function(c){a.push(c)});
return a},forEach:function(a){for(var c in this)c.charCodeAt(0)===uf&&a.call(this,c.substring(1))}});s.behavior={};s.rebind=function(a,c){for(var h=1,b=arguments.length,d;++h<b;)a[d=arguments[h]]=g(a,c,c[d]);return a};var Ad="webkit ms moz Moz o O".split(" ");s.dispatch=function(){for(var a=new f,c=-1,h=arguments.length;++c<h;)a[arguments[c]]=q(a);return a};f.prototype.on=function(a,c){var h=a.indexOf("."),b="";0<=h&&(b=a.substring(h+1),a=a.substring(0,h));if(a)return 2>arguments.length?this[a].on(b):
this[a].on(b,c);if(2===arguments.length){if(null==c)for(a in this)if(this.hasOwnProperty(a))this[a].on(b,null);return this}};s.event=null;s.requote=function(a){return a.replace(mh,"\\$&")};var mh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ob={}.__proto__?function(a,c){a.__proto__=c}:function(a,c){for(var h in c)a[h]=c[h]},nc=function(a,c){return c.querySelector(a)},oc=function(a,c){return c.querySelectorAll(a)},nh=Ca[e(Ca,"matchesSelector")],Bd=function(a,c){return nh.call(a,c)};"function"===typeof Sizzle&&
(nc=function(a,c){return Sizzle(a,c)[0]||null},oc=function(a,c){return Sizzle.uniqueSort(Sizzle(a,c))},Bd=Sizzle.matchesSelector);s.selection=function(){return vf};var K=s.selection.prototype=[];K.select=function(a){var c=[],h,b,d,f;a=B(a);for(var e=-1,g=this.length;++e<g;){c.push(h=[]);h.parentNode=(d=this[e]).parentNode;for(var l=-1,q=d.length;++l<q;)(f=d[l])?(h.push(b=a.call(f,f.__data__,l,e)),b&&"__data__"in f&&(b.__data__=f.__data__)):h.push(null)}return t(c)};K.selectAll=function(a){var c=[],
h,b;a=z(a);for(var d=-1,f=this.length;++d<f;)for(var e=this[d],g=-1,l=e.length;++g<l;)if(b=e[g])c.push(h=Ba(a.call(b,b.__data__,g,d))),h.parentNode=b;return t(c)};var od={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};s.ns={prefix:od,qualify:function(a){var c=a.indexOf(":"),h=a;0<=c&&(h=a.substring(0,c),a=a.substring(c+1));return od.hasOwnProperty(h)?{space:od[h],
local:a}:a}};K.attr=function(a,c){if(2>arguments.length){if("string"===typeof a){var h=this.node();a=s.ns.qualify(a);return a.local?h.getAttributeNS(a.space,a.local):h.getAttribute(a)}for(c in a)this.each(N(c,a[c]));return this}return this.each(N(a,c))};K.classed=function(a,c){if(2>arguments.length){if("string"===typeof a){var h=this.node(),b=(a=a.trim().split(/^|\s+/g)).length,d=-1;if(c=h.classList)for(;++d<b;){if(!c.contains(a[d]))return!1}else for(c=h.getAttribute("class");++d<b;)if(!Z(a[d]).test(c))return!1;
return!0}for(c in a)this.each(E(c,a[c]));return this}return this.each(E(a,c))};K.style=function(a,c,h){var b=arguments.length;if(3>b){if("string"!==typeof a){2>b&&(c="");for(h in a)this.each(L(h,a[h],c));return this}if(2>b)return X.getComputedStyle(this.node(),null).getPropertyValue(a);h=""}return this.each(L(a,c,h))};K.property=function(a,c){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(c in a)this.each(sa(c,a[c]));return this}return this.each(sa(a,c))};K.text=function(a){return arguments.length?
this.each("function"===typeof a?function(){var c=a.apply(this,arguments);this.textContent=null==c?"":c}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};K.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var c=a.apply(this,arguments);this.innerHTML=null==c?"":c}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};K.append=function(a){a=A(a);return this.select(function(){return this.appendChild(a.apply(this,
arguments))})};K.insert=function(a,c){a=A(a);c=B(c);return this.select(function(){return this.insertBefore(a.apply(this,arguments),c.apply(this,arguments))})};K.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};K.data=function(a,c){function h(a,h){var d,f=a.length,e=h.length,g=Math.min(f,e),n=Array(e),v=Array(e),w=Array(f),m,t;if(c){var g=new b,I=new b,s=[],x;for(d=-1;++d<f;)x=c.call(m=a[d],m.__data__,d),g.has(x)?w[d]=m:g.set(x,m),s.push(x);for(d=-1;++d<
e;)x=c.call(h,t=h[d],d),(m=g.get(x))?(n[d]=m,m.__data__=t):I.has(x)||(v[d]={__data__:t}),I.set(x,t),g.remove(x);for(d=-1;++d<f;)g.has(s[d])&&(w[d]=a[d])}else{for(d=-1;++d<g;)m=a[d],t=h[d],m?(m.__data__=t,n[d]=m):v[d]={__data__:t};for(;d<e;++d)v[d]={__data__:h[d]};for(;d<f;++d)w[d]=a[d]}v.update=n;v.parentNode=n.parentNode=w.parentNode=a.parentNode;l.push(v);q.push(n);u.push(w)}var d=-1,f=this.length,e,g;if(!arguments.length){for(a=Array(f=(e=this[0]).length);++d<f;)if(g=e[d])a[d]=g.__data__;return a}var l=
Cd([]),q=t([]),u=t([]);if("function"===typeof a)for(;++d<f;)h(e=this[d],a.call(e,e.parentNode.__data__,d));else for(;++d<f;)h(e=this[d],a);q.enter=function(){return l};q.exit=function(){return u};return q};K.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};K.filter=function(a){var c=[],h,b,d;"function"!==typeof a&&(a=H(a));for(var f=0,e=this.length;f<e;f++){c.push(h=[]);h.parentNode=(b=this[f]).parentNode;for(var g=0,l=b.length;g<l;g++)(d=b[g])&&a.call(d,
d.__data__,g)&&h.push(d)}return t(c)};K.order=function(){for(var a=-1,c=this.length;++a<c;)for(var h=this[a],b=h.length-1,d=h[b],f;0<=--b;)if(f=h[b])d&&d!==f.nextSibling&&d.parentNode.insertBefore(f,d),d=f;return this};K.sort=function(a){a=J.apply(this,arguments);for(var c=-1,h=this.length;++c<h;)this[c].sort(a);return this.order()};K.each=function(a){return V(this,function(c,h,b){a.call(c,c.__data__,h,b)})};K.call=function(a){var c=Ba(arguments);a.apply(c[0]=this,c);return this};K.empty=function(){return!this.node()};
K.node=function(){for(var a=0,c=this.length;a<c;a++)for(var h=this[a],b=0,d=h.length;b<d;b++){var f=h[b];if(f)return f}return null};K.size=function(){var a=0;this.each(function(){++a});return a};var ta=[];s.selection.enter=Cd;s.selection.enter.prototype=ta;ta.append=K.append;ta.empty=K.empty;ta.node=K.node;ta.call=K.call;ta.size=K.size;ta.select=function(a){for(var c=[],h,b,d,f,e,g=-1,l=this.length;++g<l;){d=(f=this[g]).update;c.push(h=[]);h.parentNode=f.parentNode;for(var q=-1,u=f.length;++q<u;)(e=
f[q])?(h.push(d[q]=b=a.call(f.parentNode,e.__data__,q,g)),b.__data__=e.__data__):h.push(null)}return t(c)};ta.insert=function(a,c){2>arguments.length&&(c=Rf(this));return K.insert.call(this,a,c)};K.transition=function(){for(var a=Ta||++wf,c=[],h,b,d=$b||{time:Date.now(),ease:og,delay:0,duration:250},f=-1,e=this.length;++f<e;){c.push(h=[]);for(var g=this[f],l=-1,q=g.length;++l<q;)(b=g[l])&&Sb(b,l,a,d),h.push(b)}return mb(c,a)};K.interrupt=function(){return this.each(pb)};s.select=function(a){a=["string"===
typeof a?nc(a,ga):a];a.parentNode=Ca;return t([a])};s.selectAll=function(a){a=Ba("string"===typeof a?oc(a,ga):a);a.parentNode=Ca;return t([a])};var vf=s.select(Ca);K.on=function(a,c,h){var b=arguments.length;if(3>b){if("string"!==typeof a){2>b&&(c=!1);for(h in a)this.each(Dd(h,a[h],c));return this}if(2>b)return(b=this.node()["__on"+a])&&b._;h=!1}return this.each(Dd(a,c,h))};var pc=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});pc.forEach(function(a){"on"+a in ga&&pc.remove(a)});var qc=e(Ca.style,
"userSelect"),Uf=0;s.mouse=function(a){return Gd(a,x())};var rc=/WebKit/.test(X.navigator.userAgent)?-1:0;s.touches=function(a,c){2>arguments.length&&(c=x().touches);return c?Ba(c).map(function(c){var b=Gd(a,c);b.identifier=c.identifier;return b}):[]};s.behavior.drag=function(){function a(){this.on("mousedown.drag",d).on("touchstart.drag",f)}function c(a,c,d,f){return function(){function e(){x.on(d+"."+q,null).on(f+"."+q,null);y(m&&s.event.target===l);n({type:"dragend"})}var g=this.parentNode,n=h.of(this,
arguments),l=s.event.target,w=a(),q=null==w?"drag":"drag-"+w,u=c(g,w),m=0,t,x=s.select(X).on(d+"."+q,function(){if(!g)return e();var a=c(g,w),h=a[0]-u[0],b=a[1]-u[1];m|=h|b;u=a;n({type:"drag",x:a[0]+t[0],y:a[1]+t[1],dx:h,dy:b})}).on(f+"."+q,e),y=qb();b?(t=b.apply(this,arguments),t=[t.x-u[0],t.y-u[1]]):t=[0,0];n({type:"dragstart"})}}var h=y(a,"drag","dragstart","dragend"),b=null,d=c(l,s.mouse,"mousemove","mouseup"),f=c(function(){return s.event.changedTouches[0].identifier},function(a,c){return s.touches(a).filter(function(a){return a.identifier===
c})[0]},"touchmove","touchend");a.origin=function(c){if(!arguments.length)return b;b=c;return a};return s.rebind(a,h,"on")};var D=Math.PI,G=1E-6,xf=G*G,F=D/180,P=180/D,nb=Math.SQRT2,pd=2;s.interpolateZoom=function(a,c){function h(a){var c=a*x;if(s){a=rb(t);var h=f/(pd*u)*(a*(sc(nb*c+t)/rb(nb*c+t))-sc(t));return[b+h*g,d+h*l,f*a/rb(nb*c+t)]}return[b+a*g,d+a*l,f*Math.exp(nb*c)]}var b=a[0],d=a[1],f=a[2],e=c[2],g=c[0]-b,l=c[1]-d,q=g*g+l*l,u=Math.sqrt(q),m=(e*e-f*f+4*q)/(2*f*pd*u),q=(e*e-f*f-4*q)/(2*e*
pd*u),t=Math.log(Math.sqrt(m*m+1)-m),s=Math.log(Math.sqrt(q*q+1)-q)-t,x=(s||Math.log(e/f))/nb;h.duration=1E3*x;return h};s.behavior.zoom=function(){function a(a){a.on(Q,l).on(oh+".zoom",m).on(S,t).on("dblclick.zoom",x).on(Kc,q)}function c(a){return[(a[0]-p.x)/p.k,(a[1]-p.y)/p.k]}function h(a){p.k=Math.max(T[0],Math.min(T[1],a))}function b(a,c){c=[c[0]*p.k+p.x,c[1]*p.k+p.y];p.x+=a[0]-c[0];p.y+=a[1]-c[1]}function d(){L&&L.domain(Nc.range().map(function(a){return(a-p.x)/p.k}).map(Nc.invert));D&&D.domain(C.range().map(function(a){return(a-
p.y)/p.k}).map(C.invert))}function f(a){a({type:"zoomstart"})}function e(a){d();a({type:"zoom",scale:p.k,translate:[p.x,p.y]})}function g(a){a({type:"zoomend"})}function l(){var a=this,h=J.of(a,arguments),d=s.event.target,n=0,q=s.select(X).on(S,function(){n=1;b(s.mouse(a),u);e(h)}).on(z,function(){q.on(S,X===a?t:null).on(z,null);m(n&&s.event.target===d);g(h)}),u=c(s.mouse(a)),m=qb();pb.call(a);f(h)}function q(){function a(){var h=s.touches(n);y=p.k;h.forEach(function(a){a.identifier in t&&(t[a.identifier]=
c(a))});return h}function d(){for(var c=s.event.changedTouches,f=0,g=c.length;f<g;++f)t[c[f].identifier]=null;g=a();f=Date.now();1===g.length?(500>f-Lc&&(c=g[0],g=t[c.identifier],h(2*p.k),b(c,g),u(),e(m)),Lc=f):1<g.length&&(c=g[0],g=g[1],f=c[0]-g[0],c=c[1]-g[1],x=f*f+c*c)}var n=this,m=J.of(n,arguments),t={},x=0,y,r=s.event.changedTouches[0].identifier,Ed="touchmove.zoom-"+r,A="touchend.zoom-"+r,B=s.select(X).on(Ed,function(){for(var a=s.touches(n),c,d,f,g,l=0,w=a.length;l<w;++l,g=null)if(f=a[l],g=
t[f.identifier]){if(d)break;c=f;d=g}if(g){var q=(q=f[0]-c[0])*q+(q=f[1]-c[1])*q,a=x&&Math.sqrt(q/x);c=[(c[0]+f[0])/2,(c[1]+f[1])/2];d=[(d[0]+g[0])/2,(d[1]+g[1])/2];h(a*y)}Lc=null;b(c,d);e(m)}).on(A,function(){if(s.event.touches.length){for(var c=s.event.changedTouches,h=0,b=c.length;h<b;++h)delete t[c[h].identifier];for(var d in t)return void a()}B.on(Ed,null).on(A,null);S.on(Q,l).on(Kc,q);Sf();g(m)}),S=s.select(n).on(Q,null).on(Kc,d),Sf=qb();pb.call(n);d();f(m)}function m(){var a=J.of(this,arguments);
H?clearTimeout(H):(pb.call(this),f(a));H=setTimeout(function(){H=null;g(a)},50);u();var d=A||s.mouse(this);r||(r=c(d));h(Math.pow(2,0.002*ac())*p.k);b(d,r);e(a)}function t(){r=null}function x(){var a=J.of(this,arguments),d=s.mouse(this),n=c(d),l=Math.log(p.k)/Math.LN2;f(a);h(Math.pow(2,s.event.shiftKey?Math.ceil(l)-1:Math.floor(l)+1));b(d,n);e(a);g(a)}var p={x:0,y:0,k:1},r,A,B=[960,500],T=yf,Q="mousedown.zoom",S="mousemove.zoom",z="mouseup.zoom",H,Kc="touchstart.zoom",Lc,J=y(a,"zoomstart","zoom",
"zoomend"),Nc,L,C,D;a.event=function(a){a.each(function(){var a=J.of(this,arguments),c=p;Ta?s.select(this).transition().each("start.zoom",function(){p=this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var h=B[0],b=h/2,d=B[1]/2,f=s.interpolateZoom([(b-p.x)/p.k,(d-p.y)/p.k,h/p.k],[(b-c.x)/c.k,(d-c.y)/c.k,h/c.k]);return function(c){c=f(c);var g=h/c[2];this.__chart__=p={x:b-c[0]*g,y:d-c[1]*g,k:g};e(a)}}).each("end.zoom",function(){g(a)}):(this.__chart__=p,f(a),e(a),g(a))})};a.translate=
function(c){if(!arguments.length)return[p.x,p.y];p={x:+c[0],y:+c[1],k:p.k};d();return a};a.scale=function(c){if(!arguments.length)return p.k;p={x:p.x,y:p.y,k:+c};d();return a};a.scaleExtent=function(c){if(!arguments.length)return T;T=null==c?yf:[+c[0],+c[1]];return a};a.center=function(c){if(!arguments.length)return A;A=c&&[+c[0],+c[1]];return a};a.size=function(c){if(!arguments.length)return B;B=c&&[+c[0],+c[1]];return a};a.x=function(c){if(!arguments.length)return L;L=c;Nc=c.copy();p={x:0,y:0,k:1};
return a};a.y=function(c){if(!arguments.length)return D;D=c;C=c.copy();p={x:0,y:0,k:1};return a};return s.rebind(a,J,"on")};var yf=[0,Infinity],ac,oh="onwheel"in ga?(ac=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ga?(ac=function(){return s.event.wheelDelta},"mousewheel"):(ac=function(){return-s.event.detail},"MozMousePixelScroll");Va.prototype.toString=function(){return this.rgb()+""};s.hsl=function(a,c,h){return 1===arguments.length?a instanceof tc?Wa(a.h,
a.s,a.l):Nd(""+a,Od,Wa):Wa(+a,+c,+h)};var qd=tc.prototype=new Va;qd.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);return Wa(this.h,this.s,this.l/a)};qd.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return Wa(this.h,this.s,a*this.l)};qd.rgb=function(){return uc(this.h,this.s,this.l)};s.hcl=function(a,c,h){return 1===arguments.length?a instanceof sb?Xa(a.h,a.c,a.l):a instanceof tb?Md(a.l,a.a,a.b):Md((a=Pd((a=s.rgb(a)).r,a.g,a.b)).l,a.a,a.b):Xa(+a,+c,+h)};var rd=sb.prototype=new Va;
rd.brighter=function(a){return Xa(this.h,this.c,Math.min(100,this.l+bc*(arguments.length?a:1)))};rd.darker=function(a){return Xa(this.h,this.c,Math.max(0,this.l-bc*(arguments.length?a:1)))};rd.rgb=function(){return vc(this.h,this.c,this.l).rgb()};s.lab=function(a,c,h){return 1===arguments.length?a instanceof tb?Ya(a.l,a.a,a.b):a instanceof sb?vc(a.l,a.c,a.h):Pd((a=s.rgb(a)).r,a.g,a.b):Ya(+a,+c,+h)};var bc=18,Jd=0.95047,Kd=1,Ld=1.08883,sd=tb.prototype=new Va;sd.brighter=function(a){return Ya(Math.min(100,
this.l+bc*(arguments.length?a:1)),this.a,this.b)};sd.darker=function(a){return Ya(Math.max(0,this.l-bc*(arguments.length?a:1)),this.a,this.b)};sd.rgb=function(){return Id(this.l,this.a,this.b)};s.rgb=function(a,c,h){return 1===arguments.length?a instanceof zc?ma(a.r,a.g,a.b):Nd(""+a,ma,uc):ma(~~a,~~c,~~h)};var cc=zc.prototype=new Va;cc.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var c=this.r,h=this.g,b=this.b;if(!c&&!h&&!b)return ma(30,30,30);c&&30>c&&(c=30);h&&30>h&&(h=30);b&&30>b&&
(b=30);return ma(Math.min(255,~~(c/a)),Math.min(255,~~(h/a)),Math.min(255,~~(b/a)))};cc.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return ma(~~(a*this.r),~~(a*this.g),~~(a*this.b))};cc.hsl=function(){return Od(this.r,this.g,this.b)};cc.toString=function(){return"#"+Za(this.r)+Za(this.g)+Za(this.b)};var vb=s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,
brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});vb.forEach(function(a,c){vb.set(a,
ma(c>>16,c>>8&255,c&255))});s.functor=M;s.xhr=Cc(W);s.dsv=function(a,c){function h(a,h,d){3>arguments.length&&(d=h,h=null);var e=s.xhr(a,c,d);e.row=function(a){return arguments.length?e.response(null==(h=a)?b:f(a)):h};return e.row(h)}function b(a){return h.parse(a.responseText)}function f(a){return function(c){return h.parse(c.responseText,a)}}function e(c){return c.map(g).join(a)}function g(a){return l.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var l=RegExp('["'+a+"\n]"),q=a.charCodeAt(0);h.parse=function(a,
c){var b;return h.parseRows(a,function(a,h){if(b)return b(a,h-1);var d=new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}");b=c?function(a,h){return c(d(a),h)}:d})};h.parseRows=function(a,c){function h(){if(g>=e)return d;if(v)return v=!1,b;var c=g;if(34===a.charCodeAt(c)){for(var f=c;f++<e;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}g=f+2;var n=a.charCodeAt(f+1);13===n?(v=!0,10===a.charCodeAt(f+2)&&++g):10===n&&(v=!0);return a.substring(c+
1,f).replace(/""/g,'"')}for(;g<e;){n=a.charCodeAt(g++);f=1;if(10===n)v=!0;else if(13===n)v=!0,10===a.charCodeAt(g)&&(++g,++f);else if(n!==q)continue;return a.substring(c,g-f)}return a.substring(c)}for(var b={},d={},f=[],e=a.length,g=0,n=0,l,v;(l=h())!==d;){for(var w=[];l!==b&&l!==d;)w.push(l),l=h();c&&!(w=c(w,n++))||f.push(w)}return f};h.format=function(c){if(Array.isArray(c[0]))return h.formatRows(c);var b=new d,f=[];c.forEach(function(a){for(var c in a)b.has(c)||f.push(b.add(c))});return[f.map(g).join(a)].concat(c.map(function(c){return f.map(function(a){return g(c[a])}).join(a)})).join("\n")};
h.formatRows=function(a){return a.map(e).join("\n")};return h};s.csv=s.dsv(",","text/csv");s.tsv=s.dsv("\t","text/tab-separated-values");var yb,zb,xb,wb,na,Sd=X[e(X,"requestAnimationFrame")]||function(a){setTimeout(a,17)};s.timer=function(a,c,h){var b=arguments.length;2>b&&(c=0);3>b&&(h=Date.now());b={callback:a,time:h+c,next:null};zb?zb.next=b:yb=b;zb=b;xb||(wb=clearTimeout(wb),xb=1,Sd(Ec))};s.timer.flush=function(){Qd();Rd()};var dc=[3,3],ph="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,
c){var h=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/h}:function(a){return a*h},symbol:a}});s.formatPrefix=function(a,c){var h=0;a&&(0>a&&(a*=-1),c&&(a=s.round(a,Fc(a,c))),h=1+Math.floor(1E-12+Math.log(a)/Math.LN10),h=Math.max(-24,Math.min(24,3*Math.floor((0>=h?h+1:h-1)/3))));return ph[8+h/3]};s.round=function(a,c){return c?Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};s.format=function(a){a=Xe.exec(a);var c=a[1]||" ",h=a[2]||">",b=a[3]||"",d=a[4]||"",f=a[5],e=+a[6],g=a[7],
l=a[8],q=a[9],u=1,m="",t=!1;l&&(l=+l.substring(1));if(f||"0"===c&&"="===h)f=c="0",h="=",g&&(e-=Math.floor((e-1)/4));switch(q){case "n":g=!0;q="g";break;case "%":u=100;m="%";q="f";break;case "p":u=100;m="%";q="r";break;case "b":case "o":case "x":case "X":"#"===d&&(d="0"+q.toLowerCase());case "c":case "d":t=!0;l=0;break;case "s":u=-1,q="r"}"#"===d?d="":"$"===d&&(d="$");"r"!=q||l||(q="g");if(null!=l)if("g"==q)l=Math.max(1,Math.min(21,l));else if("e"==q||"f"==q)l=Math.max(0,Math.min(20,l));var q=qh.get(q)||
Wf,x=f&&g;return function(a){if(t&&a%1)return"";var p=0>a||0===a&&0>1/a?(a=-a,"-"):b;if(0>u){var y=s.formatPrefix(a,l);a=y.scale(a);m=y.symbol}else a*=u;a=q(a,l);var r=a.lastIndexOf("."),y=0>r?a:a.substring(0,r);a=0>r?"":"."+a.substring(r+1);!f&&g&&(y=td(y));var r=d.length+y.length+a.length+(x?0:p.length),A=r<e?Array(r=e-r+1).join(c):"";x&&(y=td(A+y));p+=d;a=y+a;return("<"===h?p+a+A:">"===h?A+p+a:"^"===h?A.substring(0,r>>=1)+p+a+A.substring(r):p+(x?a:A+a))+m}};var Xe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
qh=s.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,c){return a.toPrecision(c)},e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=s.round(a,Fc(a,c))).toFixed(Math.max(0,Math.min(20,Fc(a*(1+1E-15),c))))}}),td=W;if(dc)var rh=dc.length,td=function(a){for(var c=a.length,h=[],
b=0,d=dc[0];0<c&&0<d;)h.push(a.substring(c-=d,c+d)),d=dc[b=(b+1)%rh];return h.reverse().join(",")};s.geo={};Gc.prototype={s:0,t:0,add:function(a){Ud(a,this.t,ec);Ud(ec.s,this.s,this);this.s?this.t+=ec.t:this.s=ec.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ec=new Gc;s.geo.stream=function(a,c){if(a&&zf.hasOwnProperty(a.type))zf[a.type](a,c);else Ab(a,c)};var zf={Feature:function(a,c){Ab(a.geometry,c)},FeatureCollection:function(a,c){for(var h=a.features,b=-1,d=h.length;++b<
d;)Ab(h[b].geometry,c)}},Vd={Sphere:function(a,c){c.sphere()},Point:function(a,c){a=a.coordinates;c.point(a[0],a[1],a[2])},MultiPoint:function(a,c){for(var h=a.coordinates,b=-1,d=h.length;++b<d;)a=h[b],c.point(a[0],a[1],a[2])},LineString:function(a,c){Hc(a.coordinates,c,0)},MultiLineString:function(a,c){for(var h=a.coordinates,b=-1,d=h.length;++b<d;)Hc(h[b],c,0)},Polygon:function(a,c){Wd(a.coordinates,c)},MultiPolygon:function(a,c){for(var h=a.coordinates,b=-1,d=h.length;++b<d;)Wd(h[b],c)},GeometryCollection:function(a,
c){for(var h=a.geometries,b=-1,d=h.length;++b<d;)Ab(h[b],c)}};s.geo.area=function(a){cb=0;s.geo.stream(a,ea);return cb};var cb,La=new Gc,ea={sphere:function(){cb+=4*D},point:l,lineStart:l,lineEnd:l,polygonStart:function(){La.reset();ea.lineStart=Xf},polygonEnd:function(){var a=2*La;cb+=0>a?4*D+a:a;ea.lineStart=ea.lineEnd=ea.point=l}};s.geo.bounds=function(){function a(a,c){S.push(z=[u=a,t=a]);c<m&&(m=c);c>x&&(x=c)}function c(c,h){var b=Ma([c*F,h*F]);if(A){var d=$a(A,b),d=$a([d[1],-d[0],0],d);Db(d);
var d=Eb(d),f=c-p,e=0<f?1:-1,n=d[0]*P*e,f=180<Math.abs(f);f^(e*p<n&&n<e*c)?(d=d[1]*P,d>x&&(x=d)):(n=(n+360)%360-180,f^(e*p<n&&n<e*c))?(d=-d[1]*P,d<m&&(m=d)):(h<m&&(m=h),h>x&&(x=h));f?c<p?g(u,c)>g(u,t)&&(t=c):g(c,t)>g(u,t)&&(u=c):t>=u?(c<u&&(u=c),c>t&&(t=c)):c>p?g(u,c)>g(u,t)&&(t=c):g(c,t)>g(u,t)&&(u=c)}else a(c,h);A=b;p=c}function h(){H.point=c}function b(){z[0]=u;z[1]=t;H.point=a;A=null}function d(a,h){if(A){var b=a-p;B+=180<Math.abs(b)?b+(0<b?360:-360):b}else y=a,r=h;ea.point(a,h);c(a,h)}function f(){ea.lineStart()}
function e(){d(y,r);ea.lineEnd();Math.abs(B)>G&&(u=-(t=180));z[0]=u;z[1]=t;A=null}function g(a,c){return 0>(c-=a)?c+360:c}function l(a,c){return a[0]-c[0]}function q(a,c){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}var u,m,t,x,p,y,r,A,B,S,z,H={point:a,lineStart:h,lineEnd:b,polygonStart:function(){H.point=d;H.lineStart=f;H.lineEnd=e;B=0;ea.polygonStart()},polygonEnd:function(){ea.polygonEnd();H.point=a;H.lineStart=h;H.lineEnd=b;0>La?(u=-(t=180),m=-(x=90)):B>G?x=90:B<-G&&(m=-90);z[0]=u;z[1]=t}};
return function(a){x=t=-(u=m=Infinity);S=[];s.geo.stream(a,H);if(a=S.length){S.sort(l);for(var c=1,h=S[0],b,d=[h];c<a;++c)b=S[c],q(b[0],h)||q(b[1],h)?(g(h[0],b[1])>g(h[0],h[1])&&(h[1]=b[1]),g(b[0],h[1])>g(h[0],h[1])&&(h[0]=b[0])):d.push(h=b);var f=-Infinity,e;a=d.length-1;c=0;for(h=d[a];c<=a;h=b,++c)b=d[c],(e=g(h[1],b[0]))>f&&(f=e,u=b[0],t=h[1])}S=z=null;return Infinity===u||Infinity===m?[[NaN,NaN],[NaN,NaN]]:[[u,m],[t,x]]}}();s.geo.centroid=function(a){gb=ab=ua=va=oa=ha=ia=da=Da=Ea=pa=0;s.geo.stream(a,
ka);a=Da;var c=Ea,h=pa,b=a*a+c*c+h*h;return b<xf&&(a=ha,c=ia,h=da,ab<G&&(a=ua,c=va,h=oa),b=a*a+c*c+h*h,b<xf)?[NaN,NaN]:[Math.atan2(c,a)*P,Ka(h/Math.sqrt(b))*P]};var gb,ab,ua,va,oa,ha,ia,da,Da,Ea,pa,ka={sphere:l,point:Jc,lineStart:Xd,lineEnd:Yd,polygonStart:function(){ka.lineStart=Yf},polygonEnd:function(){ka.lineStart=Xd}},ke=ae(hb,function(a){var c=NaN,h=NaN,b=NaN,d;return{lineStart:function(){a.lineStart();d=1},point:function(f,e){var g=0<f?D:-D,l=Math.abs(f-c);if(Math.abs(l-D)<G)a.point(c,h=0<
(h+e)/2?D/2:-D/2),a.point(b,h),a.lineEnd(),a.lineStart(),a.point(g,h),a.point(f,h),d=0;else if(b!==g&&l>=D){Math.abs(c-b)<G&&(c-=b*G);Math.abs(f-g)<G&&(f-=g*G);var l=c,q=h,u=f,m,t,s=Math.sin(l-u);h=Math.abs(s)>G?Math.atan((Math.sin(q)*(t=Math.cos(e))*Math.sin(u)-Math.sin(e)*(m=Math.cos(q))*Math.sin(l))/(m*t*s)):(q+e)/2;a.point(b,h);a.lineEnd();a.lineStart();a.point(g,h);d=0}a.point(c=f,h=e);b=g},lineEnd:function(){a.lineEnd();c=h=NaN},clean:function(){return 2-d}}},function(a,c,h,b){null==a?(h=h*
D/2,b.point(-D,h),b.point(0,h),b.point(D,h),b.point(D,0),b.point(D,-h),b.point(0,-h),b.point(-D,-h),b.point(-D,0),b.point(-D,h)):Math.abs(a[0]-c[0])>G?(a=(a[0]<c[0]?1:-1)*D,h=h*a/2,b.point(-a,h),b.point(0,h),b.point(a,h)):b.point(c[0],c[1])},function(a){return ce(sh,a)}),sh=[-D,0],Gb=1E9;s.geo.clipExtent=function(){var a,c,h,b,d,f,e={stream:function(a){d&&(d.valid=!1);d=f(a);d.valid=!0;return d},extent:function(g){if(!arguments.length)return[[a,c],[h,b]];f=de(a=+g[0][0],c=+g[0][1],h=+g[1][0],b=+g[1][1]);
d&&(d.valid=!1,d=null);return e}};return e.extent([[0,0],[960,500]])};(s.geo.conicEqualArea=function(){return Oc(fe)}).raw=fe;s.geo.albers=function(){return s.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};s.geo.albersUsa=function(){function a(a){var c=a[0];a=a[1];d=null;(e(c,a),d)||(g(c,a),d)||l(c,a);return d}var c=s.geo.albers(),h=s.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),b=s.geo.conicEqualArea().rotate([157,0]).center([-3,
19.9]).parallels([8,18]),d,f={point:function(a,c){d=[a,c]}},e,g,l;a.invert=function(a){var d=c.scale(),f=c.translate(),e=(a[0]-f[0])/d,d=(a[1]-f[1])/d;return(0.12<=d&&0.234>d&&-0.425<=e&&-0.214>e?h:0.166<=d&&0.234>d&&-0.214<=e&&-0.115>e?b:c).invert(a)};a.stream=function(a){var d=c.stream(a),f=h.stream(a),e=b.stream(a);return{point:function(a,c){d.point(a,c);f.point(a,c);e.point(a,c)},sphere:function(){d.sphere();f.sphere();e.sphere()},lineStart:function(){d.lineStart();f.lineStart();e.lineStart()},
lineEnd:function(){d.lineEnd();f.lineEnd();e.lineEnd()},polygonStart:function(){d.polygonStart();f.polygonStart();e.polygonStart()},polygonEnd:function(){d.polygonEnd();f.polygonEnd();e.polygonEnd()}}};a.precision=function(d){if(!arguments.length)return c.precision();c.precision(d);h.precision(d);b.precision(d);return a};a.scale=function(d){if(!arguments.length)return c.scale();c.scale(d);h.scale(0.35*d);b.scale(d);return a.translate(c.translate())};a.translate=function(d){if(!arguments.length)return c.translate();
var n=c.scale(),q=+d[0],u=+d[1];e=c.translate(d).clipExtent([[q-0.455*n,u-0.238*n],[q+0.455*n,u+0.238*n]]).stream(f).point;g=h.translate([q-0.307*n,u+0.201*n]).clipExtent([[q-0.425*n+G,u+0.12*n+G],[q-0.214*n-G,u+0.234*n-G]]).stream(f).point;l=b.translate([q-0.205*n,u+0.212*n]).clipExtent([[q-0.214*n+G,u+0.166*n+G],[q-0.115*n-G,u+0.234*n-G]]).stream(f).point;return a};return a.scale(1070)};var fc,Ib,Fa={point:l,lineStart:l,lineEnd:l,polygonStart:function(){Ib=0;Fa.lineStart=bg},polygonEnd:function(){Fa.lineStart=
Fa.lineEnd=Fa.point=l;fc+=Math.abs(Ib/2)}},gc,hc,ic,jc,th={point:function(a,c){a<gc&&(gc=a);a>ic&&(ic=a);c<hc&&(hc=c);c>jc&&(jc=c)},lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l},la={point:Oa,lineStart:he,lineEnd:ie,polygonStart:function(){la.lineStart=dg},polygonEnd:function(){la.point=Oa;la.lineStart=he;la.lineEnd=ie}};s.geo.transform=function(a){return{stream:function(c){c=new Jb(c);for(var h in a)c[h]=a[h];return c}}};Jb.prototype={point:function(a,c){this.stream.point(a,c)},sphere:function(){this.stream.sphere()},
lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};s.geo.path=function(){function a(a){a&&("function"===typeof h&&e.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=f(e)),s.geo.stream(a,g));return e.result()}function c(){g=null;return a}var h=4.5,b,d,f,e,g;a.area=function(a){fc=0;s.geo.stream(a,f(Fa));return fc};a.centroid=function(a){ua=va=oa=ha=ia=da=Da=Ea=
pa=0;s.geo.stream(a,f(la));return pa?[Da/pa,Ea/pa]:da?[ha/da,ia/da]:oa?[ua/oa,va/oa]:[NaN,NaN]};a.bounds=function(a){ic=jc=-(gc=hc=Infinity);s.geo.stream(a,f(th));return[[gc,hc],[ic,jc]]};a.projection=function(a){if(!arguments.length)return b;f=(b=a)?a.stream||fg(a):W;return c()};a.context=function(a){if(!arguments.length)return d;e=null==(d=a)?new cg:new eg(a);"function"!==typeof h&&e.pointRadius(h);return c()};a.pointRadius=function(c){if(!arguments.length)return h;h="function"===typeof c?c:(e.pointRadius(+c),
+c);return a};return a.projection(s.geo.albersUsa()).context(null)};s.geo.projection=Ga;s.geo.projectionMutator=Pc;(s.geo.equirectangular=function(){return Ga(ib)}).raw=ib.invert=ib;s.geo.rotation=function(a){function c(c){c=a(c[0]*F,c[1]*F);return c[0]*=P,c[1]*=P,c}a=Qc(a[0]%360*F,a[1]*F,2<a.length?a[2]*F:0);c.invert=function(c){c=a.invert(c[0]*F,c[1]*F);return c[0]*=P,c[1]*=P,c};return c};s.geo.circle=function(){function a(){var a="function"===typeof c?c.apply(this,arguments):c,h=Qc(-a[0]*F,-a[1]*
F,0).invert,b=[];d(null,null,1,{point:function(a,c){b.push(a=h(a,c));a[0]*=P;a[1]*=P}});return{type:"Polygon",coordinates:[b]}}var c=[0,0],h,b=6,d;a.origin=function(h){if(!arguments.length)return c;c=h;return a};a.angle=function(c){if(!arguments.length)return h;d=Mc((h=+c)*F,b*F);return a};a.precision=function(c){if(!arguments.length)return b;d=Mc(h*F,(b=+c)*F);return a};return a.angle(90)};s.geo.distance=function(a,c){var h=(c[0]-a[0])*F,b=a[1]*F,d=c[1]*F,f=Math.sin(h),h=Math.cos(h),e=Math.sin(b),
b=Math.cos(b),g=Math.sin(d),d=Math.cos(d),l;return Math.atan2(Math.sqrt((l=d*f)*l+(l=b*g-e*d*h)*l),e*g+b*d*h)};s.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return s.range(Math.ceil(f/t)*t,d,t).map(r).concat(s.range(Math.ceil(q/x)*x,l,x).map(A)).concat(s.range(Math.ceil(b/u)*u,h,u).filter(function(a){return Math.abs(a%t)>G}).map(p)).concat(s.range(Math.ceil(g/m)*m,e,m).filter(function(a){return Math.abs(a%x)>G}).map(y))}var h,b,d,f,e,g,l,q,u=10,
m=u,t=90,x=360,p,y,r,A,B=2.5;a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[r(f).concat(A(l).slice(1),r(d).reverse().slice(1),A(q).reverse().slice(1))]}};a.extent=function(c){return arguments.length?a.majorExtent(c).minorExtent(c):a.minorExtent()};a.majorExtent=function(c){if(!arguments.length)return[[f,q],[d,l]];f=+c[0][0];d=+c[1][0];q=+c[0][1];l=+c[1][1];f>d&&(c=f,f=d,d=c);q>l&&(c=q,q=l,l=c);return a.precision(B)};
a.minorExtent=function(c){if(!arguments.length)return[[b,g],[h,e]];b=+c[0][0];h=+c[1][0];g=+c[0][1];e=+c[1][1];b>h&&(c=b,b=h,h=c);g>e&&(c=g,g=e,e=c);return a.precision(B)};a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()};a.majorStep=function(c){if(!arguments.length)return[t,x];t=+c[0];x=+c[1];return a};a.minorStep=function(c){if(!arguments.length)return[u,m];u=+c[0];m=+c[1];return a};a.precision=function(c){if(!arguments.length)return B;B=+c;p=pe(g,e,90);y=qe(b,
h,B);r=pe(q,l,90);A=qe(f,d,B);return a};return a.majorExtent([[-180,-90+G],[180,90-G]]).minorExtent([[-180,-80-G],[180,80+G]])};s.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[h||c.apply(this,arguments),d||b.apply(this,arguments)]}}var c=Rc,h,b=Sc,d;a.distance=function(){return s.geo.distance(h||c.apply(this,arguments),d||b.apply(this,arguments))};a.source=function(b){if(!arguments.length)return c;c=b;h="function"===typeof b?null:b;return a};a.target=function(c){if(!arguments.length)return b;
b=c;d="function"===typeof c?null:c;return a};a.precision=function(){return arguments.length?a:0};return a};s.geo.interpolate=function(a,c){return hg(a[0]*F,a[1]*F,c[0]*F,c[1]*F)};s.geo.length=function(a){kc=0;s.geo.stream(a,db);return kc};var kc,db={sphere:l,point:l,lineStart:function(){function a(a,d){var f=Math.sin(d*=F),e=Math.cos(d),g=Math.abs((a*=F)-c),l=Math.cos(g);kc+=Math.atan2(Math.sqrt((g=e*Math.sin(g))*g+(g=b*f-h*e*l)*g),h*f+b*e*l);c=a;h=f;b=e}var c,h,b;db.point=function(d,f){c=d*F;h=Math.sin(f*=
F);b=Math.cos(f);db.point=a};db.lineEnd=function(){db.point=db.lineEnd=l}},lineEnd:l,polygonStart:l,polygonEnd:l},Af=jb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(s.geo.azimuthalEqualArea=function(){return Ga(Af)}).raw=Af;var Bf=jb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},W);(s.geo.azimuthalEquidistant=function(){return Ga(Bf)}).raw=Bf;(s.geo.conicConformal=function(){return Oc(re)}).raw=re;(s.geo.conicEquidistant=function(){return Oc(se)}).raw=se;var Cf=
jb(function(a){return 1/a},Math.atan);(s.geo.gnomonic=function(){return Ga(Cf)}).raw=Cf;Kb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-D/2]};(s.geo.mercator=function(){return te(Kb)}).raw=Kb;var Df=jb(function(){return 1},Math.asin);(s.geo.orthographic=function(){return Ga(Df)}).raw=Df;var Ef=jb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(s.geo.stereographic=function(){return Ga(Ef)}).raw=Ef;Tc.invert=function(a,c){return[Math.atan2(sc(a),Math.cos(c)),Ka(Math.sin(c)/
rb(a))]};(s.geo.transverseMercator=function(){return te(Tc)}).raw=Tc;s.geom={};s.svg={};s.svg.line=function(){return ue(W)};var Uc=s.map({linear:fa,"linear-closed":function(a){return fa(a)+"Z"},step:function(a){for(var c=0,h=a.length,b=a[0],d=[b[0],",",b[1]];++c<h;)d.push("H",(b[0]+(b=a[c])[0])/2,"V",b[1]);1<h&&d.push("H",b[0]);return d.join("")},"step-before":Vc,"step-after":Wc,basis:ve,"basis-open":function(a){if(4>a.length)return fa(a);for(var c=[],h=-1,b=a.length,d,f=[0],e=[0];3>++h;)d=a[h],f.push(d[0]),
e.push(d[1]);c.push(ja(Ha,f)+","+ja(Ha,e));for(--h;++h<b;)d=a[h],f.shift(),f.push(d[0]),e.shift(),e.push(d[1]),Yc(c,f,e);return c.join("")},"basis-closed":function(a){for(var c,h=-1,b=a.length,d=b+4,f,e=[],g=[];4>++h;)f=a[h%b],e.push(f[0]),g.push(f[1]);c=[ja(Ha,e),",",ja(Ha,g)];for(--h;++h<d;)f=a[h%b],e.shift(),e.push(f[0]),g.shift(),g.push(f[1]),Yc(c,e,g);return c.join("")},bundle:function(a,c){var h=a.length-1;if(h)for(var b=a[0][0],d=a[0][1],f=a[h][0]-b,e=a[h][1]-d,g=-1,l,q;++g<=h;)l=a[g],q=g/
h,l[0]=c*l[0]+(1-c)*(b+q*f),l[1]=c*l[1]+(1-c)*(d+q*e);return ve(a)},cardinal:function(a,c){return 3>a.length?fa(a):a[0]+Lb(a,Xc(a,c))},"cardinal-open":function(a,c){return 4>a.length?fa(a):a[1]+Lb(a.slice(1,a.length-1),Xc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?fa(a):a[0]+Lb((a.push(a[0]),a),Xc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>a.length)a=fa(a);else{var c=a[0],h=[],b,d,f,e;b=0;d=a.length-1;var g=[];f=a[1];for(e=g[0]=Zc(a[0],f);++b<d;)g[b]=(e+(e=Zc(f,
f=a[b+1])))/2;g[b]=e;for(var l=-1,q=a.length-1;++l<q;)b=Zc(a[l],a[l+1]),1E-6>Math.abs(b)?g[l]=g[l+1]=0:(d=g[l]/b,f=g[l+1]/b,e=d*d+f*f,9<e&&(e=3*b/Math.sqrt(e),g[l]=e*d,g[l+1]=e*f));for(l=-1;++l<=q;)e=(a[Math.min(q,l+1)][0]-a[Math.max(0,l-1)][0])/(6*(1+g[l]*g[l])),h.push([e||0,g[l]*e||0]);a=c+Lb(a,h)}return a}});Uc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});var we=[0,2/3,1/3,0],xe=[0,1/3,2/3,0],Ha=[0,1/6,2/3,1/6];s.geom.hull=function(a){function c(a){if(3>a.length)return[];var c=M(b),
f=M(d),e=a.length,g,l=e-1,q=[],u=[],m,t,s=0,x,p,y,r;if(c===qa&&d===wa)g=a;else for(t=0,g=[];t<e;++t)g.push([+c.call(this,m=a[t],t),+f.call(this,m,t)]);for(t=1;t<e;++t)if(g[t][1]<g[s][1]||g[t][1]==g[s][1]&&g[t][0]<g[s][0])s=t;for(t=0;t<e;++t)t!==s&&(f=g[t][1]-g[s][1],c=g[t][0]-g[s][0],q.push({angle:Math.atan2(f,c),index:t}));q.sort(function(a,c){return a.angle-c.angle});r=q[0].angle;y=q[0].index;p=0;for(t=1;t<l;++t){e=q[t].index;if(r==q[t].angle)if(c=g[y][0]-g[s][0],f=g[y][1]-g[s][1],m=g[e][0]-g[s][0],
x=g[e][1]-g[s][1],c*c+f*f>=m*m+x*x){q[t].index=-1;continue}else q[p].index=-1;r=q[t].angle;p=t;y=e}u.push(s);for(e=t=0;2>t;++e)-1<q[e].index&&(u.push(q[e].index),t++);for(t=u.length;e<l;++e)if(!(0>q[e].index)){for(;!ig(u[t-2],u[t-1],q[e].index,g);)--t;u[t++]=q[e].index}g=[];for(t-=1;0<=t;--t)g.push(a[u[t]]);return g}var b=qa,d=wa;if(arguments.length)return c(a);c.x=function(a){return arguments.length?(b=a,c):b};c.y=function(a){return arguments.length?(d=a,c):d};return c};s.geom.polygon=function(a){ob(a,
lc);return a};var lc=s.geom.polygon.prototype=[];lc.area=function(){for(var a=-1,c=this.length,b,d=this[c-1],f=0;++a<c;)b=d,d=this[a],f+=b[1]*d[0]-b[0]*d[1];return 0.5*f};lc.centroid=function(a){var c=-1,b=this.length,d=0,f=0,e,g=this[b-1],l;for(arguments.length||(a=-1/(6*this.area()));++c<b;)e=g,g=this[c],l=e[0]*g[1]-g[0]*e[1],d+=(e[0]+g[0])*l,f+=(e[1]+g[1])*l;return[d*a,f*a]};lc.clip=function(a){for(var c,b=ze(a),d=-1,f=this.length-ze(this),e,g,l=this[f-1],q,u,m;++d<f;){c=a.slice();a.length=0;q=
this[d];u=c[(g=c.length-b)-1];for(e=-1;++e<g;)m=c[e],$c(m,l,q)?($c(u,l,q)||a.push(ye(u,m,l,q)),a.push(m)):$c(u,l,q)&&a.push(ye(u,m,l,q)),u=m;b&&a.push(a[0]);l=q}return a};s.geom.delaunay=function(a){var c=a.map(function(){return[]}),b=[];ad(a,function(b){c[b.region.l.index].push(a[b.region.r.index])});c.forEach(function(c,d){var f=a[d],e=f[0],g=f[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-e,a[1]-g)});c.sort(function(a,c){return a.angle-c.angle});for(var l=0,q=c.length-1;l<q;l++)b.push([f,c[l],
c[l+1]])});return b};s.geom.voronoi=function(a){function c(a){var c,e=a.map(function(){return[]}),g=M(b),l=M(d),q,u,m=a.length;if(g===qa&&l===wa)c=a;else for(c=Array(m),u=0;u<m;++u)c[u]=[+g.call(this,q=a[u],u),+l.call(this,q,u)];ad(c,function(a){var c,b,h,d;1===a.a&&0<=a.b?(c=a.ep.r,b=a.ep.l):(c=a.ep.l,b=a.ep.r);1===a.a?(h=c?c.y:-1E6,c=a.c-a.b*h,d=b?b.y:1E6,b=a.c-a.b*d):(c=c?c.x:-1E6,h=a.c-a.a*c,b=b?b.x:1E6,d=a.c-a.a*b);c=[c,h];b=[b,d];e[a.region.l.index].push(c,b);e[a.region.r.index].push(c,b)});
e=e.map(function(a,b){var h=c[b][0],d=c[b][1],f=a.map(function(a){return Math.atan2(a[0]-h,a[1]-d)}),e=s.range(a.length).sort(function(a,c){return f[a]-f[c]});return e.filter(function(a,c){return!c||f[a]-f[e[c-1]]>G}).map(function(c){return a[c]})});e.forEach(function(a,b){var h=a.length;if(!h)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<h)){var d=c[b],f=a[0],e=a[1],h=d[0],d=d[1],g=f[0],f=f[1],l=e[0],q=e[1],n=Math.abs(l-g),e=q-f;Math.abs(e)<G?(h=d<f?-1E6:1E6,a.push([-1E6,h],[1E6,
h])):n<G?(h=h<g?-1E6:1E6,a.push([h,-1E6],[h,1E6])):(h=(l-g)*(f-d)<(g-h)*(q-f)?1E6:-1E6,d=Math.abs(e)-n,Math.abs(d)<G?a.push([0>e?h:-h,h]):(0<d&&(h*=-1),a.push([-1E6,h],[1E6,h])))}});if(f)for(u=0;u<m;++u)f.clip(e[u]);for(u=0;u<m;++u)e[u].point=a[u];return e}var b=qa,d=wa,f=null;if(arguments.length)return c(a);c.x=function(a){return arguments.length?(b=a,c):b};c.y=function(a){return arguments.length?(d=a,c):d};c.clipExtent=function(a){if(!arguments.length)return f&&[f[0],f[2]];if(null==a)f=null;else{var b=
+a[0][0],h=+a[0][1],d=+a[1][0],e=+a[1][1];f=s.geom.polygon([[b,h],[b,e],[d,e],[d,h]])}return c};c.size=function(a){return arguments.length?c.clipExtent(a&&[[0,0],a]):f&&f[2]};c.links=function(a){var c,f=a.map(function(){return[]}),e=[],g=M(b),l=M(d),q,n,u=a.length;if(g===qa&&l===wa)c=a;else for(c=Array(u),n=0;n<u;++n)c[n]=[+g.call(this,q=a[n],n),+l.call(this,q,n)];ad(c,function(c){var b=c.region.l.index;c=c.region.r.index;f[b][c]||(f[b][c]=f[c][b]=!0,e.push({source:a[b],target:a[c]}))});return e};
c.triangles=function(a){if(b===qa&&d===wa)return s.geom.delaunay(a);for(var c=Array(q),f=M(b),e=M(d),g,l=-1,q=a.length;++l<q;)(c[l]=[+f.call(this,g=a[l],l),+e.call(this,g,l)]).data=g;return s.geom.delaunay(c).map(function(a){return a.map(function(a){return a.data})})};return c};var bd={l:"r",r:"l"};s.geom.quadtree=function(a,c,b,d,f){function e(a){function u(a,c,b,h,d,f,e,g){if(!isNaN(b)&&!isNaN(h))if(a.leaf){var l=a.x,q=a.y;if(null!=l){if(!(0.01>Math.abs(l-b)+Math.abs(q-h))){var n=a.point;a.x=a.y=
a.point=null;m(a,n,l,q,d,f,e,g)}m(a,c,b,h,d,f,e,g)}else a.x=b,a.y=h,a.point=c}else m(a,c,b,h,d,f,e,g)}function m(a,c,b,h,d,f,e,g){var l=0.5*(d+e),q=0.5*(f+g),n=b>=l,w=h>=q,t=(w<<1)+n;a.leaf=!1;a=a.nodes[t]||(a.nodes[t]=Ae());n?d=l:e=l;w?f=q:g=q;u(a,c,b,h,d,f,e,g)}var w,t=M(g),s=M(l),x,p,y,r,A,B,z,H;if(null!=c)A=c,B=b,z=d,H=f;else if(z=H=-(A=B=Infinity),x=[],p=[],r=a.length,q)for(y=0;y<r;++y)w=a[y],w.x<A&&(A=w.x),w.y<B&&(B=w.y),w.x>z&&(z=w.x),w.y>H&&(H=w.y),x.push(w.x),p.push(w.y);else for(y=0;y<r;++y){var J=
+t(w=a[y],y);w=+s(w,y);J<A&&(A=J);w<B&&(B=w);J>z&&(z=J);w>H&&(H=w);x.push(J);p.push(w)}J=z-A;w=H-B;J>w?H=B+J:z=A+w;var L=Ae();L.add=function(a){u(L,a,+t(a,++y),+s(a,y),A,B,z,H)};L.visit=function(a){kb(a,L,A,B,z,H)};y=-1;if(null==c){for(;++y<r;)u(L,a[y],x[y],p[y],A,B,z,H);--y}else a.forEach(L.add);x=p=a=w=null;return L}var g=qa,l=wa,q;if(q=arguments.length)return g=jg,l=kg,3===q&&(f=b,d=c,b=c=0),e(a);e.x=function(a){return arguments.length?(g=a,e):g};e.y=function(a){return arguments.length?(l=a,e):
l};e.extent=function(a){if(!arguments.length)return null==c?null:[[c,b],[d,f]];null==a?c=b=d=f=null:(c=+a[0][0],b=+a[0][1],d=+a[1][0],f=+a[1][1]);return e};e.size=function(a){if(!arguments.length)return null==c?null:[d-c,f-b];null==a?c=b=d=f=null:(c=b=0,d=+a[0],f=+a[1]);return e};return e};s.interpolateRgb=cd;s.interpolateObject=Be;s.interpolateNumber=xa;s.interpolateString=Ce;var Mb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;s.interpolate=Pa;s.interpolators=[function(a,c){var b=typeof c;return("string"===
b?vb.has(c)||/^(#|rgb\(|hsl\()/.test(c)?cd:Ce:c instanceof Va?cd:"object"===b?Array.isArray(c)?Nb:Be:xa)(a,c)}];s.interpolateArray=Nb;var Ff=function(){return W},uh=s.map({linear:Ff,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return mg},cubic:function(){return ng},sin:function(){return pg},exp:function(){return qg},circle:function(){return rg},elastic:function(a,c){var b;2>arguments.length&&(c=0.45);arguments.length?b=c/(2*D)*Math.asin(1/a):(a=1,b=c/4);return function(d){return 1+
a*Math.pow(2,10*-d)*Math.sin(2*(d-b)*D/c)}},back:function(a){a||(a=1.70158);return function(c){return c*c*((a+1)*c-a)}},bounce:function(){return sg}}),vh=s.map({"in":W,out:De,"in-out":Ee,"out-in":function(a){return Ee(De(a))}});s.ease=function(a){var c=a.indexOf("-"),b=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in",b=uh.get(b)||Ff,c=vh.get(c)||W;return lg(c(b.apply(null,Array.prototype.slice.call(arguments,1))))};s.interpolateHcl=function(a,c){a=s.hcl(a);c=s.hcl(c);var b=a.h,d=a.c,f=a.l,e=c.h-
b,g=c.c-d,l=c.l-f;isNaN(g)&&(g=0,d=isNaN(d)?c.c:d);isNaN(e)?(e=0,b=isNaN(b)?c.h:b):180<e?e-=360:-180>e&&(e+=360);return function(a){return vc(b+e*a,d+g*a,f+l*a)+""}};s.interpolateHsl=function(a,c){a=s.hsl(a);c=s.hsl(c);var b=a.h,d=a.s,f=a.l,e=c.h-b,g=c.s-d,l=c.l-f;isNaN(g)&&(g=0,d=isNaN(d)?c.s:d);isNaN(e)?(e=0,b=isNaN(b)?c.h:b):180<e?e-=360:-180>e&&(e+=360);return function(a){return uc(b+e*a,d+g*a,f+l*a)+""}};s.interpolateLab=function(a,c){a=s.lab(a);c=s.lab(c);var b=a.l,d=a.a,f=a.b,e=c.l-b,g=c.a-
d,l=c.b-f;return function(a){return Id(b+e*a,d+g*a,f+l*a)+""}};s.interpolateRound=Fe;s.transform=function(a){var c=ga.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(a){if(null!=a){c.setAttribute("transform",a);var b=c.transform.baseVal.consolidate()}return new Ge(b?b.matrix:wh)})(a)};Ge.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var wh={a:1,b:0,c:0,d:1,e:0,f:0};s.interpolateTransform=Ie;s.layout=
{};s.layout.bundle=function(){return function(a){for(var c=[],b=-1,d=a.length;++b<d;)c.push(vg(a[b]));return c}};s.layout.chord=function(){function a(){var a={},b=[],h=s.range(g),t=[],x,p,y,r,A;d=[];f=[];x=0;for(r=-1;++r<g;){p=0;for(A=-1;++A<g;)p+=e[r][A];b.push(p);t.push(s.range(g));x+=p}q&&h.sort(function(a,c){return q(b[a],b[c])});u&&t.forEach(function(a,c){a.sort(function(a,b){return u(e[c][a],e[c][b])})});x=(2*D-l*g)/x;p=0;for(r=-1;++r<g;){y=p;for(A=-1;++A<g;){var B=h[r],z=t[B][A],H=e[B][z],
J=p,L=p+=H*x;a[B+"-"+z]={index:B,subindex:z,startAngle:J,endAngle:L,value:H}}f[B]={index:B,startAngle:y,endAngle:p,value:(p-y)/x};p+=l}for(r=-1;++r<g;)for(A=r-1;++A<g;)h=a[r+"-"+A],t=a[A+"-"+r],(h.value||t.value)&&d.push(h.value<t.value?{source:t,target:h}:{source:h,target:t});m&&c()}function c(){d.sort(function(a,c){return m((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var b={},d,f,e,g,l=0,q,u,m;b.matrix=function(a){if(!arguments.length)return e;g=(e=a)&&e.length;d=f=null;
return b};b.padding=function(a){if(!arguments.length)return l;l=a;d=f=null;return b};b.sortGroups=function(a){if(!arguments.length)return q;q=a;d=f=null;return b};b.sortSubgroups=function(a){if(!arguments.length)return u;u=a;d=null;return b};b.sortChords=function(a){if(!arguments.length)return m;m=a;d&&c();return b};b.chords=function(){d||a();return d};b.groups=function(){f||a();return f};return b};s.layout.force=function(){function a(a){return function(c,b,d,h){if(c.point!==a){d=c.cx-a.x;var f=c.cy-
a.y,e=1/Math.sqrt(d*d+f*f);if((h-b)*e<x)return b=c.charge*e*e,a.px-=d*b,a.py-=f*b,!0;c.point&&isFinite(e)&&(b=c.pointCharge*e*e,a.px-=d*b,a.py-=f*b)}return!c.charge}}function c(a){a.px=s.event.x;a.py=s.event.y;b.resume()}var b={},d=s.dispatch("start","tick","end"),f=[1,1],e,g,l=0.9,q=xh,u=yh,m=-30,t=0.1,x=0.8,p=[],y=[],r,A,B;b.tick=function(){if(0.005>(g*=0.99))return d.end({type:"end",alpha:g=0}),!0;var c=p.length,b=y.length,h,e,q,u,w,x,z;for(h=0;h<b;++h)if(e=y[h],q=e.source,u=e.target,x=u.x-q.x,
z=u.y-q.y,w=x*x+z*z)w=g*A[h]*((w=Math.sqrt(w))-r[h])/w,x*=w,z*=w,u.x-=x*(w=q.weight/(u.weight+q.weight)),u.y-=z*w,q.x+=x*(w=1-w),q.y+=z*w;if(w=g*t)if(x=f[0]/2,z=f[1]/2,h=-1,w)for(;++h<c;)e=p[h],e.x+=(x-e.x)*w,e.y+=(z-e.y)*w;if(m)for(Ke(b=s.geom.quadtree(p),g,B),h=-1;++h<c;)(e=p[h]).fixed||b.visit(a(e));for(h=-1;++h<c;)e=p[h],e.fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*l,e.y-=(e.py-(e.py=e.y))*l);d.tick({type:"tick",alpha:g})};b.nodes=function(a){if(!arguments.length)return p;p=a;return b};
b.links=function(a){if(!arguments.length)return y;y=a;return b};b.size=function(a){if(!arguments.length)return f;f=a;return b};b.linkDistance=function(a){if(!arguments.length)return q;q="function"===typeof a?a:+a;return b};b.distance=b.linkDistance;b.linkStrength=function(a){if(!arguments.length)return u;u="function"===typeof a?a:+a;return b};b.friction=function(a){if(!arguments.length)return l;l=+a;return b};b.charge=function(a){if(!arguments.length)return m;m="function"===typeof a?a:+a;return b};
b.gravity=function(a){if(!arguments.length)return t;t=+a;return b};b.theta=function(a){if(!arguments.length)return x;x=+a;return b};b.alpha=function(a){if(!arguments.length)return g;a=+a;g?g=0<a?a:0:0<a&&(d.start({type:"start",alpha:g=a}),s.timer(b.tick));return b};b.start=function(){function a(b,h){var f;if(!w){w=[];for(d=0;d<e;++d)w[d]=[];for(d=0;d<g;++d)f=y[d],w[f.source.index].push(f.target),w[f.target.index].push(f.source)}f=w[c];for(var l=-1,q=f.length,n;++l<q;)if(!isNaN(n=f[l][b]))return n;
return Math.random()*h}var c,d,e=p.length,g=y.length,l=f[0],t=f[1],w,v;for(c=0;c<e;++c)(v=p[c]).index=c,v.weight=0;for(c=0;c<g;++c)v=y[c],"number"==typeof v.source&&(v.source=p[v.source]),"number"==typeof v.target&&(v.target=p[v.target]),++v.source.weight,++v.target.weight;for(c=0;c<e;++c)v=p[c],isNaN(v.x)&&(v.x=a("x",l)),isNaN(v.y)&&(v.y=a("y",t)),isNaN(v.px)&&(v.px=v.x),isNaN(v.py)&&(v.py=v.y);r=[];if("function"===typeof q)for(c=0;c<g;++c)r[c]=+q.call(this,y[c],c);else for(c=0;c<g;++c)r[c]=q;A=
[];if("function"===typeof u)for(c=0;c<g;++c)A[c]=+u.call(this,y[c],c);else for(c=0;c<g;++c)A[c]=u;B=[];if("function"===typeof m)for(c=0;c<e;++c)B[c]=+m.call(this,p[c],c);else for(c=0;c<e;++c)B[c]=m;return b.resume()};b.resume=function(){return b.alpha(0.1)};b.stop=function(){return b.alpha(0)};b.drag=function(){e||(e=s.behavior.drag().origin(W).on("dragstart.force",wg).on("drag.force",c).on("dragend.force",xg));if(!arguments.length)return e;this.on("mouseover.force",yg).on("mouseout.force",zg).call(e)};
return s.rebind(b,d,"on")};var xh=20,yh=1;s.layout.hierarchy=function(){function a(c,g,l){var q=f.call(b,c,g);c.depth=g;l.push(c);if(q&&(m=q.length)){var u=-1,m,t=c.children=[],x=0;g+=1;for(var s;++u<m;)s=a(q[u],g,l),s.parent=c,t.push(s),x+=s.value;d&&t.sort(d);e&&(c.value=x)}else e&&(c.value=+e.call(b,c,g)||0);return c}function c(a,d){var f=a.children,g=0;if(f&&(q=f.length))for(var l=-1,q,n=d+1;++l<q;)g+=c(f[l],n);else e&&(g=+e.call(b,a,d)||0);e&&(a.value=g);return g}function b(c){var d=[];a(c,0,
d);return d}var d=Dg,f=Bg,e=Cg;b.sort=function(a){if(!arguments.length)return d;d=a;return b};b.children=function(a){if(!arguments.length)return f;f=a;return b};b.value=function(a){if(!arguments.length)return e;e=a;return b};b.revalue=function(a){c(a,0);return a};return b};s.layout.partition=function(){function a(c,b,d,h){var f=c.children;c.x=b;c.y=c.depth*h;c.dx=d;c.dy=h;if(f&&(g=f.length)){var e=-1,g,l;for(d=c.value?d/c.value:0;++e<g;)a(l=f[e],b,c=l.value*d,h),b+=c}}function c(a){a=a.children;var b=
0;if(a&&(h=a.length))for(var d=-1,h;++d<h;)b=Math.max(b,c(a[d]));return 1+b}function b(h,e){var g=d.call(this,h,e);a(g[0],0,f[0],f[1]/c(g[0]));return g}var d=s.layout.hierarchy(),f=[1,1];b.size=function(a){if(!arguments.length)return f;f=a;return b};return lb(b,d)};s.layout.pie=function(){function a(e){var g=e.map(function(b,d){return+c.call(a,b,d)}),l=+("function"===typeof d?d.apply(this,arguments):d),q=(("function"===typeof f?f.apply(this,arguments):f)-l)/s.sum(g),u=s.range(e.length);null!=b&&u.sort(b===
Gf?function(a,c){return g[c]-g[a]}:function(a,c){return b(e[a],e[c])});var m=[];u.forEach(function(a){var c;m[a]={data:e[a],value:c=g[a],startAngle:l,endAngle:l+=c*q}});return m}var c=Number,b=Gf,d=0,f=2*D;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.startAngle=function(c){if(!arguments.length)return d;d=c;return a};a.endAngle=function(c){if(!arguments.length)return f;f=c;return a};return a};var Gf={};s.layout.stack=
function(){function a(l,q){var u=l.map(function(b,d){return c.call(a,b,d)}),m=u.map(function(c){return c.map(function(c,b){return[e.call(a,c,b),g.call(a,c,b)]})}),t=b.call(a,m,q),u=s.permute(u,t),m=s.permute(m,t),t=d.call(a,m,q),x=u.length,p=u[0].length,y,r,A;for(r=0;r<p;++r)for(f.call(a,u[0][r],A=t[r],m[0][r][1]),y=1;y<x;++y)f.call(a,u[y][r],A+=m[y-1][r][1],m[y][r][1]);return l}var c=W,b=dd,d=ed,f=Gg,e=Eg,g=Fg;a.values=function(b){if(!arguments.length)return c;c=b;return a};a.order=function(c){if(!arguments.length)return b;
b="function"===typeof c?c:zh.get(c)||dd;return a};a.offset=function(c){if(!arguments.length)return d;d="function"===typeof c?c:Ah.get(c)||ed;return a};a.x=function(c){if(!arguments.length)return e;e=c;return a};a.y=function(c){if(!arguments.length)return g;g=c;return a};a.out=function(c){if(!arguments.length)return f;f=c;return a};return a};var zh=s.map({"inside-out":function(a){var c=a.length,b,d=a.map(Hg),f=a.map(Ig),e=s.range(c).sort(function(a,c){return d[a]-d[c]}),g=0,l=0,q=[],u=[];for(a=0;a<
c;++a)b=e[a],g<l?(g+=f[b],q.push(b)):(l+=f[b],u.push(b));return u.reverse().concat(q)},reverse:function(a){return s.range(a.length).reverse()},"default":dd}),Ah=s.map({silhouette:function(a){var c=a.length,b=a[0].length,d=[],f=0,e,g,l,q=[];for(g=0;g<b;++g){for(l=e=0;e<c;e++)l+=a[e][g][1];l>f&&(f=l);d.push(l)}for(g=0;g<b;++g)q[g]=(f-d[g])/2;return q},wiggle:function(a){var c=a.length,b=a[0],d=b.length,f,e,g,l,q,u,m,t,x,s=[];s[0]=t=x=0;for(e=1;e<d;++e){for(l=f=0;f<c;++f)l+=a[f][e][1];q=f=0;for(m=b[e][0]-
b[e-1][0];f<c;++f){g=0;for(u=(a[f][e][1]-a[f][e-1][1])/(2*m);g<f;++g)u+=(a[g][e][1]-a[g][e-1][1])/m;q+=u*a[f][e][1]}s[e]=t-=l?q/l*m:0;t<x&&(x=t)}for(e=0;e<d;++e)s[e]-=x;return s},expand:function(a){var c=a.length,b=a[0].length,d=1/c,f,e,g,l=[];for(e=0;e<b;++e){for(g=f=0;f<c;f++)g+=a[f][e][1];if(g)for(f=0;f<c;f++)a[f][e][1]/=g;else for(f=0;f<c;f++)a[f][e][1]=d}for(e=0;e<b;++e)l[e]=0;return l},zero:ed});s.layout.histogram=function(){function a(a,e){var g=[],l=a.map(b,this),q=d.call(this,l,e),u=f.call(this,
q,l,e),m;e=-1;for(var t=l.length,x=u.length-1,p=c?1:1/t;++e<x;)m=g[e]=[],m.dx=u[e+1]-(m.x=u[e]),m.y=0;if(0<x)for(e=-1;++e<t;)m=l[e],m>=q[0]&&m<=q[1]&&(m=g[s.bisect(u,m,1,x)-1],m.y+=p,m.push(a[e]));return g}var c=!0,b=Number,d=Lg,f=Kg;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.range=function(c){if(!arguments.length)return d;d=M(c);return a};a.bins=function(c){if(!arguments.length)return f;f="number"===typeof c?function(a){return Le(a,c)}:M(c);return a};a.frequency=function(b){if(!arguments.length)return c;
c=!!b;return a};return a};s.layout.tree=function(){function a(a,e){function g(a,c){var d=a.children,f=a._tree;if(d&&(e=d.length)){for(var e,l=d[0],q,u=l,n,m=-1;++m<e;){n=d[m];g(n,q);var t=n;if(q){for(var v=t,w=t,x=t.parent.children[0],s=v._tree.mod,p=w._tree.mod,y=q._tree.mod,r=x._tree.mod,A=void 0;q=gd(q),v=fd(v),q&&v;){x=fd(x);w=gd(w);w._tree.ancestor=t;A=q._tree.prelim+y-v._tree.prelim-s+b(q,v);if(0<A){var B=q._tree.ancestor.parent==t.parent?q._tree.ancestor:u,z=t,H=A,B=B._tree,z=z._tree,I=H/(z.number-
B.number);B.change+=I;z.change-=I;z.shift+=H;z.prelim+=H;z.mod+=H;s+=A;p+=A}y+=q._tree.mod;s+=v._tree.mod;r+=x._tree.mod;p+=w._tree.mod}q&&!gd(w)&&(w._tree.thread=q,w._tree.mod+=y-p);v&&!fd(x)&&(x._tree.thread=v,x._tree.mod+=s-r,u=t)}q=n}e=d=0;m=a.children;for(t=m.length;0<=--t;)u=m[t]._tree,u.prelim+=d,u.mod+=d,d+=u.shift+(e+=u.change);l=0.5*(l._tree.prelim+n._tree.prelim);c?(f.prelim=c._tree.prelim+b(a,c),f.mod=f.prelim-l):f.prelim=l}else c&&(f.prelim=c._tree.prelim+b(a,c))}function l(a,c){a.x=
a._tree.prelim+c;var b=a.children;if(b&&(h=b.length)){var d=-1,h;for(c+=a._tree.mod;++d<h;)l(b[d],c)}}var q=c.call(this,a,e),u=q[0];ya(u,function(a,c){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:c?c._tree.number+1:0}});g(u);l(u,-u._tree.prelim);var m=Ob(u,Ng),t=Ob(u,Mg),x=Ob(u,Og),s=m.x-b(m,t)/2,p=t.x+b(t,m)/2,y=x.depth||1;ya(u,f?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-s)/(p-s)*d[0];a.y=a.depth/y*d[1];delete a._tree});return q}var c=s.layout.hierarchy().sort(null).value(null),
b=Me,d=[1,1],f=!1;a.separation=function(c){if(!arguments.length)return b;b=c;return a};a.size=function(c){if(!arguments.length)return f?null:d;f=null==(d=c);return a};a.nodeSize=function(c){if(!arguments.length)return f?d:null;f=null!=(d=c);return a};return lb(a,c)};s.layout.pack=function(){function a(a,e){var g=c.call(this,a,e),l=g[0],q=d[0],u=d[1],m=null==f?Math.sqrt:"function"===typeof f?f:function(){return f};l.x=l.y=0;ya(l,function(a){a.r=+m(a.value)});ya(l,Pe);if(b){var t=b*(f?1:Math.max(2*
l.r/q,2*l.r/u))/2;ya(l,function(a){a.r+=t});ya(l,Pe);ya(l,function(a){a.r-=t})}Re(l,q/2,u/2,f?1:1/Math.max(2*l.r/q,2*l.r/u));return g}var c=s.layout.hierarchy().sort(Pg),b=0,d=[1,1],f;a.size=function(c){if(!arguments.length)return d;d=c;return a};a.radius=function(c){if(!arguments.length)return f;f=null==c||"function"===typeof c?c:+c;return a};a.padding=function(c){if(!arguments.length)return b;b=+c;return a};return lb(a,c)};s.layout.cluster=function(){function a(a,e){var g=c.call(this,a,e),l=g[0],
q,u=0;ya(l,function(a){var c=a.children;c&&c.length?(a.x=Tg(c),a.y=Sg(c)):(a.x=q?u+=b(a,q):0,a.y=0,q=a)});var m=Se(l),t=Te(l),x=m.x-b(m,t)/2,s=t.x+b(t,m)/2;ya(l,f?function(a){a.x=(a.x-l.x)*d[0];a.y=(l.y-a.y)*d[1]}:function(a){a.x=(a.x-x)/(s-x)*d[0];a.y=(1-(l.y?a.y/l.y:1))*d[1]});return g}var c=s.layout.hierarchy().sort(null).value(null),b=Me,d=[1,1],f=!1;a.separation=function(c){if(!arguments.length)return b;b=c;return a};a.size=function(c){if(!arguments.length)return f?null:d;f=null==(d=c);return a};
a.nodeSize=function(c){if(!arguments.length)return f?d:null;f=null!=(d=c);return a};return lb(a,c)};s.layout.treemap=function(){function a(a,c){for(var b=-1,d=a.length,f,h;++b<d;)h=(f=a[b]).value*(0>c?0:c),f.area=isNaN(h)||0>=h?0:h}function c(b){var f=b.children;if(f&&f.length){var h=u(b),e=[],g=f.slice(),l=Infinity,q,n="slice"===x?h.dx:"dice"===x?h.dy:"slice-dice"===x?b.depth&1?h.dy:h.dx:Math.min(h.dx,h.dy);a(g,h.dx*h.dy/b.value);for(e.area=0;0<(b=g.length);){e.push(b=g[b-1]);e.area+=b.area;if(!(b=
"squarify"!==x)){q=n;b=e.area;for(var m=void 0,t=0,s=Infinity,w=-1,y=e.length;++w<y;)if(m=e[w].area)m<s&&(s=m),m>t&&(t=m);b*=b;q*=q;b=(q=b?Math.max(q*t*p/b,b/(q*s*p)):Infinity)<=l}b?(g.pop(),l=q):(e.area-=e.pop().area,d(e,n,h,!1),n=Math.min(h.dx,h.dy),e.length=e.area=0,l=Infinity)}e.length&&(d(e,n,h,!0),e.length=e.area=0);f.forEach(c)}}function b(c){var f=c.children;if(f&&f.length){var e=u(c),g=f.slice(),l=[];a(g,e.dx*e.dy/c.value);for(l.area=0;c=g.pop();)l.push(c),l.area+=c.area,null!=c.z&&(d(l,
c.z?e.dx:e.dy,e,!g.length),l.length=l.area=0);f.forEach(b)}}function d(a,c,b,f){var h=-1,e=a.length,l=b.x,q=b.y,u=c?g(a.area/c):0,n;if(c==b.dx){if(f||u>b.dy)u=b.dy;for(;++h<e;)n=a[h],n.x=l,n.y=q,n.dy=u,l+=n.dx=Math.min(b.x+b.dx-l,u?g(n.area/u):0);n.z=!0;n.dx+=b.x+b.dx-l;b.y+=u;b.dy-=u}else{if(f||u>b.dx)u=b.dx;for(;++h<e;)n=a[h],n.x=l,n.y=q,n.dx=u,q+=n.dy=Math.min(b.y+b.dy-q,u?g(n.area/u):0);n.z=!1;n.dy+=b.y+b.dy-q;b.x+=u;b.dx-=u}}function f(d){d=t||e(d);var g=d[0];g.x=0;g.y=0;g.dx=l[0];g.dy=l[1];
t&&e.revalue(g);a([g],g.dx*g.dy/g.value);(t?b:c)(g);m&&(t=d);return d}var e=s.layout.hierarchy(),g=Math.round,l=[1,1],q=null,u=id,m=!1,t,x="squarify",p=0.5*(1+Math.sqrt(5));f.size=function(a){if(!arguments.length)return l;l=a;return f};f.padding=function(a){function c(b){var d=a.call(f,b,b.depth);return null==d?id(b):Ue(b,"number"===typeof d?[d,d,d,d]:d)}function b(c){return Ue(c,a)}if(!arguments.length)return q;var d;u=null==(q=a)?id:"function"===(d=typeof a)?c:"number"===d?(a=[a,a,a,a],b):b;return f};
f.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return f};f.sticky=function(a){if(!arguments.length)return m;m=a;t=null;return f};f.ratio=function(a){if(!arguments.length)return p;p=a;return f};f.mode=function(a){if(!arguments.length)return x;x=a+"";return f};return lb(f,e)};s.random={normal:function(a,c){var b=arguments.length;2>b&&(c=1);1>b&&(a=0);return function(){var b,d;do b=2*Math.random()-1,d=2*Math.random()-1,d=b*b+d*d;while(!d||1<d);return a+c*b*Math.sqrt(-2*
Math.log(d)/d)}},logNormal:function(){var a=s.random.normal.apply(s,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,b=0;b<a;b++)c+=Math.random();return c/a}}};s.scale={};var Vg={floor:W,ceil:W};s.scale.linear=function(){return We([0,1],[0,1],Pa,!1)};s.scale.log=function(){return Ye(s.scale.linear().domain([0,1]),10,!0,[1,10])};var Ze=s.format(".0e"),Xg={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};s.scale.pow=
function(){return $e(s.scale.linear(),1,[0,1])};s.scale.sqrt=function(){return s.scale.pow().exponent(0.5)};s.scale.ordinal=function(){return af([],{t:"range",a:[[]]})};s.scale.category10=function(){return s.scale.ordinal().range(Bh)};s.scale.category20=function(){return s.scale.ordinal().range(Ch)};s.scale.category20b=function(){return s.scale.ordinal().range(Dh)};s.scale.category20c=function(){return s.scale.ordinal().range(Eh)};var Bh=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,
8355711,12369186,1556175].map(ub),Ch=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ub),Dh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ub),Eh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,
13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ub);s.scale.quantile=function(){return bf([],[])};s.scale.quantize=function(){return cf(0,1,[0,1])};s.scale.threshold=function(){return df([0.5],[0,1])};s.scale.identity=function(){return ef([0,1])};s.svg.arc=function(){function a(){var a=c.apply(this,arguments),e=b.apply(this,arguments),g=d.apply(this,arguments)+Qa,l=f.apply(this,arguments)+Qa,q=(l<g&&(q=g,g=l,l=q),l-g),u=q<D?"0":"1",m=Math.cos(g),g=Math.sin(g),t=
Math.cos(l),l=Math.sin(l);return q>=Fh?a?"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z":a?"M"+e*m+","+e*g+"A"+e+","+e+" 0 "+u+",1 "+e*t+","+e*l+"L"+a*t+","+a*l+"A"+a+","+a+" 0 "+u+",0 "+a*m+","+a*g+"Z":"M"+e*m+","+e*g+"A"+e+","+e+" 0 "+u+",1 "+e*t+","+e*l+"L0,0Z"}var c=Yg,b=Zg,d=ff,f=gf;a.innerRadius=function(b){if(!arguments.length)return c;c=M(b);return a};
a.outerRadius=function(c){if(!arguments.length)return b;b=M(c);return a};a.startAngle=function(c){if(!arguments.length)return d;d=M(c);return a};a.endAngle=function(c){if(!arguments.length)return f;f=M(c);return a};a.centroid=function(){var a=(c.apply(this,arguments)+b.apply(this,arguments))/2,e=(d.apply(this,arguments)+f.apply(this,arguments))/2+Qa;return[Math.cos(e)*a,Math.sin(e)*a]};return a};var Qa=-D/2,Fh=2*D-1E-6;s.svg.line.radial=function(){var a=ue(hf);a.radius=a.x;delete a.x;a.angle=a.y;
delete a.y;return a};Vc.reverse=Wc;Wc.reverse=Vc;s.svg.area=function(){return jf(W)};s.svg.area.radial=function(){var a=jf(hf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};s.svg.chord=function(){function a(a,f){var e=c(this,b,a,f),g=c(this,d,a,f);return"M"+e.p0+("A"+e.r+","+e.r+" 0 "+ +(e.a1-e.a0>D)+",1 "+e.p1)+(e.a0==g.a0&&e.a1==g.a1?"Q 0,0 "+e.p0:"Q 0,0 "+g.p0+("A"+
g.r+","+g.r+" 0 "+ +(g.a1-g.a0>D)+",1 "+g.p1)+("Q 0,0 "+e.p0))+"Z"}function c(a,c,b,d){var h=c.call(a,b,d);c=f.call(a,h,d);b=e.call(a,h,d)+Qa;a=g.call(a,h,d)+Qa;return{r:c,a0:b,a1:a,p0:[c*Math.cos(b),c*Math.sin(b)],p1:[c*Math.cos(a),c*Math.sin(a)]}}var b=Rc,d=Sc,f=$g,e=ff,g=gf;a.radius=function(c){if(!arguments.length)return f;f=M(c);return a};a.source=function(c){if(!arguments.length)return b;b=M(c);return a};a.target=function(c){if(!arguments.length)return d;d=M(c);return a};a.startAngle=function(c){if(!arguments.length)return e;
e=M(c);return a};a.endAngle=function(c){if(!arguments.length)return g;g=M(c);return a};return a};s.svg.diagonal=function(){function a(a,f){var e=c.call(this,a,f),g=b.call(this,a,f),l=(e.y+g.y)/2,e=[e,{x:e.x,y:l},{x:g.x,y:l},g],e=e.map(d);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var c=Rc,b=Sc,d=kf;a.source=function(b){if(!arguments.length)return c;c=M(b);return a};a.target=function(c){if(!arguments.length)return b;b=M(c);return a};a.projection=function(c){if(!arguments.length)return d;d=c;return a};
return a};s.svg.diagonal.radial=function(){var a=s.svg.diagonal(),c=kf,b=a.projection;a.projection=function(a){return arguments.length?b(ah(c=a)):c};return a};s.svg.symbol=function(){function a(a,d){return(Hf.get(c.call(this,a,d))||lf)(b.call(this,a,d))}var c=ch,b=bh;a.type=function(b){if(!arguments.length)return c;c=M(b);return a};a.size=function(c){if(!arguments.length)return b;b=M(c);return a};return a};var Hf=s.map({circle:lf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+
-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*If));var c=a*If;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/mc);var c=a*mc/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/mc);var c=a*mc/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});s.svg.symbolTypes=Hf.keys();
var mc=Math.sqrt(3),If=Math.tan(30*F),U=[],wf=0,Ta,$b;U.call=K.call;U.empty=K.empty;U.node=K.node;U.size=K.size;s.transition=function(a){return arguments.length?Ta?a.transition():a:vf.transition()};s.transition.prototype=U;U.select=function(a){var c=this.id,b=[],d,f,e;a=B(a);for(var g=-1,l=this.length;++g<l;){b.push(d=[]);for(var q=this[g],u=-1,m=q.length;++u<m;)(e=q[u])&&(f=a.call(e,e.__data__,u,g))?("__data__"in e&&(f.__data__=e.__data__),Sb(f,u,c,e.__transition__[c]),d.push(f)):d.push(null)}return mb(b,
c)};U.selectAll=function(a){var c=this.id,b=[],d,f,e,g;a=z(a);for(var l=-1,q=this.length;++l<q;)for(var u=this[l],m=-1,t=u.length;++m<t;)if(d=u[m]){g=d.__transition__[c];f=a.call(d,d.__data__,m,l);b.push(d=[]);for(var x=-1,s=f.length;++x<s;)(e=f[x])&&Sb(e,x,c,g),d.push(e)}return mb(b,c)};U.filter=function(a){var c=[],b,d,f;"function"!==typeof a&&(a=H(a));for(var e=0,g=this.length;e<g;e++){c.push(b=[]);d=this[e];for(var l=0,q=d.length;l<q;l++)(f=d[l])&&a.call(f,f.__data__,l)&&b.push(f)}return mb(c,
this.id)};U.tween=function(a,c){var b=this.id;return 2>arguments.length?this.node().__transition__[b].tween.get(a):V(this,null==c?function(c){c.__transition__[b].tween.remove(a)}:function(d){d.__transition__[b].tween.set(a,c)})};U.attr=function(a,c){function b(){this.removeAttribute(l)}function d(){this.removeAttributeNS(l.space,l.local)}function f(a){return null==a?b:(a+="",function(){var c=this.getAttribute(l),b;return c!==a&&(b=g(c,a),function(a){this.setAttribute(l,b(a))})})}function e(a){return null==
a?d:(a+="",function(){var c=this.getAttributeNS(l.space,l.local),b;return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(l.space,l.local,b(a))})})}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var g="transform"==a?Ie:Pa,l=s.ns.qualify(a);return ld(this,"attr."+a,c,l.local?e:f)};U.attrTween=function(a,c){function b(a,d){var h=c.call(this,a,d,this.getAttribute(f));return h&&function(a){this.setAttribute(f,h(a))}}function d(a,b){var h=c.call(this,a,b,this.getAttributeNS(f.space,f.local));
return h&&function(a){this.setAttributeNS(f.space,f.local,h(a))}}var f=s.ns.qualify(a);return this.tween("attr."+a,f.local?d:b)};U.style=function(a,c,b){function d(){this.style.removeProperty(a)}var f=arguments.length;if(3>f){if("string"!==typeof a){2>f&&(c="");for(b in a)this.style(b,a[b],c);return this}b=""}return ld(this,"style."+a,c,function(c){return null==c?d:(c+="",function(){var d=X.getComputedStyle(this,null).getPropertyValue(a),f;return d!==c&&(f=Pa(d,c),function(c){this.style.setProperty(a,
f(c),b)})})})};U.styleTween=function(a,c,b){3>arguments.length&&(b="");return this.tween("style."+a,function(d,f){var e=c.call(this,d,f,X.getComputedStyle(this,null).getPropertyValue(a));return e&&function(c){this.style.setProperty(a,e(c),b)}})};U.text=function(a){return ld(this,"text",a,dh)};U.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};U.ease=function(a){var c=this.id;if(1>arguments.length)return this.node().__transition__[c].ease;
"function"!==typeof a&&(a=s.ease.apply(s,arguments));return V(this,function(b){b.__transition__[c].ease=a})};U.delay=function(a){var c=this.id;return V(this,"function"===typeof a?function(b,d,f){b.__transition__[c].delay=+a.call(b,b.__data__,d,f)}:(a=+a,function(b){b.__transition__[c].delay=a}))};U.duration=function(a){var c=this.id;return V(this,"function"===typeof a?function(b,d,f){b.__transition__[c].duration=Math.max(1,a.call(b,b.__data__,d,f))}:(a=Math.max(1,a),function(b){b.__transition__[c].duration=
a}))};U.each=function(a,c){var b=this.id;if(2>arguments.length){var d=$b,f=Ta;Ta=b;V(this,function(c,d,f){$b=c.__transition__[b];a.call(c,c.__data__,d,f)});$b=d;Ta=f}else V(this,function(d){d=d.__transition__[b];(d.event||(d.event=s.dispatch("start","end"))).on(a,c)});return this};U.transition=function(){for(var a=this.id,c=++wf,b=[],d,f,e,g,l=0,q=this.length;l<q;l++){b.push(d=[]);f=this[l];for(var u=0,m=f.length;u<m;u++){if(e=f[u])g=Object.create(e.__transition__[a]),g.delay+=g.duration,Sb(e,u,c,
g);d.push(e)}}return mb(b,c)};s.svg.axis=function(){function a(a){a.each(function(){var a=s.select(this),u=null==l?c.ticks?c.ticks.apply(c,g):c.domain():l,m=null==q?c.tickFormat?c.tickFormat.apply(c,g):W:q,t=a.selectAll(".tick").data(u,W),u=t.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),x=s.transition(t.exit()).style("opacity",1E-6).remove(),p=s.transition(t).style("opacity",1),y,r=Pb(c),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),
s.transition(a)),A=c.copy(),B=this.__chart__||A;this.__chart__=A;u.append("line");u.append("text");var z=u.select("line"),H=p.select("line"),m=t.select("text").text(m),t=u.select("text"),J=p.select("text");switch(b){case "bottom":y=mf;z.attr("y2",d);t.attr("y",Math.max(d,0)+e);H.attr("x2",0).attr("y2",d);J.attr("x",0).attr("y",Math.max(d,0)+e);m.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+r[0]+","+f+"V0H"+r[1]+"V"+f);break;case "top":y=mf;z.attr("y2",-d);t.attr("y",-(Math.max(d,
0)+e));H.attr("x2",0).attr("y2",-d);J.attr("x",0).attr("y",-(Math.max(d,0)+e));m.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+r[0]+","+-f+"V0H"+r[1]+"V"+-f);break;case "left":y=nf;z.attr("x2",-d);t.attr("x",-(Math.max(d,0)+e));H.attr("x2",-d).attr("y2",0);J.attr("x",-(Math.max(d,0)+e)).attr("y",0);m.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-f+","+r[0]+"H0V"+r[1]+"H"+-f);break;case "right":y=nf,z.attr("x2",d),t.attr("x",Math.max(d,0)+e),H.attr("x2",d).attr("y2",
0),J.attr("x",Math.max(d,0)+e).attr("y",0),m.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+f+","+r[0]+"H0V"+r[1]+"H"+f)}if(c.rangeBand){var L=A.rangeBand()/2,x=function(a){return A(a)+L};u.call(y,x);p.call(y,x)}else u.call(y,B),p.call(y,A),x.call(y,A)})}var c=s.scale.linear(),b=Jf,d=6,f=6,e=3,g=[10],l=null,q;a.scale=function(b){if(!arguments.length)return c;c=b;return a};a.orient=function(c){if(!arguments.length)return b;b=c in Gh?c+"":Jf;return a};a.ticks=function(){if(!arguments.length)return g;
g=arguments;return a};a.tickValues=function(c){if(!arguments.length)return l;l=c;return a};a.tickFormat=function(c){if(!arguments.length)return q;q=c;return a};a.tickSize=function(c){var b=arguments.length;if(!b)return d;d=+c;f=+arguments[b-1];return a};a.innerTickSize=function(c){if(!arguments.length)return d;d=+c;return a};a.outerTickSize=function(c){if(!arguments.length)return f;f=+c;return a};a.tickPadding=function(c){if(!arguments.length)return e;e=+c;return a};a.tickSubdivide=function(){return arguments.length&&
a};return a};var Jf="bottom",Gh={top:1,right:1,bottom:1,left:1};s.svg.brush=function(){function a(e){e.each(function(){var e=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),q=e.selectAll(".background").data([0]);q.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor",
"move");var u=e.selectAll(".resize").data(A,W);u.exit().remove();u.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Hh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");u.style("display",a.empty()?"none":null);e=s.transition(e);q=s.transition(q);g&&(u=Pb(g),q.attr("x",u[0]).attr("width",u[1]-u[0]),b(e));l&&(u=Pb(l),
q.attr("y",u[0]).attr("height",u[1]-u[0]),d(e));c(e)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+q[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function b(a){a.select(".extent").attr("x",q[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function d(a){a.select(".extent").attr("y",m[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function n(){var a=s.mouse(B),f=!1;G&&(a[0]+=G[0],a[1]+=G[1]);E||(s.event.altKey?
(V||(V=[(q[0]+q[1])/2,(m[0]+m[1])/2]),F[0]=q[+(a[0]<V[0])],F[1]=m[+(a[1]<V[1])]):V=null);C&&y(a,g,0)&&(b(J),f=!0);D&&y(a,l,1)&&(d(J),f=!0);f&&(c(J),H({type:"brush",mode:E?"move":"resize"}))}function y(a,c,b){var d=Pb(c);c=d[0];var f=d[1],d=F[b],h=b?m:q,e=h[1]-h[0];E&&(c-=d,f-=e+d);a=(b?r:p)?Math.max(c,Math.min(f,a[b])):a[b];E?c=(a+=d)+e:(V&&(d=Math.max(c,Math.min(f,2*V[b]-a))),d<a?(c=a,a=d):c=d);if(h[0]!=a||h[1]!=c)return b?x=null:t=null,h[0]=a,h[1]=c,!0}function A(){n();J.style("pointer-events",
"all").selectAll(".resize").style("display",a.empty()?"none":null);s.select("body").style("cursor",null);sa.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);N();H({type:"brushend"})}var B=this,z=s.select(s.event.target),H=e.of(B,arguments),J=s.select(B),L=z.datum(),C=!/^(n|s)$/.test(L)&&g,D=!/^(e|w)$/.test(L)&&l,E=z.classed("extent"),N=qb(),V,F=s.mouse(B),G,sa=s.select(X).on("keydown.brush",function(){32==
s.event.keyCode&&(E||(V=null,F[0]-=q[1],F[1]-=m[1],E=2),u())}).on("keyup.brush",function(){32==s.event.keyCode&&2==E&&(F[0]+=q[1],F[1]+=m[1],E=0,u())});if(s.event.changedTouches)sa.on("touchmove.brush",n).on("touchend.brush",A);else sa.on("mousemove.brush",n).on("mouseup.brush",A);J.interrupt().selectAll("*").interrupt();if(E)F[0]=q[0]-F[0],F[1]=m[0]-F[1];else if(L){var aa=+/w$/.test(L),L=+/^n/.test(L);G=[q[1-aa]-F[0],m[1-L]-F[1]];F[0]=q[aa];F[1]=m[L]}else s.event.altKey&&(V=F.slice());J.style("pointer-events",
"none").selectAll(".resize").style("display",null);s.select("body").style("cursor",z.style("cursor"));H({type:"brushstart"});n()}var e=y(a,"brushstart","brush","brushend"),g=null,l=null,q=[0,0],m=[0,0],t,x,p=!0,r=!0,A=ud[0];a.event=function(a){a.each(function(){var a=e.of(this,arguments),c={x:q,y:m,i:t,j:x},b=this.__chart__||c;this.__chart__=c;Ta?s.select(this).transition().each("start.brush",function(){t=b.i;x=b.j;q=b.x;m=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=Nb(q,c.x),
d=Nb(m,c.y);t=x=null;return function(f){q=c.x=b(f);m=c.y=d(f);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=c.i;x=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(c){if(!arguments.length)return g;g=c;A=ud[!g<<1|!l];return a};a.y=function(c){if(!arguments.length)return l;l=c;A=ud[!g<<1|!l];return a};a.clamp=function(c){if(!arguments.length)return g&&l?[p,r]:g?p:l?r:null;g&&l?(p=
!!c[0],r=!!c[1]):g?p=!!c:l&&(r=!!c);return a};a.extent=function(c){var b,d,f,h,e;if(!arguments.length)return g&&(t?(b=t[0],d=t[1]):(b=q[0],d=q[1],g.invert&&(b=g.invert(b),d=g.invert(d)),d<b&&(e=b,b=d,d=e))),l&&(x?(f=x[0],h=x[1]):(f=m[0],h=m[1],l.invert&&(f=l.invert(f),h=l.invert(h)),h<f&&(e=f,f=h,h=e))),g&&l?[[b,f],[d,h]]:g?[b,d]:l&&[f,h];g&&(b=c[0],d=c[1],l&&(b=b[0],d=d[0]),t=[b,d],g.invert&&(b=g(b),d=g(d)),d<b&&(e=b,b=d,d=e),b!=q[0]||d!=q[1])&&(q=[b,d]);l&&(f=c[0],h=c[1],g&&(f=f[1],h=h[1]),x=[f,
h],l.invert&&(f=l(f),h=l(h)),h<f&&(e=f,f=h,h=e),f!=m[0]||h!=m[1])&&(m=[f,h]);return a};a.clear=function(){a.empty()||(q=[0,0],m=[0,0],t=x=null);return a};a.empty=function(){return!!g&&q[0]==q[1]||!!l&&m[0]==m[1]};return s.rebind(a,e,"on")};var Hh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ud=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],C=s.time={},Y=Date;za.prototype={getDate:function(){return this._.getUTCDate()},
getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Aa.setUTCDate.apply(this._,
arguments)},setDay:function(){Aa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Aa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Aa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Aa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Aa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Aa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Aa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Aa.setTime.apply(this._,arguments)}};
var Aa=Date.prototype,vd="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),wd="Sun Mon Tue Wed Thu Fri Sat".split(" "),xd="January February March April May June July August September October November December".split(" "),yd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");C.year=Ra(function(a){a=C.day(a);a.setMonth(0,1);return a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});C.years=C.year.range;C.years.utc=C.year.utc.range;C.day=
Ra(function(a){var c=new Y(2E3,0);c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});C.days=C.day.range;C.days.utc=C.day.utc.range;C.dayOfYear=function(a){var c=C.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var b=C[a]=Ra(function(a){(a=C.day(a)).setDate(a.getDate()-
(a.getDay()+c)%7);return a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var b=C.year(a).getDay();return Math.floor((C.dayOfYear(a)+(b+c)%7)/7)-(b!==c)});C[a+"s"]=b.range;C[a+"s"].utc=b.utc.range;C[a+"OfYear"]=function(a){var b=C.year(a).getDay();return Math.floor((C.dayOfYear(a)+(b+c)%7)/7)}});C.week=C.sunday;C.weeks=C.sunday.range;C.weeks.utc=C.sunday.utc.range;C.weekOfYear=C.sundayOfYear;C.format=ba;var Kf=Wb(vd),Ih=Xb(vd),Lf=Wb(wd),Jh=Xb(wd),Mf=Wb(xd),Kh=Xb(xd),Nf=Wb(yd),
Lh=Xb(yd),Of=/^%/,of={"-":"",_:" ",0:"0"},Ub={a:function(a){return wd[a.getDay()]},A:function(a){return vd[a.getDay()]},b:function(a){return yd[a.getMonth()]},B:function(a){return xd[a.getMonth()]},c:ba("%a %b %e %X %Y"),d:function(a,c){return ca(a.getDate(),c,2)},e:function(a,c){return ca(a.getDate(),c,2)},H:function(a,c){return ca(a.getHours(),c,2)},I:function(a,c){return ca(a.getHours()%12||12,c,2)},j:function(a,c){return ca(1+C.dayOfYear(a),c,3)},L:function(a,c){return ca(a.getMilliseconds(),
c,3)},m:function(a,c){return ca(a.getMonth()+1,c,2)},M:function(a,c){return ca(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ca(a.getSeconds(),c,2)},U:function(a,c){return ca(C.sundayOfYear(a),c,2)},w:function(a){return a.getDay()},W:function(a,c){return ca(C.mondayOfYear(a),c,2)},x:ba("%m/%d/%Y"),X:ba("%H:%M:%S"),y:function(a,c){return ca(a.getFullYear()%100,c,2)},Y:function(a,c){return ca(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();
a=0<c?"-":"+";var b=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ca(b,"0",2)+ca(c,"0",2)},"%":function(){return"%"}},eh={a:function(a,c,b){Lf.lastIndex=0;return(c=Lf.exec(c.substring(b)))?(a.w=Jh.get(c[0].toLowerCase()),b+c[0].length):-1},A:function(a,c,b){Kf.lastIndex=0;return(c=Kf.exec(c.substring(b)))?(a.w=Ih.get(c[0].toLowerCase()),b+c[0].length):-1},b:function(a,c,b){Nf.lastIndex=0;return(c=Nf.exec(c.substring(b)))?(a.m=Lh.get(c[0].toLowerCase()),b+c[0].length):-1},B:function(a,c,b){Mf.lastIndex=
0;return(c=Mf.exec(c.substring(b)))?(a.m=Kh.get(c[0].toLowerCase()),b+c[0].length):-1},c:function(a,c,b){return Vb(a,Ub.c.toString(),c,b)},d:pf,e:pf,H:qf,I:qf,j:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b,b+3)))?(a.j=+c[0],b+c[0].length):-1},L:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b,b+3)))?(a.L=+c[0],b+c[0].length):-1},m:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b,b+2)))?(a.m=c[0]-1,b+c[0].length):-1},M:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b,
b+2)))?(a.M=+c[0],b+c[0].length):-1},p:function(a,c,b){c=Mh.get(c.substring(b,b+=2).toLowerCase());return null==c?-1:(a.p=c,b)},S:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b,b+2)))?(a.S=+c[0],b+c[0].length):-1},U:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b)))?(a.U=+c[0],b+c[0].length):-1},w:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b,b+1)))?(a.w=+c[0],b+c[0].length):-1},W:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b)))?(a.W=+c[0],b+c[0].length):
-1},x:function(a,c,b){return Vb(a,Ub.x.toString(),c,b)},X:function(a,c,b){return Vb(a,Ub.X.toString(),c,b)},y:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b,b+2)))?(a.y=+c[0]+(68<+c[0]?1900:2E3),b+c[0].length):-1},Y:function(a,c,b){R.lastIndex=0;return(c=R.exec(c.substring(b,b+4)))?(a.y=+c[0],b+c[0].length):-1},Z:function(a,c,b){return/^[+-]\d{4}$/.test(c=c.substring(b,b+5))?(a.Z=+c,b+5):-1},"%":function(a,c,b){Of.lastIndex=0;return(a=Of.exec(c.substring(b,b+1)))?b+a[0].length:-1}},R=
/^\s*\d+/,Mh=s.map({am:0,pm:1});ba.utc=ra;var Pf=ra("%Y-%m-%dT%H:%M:%S.%LZ");ba.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?md:Pf;md.parse=function(a){a=new Date(a);return isNaN(a)?null:a};md.toString=Pf.toString;C.second=Ra(function(a){return new Y(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});C.seconds=C.second.range;C.seconds.utc=C.second.utc.range;C.minute=Ra(function(a){return new Y(6E4*Math.floor(a/
6E4))},function(a,c){a.setTime(a.getTime()+6E4*Math.floor(c))},function(a){return a.getMinutes()});C.minutes=C.minute.range;C.minutes.utc=C.minute.utc.range;C.hour=Ra(function(a){var c=a.getTimezoneOffset()/60;return new Y(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});C.hours=C.hour.range;C.hours.utc=C.hour.utc.range;C.month=Ra(function(a){a=C.day(a);a.setDate(1);return a},function(a,c){a.setMonth(a.getMonth()+c)},function(a){return a.getMonth()});
C.months=C.month.range;C.months.utc=C.month.utc.range;var Yb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],zd=[[C.second,1],[C.second,5],[C.second,15],[C.second,30],[C.minute,1],[C.minute,5],[C.minute,15],[C.minute,30],[C.hour,1],[C.hour,3],[C.hour,6],[C.hour,12],[C.day,1],[C.day,2],[C.week,1],[C.month,1],[C.month,3],[C.year,1]],Nh=[[ba("%Y"),hb],[ba("%B"),function(a){return a.getMonth()}],[ba("%b %d"),function(a){return 1!=a.getDate()}],[ba("%a %d"),
function(a){return a.getDay()&&1!=a.getDate()}],[ba("%I %p"),function(a){return a.getHours()}],[ba("%I:%M"),function(a){return a.getMinutes()}],[ba(":%S"),function(a){return a.getSeconds()}],[ba(".%L"),function(a){return a.getMilliseconds()}]],Oh=rf(Nh);zd.year=C.year;C.scale=function(){return nd(s.scale.linear(),zd,Oh)};var fh={range:function(a,c,b){return s.range(+a,+c,b).map(Sa)}},Qf=zd.map(function(a){return[a[0].utc,a[1]]}),Ph=[[ra("%Y"),hb],[ra("%B"),function(a){return a.getUTCMonth()}],[ra("%b %d"),
function(a){return 1!=a.getUTCDate()}],[ra("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[ra("%I %p"),function(a){return a.getUTCHours()}],[ra("%I:%M"),function(a){return a.getUTCMinutes()}],[ra(":%S"),function(a){return a.getUTCSeconds()}],[ra(".%L"),function(a){return a.getUTCMilliseconds()}]],Qh=rf(Ph);Qf.year=C.year.utc;C.scale.utc=function(){return nd(s.scale.linear(),Qf,Qh)};s.text=Cc(function(a){return a.responseText});s.json=function(a,c){return Dc(a,"application/json",gh,
c)};s.html=function(a,c){return Dc(a,"text/html",hh,c)};s.xml=Cc(function(a){return a.responseXML});return s}();(function(m){function r(d){if(d){if("string"===typeof b[d])return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var g,e=0,l=p.length;e<l;e++)if(g=p[e]+d,"string"===typeof b[g])return g}}var p=["Webkit","Moz","ms","Ms","O"],b=document.documentElement.style;"function"===typeof define&&define.amd?define(function(){return r}):m.getStyleProperty=r})(window);
(function(m,r){function p(b){var d=parseFloat(b);return-1===b.indexOf("%")&&!isNaN(d)&&d}function b(b){var d=b("boxSizing"),q;(function(){if(d){var b=document.createElement("div");b.style.width="200px";b.style.padding="1px 2px 3px 4px";b.style.borderStyle="solid";b.style.borderWidth="1px 2px 3px 4px";b.style[d]="border-box";var e=document.body||document.documentElement;e.appendChild(b);var l=g(b);q=200===p(l.width);e.removeChild(b)}})();return function(b){"string"===typeof b&&(b=document.querySelector(b));
if(b&&"object"===typeof b&&b.nodeType){var l=g(b);if("none"===l.display){var m={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},l=0;for(b=e.length;l<b;l++)m[e[l]]=0;return m}m={};m.width=b.offsetWidth;m.height=b.offsetHeight;b=m.isBorderBox=!(!d||!l[d]||"border-box"!==l[d]);for(var t=0,r=e.length;t<r;t++){var z=e[t],N=parseFloat(l[z]);m[z]=isNaN(N)?0:N}var t=m.paddingLeft+m.paddingRight,r=m.paddingTop+m.paddingBottom,z=m.marginLeft+m.marginRight,N=m.marginTop+m.marginBottom,
aa=m.borderLeftWidth+m.borderRightWidth,Z=m.borderTopWidth+m.borderBottomWidth;b=b&&q;var E=p(l.width);!1!==E&&(m.width=E+(b?0:t+aa));l=p(l.height);!1!==l&&(m.height=l+(b?0:r+Z));m.innerWidth=m.width-(t+aa);m.innerHeight=m.height-(r+Z);m.outerWidth=m.width+z;m.outerHeight=m.height+N;return m}}}var d=document.defaultView,g=d&&d.getComputedStyle?function(b){return d.getComputedStyle(b,null)}:function(b){return b.currentStyle},e="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");
"function"===typeof define&&define.amd?define(["get-style-property/get-style-property"],b):m.getSize=b(m.getStyleProperty)})(window);
(function(m){var r=document.documentElement,p=function(){};r.addEventListener?p=function(b,g,e){b.addEventListener(g,e,!1)}:r.attachEvent&&(p=function(b,g,e){b[g+e]=e.handleEvent?function(){var b=m.event;b.target=b.target||b.srcElement;e.handleEvent.call(e,b)}:function(){var g=m.event;g.target=g.target||g.srcElement;e.call(b,g)};b.attachEvent("on"+g,b[g+e])});var b=function(){};r.removeEventListener?b=function(b,g,e){b.removeEventListener(g,e,!1)}:r.detachEvent&&(b=function(b,g,e){b.detachEvent("on"+
g,b[g+e]);try{delete b[g+e]}catch(l){b[g+e]=void 0}});r={bind:p,unbind:b};"function"===typeof define&&define.amd?define(r):m.eventie=r})(this);
(function(m){function r(b){"function"===typeof b&&(r.isReady?b():g.push(b))}function p(b){b="readystatechange"===b.type&&"complete"!==d.readyState;if(!r.isReady&&!b){r.isReady=!0;b=0;for(var l=g.length;b<l;b++)(0,g[b])()}}function b(b){b.bind(d,"DOMContentLoaded",p);b.bind(d,"readystatechange",p);b.bind(m,"load",p);return r}var d=m.document,g=[];r.isReady=!1;"function"===typeof define&&define.amd?(r.isReady="function"===typeof requirejs,define(["eventie/eventie"],b)):m.docReady=b(m.eventie)})(this);
(function(){function m(){}function r(b,g){for(var e=b.length;e--;)if(b[e].listener===g)return e;return-1}function p(b){return function(){return this[b].apply(this,arguments)}}var b=m.prototype;b.getListeners=function(b){var g=this._getEvents(),e,l;if("object"===typeof b)for(l in e={},g)g.hasOwnProperty(l)&&b.test(l)&&(e[l]=g[l]);else e=g[b]||(g[b]=[]);return e};b.flattenListeners=function(b){var g=[],e;for(e=0;e<b.length;e+=1)g.push(b[e].listener);return g};b.getListenersAsObject=function(b){var g=
this.getListeners(b),e;g instanceof Array&&(e={},e[b]=g);return e||g};b.addListener=function(b,g){var e=this.getListenersAsObject(b),l="object"===typeof g,f;for(f in e)e.hasOwnProperty(f)&&-1===r(e[f],g)&&e[f].push(l?g:{listener:g,once:!1});return this};b.on=p("addListener");b.addOnceListener=function(b,g){return this.addListener(b,{listener:g,once:!0})};b.once=p("addOnceListener");b.defineEvent=function(b){this.getListeners(b);return this};b.defineEvents=function(b){for(var g=0;g<b.length;g+=1)this.defineEvent(b[g]);
return this};b.removeListener=function(b,g){var e=this.getListenersAsObject(b),l,f;for(f in e)e.hasOwnProperty(f)&&(l=r(e[f],g),-1!==l&&e[f].splice(l,1));return this};b.off=p("removeListener");b.addListeners=function(b,g){return this.manipulateListeners(!1,b,g)};b.removeListeners=function(b,g){return this.manipulateListeners(!0,b,g)};b.manipulateListeners=function(b,g,e){var l,f,q=b?this.removeListener:this.addListener;b=b?this.removeListeners:this.addListeners;if("object"!==typeof g||g instanceof
RegExp)for(l=e.length;l--;)q.call(this,g,e[l]);else for(l in g)g.hasOwnProperty(l)&&(f=g[l])&&("function"===typeof f?q.call(this,l,f):b.call(this,l,f));return this};b.removeEvent=function(b){var g=typeof b,e=this._getEvents(),l;if("string"===g)delete e[b];else if("object"===g)for(l in e)e.hasOwnProperty(l)&&b.test(l)&&delete e[l];else delete this._events;return this};b.emitEvent=function(b,g){var e=this.getListenersAsObject(b),l,f,q,u;for(q in e)if(e.hasOwnProperty(q))for(f=e[q].length;f--;)l=e[q][f],
!0===l.once&&this.removeListener(b,l.listener),u=l.listener.apply(this,g||[]),u===this._getOnceReturnValue()&&this.removeListener(b,l.listener);return this};b.trigger=p("emitEvent");b.emit=function(b){var g=Array.prototype.slice.call(arguments,1);return this.emitEvent(b,g)};b.setOnceReturnValue=function(b){this._onceReturnValue=b;return this};b._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};b._getEvents=function(){return this._events||(this._events=
{})};"function"===typeof define&&define.amd?define(function(){return m}):"object"===typeof module&&module.exports?module.exports=m:this.EventEmitter=m}).call(this);
(function(m){function r(){}function p(d){function g(b){b.prototype.option||(b.prototype.option=function(b){d.isPlainObject(b)&&(this.options=d.extend(!0,this.options,b))})}function e(f,e){d.fn[f]=function(g){if("string"===typeof g){for(var m=b.call(arguments,1),p=0,t=this.length;p<t;p++){var r=d.data(this[p],f);if(r)if(d.isFunction(r[g])&&"_"!==g.charAt(0)){if(r=r[g].apply(r,m),void 0!==r)return r}else l("no such method '"+g+"' for "+f+" instance");else l("cannot call methods on "+f+" prior to initialization; attempted to call '"+
g+"'")}return this}return this.each(function(){var b=d.data(this,f);b?(b.option(g),b._init()):(b=new e(this,g),d.data(this,f,b))})}}if(d){var l="undefined"===typeof console?r:function(b){console.error(b)};d.bridget=function(b,d){g(d);e(b,d)}}}var b=Array.prototype.slice;"function"===typeof define&&define.amd?define(["jquery"],p):p(m.jQuery)})(window);
(function(m,r){function p(b,d){return b[g](d)}function b(b,d){b.parentNode||document.createDocumentFragment().appendChild(b);for(var e=b.parentNode.querySelectorAll(d),g=0,l=e.length;g<l;g++)if(e[g]===b)return!0;return!1}function d(b,d){b.parentNode||document.createDocumentFragment().appendChild(b);return p(b,d)}var g=function(){if(r.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],d=0,e=b.length;d<e;d++){var g=b[d]+"MatchesSelector";if(r[g])return g}}(),e;if(g){var l=document.createElement("div");
e=p(l,"div")?p:d}else e=b;"function"===typeof define&&define.amd?define(function(){return e}):window.matchesSelector=e})(this,Element.prototype);
(function(m){function r(b,d){for(var f in d)b[f]=d[f];return b}function p(b){return b.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}function b(b,d,f){function q(b,d){b&&(this.element=b,this.layout=d,this.position={x:0,y:0},this._create())}var u=f("transition"),m=f("transform"),y=u&&m,t=!!f("perspective"),B={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],z=["transform","transition","transitionDuration","transitionProperty"],
N=function(){for(var b={},d=0,e=z.length;d<e;d++){var g=z[d],l=f(g);l&&l!==g&&(b[g]=l)}return b}();r(q.prototype,b.prototype);q.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};q.prototype.handleEvent=function(b){var d="on"+b.type;if(this[d])this[d](b)};q.prototype.getSize=function(){this.size=d(this.element)};q.prototype.css=function(b){var d=this.element.style,f;for(f in b)d[N[f]||f]=b[f]};q.prototype.getPosition=function(){var b=
g(this.element),d=this.layout.options,f=d.isOriginLeft,d=d.isOriginTop,e=parseInt(b[f?"left":"right"],10),b=parseInt(b[d?"top":"bottom"],10),e=isNaN(e)?0:e,b=isNaN(b)?0:b,l=this.layout.size,e=e-(f?l.paddingLeft:l.paddingRight),b=b-(d?l.paddingTop:l.paddingBottom);this.position.x=e;this.position.y=b};q.prototype.layoutPosition=function(){var b=this.layout.size,d=this.layout.options,f={};d.isOriginLeft?(f.left=this.position.x+b.paddingLeft+"px",f.right=""):(f.right=this.position.x+b.paddingRight+"px",
f.left="");d.isOriginTop?(f.top=this.position.y+b.paddingTop+"px",f.bottom=""):(f.bottom=this.position.y+b.paddingBottom+"px",f.top="");this.css(f);this.emitEvent("layout",[this])};var aa=t?function(b,d){return"translate3d("+b+"px, "+d+"px, 0)"}:function(b,d){return"translate("+b+"px, "+d+"px)"};q.prototype._transitionTo=function(b,d){this.getPosition();var f=this.position.x,e=this.position.y,g=parseInt(b,10),l=parseInt(d,10),g=g===this.position.x&&l===this.position.y;this.setPosition(b,d);g&&!this.isTransitioning?
this.layoutPosition():(f=b-f,e=d-e,g={},l=this.layout.options,f=l.isOriginLeft?f:-f,e=l.isOriginTop?e:-e,g.transform=aa(f,e),this.transition({to:g,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0}))};q.prototype.goTo=function(b,d){this.setPosition(b,d);this.layoutPosition()};q.prototype.moveTo=y?q.prototype._transitionTo:q.prototype.goTo;q.prototype.setPosition=function(b,d){this.position.x=parseInt(b,10);this.position.y=parseInt(d,10)};q.prototype._nonTransition=function(b){this.css(b.to);
b.isCleaning&&this._removeStyles(b.to);for(var d in b.onTransitionEnd)b.onTransitionEnd[d].call(this)};q.prototype._transition=function(b){if(parseFloat(this.layout.options.transitionDuration)){var d=this._transition,f;for(f in b.onTransitionEnd)d.onEnd[f]=b.onTransitionEnd[f];for(f in b.to)d.ingProperties[f]=!0,b.isCleaning&&(d.clean[f]=!0);b.from&&this.css(b.from);this.enableTransition(b.to);this.css(b.to);this.isTransitioning=!0}else this._nonTransition(b)};var Z=m&&p(m)+",opacity";q.prototype.enableTransition=
function(){this.isTransitioning||(this.css({transitionProperty:Z,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(B,this,!1))};q.prototype.transition=q.prototype[u?"_transition":"_nonTransition"];q.prototype.onwebkitTransitionEnd=function(b){this.ontransitionend(b)};q.prototype.onotransitionend=function(b){this.ontransitionend(b)};var E={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};q.prototype.ontransitionend=function(b){if(b.target===
this.element){var d=this._transition,f=E[b.propertyName]||b.propertyName;delete d.ingProperties[f];var e;a:{e=d.ingProperties;for(var g in e){e=!1;break a}e=!0}e&&this.disableTransition();f in d.clean&&(this.element.style[b.propertyName]="",delete d.clean[f]);f in d.onEnd&&(d.onEnd[f].call(this),delete d.onEnd[f]);this.emitEvent("transitionEnd",[this])}};q.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(B,this,!1);this.isTransitioning=!1};q.prototype._removeStyles=
function(b){var d={},f;for(f in b)d[f]="";this.css(d)};var Ua={transitionProperty:"",transitionDuration:""};q.prototype.removeTransitionStyles=function(){this.css(Ua)};q.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])};q.prototype.remove=function(){if(u&&parseFloat(this.layout.options.transitionDuration)){var b=this;this.on("transitionEnd",function(){b.removeElem();return!0});this.hide()}else this.removeElem()};q.prototype.reveal=function(){delete this.isHidden;
this.css({display:""});var b=this.layout.options;this.transition({from:b.hiddenStyle,to:b.visibleStyle,isCleaning:!0})};q.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var b=this.layout.options;this.transition({from:b.visibleStyle,to:b.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.css({display:"none"})}}})};q.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return q}var d=document.defaultView,
g=d&&d.getComputedStyle?function(b){return d.getComputedStyle(b,null)}:function(b){return b.currentStyle};"function"===typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],b):(m.Outlayer={},m.Outlayer.Item=b(m.EventEmitter,m.getSize,m.getStyleProperty))})(window);
(function(m){function r(b,d){for(var f in d)b[f]=d[f];return b}function p(b){var d=[];if("[object Array]"===u.call(b))d=b;else if(b&&"number"===typeof b.length)for(var f=0,e=b.length;f<e;f++)d.push(b[f]);else d.push(b);return d}function b(b,d){var f=y(d,b);-1!==f&&d.splice(f,1)}function d(b){return b.replace(/(.)([A-Z])/g,function(b,d,f){return d+"-"+f}).toLowerCase()}function g(g,u,y,N,aa,Z){function E(b,d){"string"===typeof b&&(b=e.querySelector(b));if(b&&x(b)){this.element=b;this.options=r({},
this.options);this.option(d);var f=++L;this.element.outlayerGUID=f;sa[f]=this;this._create();this.options.isInitLayout&&this.layout()}else l&&l.error("Bad "+this.settings.namespace+" element: "+b)}function Ua(b,d){b.prototype[d]=r({},E.prototype[d])}var L=0,sa={};E.prototype.settings={namespace:"outlayer",item:Z};E.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},
visibleStyle:{opacity:1,transform:"scale(1)"}};r(E.prototype,y.prototype);E.prototype.option=function(b){r(this.options,b)};E.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);r(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()};E.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)};E.prototype._itemize=function(b){b=this._filterFindItemElements(b);for(var d=this.settings.item,f=[],
e=0,g=b.length;e<g;e++){var l=new d(b[e],this);f.push(l)}return f};E.prototype._filterFindItemElements=function(b){b=p(b);for(var d=this.options.itemSelector,f=[],e=0,g=b.length;e<g;e++){var l=b[e];if(x(l))if(d){aa(l,d)&&f.push(l);for(var l=l.querySelectorAll(d),q=0,m=l.length;q<m;q++)f.push(l[q])}else f.push(l)}return f};E.prototype.getItemElements=function(){for(var b=[],d=0,f=this.items.length;d<f;d++)b.push(this.items[d].element);return b};E.prototype.layout=function(){this._resetLayout();this._manageStamps();
this.layoutItems(this.items,void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited);this._isLayoutInited=!0};E.prototype._init=E.prototype.layout;E.prototype._resetLayout=function(){this.getSize()};E.prototype.getSize=function(){this.size=N(this.element)};E.prototype._getMeasurement=function(b,d){var f=this.options[b],e;f?("string"===typeof f?e=this.element.querySelector(f):x(f)&&(e=f),this[b]=e?N(e)[d]:f):this[b]=0};E.prototype.layoutItems=function(b,d){b=this._getItemsForLayout(b);
this._layoutItems(b,d);this._postLayout()};E.prototype._getItemsForLayout=function(b){for(var d=[],f=0,e=b.length;f<e;f++){var g=b[f];g.isIgnored||d.push(g)}return d};E.prototype._layoutItems=function(b,d){if(b&&b.length){this._itemsOn(b,"layout",function(){this.emitEvent("layoutComplete",[this,b])});for(var f=[],e=0,g=b.length;e<g;e++){var l=b[e],q=this._getItemLayoutPosition(l);q.item=l;q.isInstant=d;f.push(q)}this._processLayoutQueue(f)}else this.emitEvent("layoutComplete",[this,b])};E.prototype._getItemLayoutPosition=
function(){return{x:0,y:0}};E.prototype._processLayoutQueue=function(b){for(var d=0,f=b.length;d<f;d++){var e=b[d];this._positionItem(e.item,e.x,e.y,e.isInstant)}};E.prototype._positionItem=function(b,d,f,e){e?b.goTo(d,f):b.moveTo(d,f)};E.prototype._postLayout=function(){var b=this._getContainerSize();b&&(this._setContainerMeasure(b.width,!0),this._setContainerMeasure(b.height,!1))};E.prototype._getContainerSize=q;E.prototype._setContainerMeasure=function(b,d){if(void 0!==b){var f=this.size;f.isBorderBox&&
(b+=d?f.paddingLeft+f.paddingRight+f.borderLeftWidth+f.borderRightWidth:f.paddingBottom+f.paddingTop+f.borderTopWidth+f.borderBottomWidth);b=Math.max(b,0);this.element.style[d?"width":"height"]=b+"px"}};E.prototype._itemsOn=function(b,d,f){function e(){g++;g===l&&f.call(q);return!0}for(var g=0,l=b.length,q=this,m=0,u=b.length;m<u;m++)b[m].on(d,e)};E.prototype.ignore=function(b){if(b=this.getItem(b))b.isIgnored=!0};E.prototype.unignore=function(b){(b=this.getItem(b))&&delete b.isIgnored};E.prototype.stamp=
function(b){if(b=this._find(b)){this.stamps=this.stamps.concat(b);for(var d=0,f=b.length;d<f;d++)this.ignore(b[d])}};E.prototype.unstamp=function(d){if(d=this._find(d))for(var f=0,e=d.length;f<e;f++){var g=d[f];b(g,this.stamps);this.unignore(g)}};E.prototype._find=function(b){if(b)return"string"===typeof b&&(b=this.element.querySelectorAll(b)),b=p(b)};E.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var b=0,d=this.stamps.length;b<d;b++)this._manageStamp(this.stamps[b])}};
E.prototype._getBoundingRect=function(){var b=this.element.getBoundingClientRect(),d=this.size;this._boundingRect={left:b.left+d.paddingLeft+d.borderLeftWidth,top:b.top+d.paddingTop+d.borderTopWidth,right:b.right-(d.paddingRight+d.borderRightWidth),bottom:b.bottom-(d.paddingBottom+d.borderBottomWidth)}};E.prototype._manageStamp=q;E.prototype._getElementOffset=function(b){var d=b.getBoundingClientRect(),f=this._boundingRect;b=N(b);return{left:d.left-f.left-b.marginLeft,top:d.top-f.top-b.marginTop,
right:f.right-d.right-b.marginRight,bottom:f.bottom-d.bottom-b.marginBottom}};E.prototype.handleEvent=function(b){var d="on"+b.type;if(this[d])this[d](b)};E.prototype.bindResize=function(){this.isResizeBound||(g.bind(m,"resize",this),this.isResizeBound=!0)};E.prototype.unbindResize=function(){g.unbind(m,"resize",this);this.isResizeBound=!1};E.prototype.onresize=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(function(){b.resize();delete b.resizeTimeout},
100)};E.prototype.resize=function(){var b=N(this.element);this.size&&b&&b.innerWidth===this.size.innerWidth||this.layout()};E.prototype.addItems=function(b){b=this._itemize(b);if(b.length)return this.items=this.items.concat(b),b};E.prototype.appended=function(b){b=this.addItems(b);b.length&&(this.layoutItems(b,!0),this.reveal(b))};E.prototype.prepended=function(b){b=this._itemize(b);if(b.length){var d=this.items.slice(0);this.items=b.concat(d);this._resetLayout();this.layoutItems(b,!0);this.reveal(b);
this.layoutItems(d)}};E.prototype.reveal=function(b){if(b&&b.length)for(var d=0,f=b.length;d<f;d++)b[d].reveal()};E.prototype.hide=function(b){if(b&&b.length)for(var d=0,f=b.length;d<f;d++)b[d].hide()};E.prototype.getItem=function(b){for(var d=0,f=this.items.length;d<f;d++){var e=this.items[d];if(e.element===b)return e}};E.prototype.getItems=function(b){if(b&&b.length){for(var d=[],f=0,e=b.length;f<e;f++){var g=this.getItem(b[f]);g&&d.push(g)}return d}};E.prototype.remove=function(d){d=p(d);var f=
this.getItems(d);if(f&&f.length){this._itemsOn(f,"remove",function(){this.emitEvent("removeComplete",[this,f])});d=0;for(var e=f.length;d<e;d++){var g=f[d];g.remove();b(g,this.items)}}};E.prototype.destroy=function(){var b=this.element.style;b.height="";b.position="";b.width="";for(var b=0,d=this.items.length;b<d;b++)this.items[b].destroy();this.unbindResize();delete this.element.outlayerGUID;f&&f.removeData(this.element,this.settings.namespace)};E.data=function(b){return(b=b&&b.outlayerGUID)&&sa[b]};
E.create=function(b,g){function q(){E.apply(this,arguments)}r(q.prototype,E.prototype);Ua(q,"options");Ua(q,"settings");r(q.prototype.options,g);q.prototype.settings.namespace=b;q.data=E.data;q.Item=function(){Z.apply(this,arguments)};q.Item.prototype=new Z;q.prototype.settings.item=q.Item;u(function(){for(var g=d(b),m=e.querySelectorAll(".js-"+g),g="data-"+g+"-options",u=0,t=m.length;u<t;u++){var x=m[u],p=x.getAttribute(g),r;try{r=p&&JSON.parse(p)}catch(y){l&&l.error("Error parsing "+g+" on "+x.nodeName.toLowerCase()+
(x.id?"#"+x.id:"")+": "+y);continue}p=new q(x,r);f&&f.data(x,b,p)}});f&&f.bridget&&f.bridget(b,q);return q};E.Item=Z;return E}var e=m.document,l=m.console,f=m.jQuery,q=function(){},u=Object.prototype.toString,x="object"===typeof HTMLElement?function(b){return b instanceof HTMLElement}:function(b){return b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName},y=Array.prototype.indexOf?function(b,d){return b.indexOf(d)}:function(b,d){for(var f=0,e=b.length;f<e;f++)if(b[f]===d)return f;
return-1};"function"===typeof define&&define.amd?define("eventie/eventie doc-ready/doc-ready eventEmitter/EventEmitter get-size/get-size matches-selector/matches-selector ./item".split(" "),g):m.Outlayer=g(m.eventie,m.docReady,m.EventEmitter,m.getSize,m.matchesSelector,m.Outlayer.Item)})(window);
(function(m){function r(b,d){var g=b.create("masonry");g.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var b=this.cols;for(this.colYs=[];b--;)this.colYs.push(0);this.maxY=0};g.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var b=this.items[0];this.columnWidth=(b=b&&b.element)&&d(b).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;this.cols=
Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)};g.prototype.getContainerWidth=function(){var b=d(this.options.isFitWidth?this.element.parentNode:this.element);this.containerWidth=b&&b.innerWidth};g.prototype._getItemLayoutPosition=function(b){b.getSize();var d=Math.ceil(b.size.outerWidth/this.columnWidth),d=Math.min(d,this.cols),f=this._getColGroup(d),g=Math.min.apply(Math,f),d=p(f,g),m={x:this.columnWidth*d,y:g};b=g+b.size.outerHeight;f=this.cols+1-
f.length;for(g=0;g<f;g++)this.colYs[d+g]=b;return m};g.prototype._getColGroup=function(b){if(2>b)return this.colYs;for(var d=[],f=this.cols+1-b,g=0;g<f;g++){var m=this.colYs.slice(g,g+b);d[g]=Math.max.apply(Math,m)}return d};g.prototype._manageStamp=function(b){var g=d(b);b=this._getElementOffset(b);var f=this.options.isOriginLeft?b.left:b.right,q=f+g.outerWidth,f=Math.floor(f/this.columnWidth),f=Math.max(0,f),q=Math.floor(q/this.columnWidth),q=Math.min(this.cols-1,q),g=(this.options.isOriginTop?
b.top:b.bottom)+g.outerHeight;for(b=f;b<=q;b++)this.colYs[b]=Math.max(g,this.colYs[b])};g.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var b={height:this.maxY};this.options.isFitWidth&&(b.width=this._getContainerFitWidth());return b};g.prototype._getContainerFitWidth=function(){for(var b=0,d=this.cols;--d&&0===this.colYs[d];)b++;return(this.cols-b)*this.columnWidth-this.gutter};g.prototype.resize=function(){var b=this.containerWidth;this.getContainerWidth();b!==
this.containerWidth&&this.layout()};return g}var p=Array.prototype.indexOf?function(b,d){return b.indexOf(d)}:function(b,d){for(var g=0,e=b.length;g<e;g++)if(b[g]===d)return g;return-1};"function"===typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],r):m.Masonry=r(m.Outlayer,m.getSize)})(window);window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var m=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,m):console.log.apply(console,m)}};
(function(m){function r(){}for(var p="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),b;b=p.pop();)m[b]=m[b]||r})(function(){try{return console.log(),window.console}catch(m){return window.console={}}}());
(function(m){function r(p){if("string"===typeof p.data){var b=p.handler,d=p.data.toLowerCase().split(" ");p.handler=function(g){if(this===g.target||!/textarea|select/i.test(g.target.nodeName)&&"text"!==g.target.type){var e="keypress"!==g.type&&m.hotkeys.specialKeys[g.which],l=String.fromCharCode(g.which).toLowerCase(),f="",q={};g.altKey&&"alt"!==e&&(f+="alt+");g.ctrlKey&&"ctrl"!==e&&(f+="ctrl+");g.metaKey&&(!g.ctrlKey&&"meta"!==e)&&(f+="meta+");g.shiftKey&&"shift"!==e&&(f+="shift+");e?q[f+e]=!0:(q[f+
l]=!0,q[f+m.hotkeys.shiftNums[l]]=!0,"shift+"===f&&(q[m.hotkeys.shiftNums[l]]=!0));e=0;for(l=d.length;e<l;e++)if(q[d[e]])return b.apply(this,arguments)}}}}m.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",
110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};m.each(["keydown","keyup","keypress"],function(){m.event.special[this]={add:r}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var m=!1,r=!1,p=!1;(function(b){b.vakata={};b.vakata.css={get_css:function(b,d,e){b=b.toLowerCase();var g=e.cssRules||e.rules,l=0;do{if(g.length&&l>g.length+5)break;if(g[l].selectorText&&g[l].selectorText.toLowerCase()==b)return!0===d?(e.removeRule&&e.removeRule(l),e.deleteRule&&e.deleteRule(l),!0):g[l]}while(g[++l]);return!1},add_css:function(d,e){if(b.jstree.css.get_css(d,!1,e))return!1;e.insertRule?e.insertRule(d+" { }",0):e.addRule(d,null,0);return b.vakata.css.get_css(d)},
remove_css:function(d,e){return b.vakata.css.get_css(d,!0,e)},add_sheet:function(d){var e=!1,g=!0;if(d.str)return d.title&&(e=b("style[id='"+d.title+"-stylesheet']")[0]),e?g=!1:(e=document.createElement("style"),e.setAttribute("type","text/css"),d.title&&e.setAttribute("id",d.title+"-stylesheet")),e.styleSheet?g?(document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet.cssText=d.str):e.styleSheet.cssText=e.styleSheet.cssText+" "+d.str:(e.appendChild(document.createTextNode(d.str)),document.getElementsByTagName("head")[0].appendChild(e)),
e.sheet||e.styleSheet;if(d.url)if(document.createStyleSheet)try{document.createStyleSheet(d.url)}catch(l){}else return e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.media="all",e.href=d.url,document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet}};var d=[],g=-1,e={},l={};b.fn.jstree=function(f){var g="string"==typeof f,l=Array.prototype.slice.call(arguments,1),m=this;if(g){if("_"==f.substring(0,1))return m;this.each(function(){var e=d[b.data(this,"jstree_instance_id")],
e=e&&b.isFunction(e[f])?e[f].apply(e,l):e;if("undefined"!==typeof e&&(0===f.indexOf("is_")||!0!==e&&!1!==e))return m=e,!1})}else this.each(function(){var g=b.data(this,"jstree_instance_id"),q=[],m=f?b.extend({},!0,f):{},x=b(this),p=!1,r=[],q=q.concat(l);x.data("jstree")&&q.push(x.data("jstree"));m=q.length?b.extend.apply(null,[!0,m].concat(q)):m;"undefined"!==typeof g&&d[g]&&d[g].destroy();g=parseInt(d.push({}),10)-1;b.data(this,"jstree_instance_id",g);m.plugins=b.isArray(m.plugins)?m.plugins:b.jstree.defaults.plugins.slice();
m.plugins.unshift("core");m.plugins=m.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");p=b.extend(!0,{},b.jstree.defaults,m);p.plugins=m.plugins;b.each(e,function(d,f){-1===b.inArray(d,p.plugins)?(p[d]=null,delete p[d]):r.push(d)});p.plugins=r;d[g]=new b.jstree._instance(g,b(this).addClass("jstree jstree-"+g),p);b.each(d[g]._get_settings().plugins,function(b,f){d[g].data[f]={}});b.each(d[g]._get_settings().plugins,function(b,f){e[f]&&
e[f].__init.apply(d[g])});setTimeout(function(){d[g]&&d[g].init()},0)});return m};b.jstree={defaults:{plugins:[]},_focused:function(){return d[g]||null},_reference:function(f){if(d[f])return d[f];var e=b(f);e.length||"string"!==typeof f||(e=b("#"+f));return e.length?d[e.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(d,e,g){this.data={core:{}};this.get_settings=function(){return b.extend(!0,{},g)};this._get_settings=function(){return g};this.get_index=function(){return d};
this.get_container=function(){return e};this.get_container_ul=function(){return e.children("ul:eq(0)")};this._set_settings=function(d){g=b.extend(!0,{},g,d)}},_fn:{},plugin:function(d,g){g=b.extend({},{__init:b.noop,__destroy:b.noop,_fn:{},defaults:!1},g);e[d]=g;b.jstree.defaults[d]=g.defaults;b.each(g._fn,function(e,g){g.plugin=d;g.old=b.jstree._fn[e];b.jstree._fn[e]=function(){var d,f=g,l=Array.prototype.slice.call(arguments);d=new b.Event("before.jstree");var q=!1;if(!0!==this.data.core.locked||
"unlock"===e||"is_locked"===e){do{if(f&&f.plugin&&-1!==b.inArray(f.plugin,this._get_settings().plugins))break;f=f.old}while(f);if(f){if(0===e.indexOf("_"))d=f.apply(this,l);else{d=this.get_container().triggerHandler(d,{func:e,inst:this,args:l,plugin:f.plugin});if(!1===d)return;"undefined"!==typeof d&&(l=d);d=f.apply(b.extend({},this,{__callback:function(b){this.get_container().triggerHandler(e+".jstree",{inst:this,args:l,rslt:b,rlbk:q})},__rollback:function(){return q=this.get_rollback()},__call_old:function(b){return f.old.apply(this,
b?Array.prototype.slice.call(arguments,1):l)}}),l)}return d}}};b.jstree._fn[e].old=g.old;b.jstree._fn[e].plugin=d})},rollback:function(f){f&&(b.isArray(f)||(f=[f]),b.each(f,function(b,f){d[f.i].set_rollback(f.h,f.d)}))}};b.jstree._fn=b.jstree._instance.prototype={};b(function(){var d=navigator.userAgent.toLowerCase(),e=(d.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(d)&&6==parseInt(e,10)){m=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(l){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(d)&&
7==parseInt(e,10)&&(r=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(d)&&(/mozilla/.test(d)&&1.9>parseFloat(e,10))&&(p=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");b.vakata.css.add_sheet({str:g,title:"jstree"})});b.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",b.proxy(function(d){d=b(d.target);this.toggle_node(d)},this)).bind("mousedown.jstree",b.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(b){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){b=window.getSelection();
try{b.removeAllRanges(),b.collapse()}catch(d){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",b.proxy(function(d,e){var g=this._get_node(e.rslt.obj),l=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li").each(function(){var d=b(this);d.data("jstree")&&b.each(d.data("jstree"),function(f,e){l.data[f]&&b.isFunction(l["_"+f+"_notify"])&&l["_"+f+"_notify"].call(l,d,e)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
b.proxy(function(d,e){var g=this._get_node(e.rslt.obj),l=this;-1===g&&(g=this.get_container_ul());g.length&&g.find("li.jstree-open:not(:has(ul))").each(function(){l.load_node(this,b.noop,b.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var f,l=this.get_index(),m=this._get_settings(),x=this;b.each(m.plugins,function(b,d){try{e[d].__destroy.apply(x)}catch(f){}});this.__callback();if(this.is_focused())for(f in d)if(d.hasOwnProperty(f)&&
f!=l){d[f].set_focus();break}l===g&&(g=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});b(document).unbind(".jstree-"+l).undelegate(".jstree-"+l);d[l]=null;delete d[l]},_core_notify:function(b,d){d.opened&&this.open_node(b,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var b=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&b.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(b.data.core.to_open)},save_loaded:function(){},reload_nodes:function(d){var e=this,g=!0,l=[],m=[];d||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=b.map(b.makeArray(this.data.core.to_open),function(b){return"#"+b.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=b.map(b.makeArray(this.data.core.to_load),function(b){return"#"+
b.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(b.each(this.data.core.to_load,function(d,f){if("#"==f)return!0;b(f).length?l.push(f):m.push(f)}),l.length&&(this.data.core.to_load=m,b.each(l,function(b,d){e._is_loaded(d)||(e.load_node(d,function(){e.reload_nodes(!0)},function(){e.reload_nodes(!0)}),
g=!1)})));this.data.core.to_open.length&&b.each(this.data.core.to_open,function(b,d){e.open_node(d,!1,!0)});g&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){e.__callback({},e)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var d=this;this.data.core.to_open.length&&b.each(this.data.core.to_open,function(b,e){d.open_node(e,!1,!0)});this.__callback({})},refresh:function(b){var d=this;this.save_opened();b||(b=-1);(b=this._get_node(b))||
(b=-1);-1!==b?b.children("UL").remove():this.get_container_ul().empty();this.load_node(b,function(){d.__callback({obj:b});d.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var d=b.jstree._focused();d&&d.unset_focus();this.get_container().addClass("jstree-focused");g=this.get_index();this.__callback()}},is_focused:function(){return g==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),g=
-1);this.__callback()},_get_node:function(d){var e=b(d,this.get_container());if(e.is(".jstree")||-1==d)return-1;e=e.closest("li",this.get_container());return e.length?e:!1},_get_next:function(b,d){b=this._get_node(b);return-1===b?this.get_container().find("> ul > li:first-child"):b.length?d?0<b.nextAll("li").size()?b.nextAll("li:eq(0)"):!1:b.hasClass("jstree-open")?b.find("li:eq(0)"):0<b.nextAll("li").size()?b.nextAll("li:eq(0)"):b.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(b,
d){b=this._get_node(b);if(-1===b)return this.get_container().find("> ul > li:last-child");if(!b.length)return!1;if(d)return 0<b.prevAll("li").length?b.prevAll("li:eq(0)"):!1;if(b.prev("li").length){for(b=b.prev("li").eq(0);b.hasClass("jstree-open");)b=b.children("ul:eq(0)").children("li:last");return b}var e=b.parentsUntil(".jstree","li:eq(0)");return e.length?e:!1},_get_parent:function(b){b=this._get_node(b);if(-1==b||!b.length)return!1;b=b.parentsUntil(".jstree","li:eq(0)");return b.length?b:-1},
_get_children:function(b){b=this._get_node(b);return-1===b?this.get_container().children("ul:eq(0)").children("li"):b.length?b.children("ul:eq(0)").children("li"):!1},get_path:function(b,d){var e=[],g=this;b=this._get_node(b);if(-1===b||!b||!b.length)return!1;b.parentsUntil(".jstree","li").each(function(){e.push(d?this.id:g.get_text(this))});e.reverse();e.push(d?b.attr("id"):this.get_text(b));return e},_get_string:function(b){return this._get_settings().core.strings[b]||b},is_open:function(b){return(b=
this._get_node(b))&&-1!==b&&b.hasClass("jstree-open")},is_closed:function(b){return(b=this._get_node(b))&&-1!==b&&b.hasClass("jstree-closed")},is_leaf:function(b){return(b=this._get_node(b))&&-1!==b&&b.hasClass("jstree-leaf")},correct_state:function(b){b=this._get_node(b);if(!b||-1===b)return!1;b.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:b})},open_node:function(b,d,e){b=this._get_node(b);if(!b.length)return!1;if(!b.hasClass("jstree-closed"))return d&&
d.call(),!1;var g=e||m?0:this._get_settings().core.animation,l=this;this._is_loaded(b)?(this._get_settings().core.open_parents&&b.parentsUntil(".jstree",".jstree-closed").each(function(){l.open_node(this,!1,!0)}),g&&b.children("ul").css("display","none"),b.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),g?b.children("ul").stop(!0,!0).slideDown(g,function(){this.style.display="";l.after_open(b)}):l.after_open(b),this.__callback({obj:b}),d&&d.call()):
(b.children("a").addClass("jstree-loading"),this.load_node(b,function(){l.open_node(b,d,e)},d))},after_open:function(b){this.__callback({obj:b})},close_node:function(b,d){b=this._get_node(b);var e=d||m?0:this._get_settings().core.animation,g=this;if(!b.length||!b.hasClass("jstree-open"))return!1;e&&b.children("ul").attr("style","display:block !important");b.removeClass("jstree-open").addClass("jstree-closed");e?b.children("ul").stop(!0,!0).slideUp(e,function(){this.style.display="";g.after_close(b)}):
g.after_close(b);this.__callback({obj:b})},after_close:function(b){this.__callback({obj:b})},toggle_node:function(b){b=this._get_node(b);if(b.hasClass("jstree-closed"))return this.open_node(b);if(b.hasClass("jstree-open"))return this.close_node(b)},open_all:function(b,d,e){(b=b?this._get_node(b):-1)&&-1!==b||(b=this.get_container_ul());e?b=b.find("li.jstree-closed"):(e=b,b=b.is(".jstree-closed")?b.find("li.jstree-closed").addBack():b.find("li.jstree-closed"));var g=this;b.each(function(){var b=this;
g._is_loaded(this)?g.open_node(this,!1,!d):g.open_node(this,function(){g.open_all(b,d,e)},!d)});0===e.find("li.jstree-closed").length&&this.__callback({obj:e})},close_all:function(b,d){var e=this;(b=b?this._get_node(b):this.get_container())&&-1!==b||(b=this.get_container_ul());b.find("li.jstree-open").addBack().each(function(){e.close_node(this,!d)});this.__callback({obj:b})},clean_node:function(d){d=d&&-1!=d?b(d):this.get_container_ul();d=d.is("li")?d.find("li").addBack():d.find("li");d.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
d.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:d})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(b,d){this.get_container().empty().append(b);this.data=d;this.__callback()},load_node:function(b,d,e){this.__callback({obj:b})},_is_loaded:function(b){return!0},create_node:function(d,e,g,l,m){d=this._get_node(d);e="undefined"===typeof e?
"last":e;var t=b("<li />"),p=this._get_settings().core,r;if(-1!==d&&!d.length)return!1;if(!m&&!this._is_loaded(d))return this.load_node(d,function(){this.create_node(d,e,g,l,!0)}),!1;this.__rollback();"string"===typeof g&&(g={data:g});g||(g={});g.attr&&t.attr(g.attr);g.metadata&&t.data(g.metadata);g.state&&t.addClass("jstree-"+g.state);g.data||(g.data=this._get_string("new_node"));b.isArray(g.data)||(r=g.data,g.data=[],g.data.push(r));b.each(g.data,function(d,f){r=b("<a />");b.isFunction(f)&&(f=f.call(this,
g));if("string"==typeof f)r.attr("href","#")[p.html_titles?"html":"text"](f);else f.attr||(f.attr={}),f.attr.href||(f.attr.href="#"),r.attr(f.attr)[p.html_titles?"html":"text"](f.title),f.language&&r.addClass(f.language);r.prepend("<ins class='jstree-icon'>&#160;</ins>");!f.icon&&g.icon&&(f.icon=g.icon);f.icon&&(-1===f.icon.indexOf("/")?r.children("ins").addClass(f.icon):r.children("ins").css("background","url('"+f.icon+"') center center no-repeat"));t.append(r)});t.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===d&&(d=this.get_container(),"before"===e&&(e="first"),"after"===e&&(e="last"));switch(e){case "before":d.before(t);r=this._get_parent(d);break;case "after":d.after(t);r=this._get_parent(d);break;case "inside":case "first":d.children("ul").length||d.append("<ul />");d.children("ul").prepend(t);r=d;break;case "last":d.children("ul").length||d.append("<ul />");d.children("ul").append(t);r=d;break;default:d.children("ul").length||d.append("<ul />"),e||(e=0),r=d.children("ul").children("li").eq(e),
r.length?r.before(t):d.children("ul").append(t),r=d}if(-1===r||r.get(0)===this.get_container().get(0))r=-1;this.clean_node(r);this.__callback({obj:t,parent:r});l&&l.call(this,t);return t},get_text:function(b){b=this._get_node(b);if(!b.length)return!1;var d=this._get_settings().core.html_titles;b=b.children("a:eq(0)");if(d)return b=b.clone(),b.children("INS").remove(),b.html();b=b.contents().filter(function(){return 3==this.nodeType})[0];return b.nodeValue},set_text:function(b,d){b=this._get_node(b);
if(!b.length)return!1;b=b.children("a:eq(0)");if(this._get_settings().core.html_titles){var e=b.children("INS").clone();b.html(d).prepend(e);this.__callback({obj:b,name:d});return!0}b=b.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:b,name:d});return b.nodeValue=d},rename_node:function(b,d){b=this._get_node(b);this.__rollback();b&&(b.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:b,name:d})},delete_node:function(d){d=
this._get_node(d);if(!d.length)return!1;this.__rollback();var e=this._get_parent(d),g=b([]),l=this;d.each(function(){g=g.add(l._get_prev(this))});d=d.detach();-1!==e&&0===e.find("> ul > li").length&&e.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(e);this.__callback({obj:d,prev:g,parent:e});return d},prepare_move:function(d,e,g,m,p){var t={};t.ot=b.jstree._reference(d)||this;t.o=t.ot._get_node(d);t.r=-1===e?-1:this._get_node(e);t.p="undefined"===typeof g||!1===g?
"last":g;if(p||!l.o||l.o[0]!==t.o[0]||l.r[0]!==t.r[0]||l.p!==t.p){t.ot=b.jstree._reference(t.o)||this;t.rt=b.jstree._reference(t.r)||this;if(-1!==t.r&&t.r){if(!/^(before|after)$/.test(t.p)&&!this._is_loaded(t.r))return this.load_node(t.r,function(){this.prepare_move(d,e,g,m,!0)});switch(t.p){case "before":t.cp=t.r.index();t.cr=t.rt._get_parent(t.r);break;case "after":t.cp=t.r.index()+1;t.cr=t.rt._get_parent(t.r);break;case "inside":case "first":t.cp=0;t.cr=t.r;break;case "last":t.cp=t.r.find(" > ul > li").length;
t.cr=t.r;break;default:t.cp=t.p,t.cr=t.r}}else switch(t.cr=-1,t.p){case "first":case "before":case "inside":t.cp=0;break;case "after":case "last":t.cp=t.rt.get_container().find(" > ul > li").length;break;default:t.cp=t.p}t.np=-1==t.cr?t.rt.get_container():t.cr;t.op=t.ot._get_parent(t.o);t.cop=t.o.index();-1===t.op&&(t.op=t.ot?t.ot.get_container():this.get_container());!/^(before|after)$/.test(t.p)&&(t.op&&t.np&&t.op[0]===t.np[0]&&t.o.index()<t.cp)&&t.cp++;t.or=t.np.find(" > ul > li:nth-child("+(t.cp+
1)+")");l=t}this.__callback(l);m&&m.call(this,l)},check_move:function(){var b=l,d=!0,e=-1===b.r?this.get_container():b.r;if(!b||!b.o||b.or[0]===b.o[0])return!1;if(!b.cy){if(b.op&&b.np&&b.op[0]===b.np[0]&&b.cp-1===b.o.index())return!1;b.o.each(function(){if(-1!==e.parentsUntil(".jstree","li").addBack().index(this))return d=!1})}return d},move_node:function(d,e,g,m,p,t){if(!p)return this.prepare_move(d,e,g,function(b){this.move_node(b,!1,!1,m,!0,t)});m&&(l.cy=!0);if(!t&&!this.check_move())return!1;
this.__rollback();e=!1;m?(e=d.o.clone(!0),e.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):e=d.o;d.or.length?d.or.before(e):(d.np.children("ul").length||b("<ul />").appendTo(d.np),d.np.children("ul:eq(0)").append(e));try{d.ot.clean_node(d.op),d.rt.clean_node(d.np),d.op.find("> ul > li").length||d.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(r){}m&&(l.cy=!0,l.oc=e);this.__callback(l);return l},_get_move:function(){return l}}})})(jQuery);
(function(b){var d,g,e;b(function(){/msie/.test(navigator.userAgent.toLowerCase())?(g=b('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),e=b('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),d=g.width()-e.width(),g.add(e).remove()):(g=b("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),d=100-g.width(),g.parent().remove())});b.jstree.plugin("ui",{__init:function(){this.data.ui.selected=b();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",b.proxy(function(d){d.preventDefault();d.currentTarget.blur();b(d.currentTarget).hasClass("jstree-loading")||this.select_node(d.currentTarget,!0,d)},this)).delegate("a","mouseenter.jstree",b.proxy(function(d){b(d.currentTarget).hasClass("jstree-loading")||
this.hover_node(d.target)},this)).delegate("a","mouseleave.jstree",b.proxy(function(d){b(d.currentTarget).hasClass("jstree-loading")||this.dehover_node(d.target)},this)).bind("reopen.jstree",b.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",b.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",b.proxy(function(){this.reselect()},this)).bind("close_node.jstree",b.proxy(function(d,e){var g=this._get_settings().ui,m=this._get_node(e.rslt.obj),
p=m&&m.length?m.children("ul").find("a.jstree-clicked"):b(),r=this;!1!==g.selected_parent_close&&p.length&&p.each(function(){r.deselect_node(this);"select_parent"===g.selected_parent_close&&r.select_node(m)})},this)).bind("delete_node.jstree",b.proxy(function(b,d){var e=this._get_settings().ui.select_prev_on_delete,g=this._get_node(d.rslt.obj),g=g&&g.length?g.find("a.jstree-clicked"):[],m=this;g.each(function(){m.deselect_node(this)});e&&g.length&&d.rslt.prev.each(function(){if(this.parentNode)return m.select_node(this),
!1})},this)).bind("move_node.jstree",b.proxy(function(b,d){d.rslt.cy&&d.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(d,e){if("undefined"===typeof d||null===d)return e?this.data.ui.selected:this.data.ui.last_selected;var g=b(d,
this.get_container());if(g.is(".jstree")||-1==d)return-1;g=g.closest("li",this.get_container());return g.length?g:!1},_ui_notify:function(b,d){d.selected&&this.select_node(b,!1)},save_selected:function(){var b=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&b.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var d=this,e=this.data.ui.to_select,e=b.map(b.makeArray(e),function(b){return"#"+b.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});b.each(e,function(b,e){e&&"#"!==e&&d.select_node(e)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(b){this.save_selected();return this.__call_old()},hover_node:function(b){b=this._get_node(b);
if(!b.length)return!1;b.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=b.children("a").addClass("jstree-hovered").parent();this._fix_scroll(b);this.__callback({obj:b})},dehover_node:function(){var b=this.data.ui.hovered,d;if(!b||!b.length)return!1;d=b.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===d[0]&&(this.data.ui.hovered=null);this.__callback({obj:b})},select_node:function(b,d,e){b=this._get_node(b);if(-1==b||!b||!b.length)return!1;var g=this._get_settings().ui,
m="on"==g.select_multiple_modifier||!1!==g.select_multiple_modifier&&e&&e[g.select_multiple_modifier+"Key"],p=!1!==g.select_range_modifier&&e&&e[g.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==b[0]&&this.data.ui.last_selected.parent()[0]===b.parent()[0],t=this.is_selected(b),r=!0,z=this;if(d){if(g.disable_selecting_children&&m&&(b.parentsUntil(".jstree","li").children("a.jstree-clicked").length||b.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
r=!1;switch(!0){case p:this.data.ui.last_selected.addClass("jstree-last-selected");b=b[b.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==g.select_limit||b.length<g.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==z.data.ui.last_selected[0]&&z.deselect_node(this)}),t=!1,r=!0):r=!1;break;case t&&!m:this.deselect_all();t=!1;r=!0;break;case !t&&!m:if(-1==g.select_limit||
0<g.select_limit)this.deselect_all(),r=!0;break;case t&&m:this.deselect_node(b);break;case !t&&m:if(-1==g.select_limit||this.data.ui.selected.length+1<=g.select_limit)r=!0}}r&&!t&&(p||(this.data.ui.last_selected=b),b.children("a").addClass("jstree-clicked"),g.selected_parent_open&&b.parents(".jstree-closed").each(function(){z.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(b),this._fix_scroll(b.eq(0)),this.__callback({obj:b,e:e}))},_fix_scroll:function(b){var e=this.get_container()[0];
e.scrollHeight>e.offsetHeight&&(b=this._get_node(b))&&(-1!==b&&b.length&&b.is(":visible"))&&(b=b.offset().top-this.get_container().offset().top,0>b&&(e.scrollTop=e.scrollTop+b-1),b+this.data.core.li_height+(e.scrollWidth>e.offsetWidth?d:0)>e.offsetHeight&&(e.scrollTop+=b-e.offsetHeight+this.data.core.li_height+1+(e.scrollWidth>e.offsetWidth?d:0)))},deselect_node:function(b){b=this._get_node(b);if(!b.length)return!1;this.is_selected(b)&&(b.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(b),this.data.ui.last_selected.get(0)===b.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:b}))},toggle_select:function(b){b=this._get_node(b);if(!b.length)return!1;this.is_selected(b)?this.deselect_node(b):this.select_node(b)},is_selected:function(b){return 0<=this.data.ui.selected.index(this._get_node(b))},get_selected:function(d){return d?b(d).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(d){d=d?b(d).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();d.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=b([]);this.data.ui.last_selected=!1;this.__callback({obj:d})}}});b.jstree.defaults.plugins.push("ui")})(jQuery);(function(b){b.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",b.proxy(function(b,g){if(this._get_settings().crrm.move.open_onmove){var e=this;g.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){e.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(b){return!0}}},_fn:{_show_input:function(d,g){d=this._get_node(d);var e=this._get_settings().core.rtl,l=this._get_settings().crrm.input_width_limit,f=d.children("ins").width(),m=d.find("> a:visible > ins").width()*d.find("> a:visible > ins").length,u=this.get_text(d),p=b("<div />",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
r=d.css("position","relative").append(b("<input />",{value:u,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:e?"auto":f+m+4+"px",right:e?f+m+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:b.proxy(function(){var b=d.children(".jstree-rename-input"),e=b.val();""===e&&(e=u);p.remove();b.remove();this.set_text(d,u);this.rename_node(d,e);g.call(this,d,e,u);d.css("position","")},
this),keyup:function(b){b=b.keyCode||b.which;27==b?(this.value=u,this.blur()):13==b?this.blur():r.width(Math.min(p.text("pW"+this.value).width(),l))},keypress:function(b){if(13==(b.keyCode||b.which))return!1}})).children(".jstree-rename-input");this.set_text(d,"");p.css({fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||
"",wordSpacing:r.css("wordSpacing")||""});r.width(Math.min(p.text("pW"+r[0].value).width(),l))[0].select()},rename:function(b){b=this._get_node(b);this.__rollback();var g=this.__callback;this._show_input(b,function(b,d,f){g.call(this,{obj:b,new_name:d,old_name:f})})},create:function(d,g,e,l,f){var m=this;(d=this._get_node(d))||(d=-1);this.__rollback();return this.create_node(d,g,e,function(d){var e=this._get_parent(d),g=b(d).index();l&&l.call(this,d);e.length&&e.hasClass("jstree-closed")&&this.open_node(e,
!1,!0);f?m.__callback({obj:d,name:this.get_text(d),parent:e,position:g}):this._show_input(d,function(b,d,f){m.__callback({obj:b,name:d,parent:e,position:g})})})},remove:function(b){b=this._get_node(b,!0);var g=this._get_parent(b),e=this._get_prev(b);this.__rollback();b=this.delete_node(b);!1!==b&&this.__callback({obj:b,prev:e,parent:g})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(b,g,e,l,f,m){var u=
this._get_settings().crrm.move;if(!f)return"undefined"===typeof e&&(e=u.default_position),"inside"!==e||u.default_position.match(/^(before|after)$/)||(e=u.default_position),this.__call_old(!0,b,g,e,l,!1,m);if(!0===u.always_copy||"multitree"===u.always_copy&&b.rt.get_index()!==b.ot.get_index())l=!0;this.__call_old(!0,b,g,e,l,!0,m)},cut:function(b){b=this._get_node(b,!0);if(!b||!b.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=b;this.__callback({obj:b})},copy:function(b){b=this._get_node(b,
!0);if(!b||!b.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=b;this.__callback({obj:b})},paste:function(b){b=this._get_node(b);if(!b||!b.length)return!1;var g=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,b),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,b,!1,!0);this.__callback({obj:b,
nodes:g})}}})})(jQuery);(function(b){var d=[];b.jstree._themes=!1;b.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",b.proxy(function(){var b=this._get_settings().themes;this.data.themes.dots=b.dots;this.data.themes.icons=b.icons;this.set_theme(b.theme,b.url)},this)).bind("loaded.jstree",b.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(g,e){if(!g)return!1;e||(e=b.jstree._themes+g+"/style.css");-1==b.inArray(e,d)&&(b.vakata.css.add_sheet({url:e}),d.push(e));this.data.themes.theme!=g&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=g);this.get_container().addClass("jstree-"+g);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});b(function(){!1===b.jstree._themes&&b("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return b.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===b.jstree._themes&&(b.jstree._themes="themes/")});b.jstree.defaults.plugins.push("themes")})(jQuery);(function(b){var d=[];b.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof b.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";b.each(this._get_settings().hotkeys,function(g,e){!1!==e&&-1==b.inArray(g,d)&&(b(document).bind("keydown",g,function(d){a:{var e=b.jstree._focused(),m;if(e&&(e.data&&e.data.hotkeys&&e.data.hotkeys.enabled)&&(m=e._get_settings().hotkeys[g])){d=m.call(e,d);break a}d=void 0}return d}),d.push(g))});this.get_container().bind("lock.jstree",b.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",b.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&(b.hasClass("jstree-open")?this.close_node(b):
this.hover_node(this._get_prev(b)));return!1},"ctrl+left":function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&(b.hasClass("jstree-open")?this.close_node(b):this.hover_node(this._get_prev(b)));return!1},"shift+left":function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&(b.hasClass("jstree-open")?this.close_node(b):this.hover_node(this._get_prev(b)));return!1},right:function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&b.length&&(b.hasClass("jstree-closed")?
this.open_node(b):this.hover_node(this._get_next(b)));return!1},"ctrl+right":function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&b.length&&(b.hasClass("jstree-closed")?this.open_node(b):this.hover_node(this._get_next(b)));return!1},"shift+right":function(){var b=this.data.ui.hovered||this.data.ui.last_selected;b&&b.length&&(b.hasClass("jstree-closed")?this.open_node(b):this.hover_node(this._get_next(b)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(b){b.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(b);return!1},"shift+space":function(b){b.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(b);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(b){b.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(b,g){g.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(b,g,e){var l=this;this.load_node_json(b,function(){l.__callback({obj:l._get_node(b)});g.call(this)},e)},_is_loaded:function(d){var g=this._get_settings().json_data;
d=this._get_node(d);return-1==d||!d||!g.ajax&&!g.progressive_render&&!b.isFunction(g.data)||d.is(".jstree-open, .jstree-leaf")||0<d.children("ul").children("li").length},refresh:function(d){d=this._get_node(d);var g=this._get_settings().json_data;d&&(-1!==d&&g.progressive_unload&&(b.isFunction(g.data)||g.ajax))&&d.removeData("jstree_children");return this.__call_old()},load_node_json:function(d,g,e){var l=this.get_settings().json_data,f,m=function(){};f=function(){};if((d=this._get_node(d))&&-1!==
d&&(l.progressive_render||l.progressive_unload)&&!d.is(".jstree-open, .jstree-leaf")&&0===d.children("ul").children("li").length&&d.data("jstree_children")){if(f=this._parse_json(d.data("jstree_children"),d))d.append(f),l.progressive_unload||d.removeData("jstree_children");this.clean_node(d);g&&g.call(this)}else{if(d&&-1!==d){if(d.data("jstree_is_loading"))return;d.data("jstree_is_loading",!0)}switch(!0){case !l.data&&!l.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(l.data):l.data.call(this,
d,b.proxy(function(b){(b=this._parse_json(b,d))?(-1!==d&&d?(d.append(b).children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(b.children()),this.clean_node(d),g&&g.call(this)):(-1!==d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),l.correct_state&&this.correct_state(d)):l.correct_state&&this.get_container().children("ul").empty(),e&&e.call(this))},this));break;
case !!l.data&&!l.ajax||!!l.data&&!!l.ajax&&(!d||-1===d):d&&-1!=d||((f=this._parse_json(l.data,d))?(this.get_container().children("ul").empty().append(f.children()),this.clean_node()):l.correct_state&&this.get_container().children("ul").empty());g&&g.call(this);break;case !l.data&&!!l.ajax||!!l.data&&!!l.ajax&&d&&-1!==d:m=function(b,f,g){var m=this.get_settings().json_data.ajax.error;m&&m.call(this,b,f,g);-1!=d&&d.length?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),
"success"===f&&l.correct_state&&this.correct_state(d)):"success"===f&&l.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},f=function(e,f,p){var t=this.get_settings().json_data.ajax.success;t&&(e=t.call(this,e,f,p)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,"")||!b.isArray(e)&&!b.isPlainObject(e))return m.call(this,p,f,"");(e=this._parse_json(e,d))?(-1!==d&&d?(d.append(e).children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading")):
this.get_container().children("ul").empty().append(e.children()),this.clean_node(d),g&&g.call(this)):-1!==d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),l.correct_state&&(this.correct_state(d),g&&g.call(this))):l.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},l.ajax.context=this,l.ajax.error=m,l.ajax.success=f,l.ajax.dataType||(l.ajax.dataType="json"),b.isFunction(l.ajax.url)&&(l.ajax.url=l.ajax.url.call(this,d)),
b.isFunction(l.ajax.data)&&(l.ajax.data=l.ajax.data.call(this,d)),b.ajax(l.ajax)}}},_parse_json:function(d,g,e){var l=!1,f=this._get_settings(),m=f.json_data,u=f.core.html_titles,p;if(!d)return l;m.progressive_unload&&(g&&-1!==g)&&g.data("jstree_children",l);if(b.isArray(d)){l=b("<ul>");if(!d.length)return!1;f=0;for(m=d.length;f<m;f++)p=this._parse_json(d[f],g,!0),p.length&&(l=l.append(p));l=l.children()}else{"string"==typeof d&&(d={data:d});if(!d.data&&""!==d.data)return l;l=b("<li />");d.attr&&
l.attr(d.attr);d.metadata&&l.data(d.metadata);d.state&&l.addClass("jstree-"+d.state);b.isArray(d.data)||(p=d.data,d.data=[],d.data.push(p));b.each(d.data,function(e,f){p=b("<a />");b.isFunction(f)&&(f=f.call(this,d));if("string"==typeof f)p.attr("href","#")[u?"html":"text"](f);else f.attr||(f.attr={}),f.attr.href||(f.attr.href="#"),p.attr(f.attr)[u?"html":"text"](f.title),f.language&&p.addClass(f.language);p.prepend("<ins class='jstree-icon'>&#160;</ins>");!f.icon&&d.icon&&(f.icon=d.icon);f.icon&&
(-1===f.icon.indexOf("/")?p.children("ins").addClass(f.icon):p.children("ins").css("background","url('"+f.icon+"') center center no-repeat"));l.append(p)});l.prepend("<ins class='jstree-icon'>&#160;</ins>");d.children&&(m.progressive_render&&"open"!==d.state?l.addClass("jstree-closed").data("jstree_children",d.children):(m.progressive_unload&&l.data("jstree_children",d.children),b.isArray(d.children)&&d.children.length&&(p=this._parse_json(d.children,g,!0),p.length&&(g=b("<ul />"),g.append(p),l.append(g)))))}e||
(e=b("<ul />"),e.append(l),l=e);return l},get_json:function(d,g,e,l){var f=[],m=this._get_settings(),u=this,p,r,t,B,z,N;(d=this._get_node(d))&&-1!==d||(d=this.get_container().find("> ul > li"));g=b.isArray(g)?g:["id","class"];!l&&this.data.types&&g.push(m.types.type_attr);e=b.isArray(e)?e:[];d.each(function(){t=b(this);p={data:[]};g.length&&(p.attr={});b.each(g,function(b,d){(r=t.attr(d))&&(r.length&&r.replace(/jstree[^ ]*/ig,"").length)&&(p.attr[d]=(" "+r).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))});t.hasClass("jstree-open")&&(p.state="open");t.hasClass("jstree-closed")&&(p.state="closed");t.data()&&(p.metadata=t.data());B=t.children("a");B.each(function(){z=b(this);e.length||-1!==b.inArray("languages",m.plugins)||z.children("ins").get(0).style.backgroundImage.length||z.children("ins").get(0).className&&z.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(N=!1,-1!==b.inArray("languages",m.plugins)&&(b.isArray(m.languages)&&m.languages.length)&&
b.each(m.languages,function(b,d){if(z.hasClass(d))return N=d,!1}),r={attr:{},title:u.get_text(z,N)},b.each(e,function(b,d){r.attr[d]=(" "+(z.attr(d)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==b.inArray("languages",m.plugins)&&(b.isArray(m.languages)&&m.languages.length)&&b.each(m.languages,function(b,d){if(z.hasClass(d))return r.language=d,!0}),z.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(r.icon=
z.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),z.children("ins").get(0).style.backgroundImage.length&&(r.icon=z.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):r=u.get_text(z);1<B.length?p.data.push(r):p.data=r});t=t.find("> ul > li");t.length&&(p.children=u.get_json(t,g,e,!0));f.push(p)});return f}}})})(jQuery);(function(b){var d=!1;b.jstree.plugin("languages",{__init:function(){this._load_css()},
defaults:[],_fn:{set_lang:function(g){var e=this._get_settings().languages,l=!1,f=".jstree-"+this.get_index()+" a";if(!b.isArray(e)||0===e.length)return!1;if(-1==b.inArray(g,e))if(e[g])g=e[g];else return!1;if(g==this.data.languages.current_language)return!0;l=b.vakata.css.get_css(f+"."+this.data.languages.current_language,!1,d);!1!==l&&(l.style.display="none");l=b.vakata.css.get_css(f+"."+g,!1,d);!1!==l&&(l.style.display="");this.data.languages.current_language=g;this.__callback(g);return!0},get_lang:function(){return this.data.languages.current_language},
_get_string:function(d,e){var l=this._get_settings().languages,f=this._get_settings().core.strings;b.isArray(l)&&l.length&&(e=e&&-1!=b.inArray(e,l)?e:this.data.languages.current_language);return f[e]&&f[e][d]?f[e][d]:f[d]?f[d]:d},get_text:function(d,e){d=this._get_node(d)||this.data.ui.last_selected;if(!d.size())return!1;var l=this._get_settings().languages,f=this._get_settings().core.html_titles;b.isArray(l)&&l.length?(e=e&&-1!=b.inArray(e,l)?e:this.data.languages.current_language,d=d.children("a."+
e)):d=d.children("a:eq(0)");if(f)return d=d.clone(),d.children("INS").remove(),d.html();d=d.contents().filter(function(){return 3==this.nodeType})[0];return d.nodeValue},set_text:function(d,e,l){d=this._get_node(d)||this.data.ui.last_selected;if(!d.size())return!1;var f=this._get_settings().languages,m=this._get_settings().core.html_titles;b.isArray(f)&&f.length?(l=l&&-1!=b.inArray(l,f)?l:this.data.languages.current_language,d=d.children("a."+l)):d=d.children("a:eq(0)");if(m)return f=d.children("INS").clone(),
d.html(e).prepend(f),this.__callback({obj:d,name:e,lang:l}),!0;d=d.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:d,name:e,lang:l});return d.nodeValue=e},_load_css:function(){var g=this._get_settings().languages,e="/* languages css */",l=".jstree-"+this.get_index()+" a",f;if(b.isArray(g)&&g.length){this.data.languages.current_language=g[0];for(f=0;f<g.length;f++)e+=l+"."+g[f]+" {",g[f]!=this.data.languages.current_language&&(e+=" display:none; "),e+=" } ";d=b.vakata.css.add_sheet({str:e,
title:"jstree-languages"})}},create_node:function(d,e,l,f){return this.__call_old(!0,d,e,l,function(d){var e=this._get_settings().languages,g=d.children("a"),l;if(b.isArray(e)&&e.length){for(l=0;l<e.length;l++)g.is("."+e[l])||d.append(g.eq(0).clone().removeClass(e.join(" ")).addClass(e[l]));g.not("."+e.join(", .")).remove()}f&&f.call(this,d)})}}})})(jQuery);(function(b){b.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof b.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var d=this._get_settings().cookies,g;d.save_loaded&&(g=b.cookie(d.save_loaded))&&g.length&&(this.data.core.to_load=g.split(","));d.save_opened&&(g=b.cookie(d.save_opened))&&g.length&&(this.data.core.to_open=g.split(","));d.save_selected&&(g=b.cookie(d.save_selected))&&(g.length&&this.data.ui)&&(this.data.ui.to_select=g.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",b.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
b.proxy(function(b){this._get_settings().cookies.auto_save&&this.save_cookie((b.handleObj.namespace+b.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(d){if(!this.data.core.refreshing){var g=this._get_settings().cookies;if(d)switch(d){case "open_node":case "close_node":g.save_opened&&(this.save_opened(),b.cookie(g.save_opened,this.data.core.to_open.join(","),
g.cookie_options));g.save_loaded&&(this.save_loaded(),b.cookie(g.save_loaded,this.data.core.to_load.join(","),g.cookie_options));break;case "select_node":case "deselect_node":g.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(g.save_selected,this.data.ui.to_select.join(","),g.cookie_options))}else g.save_loaded&&(this.save_loaded(),b.cookie(g.save_loaded,this.data.core.to_load.join(","),g.cookie_options)),g.save_opened&&(this.save_opened(),b.cookie(g.save_opened,this.data.core.to_open.join(","),
g.cookie_options)),g.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(g.save_selected,this.data.ui.to_select.join(","),g.cookie_options))}}}})})(jQuery);(function(b){b.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",b.proxy(function(b,g){var e=this._get_node(g.rslt.obj),e=-1===e?this.get_container().children("ul"):e.children("ul");this.sort(e)},this)).bind("rename_node.jstree create_node.jstree create.jstree",b.proxy(function(b,g){this.sort(g.rslt.obj.parent())},
this)).bind("move_node.jstree",b.proxy(function(b,g){var e=-1==g.rslt.np?this.get_container():g.rslt.np;this.sort(e.children("ul"))},this))},defaults:function(b,g){return this.get_text(b)>this.get_text(g)?1:-1},_fn:{sort:function(d){var g=this._get_settings().sort,e=this;d.append(b.makeArray(d.children("li")).sort(b.proxy(g,e)));d.find("> li > ul").each(function(){e.sort(b(this))});this.clean_node(d)}}})})(jQuery);(function(b){var d=!1,g=!1,e=!1,l=!1,f=!1,m=!1,u=!1,p=!1,r=!1;b.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(d,e,f){b.vakata.dnd.is_drag&&b.vakata.drag_stop({});try{d.currentTarget.unselectable="on",d.currentTarget.onselectstart=function(){return!1},d.currentTarget.style&&(d.currentTarget.style.MozUserSelect="none")}catch(g){}b.vakata.dnd.init_x=d.pageX;b.vakata.dnd.init_y=d.pageY;b.vakata.dnd.user_data=e;b.vakata.dnd.is_down=!0;b.vakata.dnd.helper=b("<div id='vakata-dragged' />").html(f);
b(document).bind("mousemove",b.vakata.dnd.drag);b(document).bind("mouseup",b.vakata.dnd.drag_stop);return!1},drag:function(d){if(b.vakata.dnd.is_down){if(!b.vakata.dnd.is_drag)if(5<Math.abs(d.pageX-b.vakata.dnd.init_x)||5<Math.abs(d.pageY-b.vakata.dnd.init_y))b.vakata.dnd.helper.appendTo("body"),b.vakata.dnd.is_drag=!0,b(document).triggerHandler("drag_start.vakata",{event:d,data:b.vakata.dnd.user_data});else return;if("mousemove"===d.type){var e=b(document),g=e.scrollTop(),e=e.scrollLeft();20>d.pageY-
g?(m&&"down"===u&&(clearInterval(m),m=!1),m||(u="up",m=setInterval(function(){b(document).scrollTop(b(document).scrollTop()-b.vakata.dnd.scroll_spd)},150))):m&&"up"===u&&(clearInterval(m),m=!1);20>b(window).height()-(d.pageY-g)?(m&&"up"===u&&(clearInterval(m),m=!1),m||(u="down",m=setInterval(function(){b(document).scrollTop(b(document).scrollTop()+b.vakata.dnd.scroll_spd)},150))):m&&"down"===u&&(clearInterval(m),m=!1);20>d.pageX-e?(f&&"right"===p&&(clearInterval(f),f=!1),f||(p="left",f=setInterval(function(){b(document).scrollLeft(b(document).scrollLeft()-
b.vakata.dnd.scroll_spd)},150))):f&&"left"===p&&(clearInterval(f),f=!1);20>b(window).width()-(d.pageX-e)?(f&&"left"===p&&(clearInterval(f),f=!1),f||(p="right",f=setInterval(function(){b(document).scrollLeft(b(document).scrollLeft()+b.vakata.dnd.scroll_spd)},150))):f&&"right"===p&&(clearInterval(f),f=!1)}b.vakata.dnd.helper.css({left:d.pageX+b.vakata.dnd.helper_left+"px",top:d.pageY+b.vakata.dnd.helper_top+"px"});b(document).triggerHandler("drag.vakata",{event:d,data:b.vakata.dnd.user_data})}},drag_stop:function(d){f&&
clearInterval(f);m&&clearInterval(m);b(document).unbind("mousemove",b.vakata.dnd.drag);b(document).unbind("mouseup",b.vakata.dnd.drag_stop);b(document).triggerHandler("drag_stop.vakata",{event:d,data:b.vakata.dnd.user_data});b.vakata.dnd.helper.remove();b.vakata.dnd.init_x=0;b.vakata.dnd.init_y=0;b.vakata.dnd.user_data={};b.vakata.dnd.is_down=!1;b.vakata.dnd.is_drag=!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});b.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",b.proxy(function(f){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.themes&&(e.attr("class","jstree-"+this.data.themes.theme),l&&l.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
f.currentTarget===f.target&&(b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==f.target)&&(f=b.jstree._reference(f.target),f.data.dnd.foreign?(f=f._get_settings().dnd.drag_check.call(this,{o:d,r:f.get_container(),is_root:!0}),!0!==f&&!0!==f.inside&&!0!==f.before&&!0!==f.after||b.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(f.prepare_move(d,f.get_container(),"last"),f.check_move()&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",b.proxy(function(e){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&e.currentTarget===e.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var f=b.jstree._reference(e.currentTarget);f.data.dnd.foreign?(e=f._get_settings().dnd.drag_check.call(this,{o:d,r:f.get_container(),is_root:!0}),!0!==e&&!0!==e.inside&&!0!==e.before&&!0!==e.after||f._get_settings().dnd.drag_finish.call(this,
{o:d,r:f.get_container(),is_root:!0})):f.move_node(d,f.get_container(),"last",e[f._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",b.proxy(function(d){if(d.relatedTarget&&d.relatedTarget.id&&"jstree-marker-line"===d.relatedTarget.id)return!1;b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",b.proxy(function(d){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){var e=this.get_container()[0];d.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft+=b.vakata.dnd.scroll_spd},e),100)):d.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft-=b.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);d.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop+=b.vakata.dnd.scroll_spd},e),100)):d.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop-=
b.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&(b.vakata.dnd.user_data.jstree&&e&&l)&&(e.hide(),l.hide())},this)).delegate("a","mousedown.jstree",b.proxy(function(b){if(1===b.which)return this.start_drag(b.currentTarget,b),!1},this)).delegate("a","mouseenter.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_enter(d.currentTarget)},this)).delegate("a",
"mousemove.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(g&&g.length&&g.children("a")[0]===d.currentTarget||this.dnd_enter(d.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=b(d.target).offset()),this.data.dnd.w=(d.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",b.proxy(function(d){if(b.vakata.dnd.is_drag&&
b.vakata.dnd.user_data.jstree){if(d.relatedTarget&&d.relatedTarget.id&&"jstree-marker-line"===d.relatedTarget.id)return!1;e&&e.hide();l&&l.hide();this.data.dnd.mto=setTimeout(function(b){return function(){b.dnd_leave(d)}}(this),0)}},this)).delegate("a","mouseup.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_finish(d)},this));b(document).bind("drag_stop.vakata",b.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;e&&e.css({top:"-2000px"});l&&l.css({top:"-2000px"})},this)).bind("drag_start.vakata",b.proxy(function(d,e){if(e.data.jstree){var f=b(e.event.target);
f.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(f)}},this));var f=this._get_settings().dnd;f.drag_target&&b(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),b.proxy(function(f){d=f.target;b.vakata.dnd.drag_start(f,{jstree:!0,obj:f.target},"<ins class='jstree-icon'></ins>"+b(f.target).text());this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),l&&l.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var g=this.get_container();this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=parseInt(g.height(),10);this.data.dnd.foreign=!0;f.preventDefault()},this));f.drop_target&&b(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),b.proxy(function(e){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:d,r:b(e.target),e:e})&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),b.proxy(function(d){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),b.proxy(function(e){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:d,r:b(e.target),e:e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(b){return!0},drop_finish:b.noop,drag_target:".jstree-draggable",drag_finish:b.noop,drag_check:function(b){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(g&&g.length){this.data.dnd.off=g.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+g.width());if(this.data.dnd.foreign){var b=this._get_settings().dnd.drag_check.call(this,{o:d,r:g});this.data.dnd.after=b.after;this.data.dnd.before=b.before;
this.data.dnd.inside=b.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(d,g,"before");this.data.dnd.before=this.check_move();this.prepare_move(d,g,"after");this.data.dnd.after=this.check_move();this._is_loaded(g)?(this.prepare_move(d,g,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var d=["before","inside","after"],f=!1,g=this._get_settings().core.rtl,
d=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];b.each(d,b.proxy(function(d,e){if(this.data.dnd[e])return b.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),f=e,!1},this));!1===f&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");d=g?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(f){case "before":e.css({left:d+"px",top:this.data.dnd.off.top-6+"px"}).show();l&&l.css({left:d+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":e.css({left:d+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();l&&l.css({left:d+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":e.css({left:d+(g?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();l&&l.hide();break;default:e.hide(),
l&&l.hide()}return r=f}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(g,b.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(b){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:d,r:g,p:r}):(this.dnd_prepare(),this.move_node(d,g,r,b[this._get_settings().dnd.copy_modifier+"Key"]));g=d=!1;e.hide();l&&l.hide()},dnd_enter:function(d){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var e=this._get_settings().dnd;this.data.dnd.prepared=!1;g=this._get_node(d);e.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(b.proxy(this.dnd_prepare,this),e.check_timeout)):this.dnd_prepare();e.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),g&&(g.length&&g.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(b.proxy(this.dnd_open,this),e.open_timeout))):g&&(g.length&&g.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(d){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");e.hide();l&&l.hide();g&&g[0]===d.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(f,g){d=this._get_node(f);this.data.ui&&this.is_selected(d)&&(d=this._get_node(null,!0));var m=1<d.length?this._get_string("multiple_selection"):this.get_text(d),
q=this.get_container();this._get_settings().core.html_titles||(m=m.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));b.vakata.dnd.drag_start(g,{jstree:!0,obj:d},"<ins class='jstree-icon'></ins>"+m);this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),l&&l.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=q.offset();this.data.dnd.cw=parseInt(q.width(),10);this.data.dnd.ch=parseInt(q.height(),
10);this.data.dnd.active=!0}}});b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});e=b("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(b){e.hide();l.hide();b.preventDefault();b.stopImmediatePropagation();return!1}).appendTo("body");l=b("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(b){if(g&&g.length)return g.children("a").trigger(b),b.preventDefault(),b.stopImmediatePropagation(),!1}).bind("mouseleave",function(d){var f=b(d.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
g&&g.length)return g.children("a").trigger(d),e.hide(),l.hide(),d.preventDefault(),d.stopImmediatePropagation(),!1}).appendTo("body");b(document).bind("drag_start.vakata",function(b,d){d.data.jstree&&(e.show(),l&&l.show())});b(document).bind("drag_stop.vakata",function(b,d){d.data.jstree&&(e.hide(),l&&l.hide())})})})(jQuery);(function(b){b.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=b.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",b.proxy(function(b,g){this._prepare_checkboxes(g.rslt.obj)},this)).bind("loaded.jstree",b.proxy(function(b){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",b.proxy(function(b){b.preventDefault();this._get_node(b.target).hasClass("jstree-checked")?this.uncheck_node(b.target):
this.check_node(b.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return b.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(b){return["check_"+(b[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(b,g){g.checked&&this.check_node(b,!1)},_prepare_checkboxes:function(d){d=d&&-1!=d?this._get_node(d):this.get_container().find("> ul > li");if(!1!==d){var g,e=this,l,f=this._get_settings().checkbox.two_state,m=this._get_settings().checkbox.real_checkboxes,u=this._get_settings().checkbox.real_checkboxes_names;d.each(function(){l=b(this);g=l.is("li")&&(l.hasClass("jstree-checked")||m&&l.children(":checked").length)?"jstree-checked":"jstree-unchecked";l.find("li").addBack().each(function(){var d=
b(this),l;d.children("a"+(e.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":g);m&&(d.children(":checkbox").length?d.children(":checkbox").addClass("jstree-real-checkbox"):(l=u.call(e,d),d.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+l[0]+"' name='"+l[0]+"' value='"+l[1]+"' />")));f?(d.hasClass("jstree-checked")||d.children(":checked").length)&&
d.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===g||d.hasClass("jstree-checked")||d.children(":checked").length)&&d.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||d.find(".jstree-checked").parent().parent().each(function(){e._repair_state(this)})}},change_state:function(d,g){d=this._get_node(d);var e=!1,l=this._get_settings().checkbox.real_checkboxes;if(!d||-1===d)return!1;g=!1===g||!0===g?g:d.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)g?(d.removeClass("jstree-checked").addClass("jstree-unchecked"),l&&d.children(":checkbox").prop("checked",!1)):(d.removeClass("jstree-unchecked").addClass("jstree-checked"),l&&d.children(":checkbox").prop("checked",!0));else{if(g){e=d.find("li").addBack();if(!e.filter(".jstree-checked, .jstree-undetermined").length)return!1;e.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");l&&e.children(":checkbox").prop("checked",!1)}else{e=
d.find("li").addBack();if(!e.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;e.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");l&&e.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=d);this.data.checkbox.last_selected=d}d.parentsUntil(".jstree","li").each(function(){var d=b(this);if(g){if(d.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return d.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
l&&d.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");l&&d.children(":checkbox").prop("checked",!1)}else{if(d.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return d.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),l&&d.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");l&&d.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(d);return!0},check_node:function(b){if(this.change_state(b,!1)){b=this._get_node(b);if(this._get_settings().checkbox.checked_parent_open){var g=this;b.parents(".jstree-closed").each(function(){g.open_node(this,!1,!0)})}this.__callback({obj:b})}},uncheck_node:function(b){this.change_state(b,
!0)&&this.__callback({obj:this._get_node(b)})},check_all:function(){var b=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){b.change_state(this,!1)});this.__callback()},uncheck_all:function(){var b=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){b.change_state(this,!0)});this.__callback()},is_checked:function(b){b=this._get_node(b);
return b.length?b.is(".jstree-checked"):!1},get_checked:function(b,g){b=b&&-1!==b?this._get_node(b):this.get_container();return g||this._get_settings().checkbox.two_state?b.find(".jstree-checked"):b.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(b,g){b=b&&-1!==b?this._get_node(b):this.get_container();return g||this._get_settings().checkbox.two_state?b.find(".jstree-unchecked"):b.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(b){b=this._get_node(b);if(b.length)if(this._get_settings().checkbox.two_state)b.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var g=this._get_settings().checkbox.real_checkboxes,
e=b.find("> ul > .jstree-checked").length,l=b.find("> ul > .jstree-undetermined").length,f=b.find("> ul > li").length;0===f?b.hasClass("jstree-undetermined")&&this.change_state(b,!1):0===e&&0===l?this.change_state(b,!0):e===f?this.change_state(b,!1):(b.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),g&&b.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var d=
this,g=this.data.ui.to_select,g=b.map(b.makeArray(g),function(b){return"#"+b.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();b.each(g,function(b,g){d.check_node(g)});this.__callback()}else this.__call_old()},save_loaded:function(){var b=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&b.data.core.to_load.push("#"+this.id)})}}});
b(function(){b.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(b){b.vakata.xslt=function(d,g,f){var m=!1,u,p,r;if(!1===m&&window.ActiveXObject)try{m=new ActiveXObject("Msxml2.XSLTemplate"),p=new ActiveXObject("Msxml2.DOMDocument"),p.loadXML(d),r=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),r.loadXML(g),m.stylesheet=r,u=m.createProcessor(),u.input=p,u.transform(),m=u.output}catch(t){}d=b.parseXML(d);g=b.parseXML(g);!1===m&&
"undefined"!==typeof XSLTProcessor&&(u=new XSLTProcessor,u.importStylesheet(g),m=u.transformToFragment(d,document),m=b("<div />").append(m).html());!1===m&&"undefined"!==typeof d.transformNode&&(m=d.transformNode(g));f.call(null,m)};var d={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
g=function(b){return b.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};b.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(b,d,f){var g=this;this.load_node_xml(b,function(){g.__callback({obj:g._get_node(b)});d.call(this)},f)},_is_loaded:function(d){var g=this._get_settings().xml_data;d=this._get_node(d);return-1==d||
!d||!g.ajax&&!b.isFunction(g.data)||d.is(".jstree-open, .jstree-leaf")||0<d.children("ul").children("li").size()},load_node_xml:function(d,g,f){var m=this.get_settings().xml_data,u=function(){},p=function(){};if((d=this._get_node(d))&&-1!==d){if(d.data("jstree_is_loading"))return;d.data("jstree_is_loading",!0)}switch(!0){case !m.data&&!m.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(m.data):m.data.call(this,d,b.proxy(function(f){this.parse_xml(f,b.proxy(function(f){f&&(f=
f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=b(f),-1!==d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.append(f),d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()),m.clean_node&&this.clean_node(d),g&&g.call(this)):d&&-1!==d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),m.correct_state&&(this.correct_state(d),g&&g.call(this))):m.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},this));break;case !!m.data&&!m.ajax||!!m.data&&!!m.ajax&&(!d||-1===d):d&&-1!=d||this.parse_xml(m.data,b.proxy(function(f){f?(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length&&(f=b(f),this.get_container().children("ul").empty().append(f.children()),m.clean_node&&this.clean_node(d),g&&g.call(this))):m.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},this));break;case !m.data&&!!m.ajax||!!m.data&&!!m.ajax&&d&&-1!==d:u=function(b,g,l){var u=this.get_settings().xml_data.ajax.error;
u&&u.call(this,b,g,l);-1!==d&&d.length?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),"success"===g&&m.correct_state&&this.correct_state(d)):"success"===g&&m.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},p=function(f,p,r){f=r.responseText;var x=this.get_settings().xml_data.ajax.success;x&&(f=x.call(this,f,p,r)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return u.call(this,r,p,"");this.parse_xml(f,
b.proxy(function(f){f&&(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=b(f),-1!==d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.append(f),d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()),m.clean_node&&this.clean_node(d),g&&g.call(this)):d&&-1!==d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),m.correct_state&&(this.correct_state(d),g&&g.call(this))):m.correct_state&&(this.get_container().children("ul").empty(),
g&&g.call(this)))},this))},m.ajax.context=this,m.ajax.error=u,m.ajax.success=p,m.ajax.dataType||(m.ajax.dataType="xml"),b.isFunction(m.ajax.url)&&(m.ajax.url=m.ajax.url.call(this,d)),b.isFunction(m.ajax.data)&&(m.ajax.data=m.ajax.data.call(this,d)),b.ajax(m.ajax)}},parse_xml:function(e,g){var f=this._get_settings().xml_data;b.vakata.xslt(e,d[f.xsl],g)},get_xml:function(d,l,f,m,u){var p="",r=this._get_settings(),t=this,B,z,N,aa,Z;d||(d="flat");u||(u=0);(l=this._get_node(l))&&-1!==l||(l=this.get_container().find("> ul > li"));
f=b.isArray(f)?f:["id","class"];!u&&(this.data.types&&-1===b.inArray(r.types.type_attr,f))&&f.push(r.types.type_attr);m=b.isArray(m)?m:[];u||(r.xml_data.get_include_preamble&&(p+='<?xml version="1.0" encoding="UTF-8"?>'),p+="<root>");l.each(function(){p+="<item";N=b(this);b.each(f,function(b,d){var e=N.attr(d);r.xml_data.get_skip_empty&&"undefined"===typeof e||(p+=" "+d+'="'+g((" "+(e||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});N.hasClass("jstree-open")&&
(p+=' state="open"');N.hasClass("jstree-closed")&&(p+=' state="closed"');"flat"===d&&(p+=' parent_id="'+g(u)+'"');p+=">";p+="<content>";aa=N.children("a");aa.each(function(){B=b(this);Z=!1;p+="<name";-1!==b.inArray("languages",r.plugins)&&b.each(r.languages,function(b,d){if(B.hasClass(d))return p+=' lang="'+g(d)+'"',Z=d,!1});m.length&&b.each(m,function(b,d){var e=B.attr(d);r.xml_data.get_skip_empty&&"undefined"===typeof e||(p+=" "+d+'="'+g((" "+e||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"')});B.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(p+=' icon="'+g(B.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');B.children("ins").get(0).style.backgroundImage.length&&(p+=' icon="'+g(B.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');p+=">";p+="<![CDATA["+
t.get_text(B,Z)+"]]\x3e";p+="</name>"});p+="</content>";z=N[0].id||!0;N=N.find("> ul > li");z=N.length?t.get_xml(d,N,f,m,z):"";"nest"==d&&(p+=z);p+="</item>";"flat"==d&&(p+=z)});u||(p+="</root>");return p}}})})(jQuery);(function(b){8<=b().jquery.split(".")[1]?(b.expr[":"].jstree_contains=b.expr.createPseudo(function(b){return function(g){return 0<=(g.textContent||g.innerText||"").toLowerCase().indexOf(b.toLowerCase())}}),b.expr[":"].jstree_title_contains=b.expr.createPseudo(function(b){return function(g){return 0<=
(g.getAttribute("title")||"").toLowerCase().indexOf(b.toLowerCase())}})):(b.expr[":"].jstree_contains=function(b,g,e){return 0<=(b.textContent||b.innerText||"").toLowerCase().indexOf(e[3].toLowerCase())},b.expr[":"].jstree_title_contains=function(b,g,e){return 0<=(b.getAttribute("title")||"").toLowerCase().indexOf(e[3].toLowerCase())});b.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=b();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(d,g){b(this).children("ul").find("li").hide().removeClass("jstree-last");g.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){b(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){b(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(d,g){if(""===b.trim(d))this.clear_search();else{var e=
this.get_settings().search,l=this,f=function(){};this.data.search.str=d;if(!g&&!1!==e.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(b,d,e){var f=this.get_settings().search.ajax.success;f&&(b=f.call(this,b,d,e)||b);this.data.search.to_open=b;this._search_open()};e.ajax.context=this;e.ajax.error=function(){};e.ajax.success=f;b.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,d));b.isFunction(e.ajax.data)&&(e.ajax.data=
e.ajax.data.call(this,d));e.ajax.data||(e.ajax.data={search_string:d});if(!e.ajax.dataType||/^json/.exec(e.ajax.dataType))e.ajax.dataType="json";b.ajax(e.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+e.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:d})}},clear_search:function(d){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=b()},_search_open:function(d){var g=this;d=!0;var e=[],l=[];this.data.search.to_open.length&&(b.each(this.data.search.to_open,function(d,g){if("#"==g)return!0;b(g).length&&b(g).is(".jstree-closed")?e.push(g):l.push(g)}),e.length&&(this.data.search.to_open=l,b.each(e,function(b,d){g.open_node(d,function(){g._search_open(!0)})}),d=!1));d&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(b){b.vakata.context={hide_on_mouseleave:!1,cnt:b("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(d,g,e,l,f,m,p){b.vakata.context.rtl=!!p;if(d=b.vakata.context.parse(d)){b.vakata.context.vis=!0;b.vakata.context.tgt=g;b.vakata.context.par=m||g||null;b.vakata.context.data=f||null;b.vakata.context.cnt.html(d).css({visibility:"hidden",display:"block",left:0,top:0});if(b.vakata.context.hide_on_mouseleave)b.vakata.context.cnt.one("mouseleave",
function(d){b.vakata.context.hide()});f=b.vakata.context.cnt.height();m=b.vakata.context.cnt.width();e+m>b(document).width()&&(e=b(document).width()-(m+5),b.vakata.context.cnt.find("li > ul").addClass("right"));l+f>b(document).height()&&(l-=f+g[0].offsetHeight,b.vakata.context.cnt.find("li > ul").addClass("bottom"));b.vakata.context.cnt.css({left:e,top:l}).find("li:has(ul)").bind("mouseenter",function(d){d=b(document).width();var e=b(document).height(),f=b(this).children("ul").show();d!==b(document).width()&&
f.toggleClass("right");e!==b(document).height()&&f.toggleClass("bottom")}).bind("mouseleave",function(d){b(this).children("ul").hide()}).end().css({visibility:"visible"}).show();b(document).triggerHandler("context_show.vakata")}},hide:function(){b.vakata.context.vis=!1;b.vakata.context.cnt.attr("class","").css({visibility:"hidden"});b(document).triggerHandler("context_hide.vakata")},parse:function(d,g){if(!d)return!1;var e="",l=!1,f=!0;g||(b.vakata.context.func={});e+="<ul>";b.each(d,function(d,g){if(!g)return!0;
b.vakata.context.func[d]=g.action;!f&&g.separator_before&&(e+="<li class='vakata-separator vakata-separator-before'></li>");f=!1;e+="<li class='"+(g._class||"")+(g._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";g.icon&&-1===g.icon.indexOf("/")&&(e+=" class='"+g.icon+"' ");g.icon&&-1!==g.icon.indexOf("/")&&(e+=" style='background:url("+g.icon+") center center no-repeat;' ");e+=">&#160;</ins><a href='#' rel='"+d+"'>";g.submenu&&(e+="<span style='float:"+(b.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");e+=g.label+"</a>";g.submenu&&(l=b.vakata.context.parse(g.submenu,!0))&&(e+=l);e+="</li>";g.separator_after&&(e+="<li class='vakata-separator vakata-separator-after'></li>",f=!0)});e=e.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");e+="</ul>";b(document).triggerHandler("context_parse.vakata");return 10<e.length?e:!1},exec:function(d){return b.isFunction(b.vakata.context.func[d])?(b.vakata.context.func[d].call(b.vakata.context.data,b.vakata.context.par),
!0):!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});b.vakata.context.cnt.delegate("a","click",function(b){b.preventDefault()}).delegate("a","mouseup",function(d){!b(this).parent().hasClass("jstree-contextmenu-disabled")&&b.vakata.context.exec(b(this).attr("rel"))?b.vakata.context.hide():b(this).blur()}).delegate("a","mouseover",function(){b.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");b(document).bind("mousedown",function(d){b.vakata.context.vis&&!b.contains(b.vakata.context.cnt[0],d.target)&&
b.vakata.context.hide()});"undefined"!==typeof b.hotkeys&&b(document).bind("keydown","up",function(d){if(b.vakata.context.vis){var g=b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();g.length||(g=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());g.addClass("vakata-hover");d.stopImmediatePropagation();d.preventDefault()}}).bind("keydown","down",function(d){if(b.vakata.context.vis){var g=
b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();g.length||(g=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());g.addClass("vakata-hover");d.stopImmediatePropagation();d.preventDefault()}}).bind("keydown","right",function(d){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
d.stopImmediatePropagation(),d.preventDefault())}).bind("keydown","left",function(d){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),d.stopImmediatePropagation(),d.preventDefault())}).bind("keydown","esc",function(d){b.vakata.context.hide();d.preventDefault()}).bind("keydown","space",function(d){b.vakata.context.cnt.find(".vakata-hover").last().children("a").click();d.preventDefault()})});b.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",b.proxy(function(d){d.preventDefault();b(d.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(d.currentTarget,d.pageX,d.pageY)},this)).delegate("a","click.jstree",b.proxy(function(d){this.data.contextmenu&&b.vakata.context.hide()},this)).bind("destroy.jstree",b.proxy(function(){this.data.contextmenu&&b.vakata.context.hide()},this));b(document).bind("context_hide.vakata",b.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(b){this.create(b)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(b){this.rename(b)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(b){this.is_selected(b)?this.remove():this.remove(b)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(b){this.cut(b)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(b){this.copy(b)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(b){this.paste(b)}}}}}},_fn:{show_contextmenu:function(d,g,e){d=this._get_node(d);var l=this.get_settings().contextmenu,f=d.children("a:visible:eq(0)"),m=!1,m=!1;l.select_node&&(this.data.ui&&!this.is_selected(d))&&(this.deselect_all(),this.select_node(d,
!0));if(l.show_at_node||"undefined"===typeof g||"undefined"===typeof e)m=f.offset(),g=m.left,e=m.top+this.data.core.li_height;m=d.data("jstree")&&d.data("jstree").contextmenu?d.data("jstree").contextmenu:l.items;b.isFunction(m)&&(m=m.call(this,d));this.data.contextmenu=!0;b.vakata.context.show(m,f,g,e,this,d,this._get_settings().core.rtl);this.data.themes&&b.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(b){b.jstree.plugin("types",{__init:function(){var d=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",b.proxy(function(){var g=d.type_attr,e="",l=this;b.each(d.types,function(d,m){b.each(m,function(b,d){/^(max_depth|max_children|icon|valid_children)$/.test(b)||l.data.types.attach_to.push(b)});if(!m.icon)return!0;if(m.icon.image||m.icon.position)e="default"==d?e+(".jstree-"+l.get_index()+" a > .jstree-icon { "):e+(".jstree-"+l.get_index()+" li["+g+'="'+d+'"] > a > .jstree-icon { '),m.icon.image&&(e+=" background-image:url("+
m.icon.image+"); "),e=m.icon.position?e+(" background-position:"+m.icon.position+"; "):e+" background-position:0 0; ",e+="} "});""!==e&&b.vakata.css.add_sheet({str:e,title:"jstree-types"})},this)).bind("before.jstree",b.proxy(function(d,e){var l,f;if((l=(l=this._get_settings().types.use_data?this._get_node(e.args[0]):!1)&&-1!==l&&l.length?l.data("jstree"):!1)&&l.types&&!1===l.types[e.func]||-1!==b.inArray(e.func,this.data.types.attach_to)&&(e.args[0]&&(e.args[0].tagName||e.args[0].jquery))&&(l=this._get_settings().types.types,
f=this._get_type(e.args[0]),(l[f]&&"undefined"!==typeof l[f][e.func]||l["default"]&&"undefined"!==typeof l["default"][e.func])&&!1===this._check(e.func,e.args[0])))return d.stopImmediatePropagation(),!1},this));m&&this.get_container().bind("load_node.jstree set_type.jstree",b.proxy(function(d,e){var l=e&&e.rslt&&e.rslt.obj&&-1!==e.rslt.obj?this._get_node(e.rslt.obj).parent():this.get_container_ul(),f=!1,m=this._get_settings().types;b.each(m.types,function(b,d){d.icon&&(d.icon.image||d.icon.position)&&
(f="default"===b?l.find("li > a > .jstree-icon"):l.find("li["+m.type_attr+"='"+b+"'] > a > .jstree-icon"),d.icon.image&&f.css("backgroundImage","url("+d.icon.image+")"),f.css("backgroundPosition",d.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(b,g){g.type&&this._get_settings().types.use_data&&this.set_type(g.type,b)},_get_type:function(b){return(b=
this._get_node(b))&&b.length?b.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(b,g){g=this._get_node(g);var e=g.length&&b?g.attr(this._get_settings().types.type_attr,b):!1;e&&this.__callback({obj:g,type:b});return e},_check:function(d,g,e){g=this._get_node(g);var l=!1,f=this._get_type(g),m=0,p=this,r=this._get_settings().types,y=!1;if(-1===g)if(r[d])l=r[d];else return;else{if(!1===f)return;(y=r.use_data?g.data("jstree"):!1)&&y.types&&"undefined"!==typeof y.types[d]?l=y.types[d]:
r.types[f]&&"undefined"!==typeof r.types[f][d]?l=r.types[f][d]:r.types["default"]&&"undefined"!==typeof r.types["default"][d]&&(l=r.types["default"][d])}b.isFunction(l)&&(l=l.call(this,g));"max_depth"===d&&(-1!==g&&!1!==e&&-2!==r.max_depth&&0!==l)&&g.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(-1!==r.max_depth&&0>=r.max_depth-(b+1))return l=0,!1;m=0===b?l:p._check(d,this,!1);if(-1!==m&&0>=m-(b+1))return l=0,!1;0<=m&&(m-(b+1)<l||0>l)&&(l=m-(b+1));0<=r.max_depth&&(r.max_depth-
(b+1)<l||0>l)&&(l=r.max_depth-(b+1))});return l},check_move:function(){if(!this.__call_old())return!1;var d=this._get_move(),g=d.rt._get_settings().types,e=d.rt._check("max_children",d.cr),l=d.rt._check("max_depth",d.cr),f=d.rt._check("valid_children",d.cr),m=0,p=1;if("none"===f||b.isArray(f)&&(d.ot&&d.ot._get_type)&&(d.o.each(function(){if(-1===b.inArray(d.ot._get_type(this),f))return p=!1}),!1===p)||-2!==g.max_children&&-1!==e&&(m=-1===d.cr?this.get_container().find("> ul > li").not(d.o).length:
d.cr.find("> ul > li").not(d.o).length,m+d.o.length>e))return!1;if(-2!==g.max_depth&&-1!==l){p=0;if(0===l)return!1;if("undefined"===typeof d.o.d){for(g=d.o;0<g.length;)g=g.find("> ul > li"),p++;d.o.d=p}if(0>l-d.o.d)return!1}return!0},create_node:function(d,g,e,l,f,m){if(!m&&(f||this._is_loaded(d))){var p="string"==typeof g&&g.match(/^before|after$/i)&&-1!==d?this._get_parent(d):this._get_node(d),r=this._get_settings().types,y=this._check("max_children",p),t=this._check("max_depth",p),B=this._check("valid_children",
p);"string"===typeof e&&(e={data:e});e||(e={});if("none"===B)return!1;if(b.isArray(B))if(!e.attr||!e.attr[r.type_attr])e.attr||(e.attr={}),e.attr[r.type_attr]=B[0];else if(-1===b.inArray(e.attr[r.type_attr],B))return!1;if(-2!==r.max_children&&-1!==y&&(p=-1===p?this.get_container().find("> ul > li").length:p.find("> ul > li").length,p+1>y)||-2!==r.max_depth&&-1!==t&&0>t-1)return!1}return this.__call_old(!0,d,g,e,l,f,m)}}})})(jQuery);(function(b){b.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=
this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(b,g,e){var l=this;this.load_node_html(b,function(){l.__callback({obj:l._get_node(b)});g.call(this)},e)},_is_loaded:function(d){d=this._get_node(d);return-1==d||!d||!this._get_settings().html_data.ajax&&!b.isFunction(this._get_settings().html_data.data)||
d.is(".jstree-open, .jstree-leaf")||0<d.children("ul").children("li").size()},load_node_html:function(d,g,e){var l,f=this.get_settings().html_data,m=function(){};l=function(){};if((d=this._get_node(d))&&-1!==d){if(d.data("jstree_is_loading"))return;d.data("jstree_is_loading",!0)}switch(!0){case b.isFunction(f.data):f.data.call(this,d,b.proxy(function(e){e&&""!==e&&e.toString&&""!==e.toString().replace(/^[\s\n]+$/,"")?(e=b(e),e.is("ul")||(e=b("<ul />").append(e)),-1!=d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),
d.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node(d),g&&g.call(this)):d&&-1!==d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(d),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},this));break;case !f.data&&!f.ajax:d&&-1!=d||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());g&&g.call(this);break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!d||-1===d):d&&-1!=d||(l=b(f.data),l.is("ul")||(l=b("<ul />").append(l)),this.get_container().children("ul").empty().append(l.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());g&&g.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&d&&-1!==d:d=this._get_node(d),m=function(b,g,l){var m=this.get_settings().html_data.ajax.error;m&&m.call(this,b,g,l);-1!=d&&d.length?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),"success"===g&&f.correct_state&&this.correct_state(d)):"success"===g&&f.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},l=function(e,l,p){var r=this.get_settings().html_data.ajax.success;
r&&(e=r.call(this,e,l,p)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return m.call(this,p,l,"");e?(e=b(e),e.is("ul")||(e=b("<ul />").append(e)),-1!=d&&d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
d.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(d),g&&g.call(this)):d&&-1!==d?(d.children("a.jstree-loading").removeClass("jstree-loading"),d.removeData("jstree_is_loading"),f.correct_state&&
(this.correct_state(d),g&&g.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),g&&g.call(this))},f.ajax.context=this,f.ajax.error=m,f.ajax.success=l,f.ajax.dataType||(f.ajax.dataType="html"),b.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,d)),b.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,d)),b.ajax(f.ajax)}}}});b.jstree.defaults.plugins.push("html_data")})(jQuery);(function(b){b.jstree.plugin("themeroller",{__init:function(){var d=this._get_settings().themeroller;
this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(g){b(g.currentTarget).hasClass("jstree-loading")||b(this).addClass(d.item_h)}).delegate("a","mouseleave.jstree",function(){b(this).removeClass(d.item_h)}).bind("init.jstree",b.proxy(function(b,d){d.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(d.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",
b.proxy(function(b,d){this._themeroller(d.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",b.proxy(function(b){this._themeroller()},this)).bind("close_node.jstree",b.proxy(function(b,d){this._themeroller(d.rslt.obj)},this)).bind("delete_node.jstree",b.proxy(function(b,d){this._themeroller(d.rslt.parent)},this)).bind("correct_state.jstree",b.proxy(function(b,e){e.rslt.obj.children("ins.jstree-icon").removeClass(d.opened+" "+d.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(d.item_clsd,"").replace(d.item_open,"").replace(d.item_leaf,"").indexOf("ui-icon-")}).removeClass(d.item_open+" "+d.item_clsd).addClass(d.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",b.proxy(function(b,e){e.rslt.obj.children("a").addClass(d.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",b.proxy(function(b,e){this.get_container().find("a."+d.item_a).removeClass(d.item_a).end().find("a.jstree-clicked").addClass(d.item_a)},this)).bind("dehover_node.jstree",
b.proxy(function(b,e){e.rslt.obj.children("a").removeClass(d.item_h)},this)).bind("hover_node.jstree",b.proxy(function(b,e){this.get_container().find("a."+d.item_h).not(e.rslt.obj).removeClass(d.item_h);e.rslt.obj.children("a").addClass(d.item_h)},this)).bind("move_node.jstree",b.proxy(function(b,d){this._themeroller(d.rslt.o);this._themeroller(d.rslt.op)},this))},__destroy:function(){var d=this._get_settings().themeroller,g=["ui-icon"];b.each(d,function(b,d){d=d.split(" ");d.length&&(g=g.concat(d))});
this.get_container().removeClass("ui-widget-content").find("."+g.join(", .")).removeClass(g.join(" "))},_fn:{_themeroller:function(b){var g=this._get_settings().themeroller;b=(b=b&&-1!=b?this._get_node(b):this.get_container_ul())&&-1!=b?b.parent():this.get_container_ul();b.find("li.jstree-closed").children("ins.jstree-icon").removeClass(g.opened).addClass("ui-icon "+g.closed).end().children("a").addClass(g.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(g.item_clsd,
"").replace(g.item_open,"").replace(g.item_leaf,"").indexOf("ui-icon-")}).removeClass(g.item_leaf+" "+g.item_open).addClass(g.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(g.closed).addClass("ui-icon "+g.opened).end().children("a").addClass(g.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(g.item_clsd,"").replace(g.item_open,"").replace(g.item_leaf,"").indexOf("ui-icon-")}).removeClass(g.item_leaf+
" "+g.item_clsd).addClass(g.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(g.closed+" ui-icon "+g.opened).end().children("a").addClass(g.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(g.item_clsd,"").replace(g.item_open,"").replace(g.item_leaf,"").indexOf("ui-icon-")}).removeClass(g.item_clsd+" "+g.item_open).addClass(g.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});b(function(){b.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(b){b.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
b.proxy(function(d,g){var e=[],l=!0,f;"move_node"==g.func&&(!0===g.args[4]&&g.args[0].o&&g.args[0].o.length)&&(g.args[0].o.children("a").each(function(){e.push(b(this).text().replace(/^\s+/g,""))}),l=this._check_unique(e,g.args[0].np.find("> ul > li").not(g.args[0].o),"move_node"));"create_node"==g.func&&(g.args[4]||this._is_loaded(g.args[0]))&&(l=this._get_node(g.args[0]),!g.args[1]||"before"!==g.args[1]&&"after"!==g.args[1]||(l=this._get_parent(g.args[0]))&&-1!==l||(l=this.get_container()),"string"===
typeof g.args[2]?e.push(g.args[2]):g.args[2]&&g.args[2].data?e.push(g.args[2].data):e.push(this._get_string("new_node")),l=this._check_unique(e,l.find("> ul > li"),"create_node"));"rename_node"==g.func&&(e.push(g.args[1]),f=this._get_node(g.args[0]),(l=this._get_parent(f))&&-1!==l||(l=this.get_container()),l=this._check_unique(e,l.find("> ul > li").not(f),"rename_node"));if(!l)return d.stopPropagation(),!1},this))},defaults:{error_callback:b.noop},_fn:{_check_unique:function(d,g,e){var l=[],f=!0;
g.children("a").each(function(){l.push(b(this).text().replace(/^\s+/g,""))});if(!l.length||!d.length)return!0;b.each(d,function(d,e){if(-1!==b.inArray(e,l))return f=!1});f||this._get_settings().unique.error_callback.call(null,d,g,e);return f},check_move:function(){if(!this.__call_old())return!1;var d=this._get_move(),g=[];return d.o&&d.o.length?(d.o.children("a").each(function(){g.push(b(this).text().replace(/^\s+/g,""))}),this._check_unique(g,d.np.find("> ul > li").not(d.o),"check_move")):!0}}})})(jQuery);
(function(b){b.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",b.proxy(function(b,g){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",b.proxy(function(b,g){this._prepare_wholerow_span(g&&g.rslt&&g.rslt.obj?g.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
b.proxy(function(b,g){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(b,d){return function(){b._prepare_wholerow_ul(d)}}(this,g&&g.rslt&&g.rslt.obj?g.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",b.proxy(function(b,g){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",b.proxy(function(d,g){g.rslt.obj.each(function(){g.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((b(this).offset().top-g.inst.get_container().offset().top+g.inst.get_container()[0].scrollTop)/g.inst.data.core.li_height,10)+")").children("a").attr("class",g.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",b.proxy(function(b,g){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===b.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((g.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",g.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(d){var g=b(d.currentTarget);"A"===d.target.tagName||"INS"===d.target.tagName&&g.closest("li").is(".jstree-open, .jstree-closed")||(g.closest("li").children("a:visible:eq(0)").click(),d.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",b.proxy(function(d){d.stopImmediatePropagation();if(b(d.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(d.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",b.proxy(function(d){b(d.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(d.currentTarget)},this));(r||m)&&b.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(d){d=d&&-1!=d?this._get_node(d):this.get_container().find("> ul > li");!1!==d&&d.each(function(){b(this).find("li").addBack().each(function(){var d=b(this);if(d.children(".jstree-wholerow-span").length)return!0;d.prepend("<span class='jstree-wholerow-span' style='width:"+18*d.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var b=this.get_container().children("ul").eq(0),
g=b.html();b.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==g&&(this.data.wholerow.last_html=g,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(b.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(b.parent()[0].scrollWidth).css("top",-1*(b.height()+(r?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});b(function(){var d=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
p&&(d+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(r||m)d+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";b.vakata.css.add_sheet({str:d,title:"jstree"})})})(jQuery);(function(b){var d=
["getChildren","getChildrenCount","getAttr","getName","getProps"],g=function(d,g){var f=!0;d=d||{};g=[].concat(g);b.each(g,function(g,l){if(!b.isFunction(d[l]))return f=!1});return f};b.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(e,l){var f=-1==e?this._get_settings().model.object:e.data("jstree_model");if(!g(f,d))return l.call(null,!1);this._get_settings().model.async?f.getChildren(b.proxy(function(b){this.model_done(b,
l)},this)):this.model_done(f.getChildren(),l)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(d,g){var f=[],m=this._get_settings(),p=this;b.isArray(d)||(d=[d]);b.each(d,function(d,e){var g=e.getProps()||{};g.attr=e.getAttr()||{};e.getChildrenCount()&&(g.state="closed");g.data=e.getName();b.isArray(g.data)||(g.data=[g.data]);p.data.types&&b.isFunction(e.getType)&&(g.attr[m.types.type_attr]=e.getType());g.attr.id&&m.model.id_prefix&&(g.attr.id=m.model.id_prefix+g.attr.id);g.metadata||
(g.metadata={});g.metadata.jstree_model=e;f.push(g)});g.call(null,f)}}})})(jQuery)}})();
(function(m){m.color={};m.color.make=function(p,b,d,g){var e={};e.r=p||0;e.g=b||0;e.b=d||0;e.a=null!=g?g:1;e.add=function(b,d){for(var g=0;g<b.length;++g)e[b.charAt(g)]+=d;return e.normalize()};e.scale=function(b,d){for(var g=0;g<b.length;++g)e[b.charAt(g)]*=d;return e.normalize()};e.toString=function(){return 1<=e.a?"rgb("+[e.r,e.g,e.b].join()+")":"rgba("+[e.r,e.g,e.b,e.a].join()+")"};e.normalize=function(){function b(d,e,g){return e<d?d:e>g?g:e}e.r=b(0,parseInt(e.r),255);e.g=b(0,parseInt(e.g),255);
e.b=b(0,parseInt(e.b),255);e.a=b(0,e.a,1);return e};e.clone=function(){return m.color.make(e.r,e.b,e.g,e.a)};return e.normalize()};m.color.extract=function(p,b){var d;do{d=p.css(b).toLowerCase();if(""!=d&&"transparent"!=d)break;p=p.parent()}while(!m.nodeName(p.get(0),"body"));"rgba(0, 0, 0, 0)"==d&&(d="transparent");return m.color.parse(d)};m.color.parse=function(p){var b,d=m.color.make;if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(p))return d(parseInt(b[1],10),parseInt(b[2],
10),parseInt(b[3],10));if(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(p))return d(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),parseFloat(b[4]));if(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(p))return d(2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3]));if(b=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(p))return d(2.55*
parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3]),parseFloat(b[4]));if(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(p))return d(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16));if(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(p))return d(parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16));p=m.trim(p).toLowerCase();if("transparent"==p)return d(255,255,255,0);b=r[p]||[0,0,0];return d(b[0],b[1],b[2])};var r={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
jQuery.cookie=function(m,r,p){if(1<arguments.length&&"[object Object]"!==String(r)){p=jQuery.extend({},p);if(null===r||void 0===r)p.expires=-1;if("number"===typeof p.expires){var b=p.expires,d=p.expires=new Date;d.setDate(d.getDate()+b)}r=String(r);return document.cookie=[encodeURIComponent(m),"=",p.raw?r:encodeURIComponent(r),p.expires?"; expires="+p.expires.toUTCString():"",p.path?"; path="+p.path:"",p.domain?"; domain="+p.domain:"",p.secure?"; secure":""].join("")}p=r||{};d=p.raw?function(b){return b}:
decodeURIComponent;return(b=RegExp("(?:^|; )"+encodeURIComponent(m)+"=([^;]*)").exec(document.cookie))?d(b[1]):null};
(function(m){var r=m.d3,p=Error("d3.layer must be initialized with a base"),b=Error("d3.layer must specify a `dataBind` method."),d=Error("d3.layer must specify an `insert` method."),g=function(b){if(!b)throw p;this._base=b;this._handlers={}};g.prototype.dataBind=function(){throw b;};g.prototype.insert=function(){throw d;};g.prototype.on=function(b,d,f){f=f||{};b in this._handlers||(this._handlers[b]=[]);this._handlers[b].push({callback:d,chart:f.chart||null})};g.prototype.off=function(b,d){var f,
g=this._handlers[b];if(g){if(1===arguments.length)return g.length=0,void 0;for(f=g.length-1;-1<f;--f)g[f].callback===d&&g.splice(f,1)}};g.prototype.draw=function(b){var d,f,g,m,p;if(d=this.dataBind.call(this._base,b),!(d instanceof r.selection))throw Error("Invalid selection defined by `dataBind` method.");b=d.enter();b._chart=this._base._chart;d=[{name:"update",selection:d},{name:"enter",selection:this.insert.bind(b)},{name:"merge",selection:d},{name:"exit",selection:d.exit.bind(d)}];for(var y=0,
t=d.length;t>y;++y){if(g=d[y].name,f=d[y].selection,"function"==typeof f&&(f=f()),!(f instanceof r.selection))throw Error('Invalid selection defined for "'+g+"' lifecycle event.");if(b=this._handlers[g])for(m=0,p=b.length;p>m;++m)f._chart=b[m].chart||this._base._chart,f.call(b[m].callback);if(b=this._handlers[g+":transition"],b&&b.length)for(f=f.transition(),m=0,p=b.length;p>m;++m)f._chart=b[m].chart||this._base._chart,f.call(b[m].callback)}};r.selection.prototype.layer=function(b){var d,f=new g(this);
if(f.dataBind=b.dataBind,f.insert=b.insert,"events"in b)for(d in b.events)f.on(d,b.events[d]);return this.on=function(){return f.on.apply(f,arguments)},this.off=function(){return f.off.apply(f,arguments)},this.draw=function(){return f.draw.apply(f,arguments)},this}})(this);
(function(m,r){function p(b){var d,e,g,l;if(!b)return b;e=arguments.length;for(d=1;e>d;d++)if(g=arguments[d])for(l in g)b[l]=g[l];return b}var b=m.d3,d=function(b){this.constructor=b},g=function(b,e){var g;return d.prototype=b.prototype,g=new d(b),b.apply(g,e),g},e=function(b,d){var g=this.constructor.__super__;g&&e.call(g,b,d);Object.hasOwnProperty.call(this.constructor.prototype,"initialize")&&this.initialize.apply(b,d)},l=function(b){this.base=b;this._layers={};this._mixins=[];this._events={};
e.call(this,this,Array.prototype.slice.call(arguments,1))};l.prototype.unlayer=function(b){var d=this.layer(b),d=this._layerList.indexOf(d);return delete this._layers[b],this._layerList.splice(d,1),this};l.prototype.layer=function(b,d,e){var g;return 1===arguments.length?this._layers[b]:(g=d.layer(e),this._layers[b]=g,d._chart=this,g)};l.prototype.initialize=function(){};l.prototype.transform=function(b){return b};l.prototype.mixin=function(b,d){var e=Array.prototype.slice.call(arguments,2);e.unshift(d);
e=g(l[b],e);return this._mixins.push(e),e};l.prototype.draw=function(b){var d,e;b=this.transform(b);for(d in this._layers)this._layers[d].draw(b);for(e in this._mixins)this._mixins[e].draw(b)};l.prototype.on=function(b,d,e){return(this._events[b]||(this._events[b]=[])).push({callback:d,context:e||this,_chart:this}),this};l.prototype.once=function(b,d,e){var g=this,l=function(){g.off(b,l);d.apply(this,arguments)};return this.on(b,l,e)};l.prototype.off=function(b,d,e){var g,l,m,p,r;if(0===arguments.length){for(b in this._events)this._events[b].length=
0;return this}if(1===arguments.length)return l=this._events[b],l&&(l.length=0),this;g=b?[b]:Object.keys(this._events);for(p=0;g.length>p;p++)for(l=g[p],l=this._events[l],r=l.length;r--;)m=l[r],(d&&d===m.callback||e&&e===m.context)&&l.splice(r,1);return this};l.prototype.trigger=function(b){var d,e,g=Array.prototype.slice.call(arguments,1),l=this._events[b];if(l!==r)for(d=0;l.length>d;d++)e=l[d],e.callback.apply(e.context,g);return this};l.extend=function(b,d,e){var g,m=this;g=d&&Object.hasOwnProperty.call(d,
"constructor")?d.constructor:function(){return m.apply(this,arguments)};p(g,m,e);e=function(){this.constructor=g};return e.prototype=m.prototype,g.prototype=new e,d&&p(g.prototype,d),g.__super__=m.prototype,l[b]=g,g};b.chart=function(b){return 0===arguments.length?l:1===arguments.length?l[b]:l.extend.apply(l,arguments)};b.selection.prototype.chart=function(b){if(0===arguments.length)return this._chart;var d=Array.prototype.slice.call(arguments,1);d.unshift(this);return g(l[b],d)};b.selection.enter.prototype.chart=
function(){return this._chart};b.transition.prototype.chart=b.selection.enter.prototype.chart})(this);function sortByKey(m,r){return m.sort(function(m,b){var d=m[r],g=b[r];return d<g?-1:d>g?1:0})}function parseUri(m){var r=parseUri.options;m=r.parser[r.strictMode?"strict":"loose"].exec(m);for(var p={},b=14;b--;)p[r.key[b]]=m[b]||"";p[r.q.name]={};p[r.key[12]].replace(r.q.parser,function(b,g,e){g&&(p[r.q.name][g]=e)});return p}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(m){var r="";m.protocol&&(r+=m.protocol+"://");m.user&&(r+=m.user);m.password&&(r+=":"+m.password);if(m.user||m.password)r+="@";m.host&&(r+=m.host);m.port&&(r+=":"+m.port);m.path&&(r+=m.path);var p=m.queryKey,b=[];for(k in p)if(p.hasOwnProperty(k)){var d=encodeURIComponent(p[k]);k=encodeURIComponent(k);d?b.push(k+"="+d):b.push(k)}0<b.length&&(r+="?"+b.join("&"));m.anchor&&(r+="#"+m.anchor);return r}
function H1DSUri(m){this.base_uri=m;this.base_uri_components=parseUri(m);this.base_h1ds_filters=[];this.base_non_h1ds_query={};this.extra_h1ds_filters=[];this.extra_non_h1ds_query={};m={fids:[]};var r=/^f(\d+)(_(\w+))?/,p;for(p in this.base_uri_components.queryKey)if(this.base_uri_components.queryKey.hasOwnProperty(p)){var b=r.exec(p);b?(m.hasOwnProperty(b[1])||(m.fids.push(b[1]),m[b[1]]={name:"",kwargs:{},fid:parseInt(b[1])}),"undefined"===typeof b[2]?m[b[1]].name=this.base_uri_components.queryKey[p]:
m[b[1]].kwargs[b[3]]=this.base_uri_components.queryKey[p]):this.base_non_h1ds_query[p]=this.base_uri_components.queryKey[p]}for(p=0;p<m.fids.length;p++)this.base_h1ds_filters.push(m[m.fids[p]]);this.sortH1DSFilters()}H1DSUri.prototype.sortH1DSFilters=function(){this.base_h1ds_filters=sortByKey(this.base_h1ds_filters,"fid");this.extra_h1ds_filters=sortByKey(this.extra_h1ds_filters,"fid")};
H1DSUri.prototype.updateOrAddBaseFilter=function(m,r){var p=this.base_h1ds_filters.length;0<p&&this.base_h1ds_filters[p-1].name==m?this.base_h1ds_filters[p-1].kwargs=r:this.addBaseFilter(m,r)};H1DSUri.prototype.shiftExtraH1DSFilterFIDs=function(m){for(var r=0;r<this.extra_h1ds_filters.length;r++)this.extra_h1ds_filters[r].fid+=m};
H1DSUri.prototype.shiftExtraFilterIDs=function(){this.sortH1DSFilters();if(0<this.extra_h1ds_filters.length){var m=new_fid-this.extra_h1ds_filters[0].fid;0<=m&&this.shiftExtraH1DSFilterFIDs(m+1)}};H1DSUri.prototype.addBaseFilter=function(m,r){this.sortH1DSFilters();var p=this.base_h1ds_filters.length;this.base_h1ds_filters.push({name:m,kwargs:r,fid:0<p?this.base_h1ds_filters[p-1].fid+1:0});this.shiftExtraH1DSFilterFIDs(1)};
H1DSUri.prototype.addExtraFilter=function(m,r){this.sortH1DSFilters();var p=this.extra_h1ds_filters.length,b=this.base_h1ds_filters.length;this.extra_h1ds_filters.push({name:m,kwargs:r,fid:0<p?this.extra_h1ds_filters[p-1].fid+1:0<b?this.base_h1ds_filters[b-1].fid+1:0})};H1DSUri.prototype.packFilterIDs=function(){console.log(this.extra_h1ds_filters)};
H1DSUri.prototype.changeFilterID=function(m,r){for(var p=0;p<this.base_h1ds_filters.length;p++)this.base_h1ds_filters[p].fid==parseInt(m)&&(this.base_h1ds_filters[p].fid=parseInt(r));for(p=0;p<this.extra_h1ds_filters.length;p++)this.extra_h1ds_filters[p].fid==parseInt(m)&&(this.extra_h1ds_filters[p].fid=parseInt(r));this.shiftExtraFilterIDs()};
H1DSUri.prototype.renderBaseUri=function(){var m={},r;for(r in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(r)&&(m[r]=this.base_non_h1ds_query[r]);for(r=0;r<this.base_h1ds_filters.length;r++){var p=this.base_h1ds_filters[r].fid;m["f"+p]=this.base_h1ds_filters[r].name;for(var b in this.base_h1ds_filters[r].kwargs)m["f"+p+"_"+b]=this.base_h1ds_filters[r].kwargs[b]}b=jQuery.extend({},this.base_uri_components);b.queryKey=m;return makeUri(b)};
H1DSUri.prototype.renderExtraUri=function(){var m={},r;for(r in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(r)&&(m[r]=this.base_non_h1ds_query[r]);for(var p=0;p<this.base_h1ds_filters.length;p++){var b=this.base_h1ds_filters[p].fid;m["f"+b]=this.base_h1ds_filters[p].name;for(var d in this.base_h1ds_filters[p].kwargs)m["f"+b+"_"+d]=this.base_h1ds_filters[p].kwargs[d]}for(r in this.extra_non_h1ds_query)this.extra_non_h1ds_query.hasOwnProperty(r)&&(m[r]=this.extra_non_h1ds_query[r]);
for(p=0;p<this.extra_h1ds_filters.length;p++)for(d in b=this.extra_h1ds_filters[p].fid,m["f"+b]=this.extra_h1ds_filters[p].name,this.extra_h1ds_filters[p].kwargs)m["f"+b+"_"+d]=this.extra_h1ds_filters[p].kwargs[d];r=jQuery.extend({},this.base_uri_components);r.queryKey=m;return makeUri(r)};H1DSUri.prototype.isBinary=function(){return"bin"===this.base_non_h1ds_query.format};
H1DSUri.prototype.getShot=function(){var m=this.uri_components.path;"/"!==m[m.length-1]&&(m+="/");m=m.match(/\/\d+\//);return null===m?0:Number(m[0].substring(1,m[0].length-1))};H1DSUri.prototype.setShot=function(m){var r=this.uri_components.path;"/"!==r[r.length-1]&&(r+="/");m=r.replace(/\/\d+\//,"/"+m+"/");this.uri_components.path=m};d3.chart("dvBaseChart",{initialize:function(){var m=this,r=this.base.append("g").classed("graph-background",!0);m.main=m.base.append("g").attr("class","chart-main");m.brush=d3.svg.brush();m.margin={top:10,right:10,bottom:10,left:10};m._width=100;m._height=100;m.rmin=function(p){if(p.hasOwnProperty("length")){for(var b=[],d=0;d<p.length;d++)b.push(m.rmin(p[d]));return d3.min(b)}return p};m.rmax=function(p){if(p.hasOwnProperty("length")){for(var b=[],d=0;d<p.length;d++)b.push(m.rmax(p[d]));return d3.max(b)}return p};
this.source=function(m){arguments.length||this.source_data;this.source_data=m};this.load_data=function(){m.data=[];for(var p=0;p<m.source_data.length;p++)m.data.push(m.source_data[p].url_parser(m.source_data[p].url,m.source_data[p].modifiers));m.formatted_data=m.format_data(m.data)};this.render=function(){m.draw(m.data)};this.set_margin=function(p){var b=m._width+m.margin.left+m.margin.right,d=m._height+m.margin.bottom+m.margin.top;m.margin=p;m.base.select("g.chart-main").attr("transform","translate("+
m.margin.left+","+m.margin.top+")");m._width=b-m.margin.left-m.margin.right;m._height=d-m.margin.top-m.margin.bottom};this.set_margin({top:10,right:10,bottom:10,left:10});this.layer("background",r,{dataBind:function(m){return this.selectAll("rect.background").data([m])},insert:function(){return this.insert("rect").attr("class","background").attr("x",0).attr("y",0).attr("width",m._width+m.margin.left+m.margin.right).attr("height",m._height+m.margin.top+m.margin.bottom)}})},width:function(m){if(!arguments.length)return this._width+
this.margin.left+this.margin.right;this._width=m-this.margin.left-this.margin.right;this.base.select("g rect.background").attr("width",m);return this},height:function(m){if(!arguments.length)return this._height+this.margin.top+this.margin.bottom;this._height=m-this.margin.top-this.margin.bottom;this.base.select("g rect.background").attr("y",m).attr("height",m);return this}});
d3.chart("dvBaseChart").extend("dvTimeSeriesChart",{initialize:function(){var m=this;this.set_margin({top:50,right:50,bottom:50,left:50});this.xScale=d3.scale.linear().range([0,m._width]);this.yScale=d3.scale.linear().range([m._height,0]);this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom");this.yAxis=d3.svg.axis().scale(this.yScale).orient("left");this.colors=d3.scale.category20().range();this.layer("xAxis",m.main.append("g"),{dataBind:function(b){return this.selectAll("g.x.axis").data([b])},
insert:function(){return this.insert("g").attr("class","x axis").attr("transform",function(b){return"translate(0,"+m._height+")"})},events:{merge:function(){m.xScale.range([0,m._width]).domain([d3.min(m.data,function(b){return m.rmin(b.dimension)}),d3.max(m.data,function(b){return m.rmax(b.dimension)})]);return this.call(m.xAxis)},enter:function(){m.xScale.range([0,m._width]).domain([d3.min(m.data,function(b){return m.rmin(b.dimension)}),d3.max(m.data,function(b){return m.rmax(b.dimension)})]);return this.call(m.xAxis)},
exit:function(){return this.remove()}}});this.layer("yAxis",m.main.append("g"),{dataBind:function(b){return this.selectAll("g.y.axis").data([b])},insert:function(){return this.append("g").attr("class","y axis").attr("transform",function(b){return"translate(0,0)"})},events:{merge:function(){var b=d3.min(m.data,function(b){return m.rmin(b.value)}),d=d3.max(m.data,function(b){return m.rmax(b.value)}),g=0.05*(d-b);m.yScale.range([m._height,0]).domain([b-g,d+g]);return this.call(m.yAxis)},enter:function(){var b=
d3.min(m.data,function(b){return m.rmin(b.value)}),d=d3.max(m.data,function(b){return m.rmax(b.value)}),g=0.05*(d-b);m.yScale.range([m._height,0]).domain([b-g,d+g]);return this.call(m.yAxis)},exit:function(){return this.remove()}}});var r=d3.svg.line().x(function(b){return m.xScale(b[0])}).y(function(b){return m.yScale(b[1])});m.format_data=function(b){for(var d=[],g=0,e=0;e<b.length;e++)for(var l=m.format_datum(b[e]),f=0;f<l.length;f++){var p=l[f];p.color_index=g;p.name=l.name;d.push(p);++g}return d};
m.format_datum=function(b){var d=[],g=0;"undefined"!==typeof b.metadata.minmax_pairs&&(g=b.metadata.minmax_pairs.length);var e=d3.range(b.value.length);if(0<g)for(var l=0;l<g;l++){e.splice(e.indexOf(b.metadata.minmax_pairs[l][0]),1);e.splice(e.indexOf(b.metadata.minmax_pairs[l][1]),1);for(var f=[],m=0;m<b.value[b.metadata.minmax_pairs[l][0]].length;m++)f.push([b.dimension[0][m],b.value[b.metadata.minmax_pairs[l][0]][m]]);for(m=b.value[b.metadata.minmax_pairs[l][1]].length-1;0<=m;m--)f.push([b.dimension[0][m],
b.value[b.metadata.minmax_pairs[l][1]][m]]);f.closeLine=!0;f.fillLine=!0;d.push(f)}for(l=0;l<e.length;l++){g=e[l];f=[];for(m=0;m<b.value[g].length;m++)f.push([b.dimension[0][m],b.value[g][m]]);f.closeLine=!1;f.fillLine=!1;d.push(f)}d.name=b.name;return d};this.layer("data",m.main.append("g"),{dataBind:function(b){return this.selectAll("path.signal").data(m.formatted_data)},insert:function(){return this.append("path")},events:{merge:function(){return this.attr("class","signal").style("stroke",function(b,
d){return m.colors[2*b.color_index]}).style("fill",function(b,d){return b.fillLine?m.colors[2*b.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(b,d){return r(b)+(b.closeLine?"Z":"")})},enter:function(){return this.attr("class","signal").style("stroke",function(b,d){return m.colors[2*b.color_index]}).style("fill",function(b,d){return b.fillLine?m.colors[2*b.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(b,d){return r(b)+(b.closeLine?"Z":"")})},exit:function(){return this.remove()}}});
this.layer("labels",m.main.append("g"),{dataBind:function(b){return this.selectAll("text.pathlabel").data(m.formatted_data)},insert:function(){return this.append("text").attr("class","pathlabel")},events:{merge:function(){return this.attr("x",10).attr("y",function(b,d){return 20*d}).attr("dy","0.5em").style("font","10 Helvetica Neue").text(function(b){return b.name}).attr("fill",function(b,d){return m.colors[2*b.color_index]})},enter:function(){return this.attr("x",10).attr("y",function(b,d){return 20*
d}).attr("dy","0.5em").style("font","10 Helvetica Neue").text(function(b){return b.name}).attr("fill",function(b,d){return m.colors[2*b.color_index]})},exit:function(){return this.remove()}}});var p=function(){for(var b=0;b<m.source_data.length;b++)m.source_data[b].modifiers.min=m.brush.extent()[0],m.source_data[b].modifiers.max=m.brush.extent()[1];m.load_data();m.render()};this.layer("interactive",m.main,{dataBind:function(b){return this.selectAll("g.brush").data([m.data])},insert:function(){m.brush.clear();
return this.append("g").attr("class","brush")},events:{merge:function(){m.brush=d3.svg.brush().x(m.xScale).on("brushend",p);return this.call(m.brush).selectAll("rect").attr("y",0).attr("height",m._height)}}})}});
dataviewer=function(){var m={margin:{top:10,right:10,bottom:10,left:10},_width:100,_height:100,n_columns:10,n_rows:10,create:function(r){m.basenode=d3.select(r);m.width(parseInt(m.basenode.style("width")));m.height(parseInt(d3.min([m.width()/1.61803398875,m.basenode.style("height")])));m.base=m.basenode.append("svg").attr("width",function(b){return m.width()}).attr("height",function(b){return m.height()}).append("g").attr("transform",function(b){return"translate("+m.margin.left+","+m.margin.top+")"});
m.xScale=d3.scale.linear().domain([0,m.n_columns]).range([0,m._width]);m.yScale=d3.scale.linear().domain([0,m.n_rows]).range([m._height,0]);m.column_width=m._width/m.n_columns;m.row_height=m._height/m.n_rows;m.background_grid=m.base.append("g").attr("class","pagelet-grid");for(var p=0;p<=m.n_columns;p++)m.background_grid.append("line").attr("x1",function(){return Math.round(p*m.column_width)}).attr("x2",function(){return Math.round(p*m.column_width)}).attr("y1",0).attr("y2",m._height);for(p=0;p<=
m.n_rows;p++)m.background_grid.append("line").attr("x1",0).attr("x2",m._width).attr("y1",function(){return Math.round(p*m.row_height)}).attr("y2",function(){return Math.round(p*m.row_height)});return m},data:function(r){m.data=m.updateCoords(r)},draw:function(){for(var r=0;r<m.data.length;r++){var p=m.base.append("g").attr("class","chart").attr("transform","translate("+m.data[r].px_coords[0]+","+m.data[r].px_coords[3]+")").chart("dvTimeSeriesChart");p.width(m.data[r].px_coords[2]-m.data[r].px_coords[0]);
p.height(m.data[r].px_coords[1]-m.data[r].px_coords[3]);p.source(m.data[r].data);p.load_data();p.render()}},updateCoords:function(r){for(var p=0;p<r.length;p++){r[p].px_coords=[m.xScale(r[p].plot_coords[0]),m.yScale(r[p].plot_coords[1]),m.xScale(r[p].plot_coords[2]),m.yScale(r[p].plot_coords[3])];for(var b=0;b<r[p].data.length;b++)r[p].data[b].hasOwnProperty("modifiers")||(r[p].data[b].modifiers={}),r[p].data[b].modifiers.width=parseInt(m.xScale(r[p].plot_coords[2])-m.xScale(r[p].plot_coords[0]))}return r},
width:function(r){if(!arguments.length)return m._width+m.margin.left+m.margin.right;m._width=r-m.margin.left-m.margin.right},height:function(r){if(!arguments.length)return m._height+m.margin.top+m.margin.bottom;m._height=r-m.margin.top-m.margin.bottom}};return m}();var golden_ratio=1.61803398875;$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},0)})};
$(function(){$(".column").each(function(m){var r=this;$(r).sortable({connectWith:".column",handle:".portlet-header",update:function(m,b){$.cookie("sortorder"+r.id,$(r).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(m){m=$.cookie("sortorder"+this.id);var r=this;m&&$(m.split(",")).each(function(m,b){$("#"+b).appendTo(r)});$(this).sortable()});$(".portlet").each(function(m){(m=$.cookie(this.id))&&"collapsed"===m&&($(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide())});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=
function(){var m=this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:m[m.length-2]},function(m){window.location=m.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}
function autoPollSummaryDB(){var m=d3.select("#poll-summarydb-server");if(null!==m[0][0]&&"True"===m.text()){var r=null,p=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),b=d3.select("table.main-table tbody"),d=function(d){$.ajax({url:p,dataType:"json",async:!1}).done(function(e){r=new Date(e.timestamp);e=b.selectAll("tr").data(cross(e),function(b){return b[0].shot});e.enter().insert("tr","tr").style("background-color","yellow");var l=e.selectAll("td").data(function(b){return b});
l.enter().append("td").html(function(b,d){return'<a href="/summary/_/go_to_source/'+b.attr+"/"+b.shot+'/" >'+b.value+"</a>"});l.transition().duration(500).each(function(b){d3.select(this).html(function(b,d){return'<a href="/summary/_/go_to_source/'+b.attr+"/"+b.shot+'/" >'+b.value+"</a>"})});e.transition().duration(d).style("background-color","white");e.exit().remove()})};d(1E3);setInterval(function(){summaryUpdateRequired(r)&&d(3E5)},2E3)}}
function getLastShotInDisplayedPage(){var m=-1;d3.selectAll("table.main-table tr").each(function(r,p){if(0<p){var b=Number(d3.select(this).select("td").text());b>m&&(m=b)}});return m}function summaryUpdateRequired(m){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(m){latest_summdb_update=new Date(m.last_update)});return latest_summdb_update>m}
function updateSummaryDB(){var m=getLastShotInDisplayedPage(),r=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(m){r=Number(m.latest_shot)});r>m&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(m){})}
function cross(m){var r=[],p,b;for(p=0;p<m.data.length;p++)for(r[p]=[],r[p].shot,b=0;b<m.attributes.length;b++)r[p][b]={shot:m.data[p].shot,attr:m.attributes[b],value:m.data[p].d[b]};return r}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});d3.select(window).on("mousemove",mousemove).on("mouseup",mouseup);var rect,x0,x1,count,par_rect;
function mousedown(){x0=d3.mouse(this);count=0;par_rect=d3.select(this);rect=d3.select(this.parentNode).append("svg:rect").attr("y",par_rect.attr("y")).attr("height",par_rect.attr("height")).style("fill","#999").style("fill-opacity",0.5);d3.event.preventDefault()}function mousemove(){if(rect){x1=d3.mouse(rect.node());var m=Math.min(x0[0],x1[0]),r=Math.max(x0[0],x1[0]);Math.min(x0[1],x1[1]);Math.max(x0[1],x1[1]);rect.attr("x",m-0.5).attr("width",r-m+1)}}
function mouseup(){rect&&(rect.each(function(m){var r=m.xAxis.scale().invert(d3.select(this).attr("x"));m=m.xAxis.scale().invert(+d3.select(this).attr("x")+ +d3.select(this).attr("width"));var p=new H1DSUri(window.location.href),b=Number(p.getNextFilterID());0==b?p.appendFilter("dim_range",{min:r,max:m}):(b-=1,"dim_range"===p.h1ds_filters[String(b)].name?p.h1ds_filters[String(b)].kwargs={min:r,max:m}:p.appendFilter("dim_range",{min:r,max:m}));$(".h1ds-pagelet").each(function(){d3.select(this).html("");
populatePagelet($(this),p.renderUri())});Modernizr.history&&history.pushState(null,null,p.renderUri())}),rect.remove(),rect=null)}function getSpectrogramUri(m){m=new H1DSUri(m);m.addExtraFilter("slanted_baseline",{window:10});m.addExtraFilter("spectrogram",{bin_size:-1});m.addExtraFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});m.addExtraFilter("y_axis_energy_limit",{threshold:0.995});m.extra_non_h1ds_query.format="bin";m.extra_non_h1ds_query.bin_assert_dtype="uint8";return m}
function getPowerspectrumUri(m,r){var p=new H1DSUri(m);p.addExtraFilter("slanted_baseline",{window:10});p.addExtraFilter("power_spectrum",{});p.addExtraFilter("norm_dim_range",{min:0,max:0.5});p.addExtraFilter("resample_minmax",{n_bins:r});p.extra_non_h1ds_query.format="json";return p}function getRawUri(m,r){var p=new H1DSUri(m);p.addExtraFilter("resample_minmax",{n_bins:r});p.extra_non_h1ds_query.format="json";return p}
ProcessH1DSHeaders=function(m){m=m.split("\n");for(var r={},p=0;p<m.length;p++){var b=m[p].split(":");2===b.length&&b[0].match("^X-H1DS")&&(r[b[0]]=$.trim(b[1]))}return r};
ProcessBinaryData=function(m,r){for(var p=new Uint8Array(str2ab(m)),b=parseInt(r["X-H1DS-ndim"]),d=0,g={data:[],dim:[],n_dim:b},e=0;e<b;e++){g.dim[e]=[];for(var l=parseInt(r["X-H1DS-dim-"+e+"-length"]),f=parseFloat(r["X-H1DS-dim-"+e+"-delta"]),q=parseFloat(r["X-H1DS-dim-"+e+"-first"]),u=0;u<l;u++)g.dim[e][u]=f*u+q}e=parseFloat(r["X-H1DS-data-delta"]);l=parseFloat(r["X-H1DS-data-min"]);if(0<b)for(f=parseInt(r["X-H1DS-dim-0-length"]),parseFloat(r["X-H1DS-dim-0-delta"]),parseFloat(r["X-H1DS-dim-0-first"]),
q=0;q<f;q++)if(1<b){g.data[q]=[];u=parseInt(r["X-H1DS-dim-1-length"]);parseFloat(r["X-H1DS-dim-1-delta"]);parseFloat(r["X-H1DS-dim-1-first"]);for(var x=0;x<u;x++)if(2<b){g.data[q][x]=[];var y=parseInt(r["X-H2DS-dim-2-length"]);parseFloat(r["X-H1DS-dim-2-delta"]);parseFloat(r["X-H1DS-dim-2-first"]);for(var t=0;t<y;t++)g.data[q][x][t]=e*p[d]+l,d++}else g.data[q][x]=p[d],d++}else g.data[q]=e*p[d]+l,d++;return g};function ab2str(m){return String.fromCharCode.apply(null,new Uint8Array(m))}
function str2ab(m){for(var r=new ArrayBuffer(m.length),p=new Uint8Array(r),b=0,d=m.length;b<d;b++)p[b]=m.charCodeAt(b);return r}var plotState={};function datamap(m){}
function loadWorksheet(){var m=[{plot_coords:[0,0,10,10],modifiers:{},data:[{url:window.location.toString(),url_parser:function(m,b){var d=getRawUri(m,b.width);b.hasOwnProperty("min")&&d.updateOrAddBaseFilter("dim_range",{min:b.min,max:b.max});var g;$.ajax({url:d.renderExtraUri(),dataType:"json",async:!1}).done(function(b){g=b.data});return g}}]}],r=dataviewer.create("div.data.worksheet");r.data(m);r.draw()}
$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();$("div.data.worksheet").length&&loadWorksheet()});
