window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var g=[].slice.call(arguments);"object"===typeof console.log?log.apply.call(console.log,console,g):console.log.apply(console,g)}};
(function(g){function l(){}for(var m="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log timeStamp profile profileEnd time timeEnd trace warn".split(" "),a;a=m.pop();)g[a]=g[a]||l})(function(){try{return console.log(),window.console}catch(g){return window.console={}}}());
(function(g){function l(m){if("string"===typeof m.data){var a=m.handler,c=m.data.toLowerCase().split(" ");m.handler=function(f){if(this===f.target||!/textarea|select/i.test(f.target.nodeName)&&"text"!==f.target.type){var e="keypress"!==f.type&&g.hotkeys.specialKeys[f.which],p=String.fromCharCode(f.which).toLowerCase(),n="",s={};f.altKey&&"alt"!==e&&(n+="alt+");f.ctrlKey&&"ctrl"!==e&&(n+="ctrl+");f.metaKey&&(!f.ctrlKey&&"meta"!==e)&&(n+="meta+");f.shiftKey&&"shift"!==e&&(n+="shift+");e?s[n+e]=!0:(s[n+
p]=!0,s[n+g.hotkeys.shiftNums[p]]=!0,"shift+"===n&&(s[g.hotkeys.shiftNums[p]]=!0));e=0;for(p=c.length;e<p;e++)if(s[c[e]])return a.apply(this,arguments)}}}}g.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",
110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};g.each(["keydown","keyup","keypress"],function(){g.event.special[this]={add:l}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var g=!1,l=!1,m=!1;(function(a){a.vakata={};a.vakata.css={get_css:function(a,c,e){a=a.toLowerCase();var f=e.cssRules||e.rules,p=0;do{if(f.length&&p>f.length+5)break;if(f[p].selectorText&&f[p].selectorText.toLowerCase()==a)return!0===c?(e.removeRule&&e.removeRule(p),e.deleteRule&&e.deleteRule(p),!0):f[p]}while(f[++p]);return!1},add_css:function(c,e){if(a.jstree.css.get_css(c,!1,e))return!1;e.insertRule?e.insertRule(c+" { }",0):e.addRule(c,null,0);return a.vakata.css.get_css(c)},
remove_css:function(c,e){return a.vakata.css.get_css(c,!0,e)},add_sheet:function(c){var e=!1,f=!0;if(c.str)return c.title&&(e=a("style[id='"+c.title+"-stylesheet']")[0]),e?f=!1:(e=document.createElement("style"),e.setAttribute("type","text/css"),c.title&&e.setAttribute("id",c.title+"-stylesheet")),e.styleSheet?f?(document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet.cssText=c.str):e.styleSheet.cssText=e.styleSheet.cssText+" "+c.str:(e.appendChild(document.createTextNode(c.str)),document.getElementsByTagName("head")[0].appendChild(e)),
e.sheet||e.styleSheet;if(c.url)if(document.createStyleSheet)try{document.createStyleSheet(c.url)}catch(p){}else return e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.media="all",e.href=c.url,document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet}};var c=[],f=-1,e={},p={};a.fn.jstree=function(n){var f="string"==typeof n,p=Array.prototype.slice.call(arguments,1),g=this;if(f){if("_"==n.substring(0,1))return g;this.each(function(){var e=c[a.data(this,"jstree_instance_id")],
e=e&&a.isFunction(e[n])?e[n].apply(e,p):e;if("undefined"!==typeof e&&(0===n.indexOf("is_")||!0!==e&&!1!==e))return g=e,!1})}else this.each(function(){var f=a.data(this,"jstree_instance_id"),s=[],g=n?a.extend({},!0,n):{},J=a(this),m=!1,l=[],s=s.concat(p);J.data("jstree")&&s.push(J.data("jstree"));g=s.length?a.extend.apply(null,[!0,g].concat(s)):g;"undefined"!==typeof f&&c[f]&&c[f].destroy();f=parseInt(c.push({}),10)-1;a.data(this,"jstree_instance_id",f);g.plugins=a.isArray(g.plugins)?g.plugins:a.jstree.defaults.plugins.slice();
g.plugins.unshift("core");g.plugins=g.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");m=a.extend(!0,{},a.jstree.defaults,g);m.plugins=g.plugins;a.each(e,function(c,n){-1===a.inArray(c,m.plugins)?(m[c]=null,delete m[c]):l.push(c)});m.plugins=l;c[f]=new a.jstree._instance(f,a(this).addClass("jstree jstree-"+f),m);a.each(c[f]._get_settings().plugins,function(a,n){c[f].data[n]={}});a.each(c[f]._get_settings().plugins,function(a,n){e[n]&&
e[n].__init.apply(c[f])});setTimeout(function(){c[f]&&c[f].init()},0)});return g};a.jstree={defaults:{plugins:[]},_focused:function(){return c[f]||null},_reference:function(n){if(c[n])return c[n];var e=a(n);e.length||"string"!==typeof n||(e=a("#"+n));return e.length?c[e.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(c,e,f){this.data={core:{}};this.get_settings=function(){return a.extend(!0,{},f)};this._get_settings=function(){return f};this.get_index=function(){return c};
this.get_container=function(){return e};this.get_container_ul=function(){return e.children("ul:eq(0)")};this._set_settings=function(c){f=a.extend(!0,{},f,c)}},_fn:{},plugin:function(c,f){f=a.extend({},{__init:a.noop,__destroy:a.noop,_fn:{},defaults:!1},f);e[c]=f;a.jstree.defaults[c]=f.defaults;a.each(f._fn,function(e,f){f.plugin=c;f.old=a.jstree._fn[e];a.jstree._fn[e]=function(){var c,n=f,p=Array.prototype.slice.call(arguments);c=new a.Event("before.jstree");var s=!1;if(!0!==this.data.core.locked||
"unlock"===e||"is_locked"===e){do{if(n&&n.plugin&&-1!==a.inArray(n.plugin,this._get_settings().plugins))break;n=n.old}while(n);if(n){if(0===e.indexOf("_"))c=n.apply(this,p);else{c=this.get_container().triggerHandler(c,{func:e,inst:this,args:p,plugin:n.plugin});if(!1===c)return;"undefined"!==typeof c&&(p=c);c=n.apply(a.extend({},this,{__callback:function(a){this.get_container().triggerHandler(e+".jstree",{inst:this,args:p,rslt:a,rlbk:s})},__rollback:function(){return s=this.get_rollback()},__call_old:function(a){return n.old.apply(this,
a?Array.prototype.slice.call(arguments,1):p)}}),p)}return c}}};a.jstree._fn[e].old=f.old;a.jstree._fn[e].plugin=c})},rollback:function(n){n&&(a.isArray(n)||(n=[n]),a.each(n,function(a,n){c[n.i].set_rollback(n.h,n.d)}))}};a.jstree._fn=a.jstree._instance.prototype={};a(function(){var c=navigator.userAgent.toLowerCase(),e=(c.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],f=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(c)&&6==parseInt(e,10)){g=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(p){}f+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(c)&&
7==parseInt(e,10)&&(l=!0,f+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(c)&&(/mozilla/.test(c)&&1.9>parseFloat(e,10))&&(m=!0,f+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");a.vakata.css.add_sheet({str:f,title:"jstree"})});a.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",a.proxy(function(c){c=a(c.target);this.toggle_node(c)},this)).bind("mousedown.jstree",a.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",a.proxy(function(c,e){var f=this._get_node(e.rslt.obj),p=this;-1===f&&(f=this.get_container_ul());f.length&&f.find("li").each(function(){var c=a(this);c.data("jstree")&&a.each(c.data("jstree"),function(n,e){p.data[n]&&a.isFunction(p["_"+n+"_notify"])&&p["_"+n+"_notify"].call(p,c,e)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
a.proxy(function(c,e){var f=this._get_node(e.rslt.obj),p=this;-1===f&&(f=this.get_container_ul());f.length&&f.find("li.jstree-open:not(:has(ul))").each(function(){p.load_node(this,a.noop,a.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var n,p=this.get_index(),g=this._get_settings(),J=this;a.each(g.plugins,function(a,c){try{e[c].__destroy.apply(J)}catch(n){}});this.__callback();if(this.is_focused())for(n in c)if(c.hasOwnProperty(n)&&
n!=p){c[n].set_focus();break}p===f&&(f=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});a(document).unbind(".jstree-"+p).undelegate(".jstree-"+p);c[p]=null;delete c[p]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(c){var e=this,f=!0,p=[],g=[];c||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=a.map(a.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=a.map(a.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(a.each(this.data.core.to_load,function(c,n){if("#"==n)return!0;a(n).length?p.push(n):g.push(n)}),p.length&&(this.data.core.to_load=g,a.each(p,function(a,c){e._is_loaded(c)||(e.load_node(c,function(){e.reload_nodes(!0)},function(){e.reload_nodes(!0)}),
f=!1)})));this.data.core.to_open.length&&a.each(this.data.core.to_open,function(a,c){e.open_node(c,!1,!0)});f&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){e.__callback({},e)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var c=this;this.data.core.to_open.length&&a.each(this.data.core.to_open,function(a,e){c.open_node(e,!1,!0)});this.__callback({})},refresh:function(a){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var c=a.jstree._focused();c&&c.unset_focus();this.get_container().addClass("jstree-focused");f=this.get_index();this.__callback()}},is_focused:function(){return f==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),f=
-1);this.__callback()},_get_node:function(c){var e=a(c,this.get_container());if(e.is(".jstree")||-1==c)return-1;e=e.closest("li",this.get_container());return e.length?e:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):a.length?c?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(a,
c){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var e=a.parentsUntil(".jstree","li:eq(0)");return e.length?e:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):a.length?a.children("ul:eq(0)").children("li"):!1},get_path:function(a,c){var e=[],f=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){e.push(c?this.id:f.get_text(this))});e.reverse();e.push(c?a.attr("id"):this.get_text(a));return e},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,e){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&
c.call(),!1;var f=e||g?0:this._get_settings().core.animation,p=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){p.open_node(this,!1,!0)}),f&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),f?a.children("ul").stop(!0,!0).slideDown(f,function(){this.style.display="";p.after_open(a)}):p.after_open(a),this.__callback({obj:a}),c&&c.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){p.open_node(a,c,e)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var e=c||g?0:this._get_settings().core.animation,f=this;if(!a.length||!a.hasClass("jstree-open"))return!1;e&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");e?a.children("ul").stop(!0,!0).slideUp(e,function(){this.style.display="";f.after_close(a)}):
f.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,c,e){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());e?a=a.find("li.jstree-closed"):(e=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").addBack():a.find("li.jstree-closed"));var f=this;a.each(function(){var a=this;
f._is_loaded(this)?f.open_node(this,!1,!c):f.open_node(this,function(){f.open_all(a,c,e)},!c)});0===e.find("li.jstree-closed").length&&this.__callback({obj:e})},close_all:function(a,c){var e=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").addBack().each(function(){e.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(c){c=c&&-1!=c?a(c):this.get_container_ul();c=c.is("li")?c.find("li").addBack():c.find("li");c.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
c.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:c})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,e){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(c,e,f,p,g){c=this._get_node(c);e="undefined"===typeof e?
"last":e;var t=a("<li />"),m=this._get_settings().core,l;if(-1!==c&&!c.length)return!1;if(!g&&!this._is_loaded(c))return this.load_node(c,function(){this.create_node(c,e,f,p,!0)}),!1;this.__rollback();"string"===typeof f&&(f={data:f});f||(f={});f.attr&&t.attr(f.attr);f.metadata&&t.data(f.metadata);f.state&&t.addClass("jstree-"+f.state);f.data||(f.data=this._get_string("new_node"));a.isArray(f.data)||(l=f.data,f.data=[],f.data.push(l));a.each(f.data,function(c,e){l=a("<a />");a.isFunction(e)&&(e=e.call(this,
f));if("string"==typeof e)l.attr("href","#")[m.html_titles?"html":"text"](e);else e.attr||(e.attr={}),e.attr.href||(e.attr.href="#"),l.attr(e.attr)[m.html_titles?"html":"text"](e.title),e.language&&l.addClass(e.language);l.prepend("<ins class='jstree-icon'>&#160;</ins>");!e.icon&&f.icon&&(e.icon=f.icon);e.icon&&(-1===e.icon.indexOf("/")?l.children("ins").addClass(e.icon):l.children("ins").css("background","url('"+e.icon+"') center center no-repeat"));t.append(l)});t.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===c&&(c=this.get_container(),"before"===e&&(e="first"),"after"===e&&(e="last"));switch(e){case "before":c.before(t);l=this._get_parent(c);break;case "after":c.after(t);l=this._get_parent(c);break;case "inside":case "first":c.children("ul").length||c.append("<ul />");c.children("ul").prepend(t);l=c;break;case "last":c.children("ul").length||c.append("<ul />");c.children("ul").append(t);l=c;break;default:c.children("ul").length||c.append("<ul />"),e||(e=0),l=c.children("ul").children("li").eq(e),
l.length?l.before(t):c.children("ul").append(t),l=c}if(-1===l||l.get(0)===this.get_container().get(0))l=-1;this.clean_node(l);this.__callback({obj:t,parent:l});p&&p.call(this,t);return t},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var c=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(c)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,c){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var e=a.children("INS").clone();a.html(c).prepend(e);this.__callback({obj:a,name:c});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:c});return a.nodeValue=c},rename_node:function(a,c){a=this._get_node(a);this.__rollback();a&&(a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments)))&&this.__callback({obj:a,name:c})},delete_node:function(c){c=
this._get_node(c);if(!c.length)return!1;this.__rollback();var e=this._get_parent(c),f=a([]),p=this;c.each(function(){f=f.add(p._get_prev(this))});c=c.detach();-1!==e&&0===e.find("> ul > li").length&&e.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(e);this.__callback({obj:c,prev:f,parent:e});return c},prepare_move:function(c,e,f,g,l){var t={};t.ot=a.jstree._reference(c)||this;t.o=t.ot._get_node(c);t.r=-1===e?-1:this._get_node(e);t.p="undefined"===typeof f||!1===f?
"last":f;if(l||!p.o||p.o[0]!==t.o[0]||p.r[0]!==t.r[0]||p.p!==t.p){t.ot=a.jstree._reference(t.o)||this;t.rt=a.jstree._reference(t.r)||this;if(-1!==t.r&&t.r){if(!/^(before|after)$/.test(t.p)&&!this._is_loaded(t.r))return this.load_node(t.r,function(){this.prepare_move(c,e,f,g,!0)});switch(t.p){case "before":t.cp=t.r.index();t.cr=t.rt._get_parent(t.r);break;case "after":t.cp=t.r.index()+1;t.cr=t.rt._get_parent(t.r);break;case "inside":case "first":t.cp=0;t.cr=t.r;break;case "last":t.cp=t.r.find(" > ul > li").length;
t.cr=t.r;break;default:t.cp=t.p,t.cr=t.r}}else switch(t.cr=-1,t.p){case "first":case "before":case "inside":t.cp=0;break;case "after":case "last":t.cp=t.rt.get_container().find(" > ul > li").length;break;default:t.cp=t.p}t.np=-1==t.cr?t.rt.get_container():t.cr;t.op=t.ot._get_parent(t.o);t.cop=t.o.index();-1===t.op&&(t.op=t.ot?t.ot.get_container():this.get_container());!/^(before|after)$/.test(t.p)&&(t.op&&t.np&&t.op[0]===t.np[0]&&t.o.index()<t.cp)&&t.cp++;t.or=t.np.find(" > ul > li:nth-child("+(t.cp+
1)+")");p=t}this.__callback(p);g&&g.call(this,p)},check_move:function(){var a=p,c=!0,e=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(!a.cy){if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==e.parentsUntil(".jstree","li").addBack().index(this))return c=!1})}return c},move_node:function(c,e,f,g,l,t){if(!l)return this.prepare_move(c,e,f,function(a){this.move_node(a,!1,!1,g,!0,t)});g&&(p.cy=!0);if(!t&&!this.check_move())return!1;
this.__rollback();e=!1;g?(e=c.o.clone(!0),e.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):e=c.o;c.or.length?c.or.before(e):(c.np.children("ul").length||a("<ul />").appendTo(c.np),c.np.children("ul:eq(0)").append(e));try{c.ot.clean_node(c.op),c.rt.clean_node(c.np),c.op.find("> ul > li").length||c.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(m){}g&&(p.cy=!0,p.oc=e);this.__callback(p);return p},_get_move:function(){return p}}})})(jQuery);
(function(a){var c,f,e;a(function(){/msie/.test(navigator.userAgent.toLowerCase())?(f=a('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),e=a('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),c=f.width()-e.width(),f.add(e).remove()):(f=a("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),c=100-f.width(),f.parent().remove())});a.jstree.plugin("ui",{__init:function(){this.data.ui.selected=a();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",a.proxy(function(c){c.preventDefault();c.currentTarget.blur();a(c.currentTarget).hasClass("jstree-loading")||this.select_node(c.currentTarget,!0,c)},this)).delegate("a","mouseenter.jstree",a.proxy(function(c){a(c.currentTarget).hasClass("jstree-loading")||
this.hover_node(c.target)},this)).delegate("a","mouseleave.jstree",a.proxy(function(c){a(c.currentTarget).hasClass("jstree-loading")||this.dehover_node(c.target)},this)).bind("reopen.jstree",a.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",a.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",a.proxy(function(){this.reselect()},this)).bind("close_node.jstree",a.proxy(function(c,e){var f=this._get_settings().ui,g=this._get_node(e.rslt.obj),
l=g&&g.length?g.children("ul").find("a.jstree-clicked"):a(),m=this;!1!==f.selected_parent_close&&l.length&&l.each(function(){m.deselect_node(this);"select_parent"===f.selected_parent_close&&m.select_node(g)})},this)).bind("delete_node.jstree",a.proxy(function(a,c){var e=this._get_settings().ui.select_prev_on_delete,f=this._get_node(c.rslt.obj),f=f&&f.length?f.find("a.jstree-clicked"):[],g=this;f.each(function(){g.deselect_node(this)});e&&f.length&&c.rslt.prev.each(function(){if(this.parentNode)return g.select_node(this),
!1})},this)).bind("move_node.jstree",a.proxy(function(a,c){c.rslt.cy&&c.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(c,e){if("undefined"===typeof c||null===c)return e?this.data.ui.selected:this.data.ui.last_selected;var f=a(c,
this.get_container());if(f.is(".jstree")||-1==c)return-1;f=f.closest("li",this.get_container());return f.length?f:!1},_ui_notify:function(a,c){c.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var c=this,e=this.data.ui.to_select,e=a.map(a.makeArray(e),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});a.each(e,function(a,e){e&&"#"!==e&&c.select_node(e)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);
if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,c;if(!a||!a.length)return!1;c=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===c[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,c,e){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var f=this._get_settings().ui,
g="on"==f.select_multiple_modifier||!1!==f.select_multiple_modifier&&e&&e[f.select_multiple_modifier+"Key"],l=!1!==f.select_range_modifier&&e&&e[f.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],t=this.is_selected(a),m=!0,P=this;if(c){if(f.disable_selecting_children&&g&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
m=!1;switch(!0){case l:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack();-1==f.select_limit||a.length<f.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==P.data.ui.last_selected[0]&&P.deselect_node(this)}),t=!1,m=!0):m=!1;break;case t&&!g:this.deselect_all();t=!1;m=!0;break;case !t&&!g:if(-1==f.select_limit||
0<f.select_limit)this.deselect_all(),m=!0;break;case t&&g:this.deselect_node(a);break;case !t&&g:if(-1==f.select_limit||this.data.ui.selected.length+1<=f.select_limit)m=!0}}m&&!t&&(l||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),f.selected_parent_open&&a.parents(".jstree-closed").each(function(){P.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:e}))},_fix_scroll:function(a){var e=this.get_container()[0];
e.scrollHeight>e.offsetHeight&&(a=this._get_node(a))&&(-1!==a&&a.length&&a.is(":visible"))&&(a=a.offset().top-this.get_container().offset().top,0>a&&(e.scrollTop=e.scrollTop+a-1),a+this.data.core.li_height+(e.scrollWidth>e.offsetWidth?c:0)>e.offsetHeight&&(e.scrollTop+=a-e.offsetHeight+this.data.core.li_height+1+(e.scrollWidth>e.offsetWidth?c:0)))},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(c){return c?a(c).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(c){c=c?a(c).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();c.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=a([]);this.data.ui.last_selected=!1;this.__callback({obj:c})}}});a.jstree.defaults.plugins.push("ui")})(jQuery);(function(a){a.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",a.proxy(function(a,f){if(this._get_settings().crrm.move.open_onmove){var e=this;f.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){e.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(c,f){c=this._get_node(c);var e=this._get_settings().core.rtl,p=this._get_settings().crrm.input_width_limit,n=c.children("ins").width(),g=c.find("> a:visible > ins").width()*c.find("> a:visible > ins").length,l=this.get_text(c),m=a("<div />",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
y=c.css("position","relative").append(a("<input />",{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:e?"auto":n+g+4+"px",right:e?n+g+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:a.proxy(function(){var a=c.children(".jstree-rename-input"),e=a.val();""===e&&(e=l);m.remove();a.remove();this.set_text(c,l);this.rename_node(c,e);f.call(this,c,e,l);c.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=l,this.blur()):13==a?this.blur():y.width(Math.min(m.text("pW"+this.value).width(),p))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(c,"");m.css({fontFamily:y.css("fontFamily")||"",fontSize:y.css("fontSize")||"",fontWeight:y.css("fontWeight")||"",fontStyle:y.css("fontStyle")||"",fontStretch:y.css("fontStretch")||"",fontVariant:y.css("fontVariant")||"",letterSpacing:y.css("letterSpacing")||
"",wordSpacing:y.css("wordSpacing")||""});y.width(Math.min(m.text("pW"+y[0].value).width(),p))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var f=this.__callback;this._show_input(a,function(a,c,n){f.call(this,{obj:a,new_name:c,old_name:n})})},create:function(c,f,e,p,n){var g=this;(c=this._get_node(c))||(c=-1);this.__rollback();return this.create_node(c,f,e,function(c){var e=this._get_parent(c),f=a(c).index();p&&p.call(this,c);e.length&&e.hasClass("jstree-closed")&&this.open_node(e,
!1,!0);n?g.__callback({obj:c,name:this.get_text(c),parent:e,position:f}):this._show_input(c,function(a,c,p){g.__callback({obj:a,name:c,parent:e,position:f})})})},remove:function(a){a=this._get_node(a,!0);var f=this._get_parent(a),e=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:e,parent:f})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,f,e,p,n,g){var l=
this._get_settings().crrm.move;if(!n)return"undefined"===typeof e&&(e=l.default_position),"inside"!==e||l.default_position.match(/^(before|after)$/)||(e=l.default_position),this.__call_old(!0,a,f,e,p,!1,g);if(!0===l.always_copy||"multitree"===l.always_copy&&a.rt.get_index()!==a.ot.get_index())p=!0;this.__call_old(!0,a,f,e,p,!0,g)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var f=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:f})}}})})(jQuery);(function(a){var c=[];a.jstree._themes=!1;a.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",a.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",a.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(f,e){if(!f)return!1;e||(e=a.jstree._themes+f+"/style.css");-1==a.inArray(e,c)&&(a.vakata.css.add_sheet({url:e}),c.push(e));this.data.themes.theme!=f&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=f);this.get_container().addClass("jstree-"+f);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});a(function(){!1===a.jstree._themes&&a("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return a.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===a.jstree._themes&&(a.jstree._themes="themes/")});a.jstree.defaults.plugins.push("themes")})(jQuery);(function(a){var c=[];a.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof a.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";a.each(this._get_settings().hotkeys,function(f,e){!1!==e&&-1==a.inArray(f,c)&&(a(document).bind("keydown",f,function(c){a:{var e=a.jstree._focused(),g;if(e&&(e.data&&e.data.hotkeys&&e.data.hotkeys.enabled)&&(g=e._get_settings().hotkeys[f])){c=g.call(e,c);break a}c=void 0}return c}),c.push(f))});this.get_container().bind("lock.jstree",a.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",a.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=
!1}}})})(jQuery);(function(a){a.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,f){f.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,f,e){var p=this;this.load_node_json(a,function(){p.__callback({obj:p._get_node(a)});f.call(this)},e)},_is_loaded:function(c){var f=this._get_settings().json_data;
c=this._get_node(c);return-1==c||!c||!f.ajax&&!f.progressive_render&&!a.isFunction(f.data)||c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").length},refresh:function(c){c=this._get_node(c);var f=this._get_settings().json_data;c&&(-1!==c&&f.progressive_unload&&(a.isFunction(f.data)||f.ajax))&&c.removeData("jstree_children");return this.__call_old()},load_node_json:function(c,f,e){var p=this.get_settings().json_data,n,g=function(){};n=function(){};if((c=this._get_node(c))&&-1!==
c&&(p.progressive_render||p.progressive_unload)&&!c.is(".jstree-open, .jstree-leaf")&&0===c.children("ul").children("li").length&&c.data("jstree_children")){if(n=this._parse_json(c.data("jstree_children"),c))c.append(n),p.progressive_unload||c.removeData("jstree_children");this.clean_node(c);f&&f.call(this)}else{if(c&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case !p.data&&!p.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(p.data):p.data.call(this,
c,a.proxy(function(a){(a=this._parse_json(a,c))?(-1!==c&&c?(c.append(a).children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(a.children()),this.clean_node(c),f&&f.call(this)):(-1!==c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),p.correct_state&&this.correct_state(c)):p.correct_state&&this.get_container().children("ul").empty(),e&&e.call(this))},this));break;
case !!p.data&&!p.ajax||!!p.data&&!!p.ajax&&(!c||-1===c):c&&-1!=c||((n=this._parse_json(p.data,c))?(this.get_container().children("ul").empty().append(n.children()),this.clean_node()):p.correct_state&&this.get_container().children("ul").empty());f&&f.call(this);break;case !p.data&&!!p.ajax||!!p.data&&!!p.ajax&&c&&-1!==c:g=function(a,f,n){var g=this.get_settings().json_data.ajax.error;g&&g.call(this,a,f,n);-1!=c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),
"success"===f&&p.correct_state&&this.correct_state(c)):"success"===f&&p.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},n=function(e,n,l){var t=this.get_settings().json_data.ajax.success;t&&(e=t.call(this,e,n,l)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,"")||!a.isArray(e)&&!a.isPlainObject(e))return g.call(this,l,n,"");(e=this._parse_json(e,c))?(-1!==c&&c?(c.append(e).children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading")):
this.get_container().children("ul").empty().append(e.children()),this.clean_node(c),f&&f.call(this)):-1!==c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),p.correct_state&&(this.correct_state(c),f&&f.call(this))):p.correct_state&&(this.get_container().children("ul").empty(),f&&f.call(this))},p.ajax.context=this,p.ajax.error=g,p.ajax.success=n,p.ajax.dataType||(p.ajax.dataType="json"),a.isFunction(p.ajax.url)&&(p.ajax.url=p.ajax.url.call(this,c)),
a.isFunction(p.ajax.data)&&(p.ajax.data=p.ajax.data.call(this,c)),a.ajax(p.ajax)}}},_parse_json:function(c,f,e){var p=!1,n=this._get_settings(),g=n.json_data,l=n.core.html_titles,m;if(!c)return p;g.progressive_unload&&(f&&-1!==f)&&f.data("jstree_children",p);if(a.isArray(c)){p=a("<ul>");if(!c.length)return!1;n=0;for(g=c.length;n<g;n++)m=this._parse_json(c[n],f,!0),m.length&&(p=p.append(m));p=p.children()}else{"string"==typeof c&&(c={data:c});if(!c.data&&""!==c.data)return p;p=a("<li />");c.attr&&
p.attr(c.attr);c.metadata&&p.data(c.metadata);c.state&&p.addClass("jstree-"+c.state);a.isArray(c.data)||(m=c.data,c.data=[],c.data.push(m));a.each(c.data,function(e,f){m=a("<a />");a.isFunction(f)&&(f=f.call(this,c));if("string"==typeof f)m.attr("href","#")[l?"html":"text"](f);else f.attr||(f.attr={}),f.attr.href||(f.attr.href="#"),m.attr(f.attr)[l?"html":"text"](f.title),f.language&&m.addClass(f.language);m.prepend("<ins class='jstree-icon'>&#160;</ins>");!f.icon&&c.icon&&(f.icon=c.icon);f.icon&&
(-1===f.icon.indexOf("/")?m.children("ins").addClass(f.icon):m.children("ins").css("background","url('"+f.icon+"') center center no-repeat"));p.append(m)});p.prepend("<ins class='jstree-icon'>&#160;</ins>");c.children&&(g.progressive_render&&"open"!==c.state?p.addClass("jstree-closed").data("jstree_children",c.children):(g.progressive_unload&&p.data("jstree_children",c.children),a.isArray(c.children)&&c.children.length&&(m=this._parse_json(c.children,f,!0),m.length&&(f=a("<ul />"),f.append(m),p.append(f)))))}e||
(e=a("<ul />"),e.append(p),p=e);return p},get_json:function(c,f,e,p){var g=[],s=this._get_settings(),l=this,m,y,t,K,P,W;(c=this._get_node(c))&&-1!==c||(c=this.get_container().find("> ul > li"));f=a.isArray(f)?f:["id","class"];!p&&this.data.types&&f.push(s.types.type_attr);e=a.isArray(e)?e:[];c.each(function(){t=a(this);m={data:[]};f.length&&(m.attr={});a.each(f,function(a,c){(y=t.attr(c))&&(y.length&&y.replace(/jstree[^ ]*/ig,"").length)&&(m.attr[c]=(" "+y).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))});t.hasClass("jstree-open")&&(m.state="open");t.hasClass("jstree-closed")&&(m.state="closed");t.data()&&(m.metadata=t.data());K=t.children("a");K.each(function(){P=a(this);e.length||-1!==a.inArray("languages",s.plugins)||P.children("ins").get(0).style.backgroundImage.length||P.children("ins").get(0).className&&P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(W=!1,-1!==a.inArray("languages",s.plugins)&&(a.isArray(s.languages)&&s.languages.length)&&
a.each(s.languages,function(a,c){if(P.hasClass(c))return W=c,!1}),y={attr:{},title:l.get_text(P,W)},a.each(e,function(a,c){y.attr[c]=(" "+(P.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==a.inArray("languages",s.plugins)&&(a.isArray(s.languages)&&s.languages.length)&&a.each(s.languages,function(a,c){if(P.hasClass(c))return y.language=c,!0}),P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(y.icon=
P.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),P.children("ins").get(0).style.backgroundImage.length&&(y.icon=P.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):y=l.get_text(P);1<K.length?m.data.push(y):m.data=y});t=t.find("> ul > li");t.length&&(m.children=l.get_json(t,f,e,!0));g.push(m)});return g}}})})(jQuery);(function(a){var c=!1;a.jstree.plugin("languages",{__init:function(){this._load_css()},
defaults:[],_fn:{set_lang:function(f){var e=this._get_settings().languages,p=!1,g=".jstree-"+this.get_index()+" a";if(!a.isArray(e)||0===e.length)return!1;if(-1==a.inArray(f,e))if(e[f])f=e[f];else return!1;if(f==this.data.languages.current_language)return!0;p=a.vakata.css.get_css(g+"."+this.data.languages.current_language,!1,c);!1!==p&&(p.style.display="none");p=a.vakata.css.get_css(g+"."+f,!1,c);!1!==p&&(p.style.display="");this.data.languages.current_language=f;this.__callback(f);return!0},get_lang:function(){return this.data.languages.current_language},
_get_string:function(c,e){var p=this._get_settings().languages,g=this._get_settings().core.strings;a.isArray(p)&&p.length&&(e=e&&-1!=a.inArray(e,p)?e:this.data.languages.current_language);return g[e]&&g[e][c]?g[e][c]:g[c]?g[c]:c},get_text:function(c,e){c=this._get_node(c)||this.data.ui.last_selected;if(!c.size())return!1;var p=this._get_settings().languages,g=this._get_settings().core.html_titles;a.isArray(p)&&p.length?(e=e&&-1!=a.inArray(e,p)?e:this.data.languages.current_language,c=c.children("a."+
e)):c=c.children("a:eq(0)");if(g)return c=c.clone(),c.children("INS").remove(),c.html();c=c.contents().filter(function(){return 3==this.nodeType})[0];return c.nodeValue},set_text:function(c,e,p){c=this._get_node(c)||this.data.ui.last_selected;if(!c.size())return!1;var g=this._get_settings().languages,s=this._get_settings().core.html_titles;a.isArray(g)&&g.length?(p=p&&-1!=a.inArray(p,g)?p:this.data.languages.current_language,c=c.children("a."+p)):c=c.children("a:eq(0)");if(s)return g=c.children("INS").clone(),
c.html(e).prepend(g),this.__callback({obj:c,name:e,lang:p}),!0;c=c.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:c,name:e,lang:p});return c.nodeValue=e},_load_css:function(){var f=this._get_settings().languages,e="/* languages css */",p=".jstree-"+this.get_index()+" a",g;if(a.isArray(f)&&f.length){this.data.languages.current_language=f[0];for(g=0;g<f.length;g++)e+=p+"."+f[g]+" {",f[g]!=this.data.languages.current_language&&(e+=" display:none; "),e+=" } ";c=a.vakata.css.add_sheet({str:e,
title:"jstree-languages"})}},create_node:function(c,e,p,g){return this.__call_old(!0,c,e,p,function(c){var e=this._get_settings().languages,f=c.children("a"),p;if(a.isArray(e)&&e.length){for(p=0;p<e.length;p++)f.is("."+e[p])||c.append(f.eq(0).clone().removeClass(e.join(" ")).addClass(e[p]));f.not("."+e.join(", .")).remove()}g&&g.call(this,c)})}}})})(jQuery);(function(a){a.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof a.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var c=this._get_settings().cookies,f;c.save_loaded&&(f=a.cookie(c.save_loaded))&&f.length&&(this.data.core.to_load=f.split(","));c.save_opened&&(f=a.cookie(c.save_opened))&&f.length&&(this.data.core.to_open=f.split(","));c.save_selected&&(f=a.cookie(c.save_selected))&&(f.length&&this.data.ui)&&(this.data.ui.to_select=f.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",a.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
a.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(c){if(!this.data.core.refreshing){var f=this._get_settings().cookies;if(c)switch(c){case "open_node":case "close_node":f.save_opened&&(this.save_opened(),a.cookie(f.save_opened,this.data.core.to_open.join(","),
f.cookie_options));f.save_loaded&&(this.save_loaded(),a.cookie(f.save_loaded,this.data.core.to_load.join(","),f.cookie_options));break;case "select_node":case "deselect_node":f.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(f.save_selected,this.data.ui.to_select.join(","),f.cookie_options))}else f.save_loaded&&(this.save_loaded(),a.cookie(f.save_loaded,this.data.core.to_load.join(","),f.cookie_options)),f.save_opened&&(this.save_opened(),a.cookie(f.save_opened,this.data.core.to_open.join(","),
f.cookie_options)),f.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(f.save_selected,this.data.ui.to_select.join(","),f.cookie_options))}}}})})(jQuery);(function(a){a.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",a.proxy(function(a,f){var e=this._get_node(f.rslt.obj),e=-1===e?this.get_container().children("ul"):e.children("ul");this.sort(e)},this)).bind("rename_node.jstree create_node.jstree create.jstree",a.proxy(function(a,f){this.sort(f.rslt.obj.parent())},
this)).bind("move_node.jstree",a.proxy(function(a,f){var e=-1==f.rslt.np?this.get_container():f.rslt.np;this.sort(e.children("ul"))},this))},defaults:function(a,f){return this.get_text(a)>this.get_text(f)?1:-1},_fn:{sort:function(c){var f=this._get_settings().sort,e=this;c.append(a.makeArray(c.children("li")).sort(a.proxy(f,e)));c.find("> li > ul").each(function(){e.sort(a(this))});this.clean_node(c)}}})})(jQuery);(function(a){var c=!1,f=!1,e=!1,p=!1,g=!1,s=!1,m=!1,l=!1,y=!1;a.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(c,e,f){a.vakata.dnd.is_drag&&a.vakata.drag_stop({});try{c.currentTarget.unselectable="on",c.currentTarget.onselectstart=function(){return!1},c.currentTarget.style&&(c.currentTarget.style.MozUserSelect="none")}catch(p){}a.vakata.dnd.init_x=c.pageX;a.vakata.dnd.init_y=c.pageY;a.vakata.dnd.user_data=e;a.vakata.dnd.is_down=!0;a.vakata.dnd.helper=a("<div id='vakata-dragged' />").html(f);
a(document).bind("mousemove",a.vakata.dnd.drag);a(document).bind("mouseup",a.vakata.dnd.drag_stop);return!1},drag:function(c){if(a.vakata.dnd.is_down){if(!a.vakata.dnd.is_drag)if(5<Math.abs(c.pageX-a.vakata.dnd.init_x)||5<Math.abs(c.pageY-a.vakata.dnd.init_y))a.vakata.dnd.helper.appendTo("body"),a.vakata.dnd.is_drag=!0,a(document).triggerHandler("drag_start.vakata",{event:c,data:a.vakata.dnd.user_data});else return;if("mousemove"===c.type){var e=a(document),f=e.scrollTop(),e=e.scrollLeft();20>c.pageY-
f?(s&&"down"===m&&(clearInterval(s),s=!1),s||(m="up",s=setInterval(function(){a(document).scrollTop(a(document).scrollTop()-a.vakata.dnd.scroll_spd)},150))):s&&"up"===m&&(clearInterval(s),s=!1);20>a(window).height()-(c.pageY-f)?(s&&"up"===m&&(clearInterval(s),s=!1),s||(m="down",s=setInterval(function(){a(document).scrollTop(a(document).scrollTop()+a.vakata.dnd.scroll_spd)},150))):s&&"down"===m&&(clearInterval(s),s=!1);20>c.pageX-e?(g&&"right"===l&&(clearInterval(g),g=!1),g||(l="left",g=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()-
a.vakata.dnd.scroll_spd)},150))):g&&"left"===l&&(clearInterval(g),g=!1);20>a(window).width()-(c.pageX-e)?(g&&"left"===l&&(clearInterval(g),g=!1),g||(l="right",g=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()+a.vakata.dnd.scroll_spd)},150))):g&&"right"===l&&(clearInterval(g),g=!1)}a.vakata.dnd.helper.css({left:c.pageX+a.vakata.dnd.helper_left+"px",top:c.pageY+a.vakata.dnd.helper_top+"px"});a(document).triggerHandler("drag.vakata",{event:c,data:a.vakata.dnd.user_data})}},drag_stop:function(c){g&&
clearInterval(g);s&&clearInterval(s);a(document).unbind("mousemove",a.vakata.dnd.drag);a(document).unbind("mouseup",a.vakata.dnd.drag_stop);a(document).triggerHandler("drag_stop.vakata",{event:c,data:a.vakata.dnd.user_data});a.vakata.dnd.helper.remove();a.vakata.dnd.init_x=0;a.vakata.dnd.init_y=0;a.vakata.dnd.user_data={};a.vakata.dnd.is_down=!1;a.vakata.dnd.is_drag=!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});a.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",a.proxy(function(f){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.themes&&(e.attr("class","jstree-"+this.data.themes.theme),p&&p.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
f.currentTarget===f.target&&(a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==f.target)&&(f=a.jstree._reference(f.target),f.data.dnd.foreign?(f=f._get_settings().dnd.drag_check.call(this,{o:c,r:f.get_container(),is_root:!0}),!0!==f&&!0!==f.inside&&!0!==f.before&&!0!==f.after||a.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(f.prepare_move(c,f.get_container(),"last"),f.check_move()&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",a.proxy(function(e){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&e.currentTarget===e.target&&a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var f=a.jstree._reference(e.currentTarget);f.data.dnd.foreign?(e=f._get_settings().dnd.drag_check.call(this,{o:c,r:f.get_container(),is_root:!0}),!0!==e&&!0!==e.inside&&!0!==e.before&&!0!==e.after||f._get_settings().dnd.drag_finish.call(this,
{o:c,r:f.get_container(),is_root:!0})):f.move_node(c,f.get_container(),"last",e[f._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",a.proxy(function(c){if(c.relatedTarget&&c.relatedTarget.id&&"jstree-marker-line"===c.relatedTarget.id)return!1;a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",a.proxy(function(c){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree){var e=this.get_container()[0];c.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft+=a.vakata.dnd.scroll_spd},e),100)):c.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft-=a.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);c.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop+=a.vakata.dnd.scroll_spd},e),100)):c.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop-=
a.vakata.dnd.scroll_spd},e),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&(a.vakata.dnd.user_data.jstree&&e&&p)&&(e.hide(),p.hide())},this)).delegate("a","mousedown.jstree",a.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_enter(c.currentTarget)},this)).delegate("a",
"mousemove.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(f&&f.length&&f.children("a")[0]===c.currentTarget||this.dnd_enter(c.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=a(c.target).offset()),this.data.dnd.w=(c.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",a.proxy(function(c){if(a.vakata.dnd.is_drag&&
a.vakata.dnd.user_data.jstree){if(c.relatedTarget&&c.relatedTarget.id&&"jstree-marker-line"===c.relatedTarget.id)return!1;e&&e.hide();p&&p.hide();this.data.dnd.mto=setTimeout(function(a){return function(){a.dnd_leave(c)}}(this),0)}},this)).delegate("a","mouseup.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_finish(c)},this));a(document).bind("drag_stop.vakata",a.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);
this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;e&&e.css({top:"-2000px"});p&&p.css({top:"-2000px"})},this)).bind("drag_start.vakata",a.proxy(function(c,e){if(e.data.jstree){var f=a(e.event.target);
f.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(f)}},this));var g=this._get_settings().dnd;g.drag_target&&a(document).delegate(g.drag_target,"mousedown.jstree-"+this.get_index(),a.proxy(function(f){c=f.target;a.vakata.dnd.drag_start(f,{jstree:!0,obj:f.target},"<ins class='jstree-icon'></ins>"+a(f.target).text());this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),p&&p.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+
this.data.themes.theme));a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var g=this.get_container();this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=parseInt(g.height(),10);this.data.dnd.foreign=!0;f.preventDefault()},this));g.drop_target&&a(document).delegate(g.drop_target,"mouseenter.jstree-"+this.get_index(),a.proxy(function(e){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:c,r:a(e.target),e:e})&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(g.drop_target,"mouseleave.jstree-"+this.get_index(),a.proxy(function(c){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(g.drop_target,"mouseup.jstree-"+this.get_index(),a.proxy(function(e){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:c,r:a(e.target),e:e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:a.noop,drag_target:".jstree-draggable",drag_finish:a.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(f&&f.length){this.data.dnd.off=f.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+f.width());if(this.data.dnd.foreign){var a=this._get_settings().dnd.drag_check.call(this,{o:c,r:f});this.data.dnd.after=a.after;this.data.dnd.before=a.before;
this.data.dnd.inside=a.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(c,f,"before");this.data.dnd.before=this.check_move();this.prepare_move(c,f,"after");this.data.dnd.after=this.check_move();this._is_loaded(f)?(this.prepare_move(c,f,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var c=["before","inside","after"],f=!1,g=this._get_settings().core.rtl,
c=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];a.each(c,a.proxy(function(c,e){if(this.data.dnd[e])return a.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),f=e,!1},this));!1===f&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");c=g?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(f){case "before":e.css({left:c+"px",top:this.data.dnd.off.top-6+"px"}).show();p&&p.css({left:c+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":e.css({left:c+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();p&&p.css({left:c+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":e.css({left:c+(g?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();p&&p.hide();break;default:e.hide(),
p&&p.hide()}return y=f}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(f,a.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(a){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:c,r:f,p:y}):(this.dnd_prepare(),this.move_node(c,f,y,a[this._get_settings().dnd.copy_modifier+"Key"]));f=c=!1;e.hide();p&&p.hide()},dnd_enter:function(c){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var e=this._get_settings().dnd;this.data.dnd.prepared=!1;f=this._get_node(c);e.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(a.proxy(this.dnd_prepare,this),e.check_timeout)):this.dnd_prepare();e.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),f&&(f.length&&f.hasClass("jstree-closed"))&&(this.data.dnd.to2=setTimeout(a.proxy(this.dnd_open,this),e.open_timeout))):f&&(f.length&&f.hasClass("jstree-closed"))&&this.dnd_open()},dnd_leave:function(c){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");e.hide();p&&p.hide();f&&f[0]===c.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(f,g){c=this._get_node(f);this.data.ui&&this.is_selected(c)&&(c=this._get_node(null,!0));var n=1<c.length?this._get_string("multiple_selection"):this.get_text(c),
s=this.get_container();this._get_settings().core.html_titles||(n=n.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));a.vakata.dnd.drag_start(g,{jstree:!0,obj:c},"<ins class='jstree-icon'></ins>"+n);this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),p&&p.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=s.offset();this.data.dnd.cw=parseInt(s.width(),10);this.data.dnd.ch=parseInt(s.height(),
10);this.data.dnd.active=!0}}});a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});e=a("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){e.hide();p.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");p=a("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(f&&f.length)return f.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(c){var g=a(c.relatedTarget);if((g.is(".jstree")||0===g.closest(".jstree").length)&&
f&&f.length)return f.children("a").trigger(c),e.hide(),p.hide(),c.preventDefault(),c.stopImmediatePropagation(),!1}).appendTo("body");a(document).bind("drag_start.vakata",function(a,c){c.data.jstree&&(e.show(),p&&p.show())});a(document).bind("drag_stop.vakata",function(a,c){c.data.jstree&&(e.hide(),p&&p.hide())})})})(jQuery);(function(a){a.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=a.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",a.proxy(function(a,f){this._prepare_checkboxes(f.rslt.obj)},this)).bind("loaded.jstree",a.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",a.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,f){f.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(c){c=c&&-1!=c?this._get_node(c):this.get_container().find("> ul > li");if(!1!==c){var f,e=this,g,n=this._get_settings().checkbox.two_state,s=this._get_settings().checkbox.real_checkboxes,m=this._get_settings().checkbox.real_checkboxes_names;c.each(function(){g=a(this);f=g.is("li")&&(g.hasClass("jstree-checked")||s&&g.children(":checked").length)?"jstree-checked":"jstree-unchecked";g.find("li").addBack().each(function(){var c=
a(this),g;c.children("a"+(e.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(n?"jstree-unchecked":f);s&&(c.children(":checkbox").length?c.children(":checkbox").addClass("jstree-real-checkbox"):(g=m.call(e,c),c.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+g[0]+"' name='"+g[0]+"' value='"+g[1]+"' />")));n?(c.hasClass("jstree-checked")||c.children(":checked").length)&&
c.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===f||c.hasClass("jstree-checked")||c.children(":checked").length)&&c.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});n||c.find(".jstree-checked").parent().parent().each(function(){e._repair_state(this)})}},change_state:function(c,f){c=this._get_node(c);var e=!1,g=this._get_settings().checkbox.real_checkboxes;if(!c||-1===c)return!1;f=!1===f||!0===f?f:c.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)f?(c.removeClass("jstree-checked").addClass("jstree-unchecked"),g&&c.children(":checkbox").prop("checked",!1)):(c.removeClass("jstree-unchecked").addClass("jstree-checked"),g&&c.children(":checkbox").prop("checked",!0));else{if(f){e=c.find("li").addBack();if(!e.filter(".jstree-checked, .jstree-undetermined").length)return!1;e.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");g&&e.children(":checkbox").prop("checked",!1)}else{e=
c.find("li").addBack();if(!e.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;e.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");g&&e.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=c);this.data.checkbox.last_selected=c}c.parentsUntil(".jstree","li").each(function(){var c=a(this);if(f){if(c.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return c.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
g&&c.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;c.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");g&&c.children(":checkbox").prop("checked",!1)}else{if(c.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return c.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),g&&c.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",
!1),!1;c.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");g&&c.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(c);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var f=this;a.parents(".jstree-closed").each(function(){f.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,f){a=a&&-1!==a?this._get_node(a):this.get_container();return f||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,f){a=a&&-1!==a?this._get_node(a):this.get_container();return f||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var f=this._get_settings().checkbox.real_checkboxes,
e=a.find("> ul > .jstree-checked").length,g=a.find("> ul > .jstree-undetermined").length,n=a.find("> ul > li").length;0===n?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===e&&0===g?this.change_state(a,!0):e===n?this.change_state(a,!1):(a.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),f&&a.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var c=
this,f=this.data.ui.to_select,f=a.map(a.makeArray(f),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();a.each(f,function(a,f){c.check_node(f)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
a(function(){a.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(a){a.vakata.xslt=function(c,f,g){var s=!1,m,l,y;if(!1===s&&window.ActiveXObject)try{s=new ActiveXObject("Msxml2.XSLTemplate"),l=new ActiveXObject("Msxml2.DOMDocument"),l.loadXML(c),y=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),y.loadXML(f),s.stylesheet=y,m=s.createProcessor(),m.input=l,m.transform(),s=m.output}catch(t){}c=a.parseXML(c);f=a.parseXML(f);!1===s&&
"undefined"!==typeof XSLTProcessor&&(m=new XSLTProcessor,m.importStylesheet(f),s=m.transformToFragment(c,document),s=a("<div />").append(s).html());!1===s&&"undefined"!==typeof c.transformNode&&(s=c.transformNode(f));g.call(null,s)};var c={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
f=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};a.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,c,f){var g=this;this.load_node_xml(a,function(){g.__callback({obj:g._get_node(a)});c.call(this)},f)},_is_loaded:function(c){var f=this._get_settings().xml_data;c=this._get_node(c);return-1==c||
!c||!f.ajax&&!a.isFunction(f.data)||c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").size()},load_node_xml:function(c,f,g){var s=this.get_settings().xml_data,m=function(){},l=function(){};if((c=this._get_node(c))&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case !s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(s.data):s.data.call(this,c,a.proxy(function(g){this.parse_xml(g,a.proxy(function(g){g&&(g=
g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length?(g=a(g),-1!==c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(g),c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(g.children()),s.clean_node&&this.clean_node(c),f&&f.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(c),f&&f.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),
f&&f.call(this)))},this))},this));break;case !!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!c||-1===c):c&&-1!=c||this.parse_xml(s.data,a.proxy(function(g){g?(g=g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length&&(g=a(g),this.get_container().children("ul").empty().append(g.children()),s.clean_node&&this.clean_node(c),f&&f.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),f&&f.call(this))},this));break;case !s.data&&!!s.ajax||!!s.data&&!!s.ajax&&c&&-1!==c:m=function(a,f,p){var m=this.get_settings().xml_data.ajax.error;
m&&m.call(this,a,f,p);-1!==c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),"success"===f&&s.correct_state&&this.correct_state(c)):"success"===f&&s.correct_state&&this.get_container().children("ul").empty();g&&g.call(this)},l=function(g,n,l){g=l.responseText;var J=this.get_settings().xml_data.ajax.success;J&&(g=J.call(this,g,n,l)||g);if(""===g||g&&g.toString&&""===g.toString().replace(/^[\s\n]+$/,""))return m.call(this,l,n,"");this.parse_xml(g,
a.proxy(function(g){g&&(g=g.replace(/ ?xmlns="[^"]*"/ig,""),10<g.length?(g=a(g),-1!==c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(g),c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(g.children()),s.clean_node&&this.clean_node(c),f&&f.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(c),f&&f.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),
f&&f.call(this)))},this))},s.ajax.context=this,s.ajax.error=m,s.ajax.success=l,s.ajax.dataType||(s.ajax.dataType="xml"),a.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,c)),a.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,c)),a.ajax(s.ajax)}},parse_xml:function(e,f){var g=this._get_settings().xml_data;a.vakata.xslt(e,c[g.xsl],f)},get_xml:function(c,g,n,s,m){var l="",y=this._get_settings(),t=this,K,P,W,oa,ga;c||(c="flat");m||(m=0);(g=this._get_node(g))&&-1!==g||(g=this.get_container().find("> ul > li"));
n=a.isArray(n)?n:["id","class"];!m&&(this.data.types&&-1===a.inArray(y.types.type_attr,n))&&n.push(y.types.type_attr);s=a.isArray(s)?s:[];m||(y.xml_data.get_include_preamble&&(l+='<?xml version="1.0" encoding="UTF-8"?>'),l+="<root>");g.each(function(){l+="<item";W=a(this);a.each(n,function(a,c){var e=W.attr(c);y.xml_data.get_skip_empty&&"undefined"===typeof e||(l+=" "+c+'="'+f((" "+(e||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});W.hasClass("jstree-open")&&
(l+=' state="open"');W.hasClass("jstree-closed")&&(l+=' state="closed"');"flat"===c&&(l+=' parent_id="'+f(m)+'"');l+=">";l+="<content>";oa=W.children("a");oa.each(function(){K=a(this);ga=!1;l+="<name";-1!==a.inArray("languages",y.plugins)&&a.each(y.languages,function(a,c){if(K.hasClass(c))return l+=' lang="'+f(c)+'"',ga=c,!1});s.length&&a.each(s,function(a,c){var e=K.attr(c);y.xml_data.get_skip_empty&&"undefined"===typeof e||(l+=" "+c+'="'+f((" "+e||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,""))+'"')});K.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(l+=' icon="'+f(K.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');K.children("ins").get(0).style.backgroundImage.length&&(l+=' icon="'+f(K.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');l+=">";l+="<![CDATA["+
t.get_text(K,ga)+"]]\x3e";l+="</name>"});l+="</content>";P=W[0].id||!0;W=W.find("> ul > li");P=W.length?t.get_xml(c,W,n,s,P):"";"nest"==c&&(l+=P);l+="</item>";"flat"==c&&(l+=P)});m||(l+="</root>");return l}}})})(jQuery);(function(a){8<=a().jquery.split(".")[1]?(a.expr[":"].jstree_contains=a.expr.createPseudo(function(a){return function(f){return 0<=(f.textContent||f.innerText||"").toLowerCase().indexOf(a.toLowerCase())}}),a.expr[":"].jstree_title_contains=a.expr.createPseudo(function(a){return function(f){return 0<=
(f.getAttribute("title")||"").toLowerCase().indexOf(a.toLowerCase())}})):(a.expr[":"].jstree_contains=function(a,f,e){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(e[3].toLowerCase())},a.expr[":"].jstree_title_contains=function(a,f,e){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(e[3].toLowerCase())});a.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=a();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",
function(c,f){a(this).children("ul").find("li").hide().removeClass("jstree-last");f.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){a(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){a(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(c,f){if(""===a.trim(c))this.clear_search();else{var e=
this.get_settings().search,g=this,n=function(){};this.data.search.str=c;if(!f&&!1!==e.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;n=function(a,c,e){var f=this.get_settings().search.ajax.success;f&&(a=f.call(this,a,c,e)||a);this.data.search.to_open=a;this._search_open()};e.ajax.context=this;e.ajax.error=function(){};e.ajax.success=n;a.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,c));a.isFunction(e.ajax.data)&&(e.ajax.data=
e.ajax.data.call(this,c));e.ajax.data||(e.ajax.data={search_string:c});if(!e.ajax.dataType||/^json/.exec(e.ajax.dataType))e.ajax.dataType="json";a.ajax(e.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+e.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){g.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,
str:c})}},clear_search:function(c){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=a()},_search_open:function(c){var f=this;c=!0;var e=[],g=[];this.data.search.to_open.length&&(a.each(this.data.search.to_open,function(c,f){if("#"==f)return!0;a(f).length&&a(f).is(".jstree-closed")?e.push(f):g.push(f)}),e.length&&(this.data.search.to_open=g,a.each(e,function(a,c){f.open_node(c,function(){f._search_open(!0)})}),c=!1));c&&this.search(this.data.search.str,
!0)}}})})(jQuery);(function(a){a.vakata.context={hide_on_mouseleave:!1,cnt:a("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(c,f,e,g,n,s,l){a.vakata.context.rtl=!!l;if(c=a.vakata.context.parse(c)){a.vakata.context.vis=!0;a.vakata.context.tgt=f;a.vakata.context.par=s||f||null;a.vakata.context.data=n||null;a.vakata.context.cnt.html(c).css({visibility:"hidden",display:"block",left:0,top:0});if(a.vakata.context.hide_on_mouseleave)a.vakata.context.cnt.one("mouseleave",
function(c){a.vakata.context.hide()});n=a.vakata.context.cnt.height();s=a.vakata.context.cnt.width();e+s>a(document).width()&&(e=a(document).width()-(s+5),a.vakata.context.cnt.find("li > ul").addClass("right"));g+n>a(document).height()&&(g-=n+f[0].offsetHeight,a.vakata.context.cnt.find("li > ul").addClass("bottom"));a.vakata.context.cnt.css({left:e,top:g}).find("li:has(ul)").bind("mouseenter",function(c){c=a(document).width();var e=a(document).height(),f=a(this).children("ul").show();c!==a(document).width()&&
f.toggleClass("right");e!==a(document).height()&&f.toggleClass("bottom")}).bind("mouseleave",function(c){a(this).children("ul").hide()}).end().css({visibility:"visible"}).show();a(document).triggerHandler("context_show.vakata")}},hide:function(){a.vakata.context.vis=!1;a.vakata.context.cnt.attr("class","").css({visibility:"hidden"});a(document).triggerHandler("context_hide.vakata")},parse:function(c,f){if(!c)return!1;var e="",g=!1,n=!0;f||(a.vakata.context.func={});e+="<ul>";a.each(c,function(c,f){if(!f)return!0;
a.vakata.context.func[c]=f.action;!n&&f.separator_before&&(e+="<li class='vakata-separator vakata-separator-before'></li>");n=!1;e+="<li class='"+(f._class||"")+(f._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";f.icon&&-1===f.icon.indexOf("/")&&(e+=" class='"+f.icon+"' ");f.icon&&-1!==f.icon.indexOf("/")&&(e+=" style='background:url("+f.icon+") center center no-repeat;' ");e+=">&#160;</ins><a href='#' rel='"+c+"'>";f.submenu&&(e+="<span style='float:"+(a.vakata.context.rtl?"left":"right")+
";'>&raquo;</span>");e+=f.label+"</a>";f.submenu&&(g=a.vakata.context.parse(f.submenu,!0))&&(e+=g);e+="</li>";f.separator_after&&(e+="<li class='vakata-separator vakata-separator-after'></li>",n=!0)});e=e.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");e+="</ul>";a(document).triggerHandler("context_parse.vakata");return 10<e.length?e:!1},exec:function(c){return a.isFunction(a.vakata.context.func[c])?(a.vakata.context.func[c].call(a.vakata.context.data,a.vakata.context.par),
!0):!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});a.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(c){!a(this).parent().hasClass("jstree-contextmenu-disabled")&&a.vakata.context.exec(a(this).attr("rel"))?a.vakata.context.hide():a(this).blur()}).delegate("a","mouseover",function(){a.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");a(document).bind("mousedown",function(c){a.vakata.context.vis&&!a.contains(a.vakata.context.cnt[0],c.target)&&
a.vakata.context.hide()});"undefined"!==typeof a.hotkeys&&a(document).bind("keydown","up",function(c){if(a.vakata.context.vis){var f=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();f.length||(f=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());f.addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","down",function(c){if(a.vakata.context.vis){var f=
a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();f.length||(f=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());f.addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","right",function(c){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
c.stopImmediatePropagation(),c.preventDefault())}).bind("keydown","left",function(c){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),c.stopImmediatePropagation(),c.preventDefault())}).bind("keydown","esc",function(c){a.vakata.context.hide();c.preventDefault()}).bind("keydown","space",function(c){a.vakata.context.cnt.find(".vakata-hover").last().children("a").click();c.preventDefault()})});a.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",a.proxy(function(c){c.preventDefault();a(c.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(c.currentTarget,c.pageX,c.pageY)},this)).delegate("a","click.jstree",a.proxy(function(c){this.data.contextmenu&&a.vakata.context.hide()},this)).bind("destroy.jstree",a.proxy(function(){this.data.contextmenu&&a.vakata.context.hide()},this));a(document).bind("context_hide.vakata",a.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(c,f,e){c=this._get_node(c);var g=this.get_settings().contextmenu,n=c.children("a:visible:eq(0)"),s=!1,s=!1;g.select_node&&(this.data.ui&&!this.is_selected(c))&&(this.deselect_all(),this.select_node(c,
!0));if(g.show_at_node||"undefined"===typeof f||"undefined"===typeof e)s=n.offset(),f=s.left,e=s.top+this.data.core.li_height;s=c.data("jstree")&&c.data("jstree").contextmenu?c.data("jstree").contextmenu:g.items;a.isFunction(s)&&(s=s.call(this,c));this.data.contextmenu=!0;a.vakata.context.show(s,n,f,e,this,c,this._get_settings().core.rtl);this.data.themes&&a.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(a){a.jstree.plugin("types",{__init:function(){var c=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",a.proxy(function(){var f=c.type_attr,e="",g=this;a.each(c.types,function(c,s){a.each(s,function(a,c){/^(max_depth|max_children|icon|valid_children)$/.test(a)||g.data.types.attach_to.push(a)});if(!s.icon)return!0;if(s.icon.image||s.icon.position)e="default"==c?e+(".jstree-"+g.get_index()+" a > .jstree-icon { "):e+(".jstree-"+g.get_index()+" li["+f+'="'+c+'"] > a > .jstree-icon { '),s.icon.image&&(e+=" background-image:url("+
s.icon.image+"); "),e=s.icon.position?e+(" background-position:"+s.icon.position+"; "):e+" background-position:0 0; ",e+="} "});""!==e&&a.vakata.css.add_sheet({str:e,title:"jstree-types"})},this)).bind("before.jstree",a.proxy(function(c,e){var g,n;if((g=(g=this._get_settings().types.use_data?this._get_node(e.args[0]):!1)&&-1!==g&&g.length?g.data("jstree"):!1)&&g.types&&!1===g.types[e.func]||-1!==a.inArray(e.func,this.data.types.attach_to)&&(e.args[0]&&(e.args[0].tagName||e.args[0].jquery))&&(g=this._get_settings().types.types,
n=this._get_type(e.args[0]),(g[n]&&"undefined"!==typeof g[n][e.func]||g["default"]&&"undefined"!==typeof g["default"][e.func])&&!1===this._check(e.func,e.args[0])))return c.stopImmediatePropagation(),!1},this));g&&this.get_container().bind("load_node.jstree set_type.jstree",a.proxy(function(c,e){var g=e&&e.rslt&&e.rslt.obj&&-1!==e.rslt.obj?this._get_node(e.rslt.obj).parent():this.get_container_ul(),n=!1,s=this._get_settings().types;a.each(s.types,function(a,c){c.icon&&(c.icon.image||c.icon.position)&&
(n="default"===a?g.find("li > a > .jstree-icon"):g.find("li["+s.type_attr+"='"+a+"'] > a > .jstree-icon"),c.icon.image&&n.css("backgroundImage","url("+c.icon.image+")"),n.css("backgroundPosition",c.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,f){f.type&&this._get_settings().types.use_data&&this.set_type(f.type,a)},_get_type:function(a){return(a=
this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,f){f=this._get_node(f);var e=f.length&&a?f.attr(this._get_settings().types.type_attr,a):!1;e&&this.__callback({obj:f,type:a});return e},_check:function(c,f,e){f=this._get_node(f);var g=!1,n=this._get_type(f),s=0,l=this,m=this._get_settings().types,y=!1;if(-1===f)if(m[c])g=m[c];else return;else{if(!1===n)return;(y=m.use_data?f.data("jstree"):!1)&&y.types&&"undefined"!==typeof y.types[c]?g=y.types[c]:
m.types[n]&&"undefined"!==typeof m.types[n][c]?g=m.types[n][c]:m.types["default"]&&"undefined"!==typeof m.types["default"][c]&&(g=m.types["default"][c])}a.isFunction(g)&&(g=g.call(this,f));"max_depth"===c&&(-1!==f&&!1!==e&&-2!==m.max_depth&&0!==g)&&f.children("a:eq(0)").parentsUntil(".jstree","li").each(function(a){if(-1!==m.max_depth&&0>=m.max_depth-(a+1))return g=0,!1;s=0===a?g:l._check(c,this,!1);if(-1!==s&&0>=s-(a+1))return g=0,!1;0<=s&&(s-(a+1)<g||0>g)&&(g=s-(a+1));0<=m.max_depth&&(m.max_depth-
(a+1)<g||0>g)&&(g=m.max_depth-(a+1))});return g},check_move:function(){if(!this.__call_old())return!1;var c=this._get_move(),f=c.rt._get_settings().types,e=c.rt._check("max_children",c.cr),g=c.rt._check("max_depth",c.cr),n=c.rt._check("valid_children",c.cr),l=0,m=1;if("none"===n||a.isArray(n)&&(c.ot&&c.ot._get_type)&&(c.o.each(function(){if(-1===a.inArray(c.ot._get_type(this),n))return m=!1}),!1===m)||-2!==f.max_children&&-1!==e&&(l=-1===c.cr?this.get_container().find("> ul > li").not(c.o).length:
c.cr.find("> ul > li").not(c.o).length,l+c.o.length>e))return!1;if(-2!==f.max_depth&&-1!==g){m=0;if(0===g)return!1;if("undefined"===typeof c.o.d){for(f=c.o;0<f.length;)f=f.find("> ul > li"),m++;c.o.d=m}if(0>g-c.o.d)return!1}return!0},create_node:function(c,f,e,g,n,l){if(!l&&(n||this._is_loaded(c))){var m="string"==typeof f&&f.match(/^before|after$/i)&&-1!==c?this._get_parent(c):this._get_node(c),J=this._get_settings().types,y=this._check("max_children",m),t=this._check("max_depth",m),K=this._check("valid_children",
m);"string"===typeof e&&(e={data:e});e||(e={});if("none"===K)return!1;if(a.isArray(K))if(!e.attr||!e.attr[J.type_attr])e.attr||(e.attr={}),e.attr[J.type_attr]=K[0];else if(-1===a.inArray(e.attr[J.type_attr],K))return!1;if(-2!==J.max_children&&-1!==y&&(m=-1===m?this.get_container().find("> ul > li").length:m.find("> ul > li").length,m+1>y)||-2!==J.max_depth&&-1!==t&&0>t-1)return!1}return this.__call_old(!0,c,f,e,g,n,l)}}})})(jQuery);(function(a){a.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=
this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,f,e){var g=this;this.load_node_html(a,function(){g.__callback({obj:g._get_node(a)});f.call(this)},e)},_is_loaded:function(c){c=this._get_node(c);return-1==c||!c||!this._get_settings().html_data.ajax&&!a.isFunction(this._get_settings().html_data.data)||
c.is(".jstree-open, .jstree-leaf")||0<c.children("ul").children("li").size()},load_node_html:function(c,f,e){var g,n=this.get_settings().html_data,l=function(){};g=function(){};if((c=this._get_node(c))&&-1!==c){if(c.data("jstree_is_loading"))return;c.data("jstree_is_loading",!0)}switch(!0){case a.isFunction(n.data):n.data.call(this,c,a.proxy(function(e){e&&""!==e&&e.toString&&""!==e.toString().replace(/^[\s\n]+$/,"")?(e=a(e),e.is("ul")||(e=a("<ul />").append(e)),-1!=c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),
c.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node(c),f&&f.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(c),f&&f.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),f&&f.call(this))},this));break;case !n.data&&!n.ajax:c&&-1!=c||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());f&&f.call(this);break;case !!n.data&&!n.ajax||!!n.data&&!!n.ajax&&(!c||-1===c):c&&-1!=c||(g=a(n.data),g.is("ul")||(g=a("<ul />").append(g)),this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());f&&f.call(this);break;case !n.data&&!!n.ajax||!!n.data&&!!n.ajax&&c&&-1!==c:c=this._get_node(c),l=function(a,f,g){var p=this.get_settings().html_data.ajax.error;p&&p.call(this,a,f,g);-1!=c&&c.length?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),"success"===f&&n.correct_state&&this.correct_state(c)):"success"===f&&n.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},g=function(e,g,p){var m=this.get_settings().html_data.ajax.success;
m&&(e=m.call(this,e,g,p)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return l.call(this,p,g,"");e?(e=a(e),e.is("ul")||(e=a("<ul />").append(e)),-1!=c&&c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
c.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(c),f&&f.call(this)):c&&-1!==c?(c.children("a.jstree-loading").removeClass("jstree-loading"),c.removeData("jstree_is_loading"),n.correct_state&&
(this.correct_state(c),f&&f.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),f&&f.call(this))},n.ajax.context=this,n.ajax.error=l,n.ajax.success=g,n.ajax.dataType||(n.ajax.dataType="html"),a.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,c)),a.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,c)),a.ajax(n.ajax)}}}});a.jstree.defaults.plugins.push("html_data")})(jQuery);(function(a){a.jstree.plugin("themeroller",{__init:function(){var c=this._get_settings().themeroller;
this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(f){a(f.currentTarget).hasClass("jstree-loading")||a(this).addClass(c.item_h)}).delegate("a","mouseleave.jstree",function(){a(this).removeClass(c.item_h)}).bind("init.jstree",a.proxy(function(a,c){c.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",
a.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",a.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",a.proxy(function(a,e){e.rslt.obj.children("ins.jstree-icon").removeClass(c.opened+" "+c.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")}).removeClass(c.item_open+" "+c.item_clsd).addClass(c.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",a.proxy(function(a,e){e.rslt.obj.children("a").addClass(c.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",a.proxy(function(a,e){this.get_container().find("a."+c.item_a).removeClass(c.item_a).end().find("a.jstree-clicked").addClass(c.item_a)},this)).bind("dehover_node.jstree",
a.proxy(function(a,e){e.rslt.obj.children("a").removeClass(c.item_h)},this)).bind("hover_node.jstree",a.proxy(function(a,e){this.get_container().find("a."+c.item_h).not(e.rslt.obj).removeClass(c.item_h);e.rslt.obj.children("a").addClass(c.item_h)},this)).bind("move_node.jstree",a.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var c=this._get_settings().themeroller,f=["ui-icon"];a.each(c,function(a,c){c=c.split(" ");c.length&&(f=f.concat(c))});
this.get_container().removeClass("ui-widget-content").find("."+f.join(", .")).removeClass(f.join(" "))},_fn:{_themeroller:function(a){var f=this._get_settings().themeroller;a=(a=a&&-1!=a?this._get_node(a):this.get_container_ul())&&-1!=a?a.parent():this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(f.opened).addClass("ui-icon "+f.closed).end().children("a").addClass(f.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(f.item_clsd,
"").replace(f.item_open,"").replace(f.item_leaf,"").indexOf("ui-icon-")}).removeClass(f.item_leaf+" "+f.item_open).addClass(f.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(f.closed).addClass("ui-icon "+f.opened).end().children("a").addClass(f.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(f.item_clsd,"").replace(f.item_open,"").replace(f.item_leaf,"").indexOf("ui-icon-")}).removeClass(f.item_leaf+
" "+f.item_clsd).addClass(f.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(f.closed+" ui-icon "+f.opened).end().children("a").addClass(f.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(f.item_clsd,"").replace(f.item_open,"").replace(f.item_leaf,"").indexOf("ui-icon-")}).removeClass(f.item_clsd+" "+f.item_open).addClass(f.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});a(function(){a.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(a){a.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
a.proxy(function(c,f){var e=[],g=!0,n;"move_node"==f.func&&(!0===f.args[4]&&f.args[0].o&&f.args[0].o.length)&&(f.args[0].o.children("a").each(function(){e.push(a(this).text().replace(/^\s+/g,""))}),g=this._check_unique(e,f.args[0].np.find("> ul > li").not(f.args[0].o),"move_node"));"create_node"==f.func&&(f.args[4]||this._is_loaded(f.args[0]))&&(g=this._get_node(f.args[0]),!f.args[1]||"before"!==f.args[1]&&"after"!==f.args[1]||(g=this._get_parent(f.args[0]))&&-1!==g||(g=this.get_container()),"string"===
typeof f.args[2]?e.push(f.args[2]):f.args[2]&&f.args[2].data?e.push(f.args[2].data):e.push(this._get_string("new_node")),g=this._check_unique(e,g.find("> ul > li"),"create_node"));"rename_node"==f.func&&(e.push(f.args[1]),n=this._get_node(f.args[0]),(g=this._get_parent(n))&&-1!==g||(g=this.get_container()),g=this._check_unique(e,g.find("> ul > li").not(n),"rename_node"));if(!g)return c.stopPropagation(),!1},this))},defaults:{error_callback:a.noop},_fn:{_check_unique:function(c,f,e){var g=[],n=!0;
f.children("a").each(function(){g.push(a(this).text().replace(/^\s+/g,""))});if(!g.length||!c.length)return!0;a.each(c,function(c,e){if(-1!==a.inArray(e,g))return n=!1});n||this._get_settings().unique.error_callback.call(null,c,f,e);return n},check_move:function(){if(!this.__call_old())return!1;var c=this._get_move(),f=[];return c.o&&c.o.length?(c.o.children("a").each(function(){f.push(a(this).text().replace(/^\s+/g,""))}),this._check_unique(f,c.np.find("> ul > li").not(c.o),"check_move")):!0}}})})(jQuery);
(function(a){a.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",a.proxy(function(a,f){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",a.proxy(function(a,f){this._prepare_wholerow_span(f&&f.rslt&&f.rslt.obj?f.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
a.proxy(function(a,f){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,c){return function(){a._prepare_wholerow_ul(c)}}(this,f&&f.rslt&&f.rslt.obj?f.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",a.proxy(function(a,f){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",a.proxy(function(c,f){f.rslt.obj.each(function(){f.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((a(this).offset().top-f.inst.get_container().offset().top+f.inst.get_container()[0].scrollTop)/f.inst.data.core.li_height,10)+")").children("a").attr("class",f.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",a.proxy(function(a,f){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((f.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",f.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(c){var f=a(c.currentTarget);"A"===c.target.tagName||"INS"===c.target.tagName&&f.closest("li").is(".jstree-open, .jstree-closed")||(f.closest("li").children("a:visible:eq(0)").click(),c.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",a.proxy(function(c){c.stopImmediatePropagation();if(a(c.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(c.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",a.proxy(function(c){a(c.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(c.currentTarget)},this));(l||g)&&a.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(c){c=c&&-1!=c?this._get_node(c):this.get_container().find("> ul > li");!1!==c&&c.each(function(){a(this).find("li").addBack().each(function(){var c=a(this);if(c.children(".jstree-wholerow-span").length)return!0;c.prepend("<span class='jstree-wholerow-span' style='width:"+18*c.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),
f=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==f&&(this.data.wholerow.last_html=f,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(l?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});a(function(){var c=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
m&&(c+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(l||g)c+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";a.vakata.css.add_sheet({str:c,title:"jstree"})})})(jQuery);(function(a){var c=
["getChildren","getChildrenCount","getAttr","getName","getProps"],f=function(c,f){var g=!0;c=c||{};f=[].concat(f);a.each(f,function(f,p){if(!a.isFunction(c[p]))return g=!1});return g};a.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(e,g){var n=-1==e?this._get_settings().model.object:e.data("jstree_model");if(!f(n,c))return g.call(null,!1);this._get_settings().model.async?n.getChildren(a.proxy(function(a){this.model_done(a,
g)},this)):this.model_done(n.getChildren(),g)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(c,f){var g=[],l=this._get_settings(),m=this;a.isArray(c)||(c=[c]);a.each(c,function(c,e){var f=e.getProps()||{};f.attr=e.getAttr()||{};e.getChildrenCount()&&(f.state="closed");f.data=e.getName();a.isArray(f.data)||(f.data=[f.data]);m.data.types&&a.isFunction(e.getType)&&(f.attr[l.types.type_attr]=e.getType());f.attr.id&&l.model.id_prefix&&(f.attr.id=l.model.id_prefix+f.attr.id);f.metadata||
(f.metadata={});f.metadata.jstree_model=e;g.push(f)});f.call(null,g)}}})})(jQuery)}})();
(function(g){g.color={};g.color.make=function(l,a,c,f){var e={};e.r=l||0;e.g=a||0;e.b=c||0;e.a=null!=f?f:1;e.add=function(a,c){for(var f=0;f<a.length;++f)e[a.charAt(f)]+=c;return e.normalize()};e.scale=function(a,c){for(var f=0;f<a.length;++f)e[a.charAt(f)]*=c;return e.normalize()};e.toString=function(){return 1<=e.a?"rgb("+[e.r,e.g,e.b].join()+")":"rgba("+[e.r,e.g,e.b,e.a].join()+")"};e.normalize=function(){function a(c,e,f){return e<c?c:e>f?f:e}e.r=a(0,parseInt(e.r),255);e.g=a(0,parseInt(e.g),255);
e.b=a(0,parseInt(e.b),255);e.a=a(0,e.a,1);return e};e.clone=function(){return g.color.make(e.r,e.b,e.g,e.a)};return e.normalize()};g.color.extract=function(l,a){var c;do{c=l.css(a).toLowerCase();if(""!=c&&"transparent"!=c)break;l=l.parent()}while(!g.nodeName(l.get(0),"body"));"rgba(0, 0, 0, 0)"==c&&(c="transparent");return g.color.parse(c)};g.color.parse=function(m){var a,c=g.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(m))return c(parseInt(a[1],10),parseInt(a[2],
10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(m))return c(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(m))return c(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(m))return c(2.55*
parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(m))return c(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(m))return c(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));m=g.trim(m).toLowerCase();if("transparent"==m)return c(255,255,255,0);a=l[m]||[0,0,0];return c(a[0],a[1],a[2])};var l={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
jQuery.cookie=function(g,l,m){if(1<arguments.length&&"[object Object]"!==String(l)){m=jQuery.extend({},m);if(null===l||void 0===l)m.expires=-1;if("number"===typeof m.expires){var a=m.expires,c=m.expires=new Date;c.setDate(c.getDate()+a)}l=String(l);return document.cookie=[encodeURIComponent(g),"=",m.raw?l:encodeURIComponent(l),m.expires?"; expires="+m.expires.toUTCString():"",m.path?"; path="+m.path:"",m.domain?"; domain="+m.domain:"",m.secure?"; secure":""].join("")}m=l||{};c=m.raw?function(a){return a}:
decodeURIComponent;return(a=RegExp("(?:^|; )"+encodeURIComponent(g)+"=([^;]*)").exec(document.cookie))?c(a[1]):null};
d3=function(){function g(d){return null!=d&&!isNaN(d)}function l(d){return d.length}function m(d,r){try{for(var a in r)Object.defineProperty(d.prototype,a,{value:r[a],enumerable:!1})}catch(c){d.prototype=r}}function a(){}function c(){}function f(d,r,a){return function(){var c=a.apply(r,arguments);return c===r?d:c}}function e(){}function p(d){function r(){for(var r,a=q,c=-1,N=a.length;++c<N;)(r=a[c].on)&&r.apply(this,arguments);return d}var q=[],c=new a;return r.on=function(r,a){var e,f=c.get(r);return 2>
arguments.length?f&&f.on:(f&&(f.on=null,q=q.slice(0,e=q.indexOf(f)).concat(q.slice(e+1)),c.remove(r)),a&&q.push(c.set(r,{on:a})),d)},r}function n(){h.event.stopPropagation();h.event.preventDefault()}function s(){for(var d,r=h.event;d=r.sourceEvent;)r=d;return r}function E(d,r){function a(){d.on(r,null)}d.on(r,function(){n();a()},!0);setTimeout(a,0)}function J(d){for(var r=new e,a=0,c=arguments.length;++a<c;)r[arguments[a]]=p(r);return r.of=function(a,q){return function(c){try{var N=c.sourceEvent=
h.event;c.target=d;h.event=c;r[c.type].apply(a,q)}finally{h.event=N}}},r}function y(d,r){var a=d.ownerSVGElement||d;if(a.createSVGPoint){var c=a.createSVGPoint();if(0>Tb&&(fa.scrollX||fa.scrollY)){var a=h.select(ja.body).append("svg").style("position","absolute").style("top",0).style("left",0),u=a[0][0].getScreenCTM();Tb=!(u.f||u.e);a.remove()}return Tb?(c.x=r.pageX,c.y=r.pageY):(c.x=r.clientX,c.y=r.clientY),c=c.matrixTransform(d.getScreenCTM().inverse()),[c.x,c.y]}a=d.getBoundingClientRect();return[r.clientX-
a.left-d.clientLeft,r.clientY-a.top-d.clientTop]}function t(d){for(var r=-1,a=d.length,c=[];++r<a;)c.push(d[r]);return c}function K(d){return Ub(d,U),d}function P(d){return function(){return cd(d,this)}}function W(d){return function(){return dd(d,this)}}function oa(d,r){function a(){this.removeAttribute(d)}function c(){this.removeAttributeNS(d.space,d.local)}function u(){this.setAttribute(d,r)}function w(){this.setAttributeNS(d.space,d.local,r)}function e(){var a=r.apply(this,arguments);null==a?this.removeAttribute(d):
this.setAttribute(d,a)}function f(){var a=r.apply(this,arguments);null==a?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,a)}return d=h.ns.qualify(d),null==r?d.local?c:a:"function"==typeof r?d.local?f:e:d.local?w:u}function ga(d){return d.trim().replace(/\s+/g," ")}function I(d){return RegExp("(?:^|\\s+)"+h.requote(d)+"(?:\\s+|$)","g")}function Ia(d,r){function a(){for(var q=-1;++q<u;)d[q](this,r)}function c(){for(var a=-1,q=r.apply(this,arguments);++a<u;)d[a](this,q)}
d=d.trim().split(/\s+/).map(la);var u=d.length;return"function"==typeof r?c:a}function la(d){var r=I(d);return function(a,c){if(u=a.classList)return c?u.add(d):u.remove(d);var u=a.getAttribute("class")||"";c?(r.lastIndex=0,r.test(u)||a.setAttribute("class",ga(u+" "+d))):a.setAttribute("class",ga(u.replace(r," ")))}}function ca(d,r,a){function c(){this.style.removeProperty(d)}function u(){this.style.setProperty(d,r,a)}function w(){var c=r.apply(this,arguments);null==c?this.style.removeProperty(d):
this.style.setProperty(d,c,a)}return null==r?c:"function"==typeof r?w:u}function x(d,r){function a(){delete this[d]}function c(){this[d]=r}function u(){var a=r.apply(this,arguments);null==a?delete this[d]:this[d]=a}return null==r?a:"function"==typeof r?u:c}function B(d){return function(){return ed(this,d)}}function R(d){return arguments.length||(d=h.ascending),function(r,a){return!r-!a||d(r.__data__,a.__data__)}}function S(){}function fd(d,r,a){function c(){var r=this[e];r&&(this.removeEventListener(d,
r,r.$),delete this[e])}function u(){var u=g(r,Ca(arguments));c.call(this);this.addEventListener(d,this[e]=u,u.$=a);u._=r}function w(){var r,a=RegExp("^__on([^.]+)"+h.requote(d)+"$"),q;for(q in this)if(r=q.match(a)){var c=this[q];this.removeEventListener(r[1],c,c.$);delete this[q]}}var e="__on"+d,f=d.indexOf("."),g=hd;0<f&&(d=d.substring(0,f));var G=Vb.get(d);return G&&(d=G,g=rf),f?r?u:c:r?S:w}function hd(d,r){return function(a){var c=h.event;h.event=a;r[0]=this.__data__;try{d.apply(this,r)}finally{h.event=
c}}}function rf(d,r){var a=hd(d,r);return function(d){var r=d.relatedTarget;r&&(r===this||r.compareDocumentPosition(this)&8)||a.call(this,d)}}function Da(d,r){for(var a=0,c=d.length;c>a;a++)for(var u,w=d[a],e=0,f=w.length;f>e;e++)(u=w[e])&&r(u,e,a);return d}function id(d){return Ub(d,Ja),d}function Oa(){}function Pa(d,r,a){return new Wb(d,r,a)}function Wb(d,r,a){this.h=d;this.s=r;this.l=a}function hb(d,r,a){function c(d){return 360<d?d-=360:0>d&&(d+=360),60>d?u+(w-u)*d/60:180>d?w:240>d?u+(w-u)*(240-
d)/60:u}var u,w;return d%=360,0>d&&(d+=360),r=0>r?0:1<r?1:r,a=0>a?0:1<a?1:a,w=0.5>=a?a*(1+r):a+r-a*r,u=2*a-w,xa(Math.round(255*c(d+120)),Math.round(255*c(d)),Math.round(255*c(d-120)))}function jd(d){return(d=Math.sin(d/2))*d}function Qa(d,r,a){return new ib(d,r,a)}function ib(d,r,a){this.h=d;this.c=r;this.l=a}function Xb(d,r,a){return Ra(a,Math.cos(d*=L)*r,Math.sin(d)*r)}function Ra(d,r,a){return new jb(d,r,a)}function jb(d,r,a){this.l=d;this.a=r;this.b=a}function kd(d,a,q){d=(d+16)/116;a=d+a/500;
q=d-q/200;return a=Yb(a)*ld,d=Yb(d)*md,q=Yb(q)*nd,xa(Zb(3.2404542*a-1.5371385*d-0.4985314*q),Zb(-0.969266*a+1.8760108*d+0.041556*q),Zb(0.0556434*a-0.2040259*d+1.0572252*q))}function Yb(d){return 0.206893034<d?d*d*d:(d-4/29)/7.787037}function $b(d){return 0.008856<d?Math.pow(d,1/3):7.787037*d+4/29}function Zb(d){return Math.round(255*(0.00304>=d?12.92*d:1.055*Math.pow(d,1/2.4)-0.055))}function xa(d,a,q){return new ac(d,a,q)}function ac(d,a,q){this.r=d;this.g=a;this.b=q}function Sa(d){return 16>d?"0"+
Math.max(0,d).toString(16):Math.min(255,d).toString(16)}function bc(d,a,q){var c,u,w,e=0,f=0,g=0;if(c=/([a-z]+)\((.*)\)/i.exec(d))switch(u=c[2].split(","),c[1]){case "hsl":return q(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case "rgb":return a(cc(u[0]),cc(u[1]),cc(u[2]))}return(w=kb.get(d))?a(w.r,w.g,w.b):(null!=d&&"#"===d.charAt(0)&&(4===d.length?(e=d.charAt(1),e+=e,f=d.charAt(2),f+=f,g=d.charAt(3),g+=g):7===d.length&&(e=d.substring(1,3),f=d.substring(3,5),g=d.substring(5,7)),e=
parseInt(e,16),f=parseInt(f,16),g=parseInt(g,16)),a(e,f,g))}function od(d,a,q){var c,u,w=Math.min(d/=255,a/=255,q/=255),e=Math.max(d,a,q),f=e-w,g=(e+w)/2;return f?(u=0.5>g?f/(e+w):f/(2-e-w),c=d==e?(a-q)/f+(q>a?6:0):a==e?(q-d)/f+2:(d-a)/f+4,c*=60):u=c=0,Pa(c,u,g)}function pd(d,a,q){d=dc(d);a=dc(a);q=dc(q);var c=$b((0.4124564*d+0.3575761*a+0.1804375*q)/ld),u=$b((0.2126729*d+0.7151522*a+0.072175*q)/md);d=$b((0.0193339*d+0.119192*a+0.9503041*q)/nd);return Ra(116*u-16,500*(c-u),200*(u-d))}function dc(d){return 0.04045>=
(d/=255)?d/12.92:Math.pow((d+0.055)/1.055,2.4)}function cc(d){var a=parseFloat(d);return"%"===d.charAt(d.length-1)?Math.round(2.55*a):a}function T(d){return"function"==typeof d?d:function(){return d}}function ma(d){return d}function sf(d){return 1===d.length?function(a,q){d(null==a?q:null)}:d}function qd(d,a){function q(d,q,c){3>arguments.length&&(c=q,q=null);var w=h.xhr(d,a,c);return w.row=function(d){return arguments.length?w.response(null==(q=d)?N:u(d)):q},w.row(q)}function N(d){return q.parse(d.responseText)}
function u(d){return function(a){return q.parse(a.responseText,d)}}function w(a){return a.map(e).join(d)}function e(d){return f.test(d)?'"'+d.replace(/\"/g,'""')+'"':d}var f=RegExp('["'+d+"\n]"),g=d.charCodeAt(0);return q.parse=function(d,a){var r;return q.parseRows(d,function(d,q){if(r)return r(d,q-1);var c=Function("d","return {"+d.map(function(d,a){return JSON.stringify(d)+": d["+a+"]"}).join(",")+"}");r=a?function(d,r){return a(c(d),r)}:c})},q.parseRows=function(d,a){function r(){if(f>=e)return N;
if(c)return c=!1,u;var a=f;if(34===d.charCodeAt(a)){for(var q=a;q++<e;)if(34===d.charCodeAt(q)){if(34!==d.charCodeAt(q+1))break;++q}f=q+2;var w=d.charCodeAt(q+1);return 13===w?(c=!0,10===d.charCodeAt(q+2)&&++f):10===w&&(c=!0),d.substring(a+1,q).replace(/""/g,'"')}for(;e>f;){w=d.charCodeAt(f++);q=1;if(10===w)c=!0;else if(13===w)c=!0,10===d.charCodeAt(f)&&(++f,++q);else if(w!==g)continue;return d.substring(a,f-q)}return d.substring(a)}for(var q,c,u={},N={},w=[],e=d.length,f=0,v=0;(q=r())!==N;){for(var z=
[];q!==u&&q!==N;)z.push(q),q=r();a&&!(z=a(z,v++))||w.push(z)}return w},q.format=function(a){if(Array.isArray(a[0]))return q.formatRows(a);var r=new c,u=[];return a.forEach(function(d){for(var a in d)r.has(a)||u.push(r.add(a))}),[u.map(e).join(d)].concat(a.map(function(a){return u.map(function(d){return e(a[d])}).join(d)})).join("\n")},q.formatRows=function(d){return d.map(w).join("\n")},q}function ec(){for(var d,a=Date.now(),q=Ta;q;)d=a-q.then,d>=q.delay&&(q.flush=q.callback(d)),q=q.next;d=rd()-a;
24<d?(isFinite(d)&&(clearTimeout(lb),lb=setTimeout(ec,d)),mb=0):(mb=1,sd(ec))}function rd(){for(var d=null,a=Ta,q=1/0;a;)a.flush?(delete fc[a.callback.id],a=d?d.next=a.next:Ta=a.next):(q=Math.min(q,a.then+a.delay),a=(d=a).next);return q}function gc(d,a){return a-(d?Math.ceil(Math.log(d)/Math.LN10):1)}function tf(d){return d+""}function nb(d,a){d&&td.hasOwnProperty(d.type)&&td[d.type](d,a)}function hc(d,a,q){var c=-1,u=d.length-q;for(a.lineStart();++c<u;)q=d[c],a.point(q[0],q[1]);a.lineEnd()}function ud(d,
a){var q=-1,c=d.length;for(a.polygonStart();++q<c;)hc(d[q],a,1);a.polygonEnd()}function uf(){function d(d,a){d*=L;a=a*L/2+C/4;var r=d-c,q=Math.cos(a),e=Math.sin(a),f=w*e,g=ob,h=pb,n=u*q+f*Math.cos(r),r=f*Math.sin(r);ob=g*n-h*r;pb=h*n+g*r;c=d;u=q;w=e}var a,q,c,u,w;Ea.point=function(e,f){Ea.point=d;c=(a=e)*L;u=Math.cos(f=(q=f)*L/2+C/4);w=Math.sin(f)};Ea.lineEnd=function(){d(a,q)}}function vd(d){function a(d,r){c>d&&(c=d);d>w&&(w=d);u>r&&(u=r);r>e&&(e=r)}function q(){f.point=f.lineEnd=S}var c,u,w,e,
f={point:a,lineStart:S,lineEnd:S,polygonStart:function(){f.lineEnd=q},polygonEnd:function(){f.point=a}};return function(a){return e=w=-(c=u=1/0),h.geo.stream(a,d(f)),[[c,u],[w,e]]}}function wd(d,a){if(!ea){++pa;d*=L;var q=Math.cos(a*=L);Z+=(q*Math.cos(d)-Z)/pa;aa+=(q*Math.sin(d)-aa)/pa;Y+=(Math.sin(a)-Y)/pa}}function vf(){var d,a;ea=1;ic();ea=2;var q=qa.point;qa.point=function(c,u){q(d=c,a=u)};qa.lineEnd=function(){qa.point(d,a);jc();qa.lineEnd=jc}}function ic(){function d(d,w){d*=L;var e=Math.cos(w*=
L),f=e*Math.cos(d),e=e*Math.sin(d),g=Math.sin(w),G=Math.atan2(Math.sqrt((G=q*g-c*e)*G+(G=c*f-a*g)*G+(G=a*e-q*f)*G),a*f+q*e+c*g);pa+=G;Z+=G*(a+(a=f));aa+=G*(q+(q=e));Y+=G*(c+(c=g))}var a,q,c;1<ea||(1>ea&&(ea=1,pa=Z=aa=Y=0),qa.point=function(u,w){u*=L;var e=Math.cos(w*=L);a=e*Math.cos(u);q=e*Math.sin(u);c=Math.sin(w);qa.point=d})}function jc(){qa.point=wd}function qb(d){var a=d[0];d=d[1];var q=Math.cos(d);return[q*Math.cos(a),q*Math.sin(a),Math.sin(d)]}function rb(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*
a[2]}function xd(d,a){return[d[1]*a[2]-d[2]*a[1],d[2]*a[0]-d[0]*a[2],d[0]*a[1]-d[1]*a[0]]}function kc(d,a){d[0]+=a[0];d[1]+=a[1];d[2]+=a[2]}function sb(d,a){return[d[0]*a,d[1]*a,d[2]*a]}function Ya(){return!0}function lc(d){return[Math.atan2(d[1],d[0]),Math.asin(Math.max(-1,Math.min(1,d[2])))]}function tb(d,a){return Math.abs(d[0]-a[0])<O&&Math.abs(d[1]-a[1])<O}function yd(d,a,q,c,u){var w=[],e=[];if(d.forEach(function(d){if(!(0>=(a=d.length-1))){var a,r=d[0],q=d[a];if(tb(r,q)){u.lineStart();for(q=
0;a>q;++q)u.point((r=d[q])[0],r[1]);return u.lineEnd(),void 0}d={point:r,points:d,other:null,visited:!1,entry:!0,subject:!0};r={point:r,points:[r],other:d,visited:!1,entry:!1,subject:!1};d.other=r;w.push(d);e.push(r);d={point:q,points:[q],other:null,visited:!1,entry:!1,subject:!0};r={point:q,points:[q],other:d,visited:!1,entry:!0,subject:!1};d.other=r;w.push(d);e.push(r)}}),e.sort(a),zd(w),zd(e),w.length){if(q)for(d=1,q=!q(e[0].point),a=e.length;a>d;++d)e[d].entry=q=!q;for(var f,g=w[0];;){for(q=g;q.visited;)if((q=
q.next)===g)return;a=q.points;u.lineStart();do{if(q.visited=q.other.visited=!0,q.entry){if(q.subject)for(d=0;d<a.length;d++)u.point((f=a[d])[0],f[1]);else c(q.point,q.next.point,1,u);q=q.next}else{if(q.subject)for(a=q.prev.points,d=a.length;0<=--d;)u.point((f=a[d])[0],f[1]);else c(q.point,q.prev.point,-1,u);q=q.prev}q=q.other;a=q.points}while(!q.visited);u.lineEnd()}}}function zd(d){if(a=d.length){for(var a,q,c=0,u=d[0];++c<a;)u.next=q=d[c],q.prev=u,u=q;u.next=q=d[0];q.prev=u}}function Ad(d,a,q){return function(c){function u(a,
r){d(a,r)&&c.point(a,r)}function e(d,a){D.point(d,a)}function f(){F.point=e;D.lineStart()}function g(){F.point=u;D.lineEnd()}function A(d,a){M.point(d,a);V.push([d,a])}function G(){M.lineStart();V=[]}function n(){A(V[0][0],V[0][1]);M.lineEnd();var d;d=M.clean();var a=H.buffer(),r=a.length;if(!r)return s=!0,m+=Bd(V,-1),V=null,void 0;if(V=null,1&d){d=a[0];p+=Bd(d,1);var q,r=d.length-1,a=-1;for(c.lineStart();++a<r;)c.point((q=d[a])[0],q[1]);return c.lineEnd(),void 0}1<r&&2&d&&a.push(a.pop().concat(a.shift()));
l.push(a.filter(wf))}var l,p,m,s,V,D=a(c),F={point:u,lineStart:f,lineEnd:g,polygonStart:function(){F.point=A;F.lineStart=G;F.lineEnd=n;s=!1;m=p=0;l=[];c.polygonStart()},polygonEnd:function(){F.point=u;F.lineStart=f;F.lineEnd=g;l=h.merge(l);l.length?yd(l,xf,null,q,c):(-O>p||s&&-O>m)&&(c.lineStart(),q(null,null,1,c),c.lineEnd());c.polygonEnd();l=null},sphere:function(){c.polygonStart();c.lineStart();q(null,null,1,c);c.lineEnd();c.polygonEnd()}},H=Cd(),M=a(H);return F}}function wf(d){return 1<d.length}
function Cd(){var d,a=[];return{lineStart:function(){a.push(d=[])},point:function(a,r){d.push([a,r])},lineEnd:S,buffer:function(){var q=a;return a=[],d=null,q},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Bd(d,a){if(!(q=d.length))return 0;var q,c,u,e=0,f=0;c=d[0];u=c[0];for(var g=c[1],A=Math.cos(g),G=Math.atan2(a*Math.sin(u)*A,Math.sin(g)),h=1-a*Math.cos(u)*A,n=G;++e<q;)c=d[e],A=Math.cos(g=c[1]),c=Math.atan2(a*Math.sin(u=c[0])*A,Math.sin(g)),u=1-a*Math.cos(u)*A,Math.abs(h-
2)<O&&Math.abs(u-2)<O||(Math.abs(u)<O||Math.abs(h)<O||(Math.abs(Math.abs(c-G)-C)<O?2<u+h&&(f+=4*(c-G)):f+=Math.abs(h-2)<O?4*(c-n):((3*C+c-G)%(2*C)-C)*(h+u)),n=G,G=c,h=u);return f}function xf(d,a){return(0>(d=d.point)[0]?d[1]-C/2-O:C/2-d[1])-(0>(a=a.point)[0]?a[1]-C/2-O:C/2-a[1])}function yf(d){function a(d,r){return Math.cos(d)*Math.cos(r)>u}function q(d,a,r){var q=qb(d),c=qb(a),e=[1,0,0],c=xd(q,c),N=rb(c,c),q=c[0],f=N-q*q;if(!f)return!r&&d;N=u*N/f;f=-u*q/f;q=xd(e,c);e=sb(e,N);c=sb(c,f);kc(e,c);c=
rb(e,q);N=rb(q,q);f=c*c-N*(rb(e,e)-1);if(!(0>f)){var w=Math.sqrt(f),f=sb(q,(-c-w)/N);if(kc(f,e),f=lc(f),!r)return f;var g;r=d[0];var v=a[0];d=d[1];a=a[1];r>v&&(g=r,r=v,v=g);var z=v-r,h=Math.abs(z-C)<O,n=h||O>z;if(!h&&d>a&&(g=d,d=a,a=g),n?h?0<d+a^f[1]<(Math.abs(f[0]-r)<O?d:a):d<=f[1]&&f[1]<=a:z>C^(r<=f[0]&&f[0]<=v))return g=sb(q,(-c+w)/N),kc(g,e),[f,lc(g)]}}function c(a,r){var q=e?d:C-d,u=0;return-q>a?u|=1:a>q&&(u|=2),-q>r?u|=4:r>q&&(u|=8),u}var u=Math.cos(d),e=0<u,f=Math.abs(u)>O,g=mc(d,6*L);return Ad(a,
function(d){var u,g,v,h,n;return{lineStart:function(){h=v=!1;n=1},point:function(l,p){var m,s=[l,p],H=a(l,p),M=e?H?0:c(l,p):H?c(l+(0>l?C:-C),p):0;if(!u&&(h=v=H)&&d.lineStart(),H!==v&&(m=q(u,s),(tb(u,m)||tb(s,m))&&(s[0]+=O,s[1]+=O,H=a(s[0],s[1]))),H!==v)n=0,H?(d.lineStart(),m=q(s,u),d.point(m[0],m[1])):(m=q(u,s),d.point(m[0],m[1]),d.lineEnd()),u=m;else if(f&&u&&e^H){var Q;M&g||!(Q=q(s,u,!0))||(n=0,e?(d.lineStart(),d.point(Q[0][0],Q[0][1]),d.point(Q[1][0],Q[1][1]),d.lineEnd()):(d.point(Q[1][0],Q[1][1]),
d.lineEnd(),d.lineStart(),d.point(Q[0][0],Q[0][1])))}!H||u&&tb(u,s)||d.point(s[0],s[1]);u=s;v=H;g=M},lineEnd:function(){v&&d.lineEnd();u=null},clean:function(){return n|(h&&v)<<1}}},g)}function zf(d,a,q,c){function u(c,u){return Math.abs(c[0]-d)<O?0<u?0:3:Math.abs(c[0]-q)<O?0<u?2:1:Math.abs(c[1]-a)<O?0<u?1:0:0<u?3:2}function e(d,a){return f(d.point,a.point)}function f(d,a){var r=u(d,1),q=u(a,1);return r!==q?r-q:0===r?a[1]-d[1]:1===r?d[0]-a[0]:2===r?d[1]-a[1]:a[0]-d[0]}return function(g){function A(e){e=
u(e,-1);return G([0===e||3===e?d:q,1<e?c:a])}function G(d){for(var a=0,r=s.length,q=d[1],c=0;r>c;++c)for(var u=1,e=s[c],f=e.length,N=e[0];f>u;++u)b=e[u],N[1]<=q?b[1]>q&&0<(b[0]-N[0])*(d[1]-N[1])-(d[0]-N[0])*(b[1]-N[1])&&++a:b[1]<=q&&0>(b[0]-N[0])*(d[1]-N[1])-(d[0]-N[0])*(b[1]-N[1])&&--a,N=b;return 0!==a}function n(e,w,g,v){var A=0,h=0;if(null==e||(A=u(e,g))!==(h=u(w,g))||0>f(e,w)^0<g){do v.point(0===A||3===A?d:q,1<A?c:a);while((A=(A+g+4)%4)!==h)}else v.point(w[0],w[1])}function l(u,e){u>=d&&(q>=u&&
e>=a&&c>=e)&&g.point(u,e)}function p(u,e){u=Math.max(-ub,Math.min(ub,u));e=Math.max(-ub,Math.min(ub,e));var f=u>=d&&q>=u&&e>=a&&c>=e;if(s&&V.push([u,e]),ta)D=u,x=e,H=f,ta=!1,f&&(g.lineStart(),g.point(u,e));else if(f&&t)g.point(u,e);else{var w=[M,Q],z=[u,e],A=z[0]-w[0],h=z[1]-w[1],G=[0,1];(Math.abs(A)<O&&Math.abs(h)<O?d<=w[0]&&w[0]<=q&&a<=w[1]&&w[1]<=c:vb(d-w[0],A,G)&&(vb(w[0]-q,-A,G)&&vb(a-w[1],h,G)&&vb(w[1]-c,-h,G))&&(1>G[1]&&(z[0]=w[0]+G[1]*A,z[1]=w[1]+G[1]*h),0<G[0]&&(w[0]+=G[0]*A,w[1]+=G[0]*h),
!0))?(t||(g.lineStart(),g.point(w[0],w[1])),g.point(z[0],z[1]),f||g.lineEnd()):(g.lineStart(),g.point(u,e))}M=u;Q=e;t=f}var m,s,V,D,x,H,M,Q,t,ta,ua=g,B=Cd(),nc={point:l,lineStart:function(){nc.point=p;s&&s.push(V=[]);ta=!0;t=!1;M=Q=0/0},lineEnd:function(){m&&(p(D,x),H&&t&&B.rejoin(),m.push(B.buffer()));nc.point=l;t&&g.lineEnd()},polygonStart:function(){g=B;m=[];s=[]},polygonEnd:function(){g=ua;(m=h.merge(m)).length?(g.polygonStart(),yd(m,e,A,n,g),g.polygonEnd()):G([d,a])&&(g.polygonStart(),g.lineStart(),
n(null,null,1,g),g.lineEnd(),g.polygonEnd());m=s=V=null}};return nc}}function vb(d,a,q){if(Math.abs(a)<O)return 0>=d;d/=a;if(0<a){if(d>q[1])return!1;d>q[0]&&(q[0]=d)}else{if(d<q[0])return!1;d<q[1]&&(q[1]=d)}return!0}function Dd(d,a){function q(q,c){return q=d(q,c),a(q[0],q[1])}return d.invert&&a.invert&&(q.invert=function(q,c){return q=a.invert(q,c),q&&d.invert(q[0],q[1])}),q}function Ed(d){function a(r){function c(a,q){a=d(a,q);r.point(a[0],a[1])}function e(){n=0/0;x.point=f;r.lineStart()}function f(a,
c){var e=qb([a,c]),N=d(a,c);q(n,l,h,m,p,s,n=N[0],l=N[1],h=a,m=e[0],p=e[1],s=e[2],u,r);r.point(n,l)}function N(){x.point=c;r.lineEnd()}function g(){var d,a,c,z,gd,t;e();x.point=function(r,q){f(d=r,q);a=n;c=l;z=m;gd=p;t=s;x.point=f};x.lineEnd=function(){q(n,l,h,m,p,s,a,c,d,z,gd,t,u,r);x.lineEnd=N;N()}}var h,n,l,m,p,s,x={point:c,lineStart:e,lineEnd:N,polygonStart:function(){r.polygonStart();x.lineStart=g},polygonEnd:function(){r.polygonEnd();x.lineStart=e}};return x}function q(a,r,u,e,f,g,h,n,l,m,p,
s,x,H){var M=h-a,Q=n-r,t=M*M+Q*Q;if(t>4*c&&x--){var ta=e+m,ua=f+p,B=g+s,E=Math.sqrt(ta*ta+ua*ua+B*B),J=Math.asin(B/=E),y=Math.abs(Math.abs(B)-1)<O?(u+l)/2:Math.atan2(ua,ta),R=d(y,J),J=R[0],R=R[1],la=J-a,S=R-r,C=Q*la-M*S;(C*C/t>c||0.3<Math.abs((M*la+Q*S)/t-0.5))&&(q(a,r,u,e,f,g,J,R,y,ta/=E,ua/=E,B,x,H),H.point(J,R),q(J,R,y,ta,ua,B,h,n,l,m,p,s,x,H))}}var c=0.5,u=16;return a.precision=function(d){return arguments.length?(u=0<(c=d*d)&&16,a):Math.sqrt(c)},a}function Fa(d){return oc(function(){return d})()}
function oc(d){function a(d){return d=f(d[0]*L,d[1]*L),[d[0]*n+g,A-d[1]*n]}function q(d){return d=f.invert((d[0]-g)/n,(A-d[1])/n),d&&[d[0]*X,d[1]*X]}function c(){f=Dd(e=pc(x,D,F),u);var d=u(p,s);return g=l-d[0]*n,A=m+d[1]*n,a}var u,e,f,g,A,G=Ed(function(d,a){return d=u(d,a),[d[0]*n+g,A-d[1]*n]}),n=150,l=480,m=250,p=0,s=0,x=0,D=0,F=0,H=Fd,M=ma,Q=null,t=null;return a.stream=function(d){return Af(e,H(G(M(d))))},a.clipAngle=function(d){return arguments.length?(H=null==d?(Q=d,Fd):yf((Q=+d)*L),a):Q},a.clipExtent=
function(d){return arguments.length?(t=d,M=null==d?ma:zf(d[0][0],d[0][1],d[1][0],d[1][1]),a):t},a.scale=function(d){return arguments.length?(n=+d,c()):n},a.translate=function(d){return arguments.length?(l=+d[0],m=+d[1],c()):[l,m]},a.center=function(d){return arguments.length?(p=d[0]%360*L,s=d[1]%360*L,c()):[p*X,s*X]},a.rotate=function(d){return arguments.length?(x=d[0]%360*L,D=d[1]%360*L,F=2<d.length?d[2]%360*L:0,c()):[x*X,D*X,F*X]},h.rebind(a,G,"precision"),function(){return u=d.apply(this,arguments),
a.invert=u.invert&&q,c()}}function Af(d,a){return{point:function(q,c){c=d(q*L,c*L);q=c[0];a.point(q>C?q-2*C:-C>q?q+2*C:q,c[1])},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Za(d,a){return[d,a]}function pc(d,a,q){return d?a||q?Dd(Gd(d),Hd(a,q)):Gd(d):a||q?Hd(a,q):Za}function Id(d){return function(a,q){return a+=d,[a>C?a-2*C:-C>a?a+2*C:a,q]}}function Gd(d){var a=
Id(d);return a.invert=Id(-d),a}function Hd(d,a){function q(d,a){var r=Math.cos(a),q=Math.cos(d)*r,r=Math.sin(d)*r,g=Math.sin(a),h=g*c+q*u;return[Math.atan2(r*e-h*f,q*c-g*u),Math.asin(Math.max(-1,Math.min(1,h*e+r*f)))]}var c=Math.cos(d),u=Math.sin(d),e=Math.cos(a),f=Math.sin(a);return q.invert=function(d,a){var r=Math.cos(a),q=Math.cos(d)*r,r=Math.sin(d)*r,g=Math.sin(a),h=g*e-r*f;return[Math.atan2(r*e+g*f,q*c+h*u),Math.asin(Math.max(-1,Math.min(1,h*c-q*u)))]},q}function mc(d,a){var q=Math.cos(d),c=
Math.sin(d);return function(u,e,f,g){null!=u?(u=Jd(q,u),e=Jd(q,e),(0<f?e>u:u>e)&&(u+=2*f*C)):(u=d+2*f*C,e=d);for(var A,h=f*a;0<f?u>e:e>u;u-=h)g.point((A=lc([q,-c*Math.cos(u),-c*Math.sin(u)]))[0],A[1])}}function Jd(d,a){var q=qb(a);q[0]-=d;var c=Math.sqrt(q[0]*q[0]+q[1]*q[1]+q[2]*q[2]);q[0]/=c;q[1]/=c;q[2]/=c;c=Math.acos(Math.max(-1,Math.min(1,-q[1])));return((0>-q[2]?-c:c)+2*Math.PI-O)%(2*Math.PI)}function Kd(d,a,q){var c=h.range(d,a-O,q).concat(a);return function(d){return c.map(function(a){return[d,
a]})}}function Ld(d,a,q){var c=h.range(d,a-O,q).concat(a);return function(d){return c.map(function(a){return[a,d]})}}function qc(d){return d.source}function rc(d){return d.target}function Bf(d,a,q,c){var u=Math.cos(a),e=Math.sin(a),f=Math.cos(c),g=Math.sin(c),A=u*Math.cos(d),h=u*Math.sin(d),n=f*Math.cos(q),l=f*Math.sin(q),m=2*Math.asin(Math.sqrt(jd(c-a)+u*f*jd(q-d))),p=1/Math.sin(m);q=m?function(d){var a=Math.sin(d*=m)*p,r=Math.sin(m-d)*p;d=r*A+a*n;var q=r*h+a*l,a=r*e+a*g;return[Math.atan2(q,d)*X,
Math.atan2(a,Math.sqrt(d*d+q*q))*X]}:function(){return[d*X,a*X]};return q.distance=m,q}function sc(d){var a=0,q=C/3,c=oc(d);d=c(a,q);return d.parallels=function(d){return arguments.length?c(a=d[0]*C/180,q=d[1]*C/180):[180*(a/C),180*(q/C)]},d}function Md(d,a){function q(d,a){var r=Math.sqrt(e-2*u*Math.sin(a))/u;return[r*Math.sin(d*=u),f-r*Math.cos(d)]}var c=Math.sin(d),u=(c+Math.sin(a))/2,e=1+c*(2*u-c),f=Math.sqrt(e)/u;return q.invert=function(d,a){var r=f-a;return[Math.atan2(d,r)/u,Math.asin((e-(d*
d+r*r)*u*u)/(2*u))]},q}function tc(d,a){var q=d(a[0]),c=d([0.5*(a[0][0]+a[1][0]),a[0][1]]),u=d([a[1][0],a[0][1]]),e=d(a[1]),f=(c[1]-q[1])/(c[0]-q[0]),g=(u[1]-c[1])/(u[0]-c[0]),A=0.5*(f*g*(q[1]-u[1])+g*(q[0]+c[0])-f*(c[0]+u[0]))/(g-f),h=(0.5*(q[0]+c[0])-A)/f+0.5*(q[1]+c[1]),c=e[0]-A,e=e[1]-h,u=q[0]-A,q=q[1]-h,n=c*c+e*e,l=u*u+q*q,m=Math.atan2(e,c),p=Math.atan2(q,u);return function(a){var r=a[0]-A,q=a[1]-h,c=r*r+q*q,r=Math.atan2(q,r);return c>n&&l>c&&r>m&&p>r?d.invert(a):void 0}}function Cf(){function d(d,
a){wb+=u*d-c*a;c=d;u=a}var a,q,c,u;Ga.point=function(e,f){Ga.point=d;a=c=e;q=u=f};Ga.lineEnd=function(){d(a,q)}}function Df(){function d(d,a){f.push("M",d,",",a,e)}function a(d,r){f.push("M",d,",",r);g.point=q}function q(d,a){f.push("L",d,",",a)}function c(){g.point=d}function u(){f.push("Z")}var e=Nd(4.5),f=[],g={point:d,lineStart:function(){g.point=a},lineEnd:c,polygonStart:function(){g.lineEnd=u},polygonEnd:function(){g.lineEnd=c;g.point=d},pointRadius:function(d){return e=Nd(d),g},result:function(){if(f.length){var d=
f.join("");return f=[],d}}};return g}function uc(d,a){ea||(Z+=d,aa+=a,++Y)}function Od(){function d(d,c){var e=d-a,f=c-q,e=Math.sqrt(e*e+f*f);Z+=e*(a+d)/2;aa+=e*(q+c)/2;Y+=e;a=d;q=c}var a,q;if(1!==ea){if(!(1>ea))return;ea=1;Z=aa=Y=0}ra.point=function(c,e){ra.point=d;a=c;q=e}}function Pd(){ra.point=uc}function Ef(){function d(d,a){var r=e*d-c*a;Z+=r*(c+d);aa+=r*(e+a);Y+=3*r;c=d;e=a}var a,q,c,e;2>ea&&(ea=2,Z=aa=Y=0);ra.point=function(f,g){ra.point=d;a=c=f;q=e=g};ra.lineEnd=function(){d(a,q)}}function Ff(d){function a(r,
q){d.moveTo(r,q);d.arc(r,q,g,0,2*C)}function q(a,r){d.moveTo(a,r);v.point=c}function c(a,r){d.lineTo(a,r)}function e(){v.point=a}function f(){d.closePath()}var g=4.5,v={point:a,lineStart:function(){v.point=q},lineEnd:e,polygonStart:function(){v.lineEnd=f},polygonEnd:function(){v.lineEnd=e;v.point=a},pointRadius:function(d){return g=d,v},result:S};return v}function Nd(d){return"m0,"+d+"a"+d+","+d+" 0 1,1 0,"+-2*d+"a"+d+","+d+" 0 1,1 0,"+2*d+"z"}function Gf(d){var a=Ed(function(a,r){return d([a*X,r*
X])});return function(d){return d=a(d),{point:function(a,r){d.point(a*L,r*L)},sphere:function(){d.sphere()},lineStart:function(){d.lineStart()},lineEnd:function(){d.lineEnd()},polygonStart:function(){d.polygonStart()},polygonEnd:function(){d.polygonEnd()}}}}function $a(d,a){function q(a,r){var q=Math.cos(a),c=Math.cos(r),q=d(q*c);return[q*c*Math.sin(a),q*Math.sin(r)]}return q.invert=function(d,q){var c=Math.sqrt(d*d+q*q),e=a(c),f=Math.sin(e),e=Math.cos(e);return[Math.atan2(d*f,c*e),Math.asin(c&&q*
f/c)]},q}function Qd(d,a){function q(d,a){var r=Math.abs(Math.abs(a)-C/2)<O?0:f/Math.pow(Math.tan(C/4+a/2),e);return[r*Math.sin(e*d),f-r*Math.cos(e*d)]}var c=Math.cos(d),e=d===a?Math.sin(d):Math.log(c/Math.cos(a))/Math.log(Math.tan(C/4+a/2)/Math.tan(C/4+d/2)),f=c*Math.pow(Math.tan(C/4+d/2),e)/e;return e?(q.invert=function(d,a){var r=f-a,c=(0<e?1:0>e?-1:0)*Math.sqrt(d*d+r*r);return[Math.atan2(d,r)/e,2*Math.atan(Math.pow(f/c,1/e))-C/2]},q):xb}function Rd(d,a){function c(d,a){var r=w-a;return[r*Math.sin(f*
d),w-r*Math.cos(f*d)]}var e=Math.cos(d),f=d===a?Math.sin(d):(e-Math.cos(a))/(a-d),w=e/f+d;return Math.abs(f)<O?Za:(c.invert=function(d,a){var r=w-a;return[Math.atan2(d,r)/f,w-(0<f?1:0>f?-1:0)*Math.sqrt(d*d+r*r)]},c)}function xb(d,a){return[d,Math.log(Math.tan(C/4+a/2))]}function Sd(d){var a,c=Fa(d),e=c.scale,f=c.translate,w=c.clipExtent;return c.scale=function(){var d=e.apply(c,arguments);return d===c?a?c.clipExtent(null):c:d},c.translate=function(){var d=f.apply(c,arguments);return d===c?a?c.clipExtent(null):
c:d},c.clipExtent=function(d){var g=w.apply(c,arguments);if(g===c){if(a=null==d){var A=C*e(),h=f();w([[h[0]-A,h[1]-A],[h[0]+A,h[1]+A]])}}else a&&(g=null);return g},c.clipExtent(null)}function vc(d,a){var c=Math.cos(a)*Math.sin(d);return[Math.log((1+c)/(1-c))/2,Math.atan2(Math.tan(a),Math.cos(d))]}function Td(d){function a(r){function g(){h.push("M",w(d(n),v))}for(var z,h=[],n=[],l=-1,m=r.length,p=T(c),s=T(e);++l<m;)f.call(this,z=r[l],l)?n.push([+p.call(this,z,l),+s.call(this,z,l)]):n.length&&(g(),
n=[]);return n.length&&g(),h.length?h.join(""):null}var c=va,e=ya,f=Ya,w=na,g=w.key,v=0.7;return a.x=function(d){return arguments.length?(c=d,a):c},a.y=function(d){return arguments.length?(e=d,a):e},a.defined=function(d){return arguments.length?(f=d,a):f},a.interpolate=function(d){return arguments.length?(g="function"==typeof d?w=d:(w=wc.get(d)||na).key,a):g},a.tension=function(d){return arguments.length?(v=d,a):v},a}function va(d){return d[0]}function ya(d){return d[1]}function na(d){return d.join("L")}
function xc(d){for(var a=0,c=d.length,e=d[0],f=[e[0],",",e[1]];++a<c;)f.push("V",(e=d[a])[1],"H",e[0]);return f.join("")}function yc(d){for(var a=0,c=d.length,e=d[0],f=[e[0],",",e[1]];++a<c;)f.push("H",(e=d[a])[0],"V",e[1]);return f.join("")}function yb(d,a){if(1>a.length||d.length!=a.length&&d.length!=a.length+2)return na(d);var c=d.length!=a.length,e="",f=d[0],w=d[1],g=a[0],v=g,A=1;if(c&&(e+="Q"+(w[0]-2*g[0]/3)+","+(w[1]-2*g[1]/3)+","+w[0]+","+w[1],f=d[1],A=2),1<a.length)for(v=a[1],w=d[A],A++,e+=
"C"+(f[0]+g[0])+","+(f[1]+g[1])+","+(w[0]-v[0])+","+(w[1]-v[1])+","+w[0]+","+w[1],f=2;f<a.length;f++,A++)w=d[A],v=a[f],e+="S"+(w[0]-v[0])+","+(w[1]-v[1])+","+w[0]+","+w[1];c&&(c=d[A],e+="Q"+(w[0]+2*v[0]/3)+","+(w[1]+2*v[1]/3)+","+c[0]+","+c[1]);return e}function zc(d,a){for(var c,e=[],f=(1-a)/2,w=d[0],g=d[1],v=1,A=d.length;++v<A;)c=w,w=g,g=d[v],e.push([f*(g[0]-c[0]),f*(g[1]-c[1])]);return e}function Ud(d){if(3>d.length)return na(d);var a=1,c=d.length,e=d[0],f=e[0],w=e[1],g=[f,f,f,(e=d[1])[0]],v=[w,
w,w,e[1]],f=[f,",",w];for(ab(f,g,v);++a<c;)e=d[a],g.shift(),g.push(e[0]),v.shift(),v.push(e[1]),ab(f,g,v);for(a=-1;2>++a;)g.shift(),g.push(e[0]),v.shift(),v.push(e[1]),ab(f,g,v);return f.join("")}function wa(d,a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3]}function ab(d,a,c){d.push("C",wa(Vd,a),",",wa(Vd,c),",",wa(Wd,a),",",wa(Wd,c),",",wa(Ua,a),",",wa(Ua,c))}function Ac(d,a){return(a[1]-d[1])/(a[0]-d[0])}function Hf(d,a,c,e){var f,g,z,v,A,h,n;return f=e[d],g=f[0],z=f[1],f=e[a],v=f[0],A=f[1],f=
e[c],h=f[0],n=f[1],0<(n-z)*(v-g)-(A-z)*(h-g)}function Bc(d,a,c){return(c[0]-a[0])*(d[1]-a[1])<(c[1]-a[1])*(d[0]-a[0])}function Xd(d,a,c,e){var f=d[0],g=c[0],z=a[0]-f,v=e[0]-g;d=d[1];c=c[1];a=a[1]-d;e=e[1]-c;g=(v*(d-c)-e*(f-g))/(e*z-v*a);return[f+g*z,d+g*a]}function Cc(d,a){var c=d.map(function(d,a){return{index:a,x:d[0],y:d[1]}}).sort(function(d,a){return d.y<a.y?-1:d.y>a.y?1:d.x<a.x?-1:d.x>a.x?1:0}),e=null,f={list:[],leftEnd:null,rightEnd:null,init:function(){f.leftEnd=f.createHalfEdge(null,"l");
f.rightEnd=f.createHalfEdge(null,"l");f.leftEnd.r=f.rightEnd;f.rightEnd.l=f.leftEnd;f.list.unshift(f.leftEnd,f.rightEnd)},createHalfEdge:function(d,a){return{edge:d,side:a,vertex:null,l:null,r:null}},insert:function(d,a){a.l=d;a.r=d.r;d.r.l=a;d.r=a},leftBound:function(d){var a=f.leftEnd;do a=a.r;while(a!=f.rightEnd&&g.rightOf(a,d));return a.l},del:function(d){d.l.r=d.r;d.r.l=d.l;d.edge=null},right:function(d){return d.r},left:function(d){return d.l},leftRegion:function(d){return null==d.edge?e:d.edge.region[d.side]},
rightRegion:function(d){return null==d.edge?e:d.edge.region[Dc[d.side]]}},g={bisect:function(d,a){var c={region:{l:d,r:a},ep:{l:null,r:null}},r=a.x-d.x,q=a.y-d.y;return c.c=d.x*r+d.y*q+0.5*(r*r+q*q),(0<r?r:-r)>(0<q?q:-q)?(c.a=1,c.b=q/r,c.c/=r):(c.b=1,c.a=r/q,c.c/=q),c},intersect:function(d,a){var c=d.edge,r=a.edge;if(!c||!r||c.region.r==r.region.r)return null;var q=c.a*r.b-c.b*r.a;if(1E-10>Math.abs(q))return null;var e,f,u=(c.c*r.b-r.c*c.b)/q,q=(r.c*c.a-c.c*r.a)/q,g=c.region.r,w=r.region.r;g.y<w.y||
g.y==w.y&&g.x<w.x?(e=d,f=c):(e=a,f=r);return(c=u>=f.region.r.x)&&"l"===e.side||!c&&"r"===e.side?null:{x:u,y:q}},rightOf:function(d,a){var c=d.edge,r=c.region.r,q=a.x>r.x;if(q&&"l"===d.side)return 1;if(!q&&"r"===d.side)return 0;if(1===c.a){var e=a.y-r.y,f=a.x-r.x,u=0,g=0;(!q&&0>c.b||q&&0<=c.b?g=u=e>=c.b*f:(g=a.x+a.y*c.b>c.c,0>c.b&&(g=!g),g||(u=1)),u)||(r=r.x-c.region.l.x,g=c.b*(f*f-e*e)<r*e*(1+2*f/r+c.b*c.b),0>c.b&&(g=!g))}else f=c.c-c.a*a.x,c=a.y-f,e=a.x-r.x,r=f-r.y,g=c*c>e*e+r*r;return"l"===d.side?
g:!g},endPoint:function(d,c,q){d.ep[c]=q;d.ep[Dc[c]]&&a(d)},distance:function(d,a){var c=d.x-a.x,r=d.y-a.y;return Math.sqrt(c*c+r*r)}},z={list:[],insert:function(d,a,c){d.vertex=a;d.ystar=a.y+c;c=0;for(var r=z.list,q=r.length;q>c;c++){var e=r[c];if(!(d.ystar>e.ystar||d.ystar==e.ystar&&a.x>e.vertex.x))break}r.splice(c,0,d)},del:function(d){for(var a=0,c=z.list,r=c.length;r>a&&c[a]!=d;++a);c.splice(a,1)},empty:function(){return 0===z.list.length},nextEvent:function(d){for(var a=0,c=z.list,r=c.length;r>
a;++a)if(c[a]==d)return c[a+1];return null},min:function(){var d=z.list[0];return{x:d.vertex.x,y:d.ystar}},extractMin:function(){return z.list.shift()}};f.init();for(var e=c.shift(),v,A,h,n,l,m,p,s,x,D,F=c.shift();;)if(z.empty()||(v=z.min()),F&&(z.empty()||F.y<v.y||F.y==v.y&&F.x<v.x))A=f.leftBound(F),h=f.right(A),p=f.rightRegion(A),D=g.bisect(p,F),m=f.createHalfEdge(D,"l"),f.insert(A,m),(x=g.intersect(A,m))&&(z.del(A),z.insert(A,x,g.distance(x,F))),A=m,m=f.createHalfEdge(D,"r"),f.insert(A,m),(x=g.intersect(m,
h))&&z.insert(m,x,g.distance(x,F)),F=c.shift();else{if(z.empty())break;A=z.extractMin();n=f.left(A);h=f.right(A);l=f.right(h);p=f.leftRegion(A);m=f.rightRegion(h);x=A.vertex;g.endPoint(A.edge,A.side,x);g.endPoint(h.edge,h.side,x);f.del(A);z.del(h);f.del(h);A="l";p.y>m.y&&(s=p,p=m,m=s,A="r");D=g.bisect(p,m);m=f.createHalfEdge(D,A);f.insert(n,m);g.endPoint(D,Dc[A],x);(x=g.intersect(n,m))&&(z.del(n),z.insert(n,x,g.distance(x,p)));(x=g.intersect(m,l))&&z.insert(m,x,g.distance(x,p))}for(A=f.right(f.leftEnd);A!=
f.rightEnd;A=f.right(A))a(A.edge)}function If(d){return d.x}function Jf(d){return d.y}function Yd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function bb(d,a,c,e,f,g){if(!d(a,c,e,f,g)){var z=0.5*(c+f),v=0.5*(e+g);a=a.nodes;a[0]&&bb(d,a[0],c,e,z,v);a[1]&&bb(d,a[1],z,e,f,v);a[2]&&bb(d,a[2],c,v,z,g);a[3]&&bb(d,a[3],z,v,f,g)}}function Ec(d,a){d=h.rgb(d);a=h.rgb(a);var c=d.r,e=d.g,f=d.b,g=a.r-c,z=a.g-e,v=a.b-f;return function(d){return"#"+Sa(Math.round(c+g*d))+Sa(Math.round(e+z*d))+Sa(Math.round(f+
v*d))}}function Zd(d){var a=[d.a,d.b],c=[d.c,d.d],e=$d(a),f=a[0]*c[0]+a[1]*c[1],g=$d((c[0]+=-f*a[0],c[1]+=-f*a[1],c))||0;a[0]*c[1]<c[0]*a[1]&&(a[0]*=-1,a[1]*=-1,e*=-1,f*=-1);this.rotate=(e?Math.atan2(a[1],a[0]):Math.atan2(-c[0],c[1]))*X;this.translate=[d.e,d.f];this.scale=[e,g];this.skew=g?Math.atan2(f,g)*X:0}function $d(d){var a=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return a&&(d[0]/=a,d[1]/=a),a}function za(d,a){return a-=d=+d,function(c){return d+a*c}}function zb(d,a){var c,e=[],f=[],g=h.transform(d),
z=h.transform(a),v=g.translate,A=z.translate,n=g.rotate,l=z.rotate,m=g.skew,p=z.skew,g=g.scale,z=z.scale;return v[0]!=A[0]||v[1]!=A[1]?(e.push("translate(",null,",",null,")"),f.push({i:1,x:za(v[0],A[0])},{i:3,x:za(v[1],A[1])})):A[0]||A[1]?e.push("translate("+A+")"):e.push(""),n!=l?(180<n-l?l+=360:180<l-n&&(n+=360),f.push({i:e.push(e.pop()+"rotate(",null,")")-2,x:za(n,l)})):l&&e.push(e.pop()+"rotate("+l+")"),m!=p?f.push({i:e.push(e.pop()+"skewX(",null,")")-2,x:za(m,p)}):p&&e.push(e.pop()+"skewX("+
p+")"),g[0]!=z[0]||g[1]!=z[1]?(c=e.push(e.pop()+"scale(",null,",",null,")"),f.push({i:c-4,x:za(g[0],z[0])},{i:c-2,x:za(g[1],z[1])})):(1!=z[0]||1!=z[1])&&e.push(e.pop()+"scale("+z+")"),c=f.length,function(d){for(var a,r=-1;++r<c;)e[(a=f[r]).i]=a.x(d);return e.join("")}}function ae(d,a){var c,e={},f={};for(c in d)c in a?e[c]=("transform"==c?zb:Ka)(d[c],a[c]):f[c]=d[c];for(c in a)c in d||(f[c]=a[c]);return function(d){for(c in e)f[c]=e[c](d);return f}}function be(d,a){var c,e,f,g,z=0,v=[],A=[];d+="";
a+="";for(e=Ab.lastIndex=0;c=Ab.exec(a);++e)c.index&&v.push(a.substring(z,c.index)),A.push({i:v.length,x:c[0]}),v.push(null),z=Ab.lastIndex;z<a.length&&v.push(a.substring(z));e=0;for(f=A.length;(c=Ab.exec(d))&&f>e;++e)if(g=A[e],g.x==c[0]){if(g.i)if(null==v[g.i+1])for(v[g.i-1]+=g.x,v.splice(g.i,1),c=e+1;f>c;++c)A[c].i--;else for(v[g.i-1]+=g.x+v[g.i+1],v.splice(g.i,2),c=e+1;f>c;++c)A[c].i-=2;else if(null==v[g.i+1])v[g.i]=g.x;else for(v[g.i]=g.x+v[g.i+1],v.splice(g.i+1,1),c=e+1;f>c;++c)A[c].i--;A.splice(e,
1);f--;e--}else g.x=za(parseFloat(c[0]),parseFloat(g.x));for(;f>e;)g=A.pop(),null==v[g.i+1]?v[g.i]=g.x:(v[g.i]=g.x+v[g.i+1],v.splice(g.i+1,1)),f--;return 1===v.length?null==v[0]?A[0].x:function(){return a}:function(d){for(e=0;f>e;++e)v[(g=A[e]).i]=g.x(d);return v.join("")}}function Ka(d,a){for(var c,e=h.interpolators.length;0<=--e&&!(c=h.interpolators[e](d,a)););return c}function ce(d,a){var c,e=[],f=[],g=d.length,z=a.length,v=Math.min(d.length,a.length);for(c=0;v>c;++c)e.push(Ka(d[c],a[c]));for(;g>
c;++c)f[c]=d[c];for(;z>c;++c)f[c]=a[c];return function(d){for(c=0;v>c;++c)f[c]=e[c](d);return f}}function Kf(d){return function(a){return 0>=a?0:1<=a?1:d(a)}}function de(d){return function(a){return 1-d(1-a)}}function ee(d){return function(a){return 0.5*(0.5>a?d(2*a):2-d(2-2*a))}}function Lf(d){return d*d}function Mf(d){return d*d*d}function Nf(d){return 1-Math.cos(d*C/2)}function Of(d){return Math.pow(2,10*(d-1))}function Pf(d){return 1-Math.sqrt(1-d*d)}function Qf(d){return 1/2.75>d?7.5625*d*d:
2/2.75>d?7.5625*(d-=1.5/2.75)*d+0.75:2.5/2.75>d?7.5625*(d-=2.25/2.75)*d+0.9375:7.5625*(d-=2.625/2.75)*d+0.984375}function fe(d,a){return a-=d,function(c){return Math.round(d+a*c)}}function Rf(d,a){return a=a-(d=+d)?1/(a-d):0,function(c){return(c-d)*a}}function Sf(d,a){return a=a-(d=+d)?1/(a-d):0,function(c){return Math.max(0,Math.min(1,(c-d)*a))}}function Tf(d){var a=d.source;d=d.target;var c;var e=d;if(a===e)c=a;else{c=ge(a);for(var e=ge(e),f=c.pop(),g=e.pop(),z=null;f===g;)z=f,f=c.pop(),g=e.pop();
c=z}for(e=[a];a!==c;)a=a.parent,e.push(a);for(a=e.length;d!==c;)e.splice(a,0,d),d=d.parent;return e}function ge(d){for(var a=[],c=d.parent;null!=c;)a.push(d),d=c,c=c.parent;return a.push(d),a}function Uf(d){d.fixed|=2}function Vf(d){d.fixed&=-7}function Wf(d){d.fixed|=4;d.px=d.x;d.py=d.y}function Xf(d){d.fixed&=-5}function he(d,a,c){var e=0,f=0;if(d.charge=0,!d.leaf)for(var g,z=d.nodes,v=z.length,A=-1;++A<v;)g=z[A],null!=g&&(he(g,a,c),d.charge+=g.charge,e+=g.charge*g.cx,f+=g.charge*g.cy);d.point&&
(d.leaf||(d.point.x+=Math.random()-0.5,d.point.y+=Math.random()-0.5),a*=c[d.point.index],d.charge+=d.pointCharge=a,e+=a*d.point.x,f+=a*d.point.y);d.cx=e/d.charge;d.cy=f/d.charge}function cb(d,a){return h.rebind(d,a,"sort","children","value"),d.nodes=d,d.links=Yf,d}function Zf(d){return d.children}function $f(d){return d.value}function ag(d,a){return a.value-d.value}function Yf(d){return h.merge(d.map(function(d){return(d.children||[]).map(function(a){return{source:d,target:a}})}))}function bg(d){return d.x}
function cg(d){return d.y}function dg(d,a,c){d.y0=a;d.y=c}function Fc(d){return h.range(d.length)}function Gc(d){var a=-1;d=d[0].length;for(var c=[];++a<d;)c[a]=0;return c}function eg(d){for(var a,c=1,e=0,f=d[0][1],g=d.length;g>c;++c)(a=d[c][1])>f&&(e=c,f=a);return e}function fg(d){return d.reduce(gg,0)}function gg(d,a){return d+a[1]}function hg(d,a){return ie(d,Math.ceil(Math.log(a.length)/Math.LN2+1))}function ie(d,a){for(var c=-1,e=+d[0],f=(d[1]-e)/a,g=[];++c<=a;)g[c]=f*c+e;return g}function ig(d){return[h.min(d),
h.max(d)]}function je(d,a){return d.parent==a.parent?1:2}function Hc(d){var a=d.children;return a&&a.length?a[0]:d._tree.thread}function Ic(d){var a,c=d.children;return c&&(a=c.length)?c[a-1]:d._tree.thread}function Bb(d,a){var c=d.children;if(c&&(f=c.length))for(var e,f,g=-1;++g<f;)0<a(e=Bb(c[g],a),d)&&(d=e);return d}function jg(d,a){return d.x-a.x}function kg(d,a){return a.x-d.x}function lg(d,a){return d.depth-a.depth}function Aa(d,a){function c(d,e){var f=d.children;if(f&&(v=f.length))for(var g,
v,A=null,h=-1;++h<v;)g=f[h],c(g,A),A=g;a(d,e)}c(d,null)}function mg(d,a){return d.value-a.value}function Jc(d,a){var c=d._pack_next;d._pack_next=a;a._pack_prev=d;a._pack_next=c;c._pack_prev=a}function ke(d,a){d._pack_next=a;a._pack_prev=d}function le(d,a){var c=a.x-d.x,e=a.y-d.y,f=d.r+a.r;return 0.001<f*f-c*c-e*e}function me(d){function a(d){n=Math.min(d.x-d.r,n);l=Math.max(d.x+d.r,l);m=Math.min(d.y-d.r,m);p=Math.max(d.y+d.r,p)}if((c=d.children)&&(h=c.length)){var c,e,f,g,z,v,A,h,n=1/0,l=-1/0,m=1/
0,p=-1/0;if(c.forEach(ng),e=c[0],e.x=-e.r,e.y=0,a(e),1<h&&(f=c[1],f.x=f.r,f.y=0,a(f),2<h))for(g=c[2],ne(e,f,g),a(g),Jc(e,g),e._pack_prev=g,Jc(g,f),f=e._pack_next,z=3;h>z;z++){ne(e,f,g=c[z]);var s=0,x=1,D=1;for(v=f._pack_next;v!==f;v=v._pack_next,x++)if(le(v,g)){s=1;break}if(1==s)for(A=e._pack_prev;A!==v._pack_prev&&!le(A,g);A=A._pack_prev,D++);s?(D>x||x==D&&f.r<e.r?ke(e,f=v):ke(e=A,f),z--):(Jc(e,g),f=g,a(g))}e=(n+l)/2;f=(m+p)/2;for(z=v=0;h>z;z++)g=c[z],g.x-=e,g.y-=f,v=Math.max(v,g.r+Math.sqrt(g.x*
g.x+g.y*g.y));d.r=v;c.forEach(og)}}function ng(d){d._pack_next=d._pack_prev=d}function og(d){delete d._pack_next;delete d._pack_prev}function oe(d,a,c,e){var f=d.children;if(d.x=a+=e*d.x,d.y=c+=e*d.y,d.r*=e,f){d=-1;for(var g=f.length;++d<g;)oe(f[d],a,c,e)}}function ne(d,a,c){var e=d.r+c.r,f=a.x-d.x,g=a.y-d.y;if(e&&(f||g)){var z=a.r+c.r,v=f*f+g*g,z=z*z,e=e*e;a=0.5+(e-z)/(2*v);z=Math.sqrt(Math.max(0,2*z*(e+v)-(e-=v)*e-z*z))/(2*v);c.x=d.x+a*f+z*g;c.y=d.y+a*g-z*f}else c.x=d.x+e,c.y=d.y}function pg(d){return 1+
h.max(d,function(d){return d.y})}function qg(d){return d.reduce(function(d,a){return d+a.x},0)/d.length}function pe(d){var a=d.children;return a&&a.length?pe(a[0]):d}function qe(d){var a,c=d.children;return c&&(a=c.length)?qe(c[a-1]):d}function Kc(d){return{x:d.x,y:d.y,dx:d.dx,dy:d.dy}}function re(d,a){var c=d.x+a[3],e=d.y+a[0],f=d.dx-a[1]-a[3],g=d.dy-a[0]-a[2];return 0>f&&(c+=f/2,f=0),0>g&&(e+=g/2,g=0),{x:c,y:e,dx:f,dy:g}}function db(d){var a=d[0];d=d[d.length-1];return d>a?[a,d]:[d,a]}function Cb(d){return d.rangeExtent?
d.rangeExtent():db(d.range())}function rg(d,a,c,e){var f=c(d[0],d[1]),g=e(a[0],a[1]);return function(d){return g(f(d))}}function Db(d,a){var c,e=0,f=d.length-1,g=d[e],z=d[f];return g>z&&(c=e,e=f,f=c,c=g,g=z,z=c),(a=a(z-g))&&(d[e]=a.floor(g),d[f]=a.ceil(z)),d}function sg(d,a,c,e){var f=[],g=[],z=0,v=Math.min(d.length,a.length)-1;for(d[v]<d[0]&&(d=d.slice().reverse(),a=a.slice().reverse());++z<=v;)f.push(c(d[z-1],d[z])),g.push(e(a[z-1],a[z]));return function(a){var c=h.bisect(d,a,1,v)-1;return g[c](f[c](a))}}
function se(d,a,c,e){function f(){var u=2<Math.min(d.length,a.length)?sg:rg,h=e?Sf:Rf;return z=u(d,a,h,c),v=u(a,d,h,Ka),g}function g(d){return z(d)}var z,v;return g.invert=function(d){return v(d)},g.domain=function(a){return arguments.length?(d=a.map(Number),f()):d},g.range=function(d){return arguments.length?(a=d,f()):a},g.rangeRound=function(d){return g.range(d).interpolate(fe)},g.clamp=function(d){return arguments.length?(e=d,f()):e},g.interpolate=function(d){return arguments.length?(c=d,f()):
c},g.ticks=function(a){return Lc(d,a)},g.tickFormat=function(a,c){return Mc(d,a,c)},g.nice=function(){return Db(d,te),f()},g.copy=function(){return se(d,a,c,e)},f()}function ue(d,a){return h.rebind(d,a,"range","rangeRound","interpolate","clamp")}function te(d){return d=Math.pow(10,Math.round(Math.log(d)/Math.LN10)-1),d&&{floor:function(a){return Math.floor(a/d)*d},ceil:function(a){return Math.ceil(a/d)*d}}}function ve(d,a){var c=db(d),e=c[1]-c[0],f=Math.pow(10,Math.floor(Math.log(e/a)/Math.LN10)),
e=a/e*f;return 0.15>=e?f*=10:0.35>=e?f*=5:0.75>=e&&(f*=2),c[0]=Math.ceil(c[0]/f)*f,c[1]=Math.floor(c[1]/f)*f+0.5*f,c[2]=f,c}function Lc(d,a){return h.range.apply(h,ve(d,a))}function Mc(d,a,c){var e=-Math.floor(Math.log(ve(d,a)[2])/Math.LN10+0.01);return h.format(c?c.replace(we,function(d,a,c,f,r,q,g,h,n,l){return[a,c,f,r,q,g,h,n||"."+(e-2*("%"===l)),l].join("")}):",."+e+"f")}function xe(d,a,c,e){function f(a){return d(c(a))}return f.invert=function(a){return e(d.invert(a))},f.domain=function(a){return arguments.length?
(0>a[0]?(c=Nc,e=tg):(c=ye,e=ze),d.domain(a.map(c)),f):d.domain().map(e)},f.base=function(d){return arguments.length?(a=+d,f):a},f.nice=function(){return d.domain(Db(d.domain(),ug(a))),f},f.ticks=function(){var f=db(d.domain()),g=[];if(f.every(isFinite)){var u=Math.log(a),h=Math.floor(f[0]/u),u=Math.ceil(f[1]/u),n=e(f[0]),f=e(f[1]),l=a%1?2:a;if(c===Nc)for(g.push(-Math.pow(a,-h));h++<u;)for(var m=l-1;0<m;m--)g.push(-Math.pow(a,-h)*m);else{for(;u>h;h++)for(m=1;l>m;m++)g.push(Math.pow(a,h)*m);g.push(Math.pow(a,
h))}for(h=0;g[h]<n;h++);for(u=g.length;g[u-1]>f;u--);g=g.slice(h,u)}return g},f.tickFormat=function(d,g){if(2>arguments.length&&(g=vg),!arguments.length)return g;var v,h=Math.log(a),n=Math.max(0.1,d/f.ticks().length),l=c===Nc?(v=-1E-12,Math.floor):(v=1E-12,Math.ceil);return function(d){return d/e(h*l(c(d)/h+v))<=n?g(d):""}},f.copy=function(){return xe(d.copy(),a,c,e)},ue(f,d)}function ye(d){return Math.log(0>d?0:d)}function ze(d){return Math.exp(d)}function Nc(d){return-Math.log(0<d?0:-d)}function tg(d){return-Math.exp(-d)}
function ug(d){d=Math.log(d);var a={floor:function(a){return Math.floor(a/d)*d},ceil:function(a){return Math.ceil(a/d)*d}};return function(){return a}}function Ae(d,a){function c(a){return d(e(a))}var e=Eb(a),f=Eb(1/a);return c.invert=function(a){return f(d.invert(a))},c.domain=function(a){return arguments.length?(d.domain(a.map(e)),c):d.domain().map(f)},c.ticks=function(d){return Lc(c.domain(),d)},c.tickFormat=function(d,a){return Mc(c.domain(),d,a)},c.nice=function(){return c.domain(Db(c.domain(),
te))},c.exponent=function(d){if(!arguments.length)return a;var g=c.domain();return e=Eb(a=d),f=Eb(1/a),c.domain(g)},c.copy=function(){return Ae(d.copy(),a)},ue(c,d)}function Eb(d){return function(a){return 0>a?-Math.pow(-a,d):Math.pow(a,d)}}function Be(d,c){function e(a){return w[((g.get(a)||g.set(a,d.push(a)))-1)%w.length]}function f(a,c){return h.range(d.length).map(function(d){return a+c*d})}var g,w,z;return e.domain=function(f){if(!arguments.length)return d;d=[];g=new a;for(var w,N=-1,h=f.length;++N<
h;)g.has(w=f[N])||g.set(w,d.push(w));return e[c.t].apply(e,c.a)},e.range=function(d){return arguments.length?(w=d,z=0,c={t:"range",a:arguments},e):w},e.rangePoints=function(a,g){2>arguments.length&&(g=0);var u=a[0],h=a[1],n=(h-u)/(Math.max(1,d.length-1)+g);return w=f(2>d.length?(u+h)/2:u+n*g/2,n),z=0,c={t:"rangePoints",a:arguments},e},e.rangeBands=function(a,g,u){2>arguments.length&&(g=0);3>arguments.length&&(u=g);var h=a[1]<a[0],n=a[h-0],l=(a[1-h]-n)/(d.length-g+2*u);return w=f(n+l*u,l),h&&w.reverse(),
z=l*(1-g),c={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(a,g,u){2>arguments.length&&(g=0);3>arguments.length&&(u=g);var h=a[1]<a[0],n=a[h-0],l=a[1-h],m=Math.floor((l-n)/(d.length-g+2*u));return w=f(n+Math.round((l-n-(d.length-g)*m)/2),m),h&&w.reverse(),z=Math.round(m*(1-g)),c={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return z},e.rangeExtent=function(){return db(c.a[0])},e.copy=function(){return Be(d,c)},e.domain(d)}function Ce(d,a){function c(){var q=0,g=a.length;for(f=
[];++q<g;)f[q-1]=h.quantile(d,q/g);return e}function e(d){return isNaN(d=+d)?0/0:a[h.bisect(f,d)]}var f;return e.domain=function(a){return arguments.length?(d=a.filter(function(d){return!isNaN(d)}).sort(h.ascending),c()):d},e.range=function(d){return arguments.length?(a=d,c()):a},e.quantiles=function(){return f},e.copy=function(){return Ce(d,a)},c()}function De(d,a,c){function e(a){return c[Math.max(0,Math.min(h,Math.floor(g*(a-d))))]}function f(){return g=c.length/(a-d),h=c.length-1,e}var g,h;return e.domain=
function(c){return arguments.length?(d=+c[0],a=+c[c.length-1],f()):[d,a]},e.range=function(d){return arguments.length?(c=d,f()):c},e.copy=function(){return De(d,a,c)},f()}function Ee(d,a){function c(e){return a[h.bisect(d,e)]}return c.domain=function(a){return arguments.length?(d=a,c):d},c.range=function(d){return arguments.length?(a=d,c):a},c.copy=function(){return Ee(d,a)},c}function Fe(d){function a(d){return+d}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(d=c.map(a),
a):d},a.ticks=function(a){return Lc(d,a)},a.tickFormat=function(a,c){return Mc(d,a,c)},a.copy=function(){return Fe(d)},a}function wg(d){return d.innerRadius}function xg(d){return d.outerRadius}function Ge(d){return d.startAngle}function He(d){return d.endAngle}function Ie(d){for(var a,c,e,f=-1,g=d.length;++f<g;)a=d[f],c=a[0],e=a[1]+La,a[0]=c*Math.cos(e),a[1]=c*Math.sin(e);return d}function Je(d){function a(r){function A(){F.push("M",v(d(M),m),l,n(d(H.reverse()),m),"Z")}for(var p,s,x,F=[],H=[],M=[],
t=-1,B=r.length,J=T(c),ua=T(f),E=c===e?function(){return s}:T(e),y=f===g?function(){return x}:T(g);++t<B;)h.call(this,p=r[t],t)?(H.push([s=+J.call(this,p,t),x=+ua.call(this,p,t)]),M.push([+E.call(this,p,t),+y.call(this,p,t)])):H.length&&(A(),H=[],M=[]);return H.length&&A(),F.length?F.join(""):null}var c=va,e=va,f=0,g=ya,h=Ya,v=na,A=v.key,n=v,l="L",m=0.7;return a.x=function(d){return arguments.length?(c=e=d,a):e},a.x0=function(d){return arguments.length?(c=d,a):c},a.x1=function(d){return arguments.length?
(e=d,a):e},a.y=function(d){return arguments.length?(f=g=d,a):g},a.y0=function(d){return arguments.length?(f=d,a):f},a.y1=function(d){return arguments.length?(g=d,a):g},a.defined=function(d){return arguments.length?(h=d,a):h},a.interpolate=function(d){return arguments.length?(A="function"==typeof d?v=d:(v=wc.get(d)||na).key,n=v.reverse||v,l=v.closed?"M":"L",a):A},a.tension=function(d){return arguments.length?(m=d,a):m},a}function yg(d){return d.radius}function Ke(d){return[d.x,d.y]}function zg(d){return function(){var a=
d.apply(this,arguments),c=a[0],a=a[1]+La;return[c*Math.cos(a),c*Math.sin(a)]}}function Ag(){return 64}function Bg(){return"circle"}function Le(d){d=Math.sqrt(d/C);return"M0,"+d+"A"+d+","+d+" 0 1,1 0,"+-d+"A"+d+","+d+" 0 1,1 0,"+d+"Z"}function eb(d,a){return Ub(d,da),d.id=a,d}function Oc(d,a,c,e){var f=d.id;return Da(d,"function"==typeof c?function(d,g,v){d.__transition__[f].tween.set(a,e(c.call(d,d.__data__,g,v)))}:(c=e(c),function(d){d.__transition__[f].tween.set(a,c)}))}function Cg(d){return null==
d&&(d=""),function(){this.textContent=d}}function Fb(d,c,e,f){var g=d.__transition__||(d.__transition__={active:0,count:0}),w=g[e];if(!w){var z=f.time;return w=g[e]={tween:new a,event:h.dispatch("start","end"),time:z,ease:f.ease,delay:f.delay,duration:f.duration},++g.count,h.timer(function(a){function f(a){return g.active>e?n():(g.active=e,p.start.call(d,l,c),w.tween.forEach(function(a,e){(e=e.call(d,l,c))&&D.push(e)}),N(a)||h.timer(N,0,z),1)}function N(a){if(g.active!==e)return n();a=(a-s)/x;for(var f=
m(a),w=D.length;0<w;)D[--w].call(d,f);return 1<=a?(n(),p.end.call(d,l,c),1):void 0}function n(){return--g.count?delete g[e]:delete d.__transition__,1}var l=d.__data__,m=w.ease,p=w.event,s=w.delay,x=w.duration,D=[];return a>=s?f(a):h.timer(f,s,z),1},0,z),w}}function Me(d,a){d.attr("transform",function(d){return"translate("+a(d)+",0)"})}function Ne(d,a){d.attr("transform",function(d){return"translate(0,"+a(d)+")"})}function Dg(d,a,c){if(e=[],c&&1<a.length){for(var e,f,g=db(d.domain()),h=-1,v=a.length,
n=(a[1]-a[0])/++c;++h<v;)for(d=c;0<--d;)(f=+a[h]-d*n)>=g[0]&&e.push(f);--h;for(d=0;++d<c&&(f=+a[h]+d*n)<g[1];)e.push(f)}return e}function Ma(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Na(d,a,c){function e(a){var c=d(a),f=g(c,1);return f-a>a-c?c:f}function f(c){return a(c=d(new ha(c-1)),1),c}function g(d,c){return a(d=new ha(+d),c),d}function h(d,e,g){d=f(d);var w=[];if(1<g)for(;e>d;)c(d)%g||w.push(new Date(+d)),a(d,1);else for(;e>d;)w.push(new Date(+d)),
a(d,1);return w}d.floor=d;d.round=e;d.ceil=f;d.offset=g;d.range=h;var v=d.utc=Gb(d);return v.floor=v,v.round=Gb(e),v.ceil=Gb(f),v.offset=Gb(g),v.range=function(d,a,c){try{ha=Ma;var e=new Ma;return e._=d,h(e,a,c)}finally{ha=Date}},d}function Gb(d){return function(a,c){try{ha=Ma;var e=new Ma;return e._=a,d(e,c)._}finally{ha=Date}}}function Hb(d,a,c,e){for(var f,g,h=0,v=a.length,n=c.length;v>h;){if(e>=n)return-1;if(f=a.charCodeAt(h++),37===f){if(g=Eg[a.charAt(h++)],!g||0>(e=g(d,c,e)))return-1}else if(f!=
c.charCodeAt(e++))return-1}return e}function Ib(d){return RegExp("^(?:"+d.map(h.requote).join("|")+")","i")}function Oe(d){for(var c=new a,e=-1,f=d.length;++e<f;)c.set(d[e].toLowerCase(),e);return c}function ka(d,a,c){d+="";var e=d.length;return c>e?Array(c-e+1).join(a)+d:d}function Pe(d,a,c){ia.lastIndex=0;return(a=ia.exec(a.substring(c,c+2)))?(d.d=+a[0],c+a[0].length):-1}function Qe(d,a,c){ia.lastIndex=0;return(a=ia.exec(a.substring(c,c+2)))?(d.H=+a[0],c+a[0].length):-1}function Pc(d){return d.toISOString()}
function Qc(d,a,c){function e(a){return d(a)}return e.invert=function(a){return Rc(d.invert(a))},e.domain=function(a){return arguments.length?(d.domain(a),e):d.domain().map(Rc)},e.nice=function(d){return e.domain(Db(e.domain(),function(){return d}))},e.ticks=function(c,f){var g,q=e.domain();g=q[0];q=q[q.length-1];g=q>g?[g,q]:[q,g];if("function"!=typeof c){var q=(g[1]-g[0])/c,n=h.bisect(Jb,q);if(n==Jb.length)return a.year(g,c);if(!n)return d.ticks(c).map(Rc);Math.log(q/Jb[n-1])<Math.log(Jb[n]/q)&&
--n;c=a[n];f=c[1];c=c[0].range}return c(g[0],new Date(+g[1]+1),f)},e.tickFormat=function(){return c},e.copy=function(){return Qc(d.copy(),a,c)},h.rebind(e,d,"range","rangeRound","interpolate","clamp")}function Rc(d){return new Date(d)}function Re(d){return function(a){for(var c=d.length-1,e=d[c];!e[1](a);)e=d[--c];return e[0](a)}}function Sc(d){var a=new Date(d,0,1);return a.setFullYear(d),a}function Fg(d){var a=d.getFullYear(),c=Sc(a),e=Sc(a+1);return a+(d-c)/(e-c)}function Tc(d){var a=new Date(Date.UTC(d,
0,1));return a.setUTCFullYear(d),a}function Gg(d){var a=d.getUTCFullYear(),c=Tc(a),e=Tc(a+1);return a+(d-c)/(e-c)}function Hg(d){return d.responseText}function Ig(d){return JSON.parse(d.responseText)}function Jg(d){var a=ja.createRange();return a.selectNode(ja.body),a.createContextualFragment(d.responseText)}function Kg(d){return d.responseXML}var h={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var ja=document,fa=window;try{ja.createElement("div").style.setProperty("opacity",
0,"")}catch(oh){var Se=fa.CSSStyleDeclaration.prototype,Lg=Se.setProperty;Se.setProperty=function(d,a,c){Lg.call(this,d,a+"",c)}}h.ascending=function(d,a){return a>d?-1:d>a?1:d>=a?0:0/0};h.descending=function(d,a){return d>a?-1:a>d?1:a>=d?0:0/0};h.min=function(d,a){var c,e,f=-1,g=d.length;if(1===arguments.length){for(;++f<g&&(null==(c=d[f])||c!=c);)c=void 0;for(;++f<g;)null!=(e=d[f])&&c>e&&(c=e)}else{for(;++f<g&&(null==(c=a.call(d,d[f],f))||c!=c);)c=void 0;for(;++f<g;)null!=(e=a.call(d,d[f],f))&&
c>e&&(c=e)}return c};h.max=function(d,a){var c,e,f=-1,g=d.length;if(1===arguments.length){for(;++f<g&&(null==(c=d[f])||c!=c);)c=void 0;for(;++f<g;)null!=(e=d[f])&&e>c&&(c=e)}else{for(;++f<g&&(null==(c=a.call(d,d[f],f))||c!=c);)c=void 0;for(;++f<g;)null!=(e=a.call(d,d[f],f))&&e>c&&(c=e)}return c};h.extent=function(d,a){var c,e,f,g=-1,h=d.length;if(1===arguments.length){for(;++g<h&&(null==(c=f=d[g])||c!=c);)c=f=void 0;for(;++g<h;)null!=(e=d[g])&&(c>e&&(c=e),e>f&&(f=e))}else{for(;++g<h&&(null==(c=f=
a.call(d,d[g],g))||c!=c);)c=void 0;for(;++g<h;)null!=(e=a.call(d,d[g],g))&&(c>e&&(c=e),e>f&&(f=e))}return[c,f]};h.sum=function(d,a){var c,e=0,f=d.length,g=-1;if(1===arguments.length)for(;++g<f;)isNaN(c=+d[g])||(e+=c);else for(;++g<f;)isNaN(c=+a.call(d,d[g],g))||(e+=c);return e};h.mean=function(d,a){var c,e=d.length,f=0,w=-1,h=0;if(1===arguments.length)for(;++w<e;)g(c=d[w])&&(f+=(c-f)/++h);else for(;++w<e;)g(c=a.call(d,d[w],w))&&(f+=(c-f)/++h);return h?f:void 0};h.quantile=function(d,a){var c=(d.length-
1)*a+1,e=Math.floor(c),f=+d[e-1];return(c-=e)?f+c*(d[e]-f):f};h.median=function(d,a){return 1<arguments.length&&(d=d.map(a)),d=d.filter(g),d.length?h.quantile(d.sort(h.ascending),0.5):void 0};h.bisector=function(d){return{left:function(a,c,e,f){3>arguments.length&&(e=0);for(4>arguments.length&&(f=a.length);f>e;){var g=e+f>>>1;d.call(a,a[g],g)<c?e=g+1:f=g}return e},right:function(a,c,e,f){3>arguments.length&&(e=0);for(4>arguments.length&&(f=a.length);f>e;){var g=e+f>>>1;c<d.call(a,a[g],g)?f=g:e=g+
1}return e}}};var Te=h.bisector(function(d){return d});h.bisectLeft=Te.left;h.bisect=h.bisectRight=Te.right;h.shuffle=function(d){for(var a,c,e=d.length;e;)c=Math.random()*e--|0,a=d[e],d[e]=d[c],d[c]=a;return d};h.permute=function(d,a){for(var c=[],e=-1,f=a.length;++e<f;)c[e]=d[a[e]];return c};h.zip=function(){if(!(e=arguments.length))return[];for(var d=-1,a=h.min(arguments,l),c=Array(a);++d<a;)for(var e,f=-1,g=c[d]=Array(e);++f<e;)g[f]=arguments[f][d];return c};h.transpose=function(d){return h.zip.apply(h,
d)};h.keys=function(d){var a=[],c;for(c in d)a.push(c);return a};h.values=function(d){var a=[],c;for(c in d)a.push(d[c]);return a};h.entries=function(d){var a=[],c;for(c in d)a.push({key:c,value:d[c]});return a};h.merge=function(d){return Array.prototype.concat.apply([],d)};h.range=function(d,a,c){if(3>arguments.length&&(c=1,2>arguments.length&&(a=d,d=0)),1/0===(a-d)/c)throw Error("infinite range");var e,f=[],g;e=Math.abs(c);for(g=1;e*g%1;)g*=10;var h=-1;if(d*=g,a*=g,c*=g,0>c)for(;(e=d+c*++h)>a;)f.push(e/
g);else for(;(e=d+c*++h)<a;)f.push(e/g);return f};h.map=function(d){var c=new a,e;for(e in d)c.set(e,d[e]);return c};m(a,{has:function(d){return Ha+d in this},get:function(d){return this[Ha+d]},set:function(d,a){return this[Ha+d]=a},remove:function(d){return d=Ha+d,d in this&&delete this[d]},keys:function(){var d=[];return this.forEach(function(a){d.push(a)}),d},values:function(){var d=[];return this.forEach(function(a,c){d.push(c)}),d},entries:function(){var d=[];return this.forEach(function(a,c){d.push({key:a,
value:c})}),d},forEach:function(d){for(var a in this)a.charCodeAt(0)===Ue&&d.call(this,a.substring(1),this[a])}});var Ha="\x00",Ue=Ha.charCodeAt(0);h.nest=function(){function d(c,r,h){if(h>=w.length)return f?f.call(g,r):e?r.sort(e):r;for(var n,z,l,m,p=-1,s=r.length,x=w[h++],t=new a;++p<s;)(m=t.get(n=x(z=r[p])))?m.push(z):t.set(n,[z]);return c?(z=c(),l=function(a,e){z.set(a,d(c,e,h))}):(z={},l=function(a,e){z[a]=d(c,e,h)}),t.forEach(l),z}function c(d,a){if(a>=w.length)return d;var e=[],f=n[a++];return d.forEach(function(d,
f){e.push({key:d,values:c(f,a)})}),f?e.sort(function(d,a){return f(d.key,a.key)}):e}var e,f,g={},w=[],n=[];return g.map=function(a,c){return d(c,a,0)},g.entries=function(a){return c(d(h.map,a,0),0)},g.key=function(d){return w.push(d),g},g.sortKeys=function(d){return n[w.length-1]=d,g},g.sortValues=function(d){return e=d,g},g.rollup=function(d){return f=d,g},g};h.set=function(d){var a=new c;if(d)for(var e=0;e<d.length;e++)a.add(d[e]);return a};m(c,{has:function(d){return Ha+d in this},add:function(d){return this[Ha+
d]=!0,d},remove:function(d){return d=Ha+d,d in this&&delete this[d]},values:function(){var d=[];return this.forEach(function(a){d.push(a)}),d},forEach:function(d){for(var a in this)a.charCodeAt(0)===Ue&&d.call(this,a.substring(1))}});h.behavior={};h.rebind=function(d,a){for(var c,e=1,g=arguments.length;++e<g;)d[c=arguments[e]]=f(d,a,a[c]);return d};h.dispatch=function(){for(var d=new e,a=-1,c=arguments.length;++a<c;)d[arguments[a]]=p(d);return d};e.prototype.on=function(d,a){var c=d.indexOf("."),
e="";if(0<=c&&(e=d.substring(c+1),d=d.substring(0,c)),d)return 2>arguments.length?this[d].on(e):this[d].on(e,a);if(2===arguments.length){if(null==a)for(d in this)this.hasOwnProperty(d)&&this[d].on(e,null);return this}};h.event=null;h.mouse=function(d){return y(d,s())};var Tb=/WebKit/.test(fa.navigator.userAgent)?-1:0,Ca=function(d){return Array.prototype.slice.call(d)};try{Ca(ja.documentElement.childNodes)[0].nodeType}catch(ph){Ca=t}var Ub=[].__proto__?function(d,a){d.__proto__=a}:function(d,a){for(var c in a)d[c]=
a[c]};h.touches=function(d,a){return 2>arguments.length&&(a=s().touches),a?Ca(a).map(function(a){var c=y(d,a);return c.identifier=a.identifier,c}):[]};h.behavior.drag=function(){function d(){this.on("mousedown.drag",a).on("touchstart.drag",a)}function a(){function d(){var a=r.parentNode;return null!=p?h.touches(a).filter(function(d){return d.identifier===p})[0]:h.mouse(a)}function f(){l({type:"dragend"});x&&(n(),h.event.target===m&&E(t,"click"));t.on(null!=p?"touchmove.drag-"+p:"mousemove.drag",null).on(null!=
p?"touchend.drag-"+p:"mouseup.drag",null)}var g,r=this,l=c.of(r,arguments),m=h.event.target,p=h.event.touches?h.event.changedTouches[0].identifier:null,s=d(),x=0,t=h.select(fa).on(null!=p?"touchmove.drag-"+p:"mousemove.drag",function(){if(!r.parentNode)return f();var a=d(),c=a[0]-s[0],e=a[1]-s[1];x|=c|e;s=a;n();l({type:"drag",x:a[0]+g[0],y:a[1]+g[1],dx:c,dy:e})}).on(null!=p?"touchend.drag-"+p:"mouseup.drag",f,!0);e?(g=e.apply(r,arguments),g=[g.x-s[0],g.y-s[1]]):g=[0,0];null==p&&n();l({type:"dragstart"})}
var c=J(d,"drag","dragstart","dragend"),e=null;return d.origin=function(a){return arguments.length?(e=a,d):e},h.rebind(d,c,"on")};var cd=function(d,a){return a.querySelector(d)},dd=function(d,a){return a.querySelectorAll(d)},Va=ja.documentElement,Mg=Va.matchesSelector||Va.webkitMatchesSelector||Va.mozMatchesSelector||Va.msMatchesSelector||Va.oMatchesSelector,ed=function(d,a){return Mg.call(d,a)};"function"==typeof Sizzle&&(cd=function(d,a){return Sizzle(d,a)[0]||null},dd=function(d,a){return Sizzle.uniqueSort(Sizzle(d,
a))},ed=Sizzle.matchesSelector);var U=[];h.selection=function(){return fb};h.selection.prototype=U;U.select=function(d){var a,c,e,f,g=[];"function"!=typeof d&&(d=P(d));for(var h=-1,v=this.length;++h<v;){g.push(a=[]);a.parentNode=(e=this[h]).parentNode;for(var n=-1,l=e.length;++n<l;)(f=e[n])?(a.push(c=d.call(f,f.__data__,n)),c&&"__data__"in f&&(c.__data__=f.__data__)):a.push(null)}return K(g)};U.selectAll=function(d){var a,c,e=[];"function"!=typeof d&&(d=W(d));for(var f=-1,g=this.length;++f<g;)for(var h=
this[f],v=-1,n=h.length;++v<n;)(c=h[v])&&(e.push(a=Ca(d.call(c,c.__data__,v))),a.parentNode=c);return K(e)};var Uc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};h.ns={prefix:Uc,qualify:function(d){var a=d.indexOf(":"),c=d;return 0<=a&&(c=d.substring(0,a),d=d.substring(a+1)),Uc.hasOwnProperty(c)?{space:Uc[c],local:d}:d}};U.attr=function(d,a){if(2>arguments.length){if("string"==
typeof d){var c=this.node();return d=h.ns.qualify(d),d.local?c.getAttributeNS(d.space,d.local):c.getAttribute(d)}for(a in d)this.each(oa(a,d[a]));return this}return this.each(oa(d,a))};h.requote=function(d){return d.replace(Ng,"\\$&")};var Ng=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;U.classed=function(d,a){if(2>arguments.length){if("string"==typeof d){var c=this.node(),e=(d=d.trim().split(/^|\s+/g)).length,f=-1;if(a=c.classList)for(;++f<e;){if(!a.contains(d[f]))return!1}else for(a=c.getAttribute("class");++f<
e;)if(!I(d[f]).test(a))return!1;return!0}for(a in d)this.each(Ia(a,d[a]));return this}return this.each(Ia(d,a))};U.style=function(d,a,c){var e=arguments.length;if(3>e){if("string"!=typeof d){2>e&&(a="");for(c in d)this.each(ca(c,d[c],a));return this}if(2>e)return fa.getComputedStyle(this.node(),null).getPropertyValue(d);c=""}return this.each(ca(d,a,c))};U.property=function(d,a){if(2>arguments.length){if("string"==typeof d)return this.node()[d];for(a in d)this.each(x(a,d[a]));return this}return this.each(x(d,
a))};U.text=function(d){return arguments.length?this.each("function"==typeof d?function(){var a=d.apply(this,arguments);this.textContent=null==a?"":a}:null==d?function(){this.textContent=""}:function(){this.textContent=d}):this.node().textContent};U.html=function(d){return arguments.length?this.each("function"==typeof d?function(){var a=d.apply(this,arguments);this.innerHTML=null==a?"":a}:null==d?function(){this.innerHTML=""}:function(){this.innerHTML=d}):this.node().innerHTML};U.append=function(d){function a(){return this.appendChild(ja.createElementNS(this.namespaceURI,
d))}function c(){return this.appendChild(ja.createElementNS(d.space,d.local))}return d=h.ns.qualify(d),this.select(d.local?c:a)};U.insert=function(d,a){function c(e,f){return this.insertBefore(ja.createElementNS(this.namespaceURI,d),a.call(this,e,f))}function e(c,f){return this.insertBefore(ja.createElementNS(d.space,d.local),a.call(this,c,f))}return d=h.ns.qualify(d),"function"!=typeof a&&(a=P(a)),this.select(d.local?e:c)};U.remove=function(){return this.each(function(){var d=this.parentNode;d&&
d.removeChild(this)})};U.data=function(d,c){function e(d,f){var g,q,u,h=d.length,w=f.length,n=Math.min(h,w),z=Array(w),N=Array(w),p=Array(h);if(c){var s=new a,x=new a,t=[];for(g=-1;++g<h;)n=c.call(q=d[g],q.__data__,g),s.has(n)?p[g]=q:s.set(n,q),t.push(n);for(g=-1;++g<w;)n=c.call(f,u=f[g],g),(q=s.get(n))?(z[g]=q,q.__data__=u):x.has(n)||(N[g]={__data__:u}),x.set(n,u),s.remove(n);for(g=-1;++g<h;)s.has(t[g])&&(p[g]=d[g])}else{for(g=-1;++g<n;)q=d[g],u=f[g],q?(q.__data__=u,z[g]=q):N[g]={__data__:u};for(;w>
g;++g)N[g]={__data__:f[g]};for(;h>g;++g)p[g]=d[g]}N.update=z;N.parentNode=z.parentNode=p.parentNode=d.parentNode;v.push(N);l.push(z);m.push(p)}var f,g,h=-1,n=this.length;if(!arguments.length){for(d=Array(n=(f=this[0]).length);++h<n;)(g=f[h])&&(d[h]=g.__data__);return d}var v=id([]),l=K([]),m=K([]);if("function"==typeof d)for(;++h<n;)e(f=this[h],d.call(f,f.parentNode.__data__,h));else for(;++h<n;)e(f=this[h],d);return l.enter=function(){return v},l.exit=function(){return m},l};U.datum=function(d){return arguments.length?
this.property("__data__",d):this.property("__data__")};U.filter=function(d){var a,c,e,f=[];"function"!=typeof d&&(d=B(d));for(var g=0,h=this.length;h>g;g++){f.push(a=[]);a.parentNode=(c=this[g]).parentNode;for(var v=0,n=c.length;n>v;v++)(e=c[v])&&d.call(e,e.__data__,v)&&a.push(e)}return K(f)};U.order=function(){for(var d=-1,a=this.length;++d<a;)for(var c,e=this[d],f=e.length-1,g=e[f];0<=--f;)(c=e[f])&&(g&&g!==c.nextSibling&&g.parentNode.insertBefore(c,g),g=c);return this};U.sort=function(d){d=R.apply(this,
arguments);for(var a=-1,c=this.length;++a<c;)this[a].sort(d);return this.order()};U.on=function(d,a,c){var e=arguments.length;if(3>e){if("string"!=typeof d){2>e&&(a=!1);for(c in d)this.each(fd(c,d[c],a));return this}if(2>e)return(e=this.node()["__on"+d])&&e._;c=!1}return this.each(fd(d,a,c))};var Vb=h.map({mouseenter:"mouseover",mouseleave:"mouseout"});Vb.forEach(function(d){"on"+d in ja&&Vb.remove(d)});U.each=function(d){return Da(this,function(a,c,e){d.call(a,a.__data__,c,e)})};U.call=function(d){var a=
Ca(arguments);return d.apply(a[0]=this,a),this};U.empty=function(){return!this.node()};U.node=function(){for(var d=0,a=this.length;a>d;d++)for(var c=this[d],e=0,f=c.length;f>e;e++){var g=c[e];if(g)return g}return null};var Ja=[];h.selection.enter=id;h.selection.enter.prototype=Ja;Ja.append=U.append;Ja.insert=U.insert;Ja.empty=U.empty;Ja.node=U.node;Ja.select=function(d){for(var a,c,e,f,g,h=[],v=-1,n=this.length;++v<n;){e=(f=this[v]).update;h.push(a=[]);a.parentNode=f.parentNode;for(var l=-1,m=f.length;++l<
m;)(g=f[l])?(a.push(e[l]=c=d.call(f.parentNode,g.__data__,l)),c.__data__=g.__data__):a.push(null)}return K(h)};U.transition=function(){var d,a,c=gb||++Ve,e=[],f=Object.create(Kb);f.time=Date.now();for(var g=-1,h=this.length;++g<h;){e.push(d=[]);for(var v=this[g],n=-1,l=v.length;++n<l;)(a=v[n])&&Fb(a,n,c,f),d.push(a)}return eb(e,c)};var fb=K([[ja]]);fb[0].parentNode=Va;h.select=function(d){return"string"==typeof d?fb.select(d):K([[d]])};h.selectAll=function(d){return"string"==typeof d?fb.selectAll(d):
K([Ca(d)])};h.behavior.zoom=function(){function d(){this.on("mousedown.zoom",l).on("mousemove.zoom",m).on(Og+".zoom",v).on("dblclick.zoom",p).on("touchstart.zoom",s).on("touchmove.zoom",x).on("touchend.zoom",s)}function a(d){return[(d[0]-M[0])/Q,(d[1]-M[1])/Q]}function c(d){Q=Math.max(B[0],Math.min(B[1],d))}function e(d,a){a=[a[0]*Q+M[0],a[1]*Q+M[1]];M[0]+=d[0]-a[0];M[1]+=d[1]-a[1]}function f(){V&&V.domain(ba.range().map(function(d){return(d-M[0])/Q}).map(ba.invert));F&&F.domain(D.range().map(function(d){return(d-
M[1])/Q}).map(D.invert))}function g(d){f();h.event.preventDefault();d({type:"zoom",scale:Q,translate:M})}function l(){var d=this,c=y.of(d,arguments),f=h.event.target,q=0,u=h.select(fa).on("mousemove.zoom",function(){q=1;e(h.mouse(d),v);g(c)}).on("mouseup.zoom",function(){q&&n();u.on("mousemove.zoom",null).on("mouseup.zoom",null);q&&h.event.target===f&&E(u,"click.zoom")}),v=a(h.mouse(d));fa.focus();n()}function v(){sa||(sa=a(h.mouse(this)));c(Math.pow(2,0.002*Lb())*Q);e(h.mouse(this),sa);g(y.of(this,
arguments))}function m(){sa=null}function p(){var d=h.mouse(this),f=a(d),u=Math.log(Q)/Math.LN2;c(Math.pow(2,h.event.shiftKey?Math.ceil(u)-1:Math.floor(u)+1));e(d,f);g(y.of(this,arguments))}function s(){var d=h.touches(this),f=Date.now();if(t=Q,sa={},d.forEach(function(d){sa[d.identifier]=a(d)}),n(),1===d.length){if(500>f-H){var u=d[0],d=a(d[0]);c(2*Q);e(u,d);g(y.of(this,arguments))}H=f}}function x(){var d=h.touches(this),a=d[0],f=sa[a.identifier];if(d=d[1]){var r=sa[d.identifier],a=[(a[0]+d[0])/
2,(a[1]+d[1])/2],f=[(f[0]+r[0])/2,(f[1]+r[1])/2];c(h.event.scale*t)}e(a,f);H=null;g(y.of(this,arguments))}var sa,t,ba,V,D,F,H,M=[0,0],Q=1,B=We,y=J(d,"zoom");return d.translate=function(a){return arguments.length?(M=a.map(Number),f(),d):M},d.scale=function(a){return arguments.length?(Q=+a,f(),d):Q},d.scaleExtent=function(a){return arguments.length?(B=null==a?We:a.map(Number),d):B},d.x=function(a){return arguments.length?(V=a,ba=a.copy(),M=[0,0],Q=1,d):V},d.y=function(a){return arguments.length?(F=
a,D=a.copy(),M=[0,0],Q=1,d):F},h.rebind(d,y,"on")};var Lb,We=[0,1/0],Og="onwheel"in ja?(Lb=function(){return-h.event.deltaY*(h.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ja?(Lb=function(){return h.event.wheelDelta},"mousewheel"):(Lb=function(){return-h.event.detail},"MozMousePixelScroll");Oa.prototype.toString=function(){return this.rgb()+""};h.hsl=function(d,a,c){return 1===arguments.length?d instanceof Wb?Pa(d.h,d.s,d.l):bc(""+d,od,Pa):Pa(+d,+a,+c)};var Vc=Wb.prototype=new Oa;Vc.brighter=
function(d){return d=Math.pow(0.7,arguments.length?d:1),Pa(this.h,this.s,this.l/d)};Vc.darker=function(d){return d=Math.pow(0.7,arguments.length?d:1),Pa(this.h,this.s,d*this.l)};Vc.rgb=function(){return hb(this.h,this.s,this.l)};var C=Math.PI,O=1E-6,L=C/180,X=180/C;h.hcl=function(d,a,c){var e;if(1===arguments.length)if(d instanceof ib)e=Qa(d.h,d.c,d.l);else if(d instanceof jb)e=Qa(Math.atan2(d.b,d.a)*X,Math.sqrt(d.a*d.a+d.b*d.b),d.l);else{e=(d=pd((d=h.rgb(d)).r,d.g,d.b)).l;var f=d.a,g=d.b;e=Qa(Math.atan2(g,
f)*X,Math.sqrt(f*f+g*g),e)}else e=Qa(+d,+a,+c);return e};var Wc=ib.prototype=new Oa;Wc.brighter=function(d){return Qa(this.h,this.c,Math.min(100,this.l+Mb*(arguments.length?d:1)))};Wc.darker=function(d){return Qa(this.h,this.c,Math.max(0,this.l-Mb*(arguments.length?d:1)))};Wc.rgb=function(){return Xb(this.h,this.c,this.l).rgb()};h.lab=function(d,a,c){return 1===arguments.length?d instanceof jb?Ra(d.l,d.a,d.b):d instanceof ib?Xb(d.l,d.c,d.h):pd((d=h.rgb(d)).r,d.g,d.b):Ra(+d,+a,+c)};var Mb=18,ld=0.95047,
md=1,nd=1.08883,Xc=jb.prototype=new Oa;Xc.brighter=function(d){return Ra(Math.min(100,this.l+Mb*(arguments.length?d:1)),this.a,this.b)};Xc.darker=function(d){return Ra(Math.max(0,this.l-Mb*(arguments.length?d:1)),this.a,this.b)};Xc.rgb=function(){return kd(this.l,this.a,this.b)};h.rgb=function(d,a,c){return 1===arguments.length?d instanceof ac?xa(d.r,d.g,d.b):bc(""+d,xa,hb):xa(~~d,~~a,~~c)};var Nb=ac.prototype=new Oa;Nb.brighter=function(d){d=Math.pow(0.7,arguments.length?d:1);var a=this.r,c=this.g,
e=this.b;return a||c||e?(a&&30>a&&(a=30),c&&30>c&&(c=30),e&&30>e&&(e=30),xa(Math.min(255,Math.floor(a/d)),Math.min(255,Math.floor(c/d)),Math.min(255,Math.floor(e/d)))):xa(30,30,30)};Nb.darker=function(d){return d=Math.pow(0.7,arguments.length?d:1),xa(Math.floor(d*this.r),Math.floor(d*this.g),Math.floor(d*this.b))};Nb.hsl=function(){return od(this.r,this.g,this.b)};Nb.toString=function(){return"#"+Sa(this.r)+Sa(this.g)+Sa(this.b)};var kb=h.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",
aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",
darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",
greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});kb.forEach(function(d,a){kb.set(d,bc(a,xa,hb))});h.functor=T;h.xhr=function(d,a,c){function e(){var d=l.status;!d&&l.responseText||200<=d&&300>d||304===d?g.load.call(f,v.call(f,l)):g.error.call(f,l)}var f={},g=
h.dispatch("progress","load","error"),n={},v=ma,l=new (fa.XDomainRequest&&/^(http(s)?:)?\/\//.test(d)?XDomainRequest:XMLHttpRequest);return"onload"in l?l.onload=l.onerror=e:l.onreadystatechange=function(){3<l.readyState&&e()},l.onprogress=function(d){var a=h.event;h.event=d;try{g.progress.call(f,l)}finally{h.event=a}},f.header=function(d,a){return d=(d+"").toLowerCase(),2>arguments.length?n[d]:(null==a?delete n[d]:n[d]=a+"",f)},f.mimeType=function(d){return arguments.length?(a=null==d?null:d+"",f):
a},f.response=function(d){return v=d,f},["get","post"].forEach(function(d){f[d]=function(){return f.send.apply(f,[d].concat(Ca(arguments)))}}),f.send=function(c,e,g){if(2===arguments.length&&"function"==typeof e&&(g=e,e=null),l.open(c,d,!0),null==a||"accept"in n||(n.accept=a+",*/*"),l.setRequestHeader)for(var q in n)l.setRequestHeader(q,n[q]);return null!=a&&l.overrideMimeType&&l.overrideMimeType(a),null!=g&&f.on("error",g).on("load",function(d){g(null,d)}),l.send(null==e?null:e),f},f.abort=function(){return l.abort(),
f},h.rebind(f,g,"on"),2===arguments.length&&"function"==typeof a&&(c=a,a=null),null==c?f:f.get(sf(c))};h.csv=qd(",","text/csv");h.tsv=qd("\t","text/tab-separated-values");var mb,lb,Pg=0,fc={},Ta=null;h.timer=function(d,a,c){if(3>arguments.length){if(2>arguments.length)a=0;else if(!isFinite(a))return;c=Date.now()}var e=fc[d.id];e&&e.callback===d?(e.then=c,e.delay=a):fc[d.id=++Pg]=Ta={callback:d,then:c,delay:a,next:Ta};mb||(lb=clearTimeout(lb),mb=1,sd(ec))};h.timer.flush=function(){for(var d,a=Date.now(),
c=Ta;c;)d=a-c.then,c.delay||(c.flush=c.callback(d)),c=c.next;rd()};var sd=fa.requestAnimationFrame||fa.webkitRequestAnimationFrame||fa.mozRequestAnimationFrame||fa.oRequestAnimationFrame||fa.msRequestAnimationFrame||function(d){setTimeout(d,17)},Ob=[3,3],Qg="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(d,a){var c=Math.pow(10,3*Math.abs(8-a));return{scale:8<a?function(d){return d/c}:function(d){return d*c},symbol:d}});h.formatPrefix=function(d,a){var c=0;return d&&(0>d&&(d*=-1),a&&
(d=h.round(d,gc(d,a))),c=1+Math.floor(1E-12+Math.log(d)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),Qg[8+c/3]};h.round=function(d,a){return a?Math.round(d*(a=Math.pow(10,a)))/a:Math.round(d)};h.format=function(d){d=we.exec(d);var a=d[1]||" ",c=d[2]||">",e=d[3]||"",f=d[4]||"",g=d[5],n=+d[6],v=d[7],l=d[8],m=d[9],p=1,s="",x=!1;switch(l&&(l=+l.substring(1)),(g||"0"===a&&"="===c)&&(g=a="0",c="=",v&&(n-=Math.floor((n-1)/4))),m){case "n":v=!0;m="g";break;case "%":p=100;s="%";
m="f";break;case "p":p=100;s="%";m="r";break;case "b":case "o":case "x":case "X":f&&(f="0"+m.toLowerCase());case "c":case "d":x=!0;l=0;break;case "s":p=-1,m="r"}"#"===f&&(f="");"r"!=m||l||(m="g");null!=l&&("g"==m?l=Math.max(1,Math.min(21,l)):("e"==m||"f"==m)&&(l=Math.max(0,Math.min(20,l))));var m=Rg.get(m)||tf,t=g&&v;return function(d){if(x&&d%1)return"";var V=0>d||0===d&&0>1/d?(d=-d,"-"):e;if(0>p){var D=h.formatPrefix(d,l);d=D.scale(d);s=D.symbol}else d*=p;d=m(d,l);!g&&v&&(d=Yc(d));var D=f.length+
d.length+(t?0:V.length),F=n>D?Array(D=n-D+1).join(a):"";return t&&(d=Yc(F+d)),d.replace(".","."),V+=f,("<"===c?V+d+F:">"===c?F+V+d:"^"===c?F.substring(0,D>>=1)+V+d+F.substring(D):V+(t?d:F+d))+s}};var we=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Rg=h.map({b:function(d){return d.toString(2)},c:function(d){return String.fromCharCode(d)},o:function(d){return d.toString(8)},x:function(d){return d.toString(16)},X:function(d){return d.toString(16).toUpperCase()},g:function(d,
a){return d.toPrecision(a)},e:function(d,a){return d.toExponential(a)},f:function(d,a){return d.toFixed(a)},r:function(d,a){return(d=h.round(d,gc(d,a))).toFixed(Math.max(0,Math.min(20,gc(d*(1+1E-15),a))))}}),Yc=ma;if(Ob)var Sg=Ob.length,Yc=function(d){for(var a=d.lastIndexOf("."),c=0<=a?"."+d.substring(a+1):(a=d.length,""),e=[],f=0,g=Ob[0];0<a&&0<g;)e.push(d.substring(a-=g,a+g)),g=Ob[f=(f+1)%Sg];return e.reverse().join(",")+c};h.geo={};h.geo.stream=function(d,a){d&&Xe.hasOwnProperty(d.type)?Xe[d.type](d,
a):nb(d,a)};var Xe={Feature:function(d,a){nb(d.geometry,a)},FeatureCollection:function(d,a){for(var c=d.features,e=-1,f=c.length;++e<f;)nb(c[e].geometry,a)}},td={Sphere:function(d,a){a.sphere()},Point:function(d,a){var c=d.coordinates;a.point(c[0],c[1])},MultiPoint:function(d,a){for(var c,e=d.coordinates,f=-1,g=e.length;++f<g;)c=e[f],a.point(c[0],c[1])},LineString:function(a,c){hc(a.coordinates,c,0)},MultiLineString:function(a,c){for(var e=a.coordinates,f=-1,g=e.length;++f<g;)hc(e[f],c,0)},Polygon:function(a,
c){ud(a.coordinates,c)},MultiPolygon:function(a,c){for(var e=a.coordinates,f=-1,g=e.length;++f<g;)ud(e[f],c)},GeometryCollection:function(a,c){for(var e=a.geometries,f=-1,g=e.length;++f<g;)nb(e[f],c)}};h.geo.area=function(a){return Wa=0,h.geo.stream(a,Ea),Wa};var Wa,ob,pb,Ea={sphere:function(){Wa+=4*C},point:S,lineStart:S,lineEnd:S,polygonStart:function(){ob=1;pb=0;Ea.lineStart=uf},polygonEnd:function(){var a=2*Math.atan2(pb,ob);Wa+=0>a?4*C+a:a;Ea.lineStart=Ea.lineEnd=Ea.point=S}};h.geo.bounds=vd(ma);
h.geo.centroid=function(a){ea=pa=Z=aa=Y=0;h.geo.stream(a,qa);var c;return pa&&Math.abs(c=Math.sqrt(Z*Z+aa*aa+Y*Y))>O?[Math.atan2(aa,Z)*X,Math.asin(Math.max(-1,Math.min(1,Y/c)))*X]:void 0};var ea,pa,Z,aa,Y,qa={sphere:function(){2>ea&&(ea=2,pa=Z=aa=Y=0)},point:wd,lineStart:ic,lineEnd:jc,polygonStart:function(){2>ea&&(ea=2,pa=Z=aa=Y=0);qa.lineStart=vf},polygonEnd:function(){qa.lineStart=ic}},Fd=Ad(Ya,function(a){var c,e=0/0,f=0/0,g=0/0;return{lineStart:function(){a.lineStart();c=1},point:function(h,
n){var v=0<h?C:-C,l=Math.abs(h-e);if(Math.abs(l-C)<O)a.point(e,f=0<(f+n)/2?C/2:-C/2),a.point(g,f),a.lineEnd(),a.lineStart(),a.point(v,f),a.point(h,f),c=0;else if(g!==v&&l>=C){Math.abs(e-g)<O&&(e-=g*O);Math.abs(h-v)<O&&(h-=v*O);var l=e,m=f,p=h,s,x,t=Math.sin(l-p);f=Math.abs(t)>O?Math.atan((Math.sin(m)*(x=Math.cos(n))*Math.sin(p)-Math.sin(n)*(s=Math.cos(m))*Math.sin(l))/(s*x*t)):(m+n)/2;a.point(g,f);a.lineEnd();a.lineStart();a.point(v,f);c=0}a.point(e=h,f=n);g=v},lineEnd:function(){a.lineEnd();e=f=
0/0},clean:function(){return 2-c}}},function(a,c,e,f){null==a?(e=e*C/2,f.point(-C,e),f.point(0,e),f.point(C,e),f.point(C,0),f.point(C,-e),f.point(0,-e),f.point(-C,-e),f.point(-C,0),f.point(-C,e)):Math.abs(a[0]-c[0])>O?(a=(a[0]<c[0]?1:-1)*C,e=e*a/2,f.point(-a,e),f.point(0,e),f.point(a,e)):f.point(c[0],c[1])}),ub=1E9;h.geo.projection=Fa;h.geo.projectionMutator=oc;(h.geo.equirectangular=function(){return Fa(Za)}).raw=Za.invert=Za;h.geo.rotation=function(a){function c(e){return e=a(e[0]*L,e[1]*L),e[0]*=
X,e[1]*=X,e}return a=pc(a[0]%360*L,a[1]*L,2<a.length?a[2]*L:0),c.invert=function(c){return c=a.invert(c[0]*L,c[1]*L),c[0]*=X,c[1]*=X,c},c};h.geo.circle=function(){function a(){var d="function"==typeof f?f.apply(this,arguments):f,c=pc(-d[0]*L,-d[1]*L,0).invert,g=[];return e(null,null,1,{point:function(a,d){g.push(a=c(a,d));a[0]*=X;a[1]*=X}}),{type:"Polygon",coordinates:[g]}}var c,e,f=[0,0],g=6;return a.origin=function(c){return arguments.length?(f=c,a):f},a.angle=function(f){return arguments.length?
(e=mc((c=+f)*L,g*L),a):c},a.precision=function(f){return arguments.length?(e=mc(c*L,(g=+f)*L),a):g},a.angle(90)};h.geo.distance=function(a,c){var e,f=(c[0]-a[0])*L,g=a[1]*L,h=c[1]*L,n=Math.sin(f),f=Math.cos(f),v=Math.sin(g),g=Math.cos(g),l=Math.sin(h),h=Math.cos(h);return Math.atan2(Math.sqrt((e=h*n)*e+(e=g*l-v*h*f)*e),v*l+g*h*f)};h.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return h.range(Math.ceil(n/D)*D,g,D).map(t).concat(h.range(Math.ceil(p/
F)*F,m,F).map(B)).concat(h.range(Math.ceil(f/ba)*ba,e,ba).filter(function(a){return Math.abs(a%D)>O}).map(s)).concat(h.range(Math.ceil(v/V)*V,l,V).filter(function(a){return Math.abs(a%F)>O}).map(x))}var e,f,g,n,l,v,m,p,s,x,t,B,ba=10,V=ba,D=90,F=360,H=2.5;return a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[t(n).concat(B(m).slice(1),t(g).reverse().slice(1),B(p).reverse().slice(1))]}},a.extent=function(c){return arguments.length?
a.majorExtent(c).minorExtent(c):a.minorExtent()},a.majorExtent=function(c){return arguments.length?(n=+c[0][0],g=+c[1][0],p=+c[0][1],m=+c[1][1],n>g&&(c=n,n=g,g=c),p>m&&(c=p,p=m,m=c),a.precision(H)):[[n,p],[g,m]]},a.minorExtent=function(c){return arguments.length?(f=+c[0][0],e=+c[1][0],v=+c[0][1],l=+c[1][1],f>e&&(c=f,f=e,e=c),v>l&&(c=v,v=l,l=c),a.precision(H)):[[f,v],[e,l]]},a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()},a.majorStep=function(c){return arguments.length?
(D=+c[0],F=+c[1],a):[D,F]},a.minorStep=function(c){return arguments.length?(ba=+c[0],V=+c[1],a):[ba,V]},a.precision=function(c){return arguments.length?(H=+c,s=Kd(v,l,90),x=Ld(f,e,H),t=Kd(p,m,90),B=Ld(n,g,H),a):H},a.majorExtent([[-180,-90+O],[180,90-O]]).minorExtent([[-180,-80-O],[180,80+O]])};h.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||f.apply(this,arguments),e||g.apply(this,arguments)]}}var c,e,f=qc,g=rc;return a.distance=function(){return h.geo.distance(c||f.apply(this,
arguments),e||g.apply(this,arguments))},a.source=function(e){return arguments.length?(f=e,c="function"==typeof e?null:e,a):f},a.target=function(c){return arguments.length?(g=c,e="function"==typeof c?null:c,a):g},a.precision=function(){return arguments.length?a:0},a};h.geo.interpolate=function(a,c){return Bf(a[0]*L,a[1]*L,c[0]*L,c[1]*L)};h.geo.length=function(a){return Pb=0,h.geo.stream(a,Xa),Pb};var Pb,Xa={sphere:S,point:S,lineStart:function(){function a(d,g){var h=Math.sin(g*=L),n=Math.cos(g),l=
Math.abs((d*=L)-c),m=Math.cos(l);Pb+=Math.atan2(Math.sqrt((l=n*Math.sin(l))*l+(l=f*h-e*n*m)*l),e*h+f*n*m);c=d;e=h;f=n}var c,e,f;Xa.point=function(g,h){c=g*L;e=Math.sin(h*=L);f=Math.cos(h);Xa.point=a};Xa.lineEnd=function(){Xa.point=Xa.lineEnd=S}},lineEnd:S,polygonStart:S,polygonEnd:S};(h.geo.conicEqualArea=function(){return sc(Md)}).raw=Md;h.geo.albersUsa=function(){function a(d){var c=d[0],e=d[1];return(50<e?n:-140>c?l:21>e?v:g)(d)}var c,e,f,g=h.geo.conicEqualArea().rotate([98,0]).center([0,38]).parallels([29.5,
45.5]),n=h.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),l=h.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),v=h.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return a.invert=function(a){return c(a)||e(a)||f(a)||g.invert(a)},a.scale=function(c){return arguments.length?(g.scale(c),n.scale(0.6*c),l.scale(c),v.scale(1.5*c),a.translate(g.translate())):g.scale()},a.translate=function(h){if(!arguments.length)return g.translate();var m=
g.scale(),p=h[0],s=h[1];return g.translate(h),n.translate([p-0.4*m,s+0.17*m]),l.translate([p-0.19*m,s+0.2*m]),v.translate([p+0.58*m,s+0.43*m]),c=tc(n,[[-180,50],[-130,72]]),e=tc(l,[[-164,18],[-154,24]]),f=tc(v,[[-67.5,17.5],[-65,19]]),a},a.scale(1E3)};var Qb,wb,Ga={point:S,lineStart:S,lineEnd:S,polygonStart:function(){wb=0;Ga.lineStart=Cf},polygonEnd:function(){Ga.lineStart=Ga.lineEnd=Ga.point=S;Qb+=Math.abs(wb/2)}},ra={point:uc,lineStart:Od,lineEnd:Pd,polygonStart:function(){ra.lineStart=Ef},polygonEnd:function(){ra.point=
uc;ra.lineStart=Od;ra.lineEnd=Pd}};h.geo.path=function(){function a(d){return d&&h.geo.stream(d,f(g.pointRadius("function"==typeof n?+n.apply(this,arguments):n))),g.result()}var c,e,f,g,n=4.5;return a.area=function(a){return Qb=0,h.geo.stream(a,f(Ga)),Qb},a.centroid=function(a){return ea=Z=aa=Y=0,h.geo.stream(a,f(ra)),Y?[Z/Y,aa/Y]:void 0},a.bounds=function(a){return vd(f)(a)},a.projection=function(e){return arguments.length?(f=(c=e)?e.stream||Gf(e):ma,a):c},a.context=function(c){return arguments.length?
(g=null==(e=c)?new Df:new Ff(c),a):e},a.pointRadius=function(c){return arguments.length?(n="function"==typeof c?c:+c,a):n},a.projection(h.geo.albersUsa()).context(null)};h.geo.albers=function(){return h.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1E3)};var Ye=$a(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(h.geo.azimuthalEqualArea=function(){return Fa(Ye)}).raw=Ye;var Ze=$a(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ma);
(h.geo.azimuthalEquidistant=function(){return Fa(Ze)}).raw=Ze;(h.geo.conicConformal=function(){return sc(Qd)}).raw=Qd;(h.geo.conicEquidistant=function(){return sc(Rd)}).raw=Rd;var $e=$a(function(a){return 1/a},Math.atan);(h.geo.gnomonic=function(){return Fa($e)}).raw=$e;xb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-C/2]};(h.geo.mercator=function(){return Sd(xb)}).raw=xb;var af=$a(function(){return 1},Math.asin);(h.geo.orthographic=function(){return Fa(af)}).raw=af;var bf=$a(function(a){return 1/
(1+a)},function(a){return 2*Math.atan(a)});(h.geo.stereographic=function(){return Fa(bf)}).raw=bf;vc.invert=function(a,c){var e=Math.atan2((Math.exp(a)-Math.exp(-a))/2,Math.cos(c)),f;f=Math.sin(c)/((Math.exp(a)+Math.exp(-a))/2);f=1<f?C/2:-1>f?-C/2:Math.asin(f);return[e,f]};(h.geo.transverseMercator=function(){return Sd(vc)}).raw=vc;h.geom={};h.svg={};h.svg.line=function(){return Td(ma)};var wc=h.map({linear:na,"linear-closed":function(a){return na(a)+"Z"},"step-before":xc,"step-after":yc,basis:Ud,
"basis-open":function(a){if(4>a.length)return na(a);for(var c,e=[],f=-1,g=a.length,h=[0],n=[0];3>++f;)c=a[f],h.push(c[0]),n.push(c[1]);e.push(wa(Ua,h)+","+wa(Ua,n));for(--f;++f<g;)c=a[f],h.shift(),h.push(c[0]),n.shift(),n.push(c[1]),ab(e,h,n);return e.join("")},"basis-closed":function(a){for(var c,e,f=-1,g=a.length,h=g+4,n=[],v=[];4>++f;)e=a[f%g],n.push(e[0]),v.push(e[1]);c=[wa(Ua,n),",",wa(Ua,v)];for(--f;++f<h;)e=a[f%g],n.shift(),n.push(e[0]),v.shift(),v.push(e[1]),ab(c,n,v);return c.join("")},bundle:function(a,
c){var e=a.length-1;if(e)for(var f,g,h=a[0][0],n=a[0][1],v=a[e][0]-h,l=a[e][1]-n,m=-1;++m<=e;)f=a[m],g=m/e,f[0]=c*f[0]+(1-c)*(h+g*v),f[1]=c*f[1]+(1-c)*(n+g*l);return Ud(a)},cardinal:function(a,c){return 3>a.length?na(a):a[0]+yb(a,zc(a,c))},"cardinal-open":function(a,c){return 4>a.length?na(a):a[1]+yb(a.slice(1,a.length-1),zc(a,c))},"cardinal-closed":function(a,c){return 3>a.length?na(a):a[0]+yb((a.push(a[0]),a),zc([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>a.length)a=na(a);else{var c=
a[0],e,f,g,h,n=[],l;e=0;l=a.length-1;for(var m=[],p=a[1],s=m[0]=Ac(a[0],p);++e<l;)m[e]=(s+(s=Ac(p,p=a[e+1])))/2;l=(m[e]=s,m);m=-1;for(p=a.length-1;++m<p;)e=Ac(a[m],a[m+1]),1E-6>Math.abs(e)?l[m]=l[m+1]=0:(f=l[m]/e,g=l[m+1]/e,h=f*f+g*g,9<h&&(h=3*e/Math.sqrt(h),l[m]=h*f,l[m+1]=h*g));for(m=-1;++m<=p;)h=(a[Math.min(p,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+l[m]*l[m])),n.push([h||0,l[m]*h||0]);a=c+yb(a,n)}return a}});wc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});var Vd=[0,2/3,1/3,0],Wd=[0,
1/3,2/3,0],Ua=[0,1/6,2/3,1/6];h.geom.hull=function(a){function c(a){if(3>a.length)return[];var d,g,r,h,n,l,m,p,s,x;p=T(e);s=T(f);x=a.length;var t=x-1,D=[],F=[],H=0;if(p===va&&f===ya)d=a;else for(r=0,d=[];x>r;++r)d.push([+p.call(this,g=a[r],r),+s.call(this,g,r)]);for(r=1;x>r;++r)d[r][1]<d[H][1]?H=r:d[r][1]==d[H][1]&&(H=d[r][0]<d[H][0]?r:H);for(r=0;x>r;++r)r!==H&&(n=d[r][1]-d[H][1],h=d[r][0]-d[H][0],D.push({angle:Math.atan2(n,h),index:r}));D.sort(function(a,d){return a.angle-d.angle});x=D[0].angle;
s=D[0].index;p=0;for(r=1;t>r;++r)g=D[r].index,x==D[r].angle?(h=d[s][0]-d[H][0],n=d[s][1]-d[H][1],l=d[g][0]-d[H][0],m=d[g][1]-d[H][1],h*h+n*n>=l*l+m*m?D[r].index=-1:(D[p].index=-1,x=D[r].angle,p=r,s=g)):(x=D[r].angle,p=r,s=g);F.push(H);for(g=r=0;2>r;++g)-1!==D[g].index&&(F.push(D[g].index),r++);for(h=F.length;t>g;++g)if(-1!==D[g].index){for(;!Hf(F[h-2],F[h-1],D[g].index,d);)--h;F[h++]=D[g].index}d=[];for(r=0;h>r;++r)d.push(a[F[r]]);return d}var e=va,f=ya;return arguments.length?c(a):(c.x=function(a){return arguments.length?
(e=a,c):e},c.y=function(a){return arguments.length?(f=a,c):f},c)};h.geom.polygon=function(a){return a.area=function(){for(var c=0,e=a.length,f=a[e-1][1]*a[0][0]-a[e-1][0]*a[0][1];++c<e;)f+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return 0.5*f},a.centroid=function(c){var e,f,g=-1,h=a.length,n=0,l=0,m=a[h-1];for(arguments.length||(c=-1/(6*a.area()));++g<h;)e=m,m=a[g],f=e[0]*m[1]-m[0]*e[1],n+=(e[0]+m[0])*f,l+=(e[1]+m[1])*f;return[n*c,l*c]},a.clip=function(c){for(var e,f,g,h,n,l,m=-1,p=a.length,s=a[p-1];++m<
p;){e=c.slice();c.length=0;h=a[m];n=e[(g=e.length)-1];for(f=-1;++f<g;)l=e[f],Bc(l,s,h)?(Bc(n,s,h)||c.push(Xd(n,l,s,h)),c.push(l)):Bc(n,s,h)&&c.push(Xd(n,l,s,h)),n=l;s=h}return c},a};h.geom.delaunay=function(a){var c=a.map(function(){return[]}),e=[];return Cc(a,function(e){c[e.region.l.index].push(a[e.region.r.index])}),c.forEach(function(c,f){var g=a[f],r=g[0],h=g[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-r,a[1]-h)});c.sort(function(a,d){return a.angle-d.angle});for(var n=0,l=c.length-1;l>
n;n++)e.push([g,c[n],c[n+1]])}),e};h.geom.voronoi=function(a){function c(a){var d,f,r,l=a.map(function(){return[]}),m=T(g),p=T(n),s=a.length;if(m===va&&p===ya)d=a;else for(d=[],r=0;s>r;++r)d.push([+m.call(this,f=a[r],r),+p.call(this,f,r)]);if(Cc(d,function(a){var d,c,e,f,g,r;1===a.a&&0<=a.b?(d=a.ep.r,c=a.ep.l):(d=a.ep.l,c=a.ep.r);1===a.a?(g=d?d.y:-1E6,e=a.c-a.b*g,r=c?c.y:1E6,f=a.c-a.b*r):(e=d?d.x:-1E6,g=a.c-a.a*e,f=c?c.x:1E6,r=a.c-a.a*f);d=[e,g];f=[f,r];l[a.region.l.index].push(d,f);l[a.region.r.index].push(d,
f)}),l=l.map(function(a,c){var e=d[c][0],f=d[c][1],g=a.map(function(a){return Math.atan2(a[0]-e,a[1]-f)}),r=h.range(a.length).sort(function(a,d){return g[a]-g[d]});return r.filter(function(a,d){return!d||g[a]-g[r[d-1]]>O}).map(function(d){return a[d]})}),l.forEach(function(a,c){var e=a.length;if(!e)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<e)){var f=d[c],g=a[0],r=a[1],e=f[0],f=f[1],q=g[0],g=g[1],h=r[0],n=r[1],l=Math.abs(h-q),r=n-g;Math.abs(r)<O?(e=g>f?-1E6:1E6,a.push([-1E6,
e],[1E6,e])):O>l?(e=q>e?-1E6:1E6,a.push([e,-1E6],[e,1E6])):(e=(q-e)*(n-g)>(h-q)*(g-f)?1E6:-1E6,f=Math.abs(r)-l,Math.abs(f)<O?a.push([0>r?e:-e,e]):(0<f&&(e*=-1),a.push([-1E6,e],[1E6,e])))}}),e)for(r=0;s>r;++r)e(l[r]);for(r=0;s>r;++r)l[r].point=a[r];return l}var e,f=null,g=va,n=ya;return arguments.length?c(a):(c.x=function(a){return arguments.length?(g=a,c):g},c.y=function(a){return arguments.length?(n=a,c):n},c.size=function(a){return arguments.length?(null==a?e=null:(f=[+a[0],+a[1]],e=h.geom.polygon([[0,
0],[0,f[1]],f,[f[0],0]]).clip),c):f},c.links=function(a){var d,c,e,f=a.map(function(){return[]}),r=[],q=T(g),h=T(n),l=a.length;if(q===va&&h===ya)d=a;else for(e=0;l>e;++e)d.push([+q.call(this,c=a[e],e),+h.call(this,c,e)]);return Cc(d,function(d){var c=d.region.l.index;d=d.region.r.index;f[c][d]||(f[c][d]=f[d][c]=!0,r.push({source:a[c],target:a[d]}))}),r},c.triangles=function(a){if(g===va&&n===ya)return h.geom.delaunay(a);var d,c,e,f,r,q=T(g),l=T(n);f=0;d=[];for(r=a.length;r>f;++f)c=[+q.call(this,e=
a[f],f),+l.call(this,e,f)],c.data=e,d.push(c);return h.geom.delaunay(d).map(function(a){return a.map(function(a){return a.data})})},c)};var Dc={l:"r",r:"l"};h.geom.quadtree=function(a,c,e,f,g){function h(a){function d(a,c,e,f,g,r,q,h){if(!isNaN(e)&&!isNaN(f))if(a.leaf){var n=a.x,l=a.y;if(null!=n){if(!(0.01>Math.abs(n-e)+Math.abs(l-f))){var m=a.point;a.x=a.y=a.point=null;p(a,m,n,l,g,r,q,h)}p(a,c,e,f,g,r,q,h)}else a.x=e,a.y=f,a.point=c}else p(a,c,e,f,g,r,q,h)}function p(a,c,e,f,g,r,q,h){var n=0.5*(g+
q),l=0.5*(r+h),m=e>=n,u=f>=l,s=(u<<1)+m;a.leaf=!1;a=a.nodes[s]||(a.nodes[s]=Yd());m?g=n:q=n;u?r=l:h=l;d(a,c,e,f,g,r,q,h)}var s,w,x,t,D,F,H,M,B,y=T(l),J=T(m);if(null!=c)F=c,H=e,M=f,B=g;else if(M=B=-(F=H=1/0),w=[],x=[],D=a.length,n)for(t=0;D>t;++t)s=a[t],s.x<F&&(F=s.x),s.y<H&&(H=s.y),s.x>M&&(M=s.x),s.y>B&&(B=s.y),w.push(s.x),x.push(s.y);else for(t=0;D>t;++t){var E=+y(s=a[t],t);s=+J(s,t);F>E&&(F=E);H>s&&(H=s);E>M&&(M=E);s>B&&(B=s);w.push(E);x.push(s)}E=M-F;s=B-H;E>s?B=H+E:M=F+s;var R=Yd();if(R.add=function(a){d(R,
a,+y(a,++t),+J(a,t),F,H,M,B)},R.visit=function(a){bb(a,R,F,H,M,B)},t=-1,null==c){for(;++t<D;)d(R,a[t],w[t],x[t],F,H,M,B);--t}else a.forEach(R.add);return w=x=a=s=null,R}var n,l=va,m=ya;return(n=arguments.length)?(l=If,m=Jf,3===n&&(g=e,f=c,e=c=0),h(a)):(h.x=function(a){return arguments.length?(l=a,h):l},h.y=function(a){return arguments.length?(m=a,h):m},h.size=function(a){return arguments.length?(null==a?c=e=f=g=null:(c=e=0,f=+a[0],g=+a[1]),h):null==c?null:[f,g]},h)};h.interpolateRgb=Ec;h.transform=
function(a){var c=ja.createElementNS(h.ns.prefix.svg,"g");return(h.transform=function(a){c.setAttribute("transform",a);a=c.transform.baseVal.consolidate();return new Zd(a?a.matrix:Tg)})(a)};Zd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Tg={a:1,b:0,c:0,d:1,e:0,f:0};h.interpolateNumber=za;h.interpolateTransform=zb;h.interpolateObject=ae;h.interpolateString=be;var Ab=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
h.interpolate=Ka;h.interpolators=[function(a,c){var e=typeof c;return("string"===e||e!==typeof a?kb.has(c)||/^(#|rgb\(|hsl\()/.test(c)?Ec:be:c instanceof Oa?Ec:"object"===e?Array.isArray(c)?ce:ae:za)(a,c)}];h.interpolateArray=ce;var cf=function(){return ma},Ug=h.map({linear:cf,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Lf},cubic:function(){return Mf},sin:function(){return Nf},exp:function(){return Of},circle:function(){return Pf},elastic:function(a,c){var e;
return 2>arguments.length&&(c=0.45),arguments.length?e=c/(2*C)*Math.asin(1/a):(a=1,e=c/4),function(f){return 1+a*Math.pow(2,10*-f)*Math.sin(2*(f-e)*C/c)}},back:function(a){return a||(a=1.70158),function(c){return c*c*((a+1)*c-a)}},bounce:function(){return Qf}}),Vg=h.map({"in":ma,out:de,"in-out":ee,"out-in":function(a){return ee(de(a))}});h.ease=function(a){var c=a.indexOf("-"),e=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in";return e=Ug.get(e)||cf,c=Vg.get(c)||ma,Kf(c(e.apply(null,Array.prototype.slice.call(arguments,
1))))};h.interpolateHcl=function(a,c){a=h.hcl(a);c=h.hcl(c);var e=a.h,f=a.c,g=a.l,n=c.h-e,l=c.c-f,m=c.l-g;return 180<n?n-=360:-180>n&&(n+=360),function(a){return Xb(e+n*a,f+l*a,g+m*a)+""}};h.interpolateHsl=function(a,c){a=h.hsl(a);c=h.hsl(c);var e=a.h,f=a.s,g=a.l,n=c.h-e,l=c.s-f,m=c.l-g;return 180<n?n-=360:-180>n&&(n+=360),function(a){return hb(e+n*a,f+l*a,g+m*a)+""}};h.interpolateLab=function(a,c){a=h.lab(a);c=h.lab(c);var e=a.l,f=a.a,g=a.b,n=c.l-e,l=c.a-f,m=c.b-g;return function(a){return kd(e+
n*a,f+l*a,g+m*a)+""}};h.interpolateRound=fe;h.layout={};h.layout.bundle=function(){return function(a){for(var c=[],e=-1,f=a.length;++e<f;)c.push(Tf(a[e]));return c}};h.layout.chord=function(){function a(){var d,s,t,G,B,D={},F=[],H=h.range(n),M=[];e=[];f=[];d=0;for(G=-1;++G<n;){s=0;for(B=-1;++B<n;)s+=g[G][B];F.push(s);M.push(h.range(n));d+=s}l&&H.sort(function(a,d){return l(F[a],F[d])});m&&M.forEach(function(a,d){a.sort(function(a,c){return m(g[d][a],g[d][c])})});d=(2*C-x*n)/d;s=0;for(G=-1;++G<n;){t=
s;for(B=-1;++B<n;){var E=H[G],y=M[E][B],J=g[E][y],R=s,la=s+=J*d;D[E+"-"+y]={index:E,subindex:y,startAngle:R,endAngle:la,value:J}}f[E]={index:E,startAngle:t,endAngle:s,value:(s-t)/d};s+=x}for(G=-1;++G<n;)for(B=G-1;++B<n;)d=D[G+"-"+B],s=D[B+"-"+G],(d.value||s.value)&&e.push(d.value<s.value?{source:s,target:d}:{source:d,target:s});p&&c()}function c(){e.sort(function(a,d){return p((a.source.value+a.target.value)/2,(d.source.value+d.target.value)/2)})}var e,f,g,n,l,m,p,s={},x=0;return s.matrix=function(a){return arguments.length?
(n=(g=a)&&g.length,e=f=null,s):g},s.padding=function(a){return arguments.length?(x=a,e=f=null,s):x},s.sortGroups=function(a){return arguments.length?(l=a,e=f=null,s):l},s.sortSubgroups=function(a){return arguments.length?(m=a,e=null,s):m},s.sortChords=function(a){return arguments.length?(p=a,e&&c(),s):p},s.chords=function(){return e||a(),e},s.groups=function(){return f||a(),f},s};h.layout.force=function(){function a(d){return function(a,c,e,f){if(a.point!==d){e=a.cx-d.x;var g=a.cy-d.y,h=1/Math.sqrt(e*
e+g*g);if(y>(f-c)*h)return c=a.charge*h*h,d.px-=e*c,d.py-=g*c,!0;a.point&&isFinite(h)&&(c=a.pointCharge*h*h,d.px-=e*c,d.py-=g*c)}return!a.charge}}function c(a){a.px=h.event.x;a.py=h.event.y;m.resume()}var e,f,g,n,l,m={},p=h.dispatch("start","tick","end"),s=[1,1],x=0.9,t=Wg,B=Xg,E=-30,ba=0.1,y=0.8,D=[],F=[];return m.tick=function(){if(0.005>(f*=0.99))return p.end({type:"end",alpha:f=0}),!0;var c,e,r,q,m,v,t,B,y=D.length,sa=F.length;for(e=0;sa>e;++e)r=F[e],c=r.source,q=r.target,t=q.x-c.x,B=q.y-c.y,
(m=t*t+B*B)&&(m=f*n[e]*((m=Math.sqrt(m))-g[e])/m,t*=m,B*=m,q.x-=t*(v=c.weight/(q.weight+c.weight)),q.y-=B*v,c.x+=t*(v=1-v),c.y+=B*v);if((v=f*ba)&&(t=s[0]/2,B=s[1]/2,e=-1,v))for(;++e<y;)r=D[e],r.x+=(t-r.x)*v,r.y+=(B-r.y)*v;if(E)for(he(c=h.geom.quadtree(D),f,l),e=-1;++e<y;)(r=D[e]).fixed||c.visit(a(r));for(e=-1;++e<y;)r=D[e],r.fixed?(r.x=r.px,r.y=r.py):(r.x-=(r.px-(r.px=r.x))*x,r.y-=(r.py-(r.py=r.y))*x);p.tick({type:"tick",alpha:f})},m.nodes=function(a){return arguments.length?(D=a,m):D},m.links=function(a){return arguments.length?
(F=a,m):F},m.size=function(a){return arguments.length?(s=a,m):s},m.linkDistance=function(a){return arguments.length?(t="function"==typeof a?a:+a,m):t},m.distance=m.linkDistance,m.linkStrength=function(a){return arguments.length?(B="function"==typeof a?a:+a,m):B},m.friction=function(a){return arguments.length?(x=+a,m):x},m.charge=function(a){return arguments.length?(E="function"==typeof a?a:+a,m):E},m.gravity=function(a){return arguments.length?(ba=+a,m):ba},m.theta=function(a){return arguments.length?
(y=+a,m):y},m.alpha=function(a){return arguments.length?(a=+a,f?f=0<a?a:0:0<a&&(p.start({type:"start",alpha:f=a}),h.timer(m.tick)),m):f},m.start=function(){function a(f,g){var q,n;if(!e){e=[];for(c=0;r>c;++c)e[c]=[];for(c=0;h>c;++c)q=F[c],e[q.source.index].push(q.target),e[q.target.index].push(q.source)}n=e[d];for(var l=-1,m=n.length;++l<m;)if(!isNaN(q=n[l][f]))return q;return Math.random()*g}var d,c,e,f,r=D.length,h=F.length,q=s[0],p=s[1];for(d=0;r>d;++d)(f=D[d]).index=d,f.weight=0;for(d=0;h>d;++d)f=
F[d],"number"==typeof f.source&&(f.source=D[f.source]),"number"==typeof f.target&&(f.target=D[f.target]),++f.source.weight,++f.target.weight;for(d=0;r>d;++d)f=D[d],isNaN(f.x)&&(f.x=a("x",q)),isNaN(f.y)&&(f.y=a("y",p)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);if(g=[],"function"==typeof t)for(d=0;h>d;++d)g[d]=+t.call(this,F[d],d);else for(d=0;h>d;++d)g[d]=t;if(n=[],"function"==typeof B)for(d=0;h>d;++d)n[d]=+B.call(this,F[d],d);else for(d=0;h>d;++d)n[d]=B;if(l=[],"function"==typeof E)for(d=0;r>
d;++d)l[d]=+E.call(this,D[d],d);else for(d=0;r>d;++d)l[d]=E;return m.resume()},m.resume=function(){return m.alpha(0.1)},m.stop=function(){return m.alpha(0)},m.drag=function(){return e||(e=h.behavior.drag().origin(ma).on("dragstart.force",Uf).on("drag.force",c).on("dragend.force",Vf)),arguments.length?(this.on("mouseover.force",Wf).on("mouseout.force",Xf).call(e),void 0):e},h.rebind(m,p,"on")};var Wg=20,Xg=1;h.layout.hierarchy=function(){function a(c,r,n){var l=g.call(e,c,r);if(c.depth=r,n.push(c),
l&&(m=l.length)){for(var m,p=-1,s=c.children=[],x=0,t=r+1;++p<m;)r=a(l[p],t,n),r.parent=c,s.push(r),x+=r.value;f&&s.sort(f);h&&(c.value=x)}else h&&(c.value=+h.call(e,c,r)||0);return c}function c(a,d){var f=a.children,g=0;if(f&&(n=f.length))for(var n,l=-1,m=d+1;++l<n;)g+=c(f[l],m);else h&&(g=+h.call(e,a,d)||0);return h&&(a.value=g),g}function e(c){var f=[];return a(c,0,f),f}var f=ag,g=Zf,h=$f;return e.sort=function(a){return arguments.length?(f=a,e):f},e.children=function(a){return arguments.length?
(g=a,e):g},e.value=function(a){return arguments.length?(h=a,e):h},e.revalue=function(a){return c(a,0),a},e};h.layout.partition=function(){function a(c,e,f,g){var r=c.children;if(c.x=e,c.y=c.depth*g,c.dx=f,c.dy=g,r&&(h=r.length)){var h,q,n=-1;for(f=c.value?f/c.value:0;++n<h;)a(q=r[n],e,c=q.value*f,g),e+=c}}function c(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,f=-1;++f<e;)d=Math.max(d,c(a[f]));return 1+d}function e(h,q){var n=f.call(this,h,q);return a(n[0],0,g[0],g[1]/c(n[0])),n}var f=h.layout.hierarchy(),
g=[1,1];return e.size=function(a){return arguments.length?(g=a,e):g},cb(e,f)};h.layout.pie=function(){function a(n){var l=n.map(function(e,f){return+c.call(a,e,f)}),m=+("function"==typeof f?f.apply(this,arguments):f),p=(("function"==typeof g?g.apply(this,arguments):g)-m)/h.sum(l),s=h.range(n.length);null!=e&&s.sort(e===df?function(a,d){return l[d]-l[a]}:function(a,d){return e(n[a],n[d])});var x=[];return s.forEach(function(a){var d;x[a]={data:n[a],value:d=l[a],startAngle:m,endAngle:m+=d*p}}),x}var c=
Number,e=df,f=0,g=2*C;return a.value=function(e){return arguments.length?(c=e,a):c},a.sort=function(c){return arguments.length?(e=c,a):e},a.startAngle=function(c){return arguments.length?(f=c,a):f},a.endAngle=function(c){return arguments.length?(g=c,a):g},a};var df={};h.layout.stack=function(){function a(m,p){var s=m.map(function(e,f){return c.call(a,e,f)}),x=s.map(function(c){return c.map(function(c,e){return[n.call(a,c,e),l.call(a,c,e)]})}),t=e.call(a,x,p),s=h.permute(s,t),x=h.permute(x,t),B,E,
ba=f.call(a,x,p),y=s.length,D=s[0].length;for(B=0;D>B;++B)for(g.call(a,s[0][B],E=ba[B],x[0][B][1]),t=1;y>t;++t)g.call(a,s[t][B],E+=x[t-1][B][1],x[t][B][1]);return m}var c=ma,e=Fc,f=Gc,g=dg,n=bg,l=cg;return a.values=function(e){return arguments.length?(c=e,a):c},a.order=function(c){return arguments.length?(e="function"==typeof c?c:Yg.get(c)||Fc,a):e},a.offset=function(c){return arguments.length?(f="function"==typeof c?c:Zg.get(c)||Gc,a):f},a.x=function(c){return arguments.length?(n=c,a):n},a.y=function(c){return arguments.length?
(l=c,a):l},a.out=function(c){return arguments.length?(g=c,a):g},a};var Yg=h.map({"inside-out":function(a){var c,e=a.length,f=a.map(eg),g=a.map(fg),n=h.range(e).sort(function(a,d){return f[a]-f[d]}),l=0,m=0,s=[],p=[];for(a=0;e>a;++a)c=n[a],m>l?(l+=g[c],s.push(c)):(m+=g[c],p.push(c));return p.reverse().concat(s)},reverse:function(a){return h.range(a.length).reverse()},"default":Fc}),Zg=h.map({silhouette:function(a){var c,e,f,g=a.length,h=a[0].length,n=[],l=0,m=[];for(e=0;h>e;++e){for(f=c=0;g>c;c++)f+=
a[c][e][1];f>l&&(l=f);n.push(f)}for(e=0;h>e;++e)m[e]=(l-n[e])/2;return m},wiggle:function(a){var c,e,f,g,h,n,l,m,s,p=a.length,x=a[0],t=x.length,B=[];B[0]=m=s=0;for(e=1;t>e;++e){for(g=c=0;p>c;++c)g+=a[c][e][1];h=c=0;for(l=x[e][0]-x[e-1][0];p>c;++c){f=0;for(n=(a[c][e][1]-a[c][e-1][1])/(2*l);c>f;++f)n+=(a[f][e][1]-a[f][e-1][1])/l;h+=n*a[c][e][1]}B[e]=m-=g?h/g*l:0;s>m&&(s=m)}for(e=0;t>e;++e)B[e]-=s;return B},expand:function(a){var c,e,f,g=a.length,h=a[0].length,n=1/g,l=[];for(e=0;h>e;++e){for(f=c=0;g>
c;c++)f+=a[c][e][1];if(f)for(c=0;g>c;c++)a[c][e][1]/=f;else for(c=0;g>c;c++)a[c][e][1]=n}for(e=0;h>e;++e)l[e]=0;return l},zero:Gc});h.layout.histogram=function(){function a(d,n){var l,m,s=[],p=d.map(e,this),x=f.call(this,p,n),t=g.call(this,x,p,n);n=-1;for(var B=p.length,E=t.length-1,y=c?1:1/B;++n<E;)l=s[n]=[],l.dx=t[n+1]-(l.x=t[n]),l.y=0;if(0<E)for(n=-1;++n<B;)m=p[n],m>=x[0]&&m<=x[1]&&(l=s[h.bisect(t,m,1,E)-1],l.y+=y,l.push(d[n]));return s}var c=!0,e=Number,f=ig,g=hg;return a.value=function(c){return arguments.length?
(e=c,a):e},a.range=function(c){return arguments.length?(f=T(c),a):f},a.bins=function(c){return arguments.length?(g="number"==typeof c?function(a){return ie(a,c)}:T(c),a):g},a.frequency=function(e){return arguments.length?(c=!!e,a):c},a};h.layout.tree=function(){function a(d,g){function h(a,d){var c=a.children,f=a._tree;if(c&&(g=c.length)){for(var g,n,r,l=c[0],m=l,s=-1;++s<g;){r=c[s];h(r,n);var p=r;if(n){for(var u=void 0,v=p,x=p,w=p.parent.children[0],t=v._tree.mod,A=x._tree.mod,B=n._tree.mod,N=w._tree.mod;n=
Ic(n),v=Hc(v),n&&v;){w=Hc(w);x=Ic(x);x._tree.ancestor=p;u=n._tree.prelim+B-v._tree.prelim-t+e(n,v);if(0<u){var E=n._tree.ancestor.parent==p.parent?n._tree.ancestor:m,y=p,ba=u,E=E._tree,y=y._tree,J=ba/(y.number-E.number);E.change+=J;y.change-=J;y.shift+=ba;y.prelim+=ba;y.mod+=ba;t+=u;A+=u}B+=n._tree.mod;t+=v._tree.mod;N+=w._tree.mod;A+=x._tree.mod}n&&!Ic(x)&&(x._tree.thread=n,x._tree.mod+=B-A);v&&!Hc(w)&&(w._tree.thread=v,w._tree.mod+=t-N,m=p)}n=r}s=g=0;p=a.children;for(m=p.length;0<=--m;)c=p[m]._tree,
c.prelim+=g,c.mod+=g,g+=c.shift+(s+=c.change);r=0.5*(l._tree.prelim+r._tree.prelim);d?(f.prelim=d._tree.prelim+e(a,d),f.mod=f.prelim-r):f.prelim=r}else d&&(f.prelim=d._tree.prelim+e(a,d))}function n(a,d){a.x=a._tree.prelim+d;var c=a.children;if(c&&(e=c.length)){var e,f=-1;for(d+=a._tree.mod;++f<e;)n(c[f],d)}}var l=c.call(this,d,g),m=l[0];Aa(m,function(a,d){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:d?d._tree.number+1:0}});h(m);n(m,-m._tree.prelim);var s=Bb(m,kg),p=Bb(m,jg),x=Bb(m,
lg),t=s.x-e(s,p)/2,B=p.x+e(p,s)/2,E=x.depth||1;return Aa(m,function(a){a.x=(a.x-t)/(B-t)*f[0];a.y=a.depth/E*f[1];delete a._tree}),l}var c=h.layout.hierarchy().sort(null).value(null),e=je,f=[1,1];return a.separation=function(c){return arguments.length?(e=c,a):e},a.size=function(c){return arguments.length?(f=c,a):f},cb(a,c)};h.layout.pack=function(){function a(d,g){var h=c.call(this,d,g),n=h[0];n.x=0;n.y=0;Aa(n,function(a){a.r=Math.sqrt(a.value)});Aa(n,me);var l=f[0],m=f[1],s=Math.max(2*n.r/l,2*n.r/
m);if(0<e){var p=e*s/2;Aa(n,function(a){a.r+=p});Aa(n,me);Aa(n,function(a){a.r-=p});s=Math.max(2*n.r/l,2*n.r/m)}return oe(n,l/2,m/2,1/s),h}var c=h.layout.hierarchy().sort(mg),e=0,f=[1,1];return a.size=function(c){return arguments.length?(f=c,a):f},a.padding=function(c){return arguments.length?(e=+c,a):e},cb(a,c)};h.layout.cluster=function(){function a(d,g){var n,h=c.call(this,d,g),l=h[0],m=0;Aa(l,function(a){var d=a.children;d&&d.length?(a.x=qg(d),a.y=pg(d)):(a.x=n?m+=e(a,n):0,a.y=0,n=a)});var s=
pe(l),p=qe(l),x=s.x-e(s,p)/2,t=p.x+e(p,s)/2;return Aa(l,function(a){a.x=(a.x-x)/(t-x)*f[0];a.y=(1-(l.y?a.y/l.y:1))*f[1]}),h}var c=h.layout.hierarchy().sort(null).value(null),e=je,f=[1,1];return a.separation=function(c){return arguments.length?(e=c,a):e},a.size=function(c){return arguments.length?(f=c,a):f},cb(a,c)};h.layout.treemap=function(){function a(d,c){for(var e,f,g=-1,n=d.length;++g<n;)f=(e=d[g]).value*(0>c?0:c),e.area=isNaN(f)||0>=f?0:f}function c(e){var g=e.children;if(g&&g.length){var n,
h=x(e),l=[],m=g.slice(),q=1/0,s="slice"===B?h.dx:"dice"===B?h.dy:"slice-dice"===B?e.depth&1?h.dy:h.dx:Math.min(h.dx,h.dy);a(m,h.dx*h.dy/e.value);for(l.area=0;0<(e=m.length);){l.push(e=m[e-1]);l.area+=e.area;var p;if(!(p="squarify"!==B)){e=s;n=void 0;var u=l.area;p=0;for(var v=1/0,t=-1,w=l.length;++t<w;)(n=l[t].area)&&(v>n&&(v=n),n>p&&(p=n));p=(n=(u*=u,e*=e,u?Math.max(e*p*E/u,u/(e*v*E)):1/0))<=q}p?(m.pop(),q=n):(l.area-=l.pop().area,f(l,s,h,!1),s=Math.min(h.dx,h.dy),l.length=l.area=0,q=1/0)}l.length&&
(f(l,s,h,!0),l.length=l.area=0);g.forEach(c)}}function e(c){var g=c.children;if(g&&g.length){var n=x(c),h=g.slice(),l=[];a(h,n.dx*n.dy/c.value);for(l.area=0;c=h.pop();)l.push(c),l.area+=c.area,null!=c.z&&(f(l,c.z?n.dx:n.dy,n,!h.length),l.length=l.area=0);g.forEach(e)}}function f(a,d,c,e){var g,n=-1,h=a.length,l=c.x,r=c.y,q=d?m(a.area/d):0;if(d==c.dx){for((e||q>c.dy)&&(q=c.dy);++n<h;)g=a[n],g.x=l,g.y=r,g.dy=q,l+=g.dx=Math.min(c.x+c.dx-l,q?m(g.area/q):0);g.z=!0;g.dx+=c.x+c.dx-l;c.y+=q;c.dy-=q}else{for((e||
q>c.dx)&&(q=c.dx);++n<h;)g=a[n],g.x=l,g.y=r,g.dx=q,r+=g.dy=Math.min(c.y+c.dy-r,q?m(g.area/q):0);g.z=!1;g.dy+=c.y+c.dy-r;c.x+=q;c.dx-=q}}function g(f){f=n||l(f);var h=f[0];return h.x=0,h.y=0,h.dx=s[0],h.dy=s[1],n&&l.revalue(h),a([h],h.dx*h.dy/h.value),(n?e:c)(h),t&&(n=f),f}var n,l=h.layout.hierarchy(),m=Math.round,s=[1,1],p=null,x=Kc,t=!1,B="squarify",E=0.5*(1+Math.sqrt(5));return g.size=function(a){return arguments.length?(s=a,g):s},g.padding=function(a){function d(c){var e=a.call(g,c,c.depth);return null==
e?Kc(c):re(c,"number"==typeof e?[e,e,e,e]:e)}function c(d){return re(d,a)}if(!arguments.length)return p;var e;return x=null==(p=a)?Kc:"function"==(e=typeof a)?d:"number"===e?(a=[a,a,a,a],c):c,g},g.round=function(a){return arguments.length?(m=a?Math.round:Number,g):m!=Number},g.sticky=function(a){return arguments.length?(t=a,n=null,g):t},g.ratio=function(a){return arguments.length?(E=a,g):E},g.mode=function(a){return arguments.length?(B=a+"",g):B},cb(g,l)};h.random={normal:function(a,c){var e=arguments.length;
return 2>e&&(c=1),1>e&&(a=0),function(){var e,f;do e=2*Math.random()-1,f=2*Math.random()-1,f=e*e+f*f;while(!f||1<f);return a+c*e*Math.sqrt(-2*Math.log(f)/f)}},logNormal:function(){var a=h.random.normal.apply(h,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,e=0;a>e;e++)c+=Math.random();return c/a}}};h.scale={};h.scale.linear=function(){return se([0,1],[0,1],Ka,!1)};h.scale.log=function(){return xe(h.scale.linear().domain([0,Math.LN10]),10,ye,
ze)};var vg=h.format(".0e");h.scale.pow=function(){return Ae(h.scale.linear(),1)};h.scale.sqrt=function(){return h.scale.pow().exponent(0.5)};h.scale.ordinal=function(){return Be([],{t:"range",a:[[]]})};h.scale.category10=function(){return h.scale.ordinal().range($g)};h.scale.category20=function(){return h.scale.ordinal().range(ah)};h.scale.category20b=function(){return h.scale.ordinal().range(bh)};h.scale.category20c=function(){return h.scale.ordinal().range(ch)};var $g="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),
ah="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),bh="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),ch="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");
h.scale.quantile=function(){return Ce([],[])};h.scale.quantize=function(){return De(0,1,[0,1])};h.scale.threshold=function(){return Ee([0.5],[0,1])};h.scale.identity=function(){return Fe([0,1])};h.svg.arc=function(){function a(){var d=c.apply(this,arguments),h=e.apply(this,arguments),n=f.apply(this,arguments)+La,l=g.apply(this,arguments)+La,m=(n>l&&(m=n,n=l,l=m),l-n),s=C>m?"0":"1",p=Math.cos(n),n=Math.sin(n),x=Math.cos(l),l=Math.sin(l);return m>=dh?d?"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+
" 0 1,1 0,"+h+"M0,"+d+"A"+d+","+d+" 0 1,0 0,"+-d+"A"+d+","+d+" 0 1,0 0,"+d+"Z":"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"Z":d?"M"+h*p+","+h*n+"A"+h+","+h+" 0 "+s+",1 "+h*x+","+h*l+"L"+d*x+","+d*l+"A"+d+","+d+" 0 "+s+",0 "+d*p+","+d*n+"Z":"M"+h*p+","+h*n+"A"+h+","+h+" 0 "+s+",1 "+h*x+","+h*l+"L0,0Z"}var c=wg,e=xg,f=Ge,g=He;return a.innerRadius=function(e){return arguments.length?(c=T(e),a):c},a.outerRadius=function(c){return arguments.length?(e=T(c),a):e},a.startAngle=function(c){return arguments.length?
(f=T(c),a):f},a.endAngle=function(c){return arguments.length?(g=T(c),a):g},a.centroid=function(){var a=(c.apply(this,arguments)+e.apply(this,arguments))/2,d=(f.apply(this,arguments)+g.apply(this,arguments))/2+La;return[Math.cos(d)*a,Math.sin(d)*a]},a};var La=-C/2,dh=2*C-1E-6;h.svg.line.radial=function(){var a=Td(Ie);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};xc.reverse=yc;yc.reverse=xc;h.svg.area=function(){return Je(ma)};h.svg.area.radial=function(){var a=Je(Ie);return a.radius=a.x,
delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};h.svg.chord=function(){function a(d,g){var h=c(this,e,d,g),n=c(this,f,d,g);return"M"+h.p0+("A"+h.r+","+h.r+" 0 "+ +(h.a1-h.a0>C)+",1 "+h.p1)+(h.a0==n.a0&&h.a1==n.a1?"Q 0,0 "+h.p0:"Q 0,0 "+n.p0+("A"+n.r+","+n.r+" 0 "+ +(n.a1-n.a0>C)+",1 "+n.p1)+("Q 0,0 "+h.p0))+"Z"}function c(a,d,e,f){var l=d.call(a,e,f);d=g.call(a,l,f);e=h.call(a,l,f)+La;a=n.call(a,
l,f)+La;return{r:d,a0:e,a1:a,p0:[d*Math.cos(e),d*Math.sin(e)],p1:[d*Math.cos(a),d*Math.sin(a)]}}var e=qc,f=rc,g=yg,h=Ge,n=He;return a.radius=function(c){return arguments.length?(g=T(c),a):g},a.source=function(c){return arguments.length?(e=T(c),a):e},a.target=function(c){return arguments.length?(f=T(c),a):f},a.startAngle=function(c){return arguments.length?(h=T(c),a):h},a.endAngle=function(c){return arguments.length?(n=T(c),a):n},a};h.svg.diagonal=function(){function a(d,g){var h=c.call(this,d,g),
n=e.call(this,d,g),l=(h.y+n.y)/2,h=[h,{x:h.x,y:l},{x:n.x,y:l},n];return h=h.map(f),"M"+h[0]+"C"+h[1]+" "+h[2]+" "+h[3]}var c=qc,e=rc,f=Ke;return a.source=function(e){return arguments.length?(c=T(e),a):c},a.target=function(c){return arguments.length?(e=T(c),a):e},a.projection=function(c){return arguments.length?(f=c,a):f},a};h.svg.diagonal.radial=function(){var a=h.svg.diagonal(),c=Ke,e=a.projection;return a.projection=function(a){return arguments.length?e(zg(c=a)):c},a};h.svg.symbol=function(){function a(d,
f){return(ef.get(c.call(this,d,f))||Le)(e.call(this,d,f))}var c=Bg,e=Ag;return a.type=function(e){return arguments.length?(c=T(e),a):c},a.size=function(c){return arguments.length?(e=T(c),a):e},a};var ef=h.map({circle:Le,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*ff));var c=a*ff;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+
-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Rb);var c=a*Rb/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Rb);var c=a*Rb/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});h.svg.symbolTypes=ef.keys();var gb,Rb=Math.sqrt(3),ff=Math.tan(30*L),da=[],Ve=0,Kb={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,e=c*a;return 4*(0.5>a?e:3*(a-c)+e-0.75)},delay:0,duration:250};da.call=U.call;da.empty=U.empty;
da.node=U.node;h.transition=function(a){return arguments.length?gb?a.transition():a:fb.transition()};h.transition.prototype=da;da.select=function(a){var c,e,f,g=this.id,h=[];"function"!=typeof a&&(a=P(a));for(var n=-1,l=this.length;++n<l;){h.push(c=[]);for(var m=this[n],s=-1,p=m.length;++s<p;)(f=m[s])&&(e=a.call(f,f.__data__,s))?("__data__"in f&&(e.__data__=f.__data__),Fb(e,s,g,f.__transition__[g]),c.push(e)):c.push(null)}return eb(h,g)};da.selectAll=function(a){var c,e,f,g,h=this.id,n=[];"function"!=
typeof a&&(a=W(a));for(var l=-1,m=this.length;++l<m;)for(var s=this[l],p=-1,x=s.length;++p<x;)if(c=s[p]){g=c.__transition__[h];e=a.call(c,c.__data__,p);n.push(c=[]);for(var t=-1,B=e.length;++t<B;)Fb(f=e[t],t,h,g),c.push(f)}return eb(n,h)};da.filter=function(a){var c,e,f,g=[];"function"!=typeof a&&(a=B(a));for(var h=0,n=this.length;n>h;h++){g.push(c=[]);e=this[h];for(var l=0,m=e.length;m>l;l++)(f=e[l])&&a.call(f,f.__data__,l)&&c.push(f)}return eb(g,this.id,this.time).ease(this.ease())};da.tween=function(a,
c){var e=this.id;return 2>arguments.length?this.node().__transition__[e].tween.get(a):Da(this,null==c?function(c){c.__transition__[e].tween.remove(a)}:function(f){f.__transition__[e].tween.set(a,c)})};da.attr=function(a,c){function e(){this.removeAttribute(n)}function f(){this.removeAttributeNS(n.space,n.local)}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var g="transform"==a?zb:Ka,n=h.ns.qualify(a);return Oc(this,"attr."+a,c,function(a){function c(){var d,e=this.getAttribute(n);
return e!==a&&(d=g(e,a),function(a){this.setAttribute(n,d(a))})}function d(){var c,e=this.getAttributeNS(n.space,n.local);return e!==a&&(c=g(e,a),function(a){this.setAttributeNS(n.space,n.local,c(a))})}return null==a?n.local?f:e:(a+="",n.local?d:c)})};da.attrTween=function(a,c){function e(a,d){var f=c.call(this,a,d,this.getAttribute(g));return f&&function(a){this.setAttribute(g,f(a))}}function f(a,d){var e=c.call(this,a,d,this.getAttributeNS(g.space,g.local));return e&&function(a){this.setAttributeNS(g.space,
g.local,e(a))}}var g=h.ns.qualify(a);return this.tween("attr."+a,g.local?f:e)};da.style=function(a,c,e){function f(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(e in a)this.style(e,a[e],c);return this}e=""}var h="transform"==a?zb:Ka;return Oc(this,"style."+a,c,function(c){function g(){var f,n=fa.getComputedStyle(this,null).getPropertyValue(a);return n!==c&&(f=h(n,c),function(c){this.style.setProperty(a,f(c),e)})}return null==c?f:(c+="",g)})};
da.styleTween=function(a,c,e){return 3>arguments.length&&(e=""),this.tween("style."+a,function(f,g){var h=c.call(this,f,g,fa.getComputedStyle(this,null).getPropertyValue(a));return h&&function(c){this.style.setProperty(a,h(c),e)}})};da.text=function(a){return Oc(this,"text",a,Cg)};da.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};da.ease=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].ease:
("function"!=typeof a&&(a=h.ease.apply(h,arguments)),Da(this,function(e){e.__transition__[c].ease=a}))};da.delay=function(a){var c=this.id;return Da(this,"function"==typeof a?function(e,f,g){e.__transition__[c].delay=a.call(e,e.__data__,f,g)|0}:(a|=0,function(e){e.__transition__[c].delay=a}))};da.duration=function(a){var c=this.id;return Da(this,"function"==typeof a?function(e,f,g){e.__transition__[c].duration=Math.max(1,a.call(e,e.__data__,f,g)|0)}:(a=Math.max(1,0|a),function(e){e.__transition__[c].duration=
a}))};da.each=function(a,c){var e=this.id;if(2>arguments.length){var f=Kb,g=gb;gb=e;Da(this,function(c,f,g){Kb=c.__transition__[e];a.call(c,c.__data__,f,g)});Kb=f;gb=g}else Da(this,function(f){f.__transition__[e].event.on(a,c)});return this};da.transition=function(){for(var a,c,e,f,g=this.id,h=++Ve,n=[],l=0,m=this.length;m>l;l++){n.push(a=[]);c=this[l];for(var s=0,p=c.length;p>s;s++)(e=c[s])&&(f=Object.create(e.__transition__[g]),f.delay+=f.duration,Fb(e,s,h,f)),a.push(e)}return eb(n,h)};h.svg.axis=
function(){function a(d){d.each(function(){var a,d=h.select(this),t=null==p?e.ticks?e.ticks.apply(e,s):e.domain():p,B=null==c?e.tickFormat?e.tickFormat.apply(e,s):String:c,E=Dg(e,t,x),y=d.selectAll(".tick.minor").data(E,String),E=y.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),J=h.transition(y.exit()).style("opacity",1E-6).remove(),y=h.transition(y).style("opacity",1),R=d.selectAll(".tick.major").data(t,String),t=R.enter().insert("g","path").attr("class","tick major").style("opacity",
1E-6),la=h.transition(R.exit()).style("opacity",1E-6).remove(),S=h.transition(R).style("opacity",1),C=Cb(e),d=d.selectAll(".domain").data([0]),d=(d.enter().append("path").attr("class","domain"),h.transition(d)),K=e.copy(),P=this.__chart__||K;this.__chart__=K;t.append("line");t.append("text");var I=t.select("line"),ca=S.select("line"),B=R.select("text").text(B),R=t.select("text"),L=S.select("text");switch(f){case "bottom":a=Me;E.attr("y2",n);y.attr("x2",0).attr("y2",n);I.attr("y2",g);R.attr("y",Math.max(g,
0)+m);ca.attr("x2",0).attr("y2",g);L.attr("x",0).attr("y",Math.max(g,0)+m);B.attr("dy",".71em").style("text-anchor","middle");d.attr("d","M"+C[0]+","+l+"V0H"+C[1]+"V"+l);break;case "top":a=Me;E.attr("y2",-n);y.attr("x2",0).attr("y2",-n);I.attr("y2",-g);R.attr("y",-(Math.max(g,0)+m));ca.attr("x2",0).attr("y2",-g);L.attr("x",0).attr("y",-(Math.max(g,0)+m));B.attr("dy","0em").style("text-anchor","middle");d.attr("d","M"+C[0]+","+-l+"V0H"+C[1]+"V"+-l);break;case "left":a=Ne;E.attr("x2",-n);y.attr("x2",
-n).attr("y2",0);I.attr("x2",-g);R.attr("x",-(Math.max(g,0)+m));ca.attr("x2",-g).attr("y2",0);L.attr("x",-(Math.max(g,0)+m)).attr("y",0);B.attr("dy",".32em").style("text-anchor","end");d.attr("d","M"+-l+","+C[0]+"H0V"+C[1]+"H"+-l);break;case "right":a=Ne,E.attr("x2",n),y.attr("x2",n).attr("y2",0),I.attr("x2",g),R.attr("x",Math.max(g,0)+m),ca.attr("x2",g).attr("y2",0),L.attr("x",Math.max(g,0)+m).attr("y",0),B.attr("dy",".32em").style("text-anchor","start"),d.attr("d","M"+l+","+C[0]+"H0V"+C[1]+"H"+
l)}if(e.ticks)t.call(a,P),S.call(a,K),la.call(a,K),E.call(a,P),y.call(a,K),J.call(a,K);else{var O=K.rangeBand()/2,E=function(a){return K(a)+O};t.call(a,E);S.call(a,E)}})}var c,e=h.scale.linear(),f=gf,g=6,n=6,l=6,m=3,s=[10],p=null,x=0;return a.scale=function(c){return arguments.length?(e=c,a):e},a.orient=function(c){return arguments.length?(f=c in eh?c+"":gf,a):f},a.ticks=function(){return arguments.length?(s=arguments,a):s},a.tickValues=function(c){return arguments.length?(p=c,a):p},a.tickFormat=
function(e){return arguments.length?(c=e,a):c},a.tickSize=function(c,e){if(!arguments.length)return g;var f=arguments.length-1;return g=+c,n=1<f?+e:g,l=0<f?+arguments[f]:g,a},a.tickPadding=function(c){return arguments.length?(m=+c,a):m},a.tickSubdivide=function(c){return arguments.length?(x=+c,a):x},a};var gf="bottom",eh={top:1,right:1,bottom:1,left:1};h.svg.brush=function(){function a(n){n.each(function(){var n,l=h.select(this),m=l.selectAll(".background").data([0]),t=l.selectAll(".extent").data([0]),
B=l.selectAll(".resize").data(x,String);l.style("pointer-events","all").on("mousedown.brush",g).on("touchstart.brush",g);m.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");t.enter().append("rect").attr("class","extent").style("cursor","move");B.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return fh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?
-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");B.style("display",a.empty()?"none":null);B.exit().remove();s&&(n=Cb(s),m.attr("x",n[0]).attr("width",n[1]-n[0]),e(l));p&&(n=Cb(p),m.attr("y",n[0]).attr("height",n[1]-n[0]),f(l));c(l)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+t[+/e$/.test(a)][0]+","+t[+/^s/.test(a)][1]+")"})}function e(a){a.select(".extent").attr("x",t[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",t[1][0]-
t[0][0])}function f(a){a.select(".extent").attr("y",t[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",t[1][1]-t[0][1])}function g(){function x(){var a=h.event.changedTouches;return a?h.touches(R,a)[0]:h.mouse(R)}function u(){var a=x(),d=!1;J&&(a[0]+=J[0],a[1]+=J[1]);ca||(h.event.altKey?(y||(y=[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]),G[0]=t[+(a[0]<y[0])][0],G[1]=t[+(a[1]<y[1])][1]):y=null);P&&B(a,s,0)&&(e(S),d=!0);I&&B(a,p,1)&&(f(S),d=!0);d&&(c(S),C({type:"brush",mode:ca?"move":"resize"}))}
function B(a,c,d){var e,f,g=Cb(c);c=g[0];var g=g[1],n=G[d],h=t[1][d]-t[0][d];return ca&&(c-=n,g-=h+n),e=Math.max(c,Math.min(g,a[d])),ca?f=(e+=n)+h:(y&&(n=Math.max(c,Math.min(g,2*y[d]-e))),e>n?(f=e,e=n):f=n),t[0][d]!==e||t[1][d]!==f?(l=null,t[0][d]=e,t[1][d]=f,!0):void 0}function E(){u();S.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);h.select("body").style("cursor",null);L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",
null).on("keydown.brush",null).on("keyup.brush",null);C({type:"brushend"});n()}var y,J,R=this,la=h.select(h.event.target),C=m.of(R,arguments),S=h.select(R),K=la.datum(),P=!/^(n|s)$/.test(K)&&s,I=!/^(e|w)$/.test(K)&&p,ca=la.classed("extent"),G=x(),L=h.select(fa).on("mousemove.brush",u).on("mouseup.brush",E).on("touchmove.brush",u).on("touchend.brush",E).on("keydown.brush",function(){32==h.event.keyCode&&(ca||(y=null,G[0]-=t[1][0],G[1]-=t[1][1],ca=2),n())}).on("keyup.brush",function(){32==h.event.keyCode&&
2==ca&&(G[0]+=t[1][0],G[1]+=t[1][1],ca=0,n())});if(ca)G[0]=t[0][0]-G[0],G[1]=t[0][1]-G[1];else if(K){var O=+/w$/.test(K),K=+/^n/.test(K);J=[t[1-O][0]-G[0],t[1-K][1]-G[1]];G[0]=t[O][0];G[1]=t[K][1]}else h.event.altKey&&(y=G.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null);h.select("body").style("cursor",la.style("cursor"));C({type:"brushstart"});u();n()}var l,m=J(a,"brushstart","brush","brushend"),s=null,p=null,x=Zc[0],t=[[0,0],[0,0]];return a.x=function(c){return arguments.length?
(s=c,x=Zc[!s<<1|!p],a):s},a.y=function(c){return arguments.length?(p=c,x=Zc[!s<<1|!p],a):p},a.extent=function(c){var e,f,g,n,h;return arguments.length?(l=[[0,0],[0,0]],s&&(e=c[0],f=c[1],p&&(e=e[0],f=f[0]),l[0][0]=e,l[1][0]=f,s.invert&&(e=s(e),f=s(f)),e>f&&(h=e,e=f,f=h),t[0][0]=0|e,t[1][0]=0|f),p&&(g=c[0],n=c[1],s&&(g=g[1],n=n[1]),l[0][1]=g,l[1][1]=n,p.invert&&(g=p(g),n=p(n)),g>n&&(h=g,g=n,n=h),t[0][1]=0|g,t[1][1]=0|n),a):(c=l||t,s&&(e=c[0][0],f=c[1][0],l||(e=t[0][0],f=t[1][0],s.invert&&(e=s.invert(e),
f=s.invert(f)),e>f&&(h=e,e=f,f=h))),p&&(g=c[0][1],n=c[1][1],l||(g=t[0][1],n=t[1][1],p.invert&&(g=p.invert(g),n=p.invert(n)),g>n&&(h=g,g=n,n=h))),s&&p?[[e,g],[f,n]]:s?[e,f]:p&&[g,n])},a.clear=function(){return l=null,t[0][0]=t[0][1]=t[1][0]=t[1][1]=0,a},a.empty=function(){return s&&t[0][0]===t[1][0]||p&&t[0][1]===t[1][1]},h.rebind(a,m,"on")};var fh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zc=["n e s w nw ne se sw".split(" "),
["e","w"],["n","s"],[]];h.time={};var ha=Date;Ma.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ba.setUTCDate.apply(this._,arguments)},setDay:function(){Ba.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ba.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ba.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ba.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ba.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ba.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){Ba.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ba.setTime.apply(this._,arguments)}};var Ba=Date.prototype,hf="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),jf="Sun Mon Tue Wed Thu Fri Sat".split(" "),$c="January February March April May June July August September October November December".split(" "),ad="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");h.time.year=Na(function(a){return a=h.time.day(a),a.setMonth(0,1),
a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});h.time.years=h.time.year.range;h.time.years.utc=h.time.year.utc.range;h.time.day=Na(function(a){var c=new ha(1970,0);return c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});h.time.days=h.time.day.range;h.time.days.utc=h.time.day.utc.range;h.time.dayOfYear=function(a){var c=h.time.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-
c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var e=h.time[a]=Na(function(a){return(a=h.time.day(a)).setDate(a.getDate()-(a.getDay()+c)%7),a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var d=h.time.year(a).getDay();return Math.floor((h.time.dayOfYear(a)+(d+c)%7)/7)-(d!==c)});h.time[a+"s"]=e.range;h.time[a+"s"].utc=e.utc.range;h.time[a+"OfYear"]=function(a){var d=h.time.year(a).getDay();
return Math.floor((h.time.dayOfYear(a)+(d+c)%7)/7)}});h.time.week=h.time.sunday;h.time.weeks=h.time.sunday.range;h.time.weeks.utc=h.time.sunday.utc.range;h.time.weekOfYear=h.time.sundayOfYear;h.time.format=function(a){function c(f){for(var g,n,h,l=[],m=-1,s=0;++m<e;)37===a.charCodeAt(m)&&(l.push(a.substring(s,m)),null!=(n=gh[g=a.charAt(++m)])&&(g=a.charAt(++m)),(h=Sb[g])&&(g=h(f,null==n?"e"===g?" ":"0":n)),l.push(g),s=m+1);return l.push(a.substring(s,m)),l.join("")}var e=a.length;return c.parse=function(c){var e=
{y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Hb(e,a,c,0)!=c.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);c=new ha;return c.setFullYear(e.y,e.m,e.d),c.setHours(e.H,e.M,e.S,e.L),c},c.toString=function(){return a},c};var kf=Ib(hf),lf=Ib(jf),mf=Ib($c),hh=Oe($c),nf=Ib(ad),ih=Oe(ad),gh={"-":"",_:" ",0:"0"},Sb={a:function(a){return jf[a.getDay()]},A:function(a){return hf[a.getDay()]},b:function(a){return ad[a.getMonth()]},B:function(a){return $c[a.getMonth()]},c:h.time.format("%a %b %e %X %Y"),d:function(a,c){return ka(a.getDate(),
c,2)},e:function(a,c){return ka(a.getDate(),c,2)},H:function(a,c){return ka(a.getHours(),c,2)},I:function(a,c){return ka(a.getHours()%12||12,c,2)},j:function(a,c){return ka(1+h.time.dayOfYear(a),c,3)},L:function(a,c){return ka(a.getMilliseconds(),c,3)},m:function(a,c){return ka(a.getMonth()+1,c,2)},M:function(a,c){return ka(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ka(a.getSeconds(),c,2)},U:function(a,c){return ka(h.time.sundayOfYear(a),c,2)},w:function(a){return a.getDay()},
W:function(a,c){return ka(h.time.mondayOfYear(a),c,2)},x:h.time.format("%m/%d/%Y"),X:h.time.format("%H:%M:%S"),y:function(a,c){return ka(a.getFullYear()%100,c,2)},Y:function(a,c){return ka(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var e=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ka(e,"0",2)+ka(c,"0",2)},"%":function(){return"%"}},Eg={a:function(a,c,e){lf.lastIndex=0;return(a=lf.exec(c.substring(e)))?e+a[0].length:-1},A:function(a,c,e){kf.lastIndex=0;return(a=
kf.exec(c.substring(e)))?e+a[0].length:-1},b:function(a,c,e){nf.lastIndex=0;return(c=nf.exec(c.substring(e)))?(a.m=ih.get(c[0].toLowerCase()),e+c[0].length):-1},B:function(a,c,e){mf.lastIndex=0;return(c=mf.exec(c.substring(e)))?(a.m=hh.get(c[0].toLowerCase()),e+c[0].length):-1},c:function(a,c,e){return Hb(a,""+Sb.c,c,e)},d:Pe,e:Pe,H:Qe,I:Qe,L:function(a,c,e){ia.lastIndex=0;return(c=ia.exec(c.substring(e,e+3)))?(a.L=+c[0],e+c[0].length):-1},m:function(a,c,e){ia.lastIndex=0;return(c=ia.exec(c.substring(e,
e+2)))?(a.m=c[0]-1,e+c[0].length):-1},M:function(a,c,e){ia.lastIndex=0;return(c=ia.exec(c.substring(e,e+2)))?(a.M=+c[0],e+c[0].length):-1},p:function(a,c,e){c=jh.get(c.substring(e,e+=2).toLowerCase());return null==c?-1:(a.p=c,e)},S:function(a,c,e){ia.lastIndex=0;return(c=ia.exec(c.substring(e,e+2)))?(a.S=+c[0],e+c[0].length):-1},x:function(a,c,e){return Hb(a,""+Sb.x,c,e)},X:function(a,c,e){return Hb(a,""+Sb.X,c,e)},y:function(a,c,e){ia.lastIndex=0;return(c=ia.exec(c.substring(e,e+2)))?(a.y=+c[0]+
(68<+c[0]?1900:2E3),e+c[0].length):-1},Y:function(a,c,e){ia.lastIndex=0;return(c=ia.exec(c.substring(e,e+4)))?(a.y=+c[0],e+c[0].length):-1}},ia=/^\s*\d+/,jh=h.map({am:0,pm:1});h.time.format.utc=function(a){function c(a){try{ha=Ma;var d=new ha;return d._=a,e(d)}finally{ha=Date}}var e=h.time.format(a);return c.parse=function(a){try{ha=Ma;var c=e.parse(a);return c&&c._}finally{ha=Date}},c.toString=e.toString,c};var of=h.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");h.time.format.iso=Date.prototype.toISOString&&
+new Date("2000-01-01T00:00:00.000Z")?Pc:of;Pc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Pc.toString=of.toString;h.time.second=Na(function(a){return new ha(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});h.time.seconds=h.time.second.range;h.time.seconds.utc=h.time.second.utc.range;h.time.minute=Na(function(a){return new ha(6E4*Math.floor(a/6E4))},function(a,c){a.setTime(a.getTime()+6E4*Math.floor(c))},function(a){return a.getMinutes()});
h.time.minutes=h.time.minute.range;h.time.minutes.utc=h.time.minute.utc.range;h.time.hour=Na(function(a){var c=a.getTimezoneOffset()/60;return new ha(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});h.time.hours=h.time.hour.range;h.time.hours.utc=h.time.hour.utc.range;h.time.month=Na(function(a){return a=h.time.day(a),a.setDate(1),a},function(a,c){a.setMonth(a.getMonth()+c)},function(a){return a.getMonth()});h.time.months=h.time.month.range;
h.time.months.utc=h.time.month.utc.range;var Jb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],bd=[[h.time.second,1],[h.time.second,5],[h.time.second,15],[h.time.second,30],[h.time.minute,1],[h.time.minute,5],[h.time.minute,15],[h.time.minute,30],[h.time.hour,1],[h.time.hour,3],[h.time.hour,6],[h.time.hour,12],[h.time.day,1],[h.time.day,2],[h.time.week,1],[h.time.month,1],[h.time.month,3],[h.time.year,1]],kh=[[h.time.format("%Y"),Ya],[h.time.format("%B"),
function(a){return a.getMonth()}],[h.time.format("%b %d"),function(a){return 1!=a.getDate()}],[h.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[h.time.format("%I %p"),function(a){return a.getHours()}],[h.time.format("%I:%M"),function(a){return a.getMinutes()}],[h.time.format(":%S"),function(a){return a.getSeconds()}],[h.time.format(".%L"),function(a){return a.getMilliseconds()}]],pf=h.scale.linear(),lh=Re(kh);bd.year=function(a,c){return pf.domain(a.map(Fg)).ticks(c).map(Sc)};
h.time.scale=function(){return Qc(h.scale.linear(),bd,lh)};var qf=bd.map(function(a){return[a[0].utc,a[1]]}),mh=[[h.time.format.utc("%Y"),Ya],[h.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[h.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[h.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[h.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[h.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[h.time.format.utc(":%S"),
function(a){return a.getUTCSeconds()}],[h.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],nh=Re(mh);return qf.year=function(a,c){return pf.domain(a.map(Gg)).ticks(c).map(Tc)},h.time.scale.utc=function(){return Qc(h.scale.linear(),qf,nh)},h.text=function(){return h.xhr.apply(h,arguments).response(Hg)},h.json=function(a,c){return h.xhr(a,"application/json",c).response(Ig)},h.html=function(a,c){return h.xhr(a,"text/html",c).response(Jg)},h.xml=function(){return h.xhr.apply(h,arguments).response(Kg)},
h}();
(function(g){var l=g.d3,m=Error("d3.layer must be initialized with a base"),a=Error("d3.layer must specify a `dataBind` method."),c=Error("d3.layer must specify an `insert` method."),f=function(a){if(!a)throw m;this._base=a;this._handlers={}};f.prototype.dataBind=function(){throw a;};f.prototype.insert=function(){throw c;};f.prototype.on=function(a,c,f){f=f||{};a in this._handlers||(this._handlers[a]=[]);this._handlers[a].push({callback:c,chart:f.chart||null})};f.prototype.off=function(a,c){var f,g=
this._handlers[a];if(g){if(1===arguments.length)return g.length=0,void 0;for(f=g.length-1;-1<f;--f)g[f].callback===c&&g.splice(f,1)}};f.prototype.draw=function(a){var c,f,g,m,J;if(c=this.dataBind.call(this._base,a),!(c instanceof l.selection))throw Error("Invalid selection defined by `dataBind` method.");a=c.enter();a._chart=this._base._chart;c=[{name:"update",selection:c},{name:"enter",selection:this.insert.bind(a)},{name:"merge",selection:c},{name:"exit",selection:c.exit.bind(c)}];for(var y=0,t=
c.length;t>y;++y){if(g=c[y].name,f=c[y].selection,"function"==typeof f&&(f=f()),!(f instanceof l.selection))throw Error('Invalid selection defined for "'+g+"' lifecycle event.");if(a=this._handlers[g])for(m=0,J=a.length;J>m;++m)f._chart=a[m].chart||this._base._chart,f.call(a[m].callback);if(a=this._handlers[g+":transition"],a&&a.length)for(f=f.transition(),m=0,J=a.length;J>m;++m)f._chart=a[m].chart||this._base._chart,f.call(a[m].callback)}};l.selection.prototype.layer=function(a){var c,g=new f(this);
if(g.dataBind=a.dataBind,g.insert=a.insert,"events"in a)for(c in a.events)g.on(c,a.events[c]);return this.on=function(){return g.on.apply(g,arguments)},this.off=function(){return g.off.apply(g,arguments)},this.draw=function(){return g.draw.apply(g,arguments)},this}})(this);
(function(g,l){function m(a){var c,e,f,g;if(!a)return a;e=arguments.length;for(c=1;e>c;c++)if(f=arguments[c])for(g in f)a[g]=f[g];return a}var a=g.d3,c=function(a){this.constructor=a},f=function(a,e){var f;return c.prototype=a.prototype,f=new c(a),a.apply(f,e),f},e=function(a,c){var f=this.constructor.__super__;f&&e.call(f,a,c);Object.hasOwnProperty.call(this.constructor.prototype,"initialize")&&this.initialize.apply(a,c)},p=function(a){this.base=a;this._layers={};this._mixins=[];this._events={};
e.call(this,this,Array.prototype.slice.call(arguments,1))};p.prototype.unlayer=function(a){var c=this.layer(a),c=this._layerList.indexOf(c);return delete this._layers[a],this._layerList.splice(c,1),this};p.prototype.layer=function(a,c,e){var f;return 1===arguments.length?this._layers[a]:(f=c.layer(e),this._layers[a]=f,c._chart=this,f)};p.prototype.initialize=function(){};p.prototype.transform=function(a){return a};p.prototype.mixin=function(a,c){var e=Array.prototype.slice.call(arguments,2);e.unshift(c);
e=f(p[a],e);return this._mixins.push(e),e};p.prototype.draw=function(a){var c,e;a=this.transform(a);for(c in this._layers)this._layers[c].draw(a);for(e in this._mixins)this._mixins[e].draw(a)};p.prototype.on=function(a,c,e){return(this._events[a]||(this._events[a]=[])).push({callback:c,context:e||this,_chart:this}),this};p.prototype.once=function(a,c,e){var f=this,g=function(){f.off(a,g);c.apply(this,arguments)};return this.on(a,g,e)};p.prototype.off=function(a,c,e){var f,g,l,m,p;if(0===arguments.length){for(a in this._events)this._events[a].length=
0;return this}if(1===arguments.length)return g=this._events[a],g&&(g.length=0),this;f=a?[a]:Object.keys(this._events);for(m=0;f.length>m;m++)for(g=f[m],g=this._events[g],p=g.length;p--;)l=g[p],(c&&c===l.callback||e&&e===l.context)&&g.splice(p,1);return this};p.prototype.trigger=function(a){var c,e,f=Array.prototype.slice.call(arguments,1),g=this._events[a];if(g!==l)for(c=0;g.length>c;c++)e=g[c],e.callback.apply(e.context,f);return this};p.extend=function(a,c,e){var f,g=this;f=c&&Object.hasOwnProperty.call(c,
"constructor")?c.constructor:function(){return g.apply(this,arguments)};m(f,g,e);e=function(){this.constructor=f};return e.prototype=g.prototype,f.prototype=new e,c&&m(f.prototype,c),f.__super__=g.prototype,p[a]=f,f};a.chart=function(a){return 0===arguments.length?p:1===arguments.length?p[a]:p.extend.apply(p,arguments)};a.selection.prototype.chart=function(a){if(0===arguments.length)return this._chart;var c=Array.prototype.slice.call(arguments,1);c.unshift(this);return f(p[a],c)};a.selection.enter.prototype.chart=
function(){return this._chart};a.transition.prototype.chart=a.selection.enter.prototype.chart})(this);(function(g){function l(c){if(c){if("string"==typeof a[c])return c;c=c.charAt(0).toUpperCase()+c.slice(1);for(var f,e=0,g=m.length;g>e;e++)if(f=m[e]+c,"string"==typeof a[f])return f}}var m=["Webkit","Moz","ms","Ms","O"],a=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return l}):g.getStyleProperty=l})(window);
(function(g){function l(a){var c=parseFloat(a);return-1===a.indexOf("%")&&!isNaN(c)&&c}function m(a){var g,n=a("boxSizing");return function(){if(n){var a=document.createElement("div");a.style.width="200px";a.style.padding="1px 2px 3px 4px";a.style.borderStyle="solid";a.style.borderWidth="1px 2px 3px 4px";a.style[n]="border-box";var e=document.body||document.documentElement;e.appendChild(a);var f=c(a);g=200===l(f.width);e.removeChild(a)}}(),function(a){if("string"==typeof a&&(a=document.querySelector(a)),
a&&"object"==typeof a&&a.nodeType){var e=c(a);if("none"===e.display){var m={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;for(a=f.length;a>e;e++)m[f[e]]=0;return m}m={};m.width=a.offsetWidth;m.height=a.offsetHeight;a=m.isBorderBox=!(!n||!e[n]||"border-box"!==e[n]);for(var y=0,t=f.length;t>y;y++){var K=f[y],P=parseFloat(e[K]);m[K]=isNaN(P)?0:P}var y=m.paddingLeft+m.paddingRight,t=m.paddingTop+m.paddingBottom,K=m.marginLeft+m.marginRight,P=m.marginTop+m.marginBottom,W=
m.borderLeftWidth+m.borderRightWidth,oa=m.borderTopWidth+m.borderBottomWidth;a=a&&g;var ga=l(e.width);!1!==ga&&(m.width=ga+(a?0:y+W));e=l(e.height);return!1!==e&&(m.height=e+(a?0:t+oa)),m.innerWidth=m.width-(y+W),m.innerHeight=m.height-(t+oa),m.outerWidth=m.width+K,m.outerHeight=m.height+P,m}}}var a=document.defaultView,c=a&&a.getComputedStyle?function(c){return a.getComputedStyle(c,null)}:function(a){return a.currentStyle},f="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");
"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],m):g.getSize=m(g.getStyleProperty)})(window);
(function(g){var l=document.documentElement,m=function(){};l.addEventListener?m=function(a,f,e){a.addEventListener(f,e,!1)}:l.attachEvent&&(m=function(a,f,e){a[f+e]=e.handleEvent?function(){var a=g.event;a.target=a.target||a.srcElement;e.handleEvent.call(e,a)}:function(){var f=g.event;f.target=f.target||f.srcElement;e.call(a,f)};a.attachEvent("on"+f,a[f+e])});var a=function(){};l.removeEventListener?a=function(a,f,e){a.removeEventListener(f,e,!1)}:l.detachEvent&&(a=function(a,f,e){a.detachEvent("on"+
f,a[f+e]);try{delete a[f+e]}catch(g){a[f+e]=void 0}});l={bind:m,unbind:a};"function"==typeof define&&define.amd?define(l):g.eventie=l})(this);
(function(g){function l(a){"function"==typeof a&&(l.isReady?a():f.push(a))}function m(a){a="readystatechange"===a.type&&"complete"!==c.readyState;if(!l.isReady&&!a){l.isReady=!0;a=0;for(var g=f.length;g>a;a++)(0,f[a])()}}function a(a){return a.bind(c,"DOMContentLoaded",m),a.bind(c,"readystatechange",m),a.bind(g,"load",m),l}var c=g.document,f=[];l.isReady=!1;"function"==typeof define&&define.amd?(l.isReady="function"==typeof requirejs,define(["eventie/eventie"],a)):g.docReady=a(g.eventie)})(this);
(function(){function g(){}function l(a,f){for(var e=a.length;e--;)if(a[e].listener===f)return e;return-1}function m(a){return function(){return this[a].apply(this,arguments)}}var a=g.prototype;a.getListeners=function(a){var f,e,g=this._getEvents();if("object"==typeof a)for(e in f={},g)g.hasOwnProperty(e)&&a.test(e)&&(f[e]=g[e]);else f=g[a]||(g[a]=[]);return f};a.flattenListeners=function(a){var f,e=[];for(f=0;a.length>f;f+=1)e.push(a[f].listener);return e};a.getListenersAsObject=function(a){var f,
e=this.getListeners(a);return e instanceof Array&&(f={},f[a]=e),f||e};a.addListener=function(a,f){var e,g=this.getListenersAsObject(a),n="object"==typeof f;for(e in g)g.hasOwnProperty(e)&&-1===l(g[e],f)&&g[e].push(n?f:{listener:f,once:!1});return this};a.on=m("addListener");a.addOnceListener=function(a,f){return this.addListener(a,{listener:f,once:!0})};a.once=m("addOnceListener");a.defineEvent=function(a){return this.getListeners(a),this};a.defineEvents=function(a){for(var f=0;a.length>f;f+=1)this.defineEvent(a[f]);
return this};a.removeListener=function(a,f){var e,g,n=this.getListenersAsObject(a);for(g in n)n.hasOwnProperty(g)&&(e=l(n[g],f),-1!==e&&n[g].splice(e,1));return this};a.off=m("removeListener");a.addListeners=function(a,f){return this.manipulateListeners(!1,a,f)};a.removeListeners=function(a,f){return this.manipulateListeners(!0,a,f)};a.manipulateListeners=function(a,f,e){var g,n,l=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;if("object"!=typeof f||f instanceof
RegExp)for(g=e.length;g--;)l.call(this,f,e[g]);else for(g in f)f.hasOwnProperty(g)&&(n=f[g])&&("function"==typeof n?l.call(this,g,n):a.call(this,g,n));return this};a.removeEvent=function(a){var f,e=typeof a,g=this._getEvents();if("string"===e)delete g[a];else if("object"===e)for(f in g)g.hasOwnProperty(f)&&a.test(f)&&delete g[f];else delete this._events;return this};a.emitEvent=function(a,f){var e,g,n,l,m=this.getListenersAsObject(a);for(n in m)if(m.hasOwnProperty(n))for(g=m[n].length;g--;)e=m[n][g],
!0===e.once&&this.removeListener(a,e.listener),l=e.listener.apply(this,f||[]),l===this._getOnceReturnValue()&&this.removeListener(a,e.listener);return this};a.trigger=m("emitEvent");a.emit=function(a){var f=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,f)};a.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};a._getEvents=function(){return this._events||(this._events=
{})};"function"==typeof define&&define.amd?define(function(){return g}):"object"==typeof module&&module.exports?module.exports=g:this.EventEmitter=g}).call(this);
(function(g){function l(){}function m(c){function f(a){a.prototype.option||(a.prototype.option=function(a){c.isPlainObject(a)&&(this.options=c.extend(!0,this.options,a))})}function e(e,f){c.fn[e]=function(l){if("string"==typeof l){for(var m=a.call(arguments,1),y=0,t=this.length;t>y;y++){var K=c.data(this[y],e);if(K)if(c.isFunction(K[l])&&"_"!==l.charAt(0)){if(K=K[l].apply(K,m),void 0!==K)return K}else g("no such method '"+l+"' for "+e+" instance");else g("cannot call methods on "+e+" prior to initialization; attempted to call '"+
l+"'")}return this}return this.each(function(){var a=c.data(this,e);a?(a.option(l),a._init()):(a=new f(this,l),c.data(this,e,a))})}}if(c){var g="undefined"==typeof console?l:function(a){console.error(a)};c.bridget=function(a,c){f(c);e(a,c)}}}var a=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],m):m(g.jQuery)})(window);
(function(g,l){function m(a,c){return a[e](c)}function a(a,c){a.parentNode||document.createDocumentFragment().appendChild(a);for(var e=a.parentNode.querySelectorAll(c),f=0,g=e.length;g>f;f++)if(e[f]===a)return!0;return!1}function c(a,c){a.parentNode||document.createDocumentFragment().appendChild(a);return m(a,c)}var f,e=function(){if(l.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],c=0,e=a.length;e>c;c++){var f=a[c]+"MatchesSelector";if(l[f])return f}}();if(e){var p=document.createElement("div");
f=m(p,"div")?m:c}else f=a;"function"==typeof define&&define.amd?define(function(){return f}):window.matchesSelector=f})(this,Element.prototype);
(function(g){function l(a,c){for(var f in c)a[f]=c[f];return a}function m(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function a(a,c,g){function s(a,c){a&&(this.element=a,this.layout=c,this.position={x:0,y:0},this._create())}var E=g("transition"),J=g("transform"),y=E&&J,t=!!g("perspective"),K={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[E],P=["transform","transition","transitionDuration","transitionProperty"],
W=function(){for(var a={},c=0,e=P.length;e>c;c++){var f=P[c],l=g(f);l&&l!==f&&(a[f]=l)}return a}();l(s.prototype,a.prototype);s.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};s.prototype.handleEvent=function(a){var c="on"+a.type;this[c]&&this[c](a)};s.prototype.getSize=function(){this.size=c(this.element)};s.prototype.css=function(a){var c=this.element.style,e;for(e in a)c[W[e]||e]=a[e]};s.prototype.getPosition=function(){var a=
f(this.element),c=this.layout.options,e=c.isOriginLeft,c=c.isOriginTop,g=parseInt(a[e?"left":"right"],10),a=parseInt(a[c?"top":"bottom"],10),g=isNaN(g)?0:g,a=isNaN(a)?0:a,l=this.layout.size,g=g-(e?l.paddingLeft:l.paddingRight),a=a-(c?l.paddingTop:l.paddingBottom);this.position.x=g;this.position.y=a};s.prototype.layoutPosition=function(){var a=this.layout.size,c=this.layout.options,e={};c.isOriginLeft?(e.left=this.position.x+a.paddingLeft+"px",e.right=""):(e.right=this.position.x+a.paddingRight+"px",
e.left="");c.isOriginTop?(e.top=this.position.y+a.paddingTop+"px",e.bottom=""):(e.bottom=this.position.y+a.paddingBottom+"px",e.top="");this.css(e);this.emitEvent("layout",[this])};var oa=t?function(a,c){return"translate3d("+a+"px, "+c+"px, 0)"}:function(a,c){return"translate("+a+"px, "+c+"px)"};s.prototype._transitionTo=function(a,c){this.getPosition();var e=this.position.x,f=this.position.y,g=parseInt(a,10),l=parseInt(c,10),g=g===this.position.x&&l===this.position.y;if(this.setPosition(a,c),g&&
!this.isTransitioning)return this.layoutPosition(),void 0;e=a-e;f=c-f;g={};l=this.layout.options;e=l.isOriginLeft?e:-e;f=l.isOriginTop?f:-f;g.transform=oa(e,f);this.transition({to:g,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})};s.prototype.goTo=function(a,c){this.setPosition(a,c);this.layoutPosition()};s.prototype.moveTo=y?s.prototype._transitionTo:s.prototype.goTo;s.prototype.setPosition=function(a,c){this.position.x=parseInt(a,10);this.position.y=parseInt(c,10)};s.prototype._nonTransition=
function(a){this.css(a.to);a.isCleaning&&this._removeStyles(a.to);for(var c in a.onTransitionEnd)a.onTransitionEnd[c].call(this)};s.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(a),void 0;var c=this._transition,e;for(e in a.onTransitionEnd)c.onEnd[e]=a.onTransitionEnd[e];for(e in a.to)c.ingProperties[e]=!0,a.isCleaning&&(c.clean[e]=!0);a.from&&this.css(a.from);this.enableTransition(a.to);this.css(a.to);this.isTransitioning=!0};
var ga=J&&m(J)+",opacity";s.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:ga,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(K,this,!1))};s.prototype.transition=s.prototype[E?"_transition":"_nonTransition"];s.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)};s.prototype.onotransitionend=function(a){this.ontransitionend(a)};var I={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};
s.prototype.ontransitionend=function(a){if(a.target===this.element){var c=this._transition,e=I[a.propertyName]||a.propertyName;delete c.ingProperties[e];var f;a:{f=c.ingProperties;for(var g in f){f=!1;break a}f=!0}if(f&&this.disableTransition(),e in c.clean&&(this.element.style[a.propertyName]="",delete c.clean[e]),e in c.onEnd)c.onEnd[e].call(this),delete c.onEnd[e];this.emitEvent("transitionEnd",[this])}};s.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(K,
this,!1);this.isTransitioning=!1};s.prototype._removeStyles=function(a){var c={},e;for(e in a)c[e]="";this.css(c)};var Ia={transitionProperty:"",transitionDuration:""};return s.prototype.removeTransitionStyles=function(){this.css(Ia)},s.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])},s.prototype.remove=function(){if(!E||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var a=this;this.on("transitionEnd",
function(){return a.removeElem(),!0});this.hide()},s.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},s.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.css({display:"none"})}}})},s.prototype.destroy=function(){this.css({position:"",
left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}var c=document.defaultView,f=c&&c.getComputedStyle?function(a){return c.getComputedStyle(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],a):(g.Outlayer={},g.Outlayer.Item=a(g.EventEmitter,g.getSize,g.getStyleProperty))})(window);
(function(g){function l(a,c){for(var e in c)a[e]=c[e];return a}function m(a){var c=[];if("[object Array]"===E.call(a))c=a;else if(a&&"number"==typeof a.length)for(var e=0,f=a.length;f>e;e++)c.push(a[e]);else c.push(a);return c}function a(a,c){var e=y(c,a);-1!==e&&c.splice(e,1)}function c(a){return a.replace(/(.)([A-Z])/g,function(a,c,e){return c+"-"+e}).toLowerCase()}function f(f,y,E,W,oa,ga){function I(a,c){if("string"==typeof a&&(a=e.querySelector(a)),!a||!J(a))return p&&p.error("Bad "+this.settings.namespace+
" element: "+a),void 0;this.element=a;this.options=l({},this.options);this.option(c);var f=++la;this.element.outlayerGUID=f;ca[f]=this;this._create();this.options.isInitLayout&&this.layout()}function Ia(a,c){a.prototype[c]=l({},I.prototype[c])}var la=0,ca={};return I.prototype.settings={namespace:"outlayer",item:ga},I.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},
visibleStyle:{opacity:1,transform:"scale(1)"}},l(I.prototype,E.prototype),I.prototype.option=function(a){l(this.options,a)},I.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);l(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()},I.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},I.prototype._itemize=function(a){a=this._filterFindItemElements(a);for(var c=this.settings.item,e=[],
f=0,g=a.length;g>f;f++){var l=new c(a[f],this);e.push(l)}return e},I.prototype._filterFindItemElements=function(a){a=m(a);for(var c=this.options.itemSelector,e=[],f=0,g=a.length;g>f;f++){var l=a[f];if(J(l))if(c){oa(l,c)&&e.push(l);for(var l=l.querySelectorAll(c),n=0,p=l.length;p>n;n++)e.push(l[n])}else e.push(l)}return e},I.prototype.getItemElements=function(){for(var a=[],c=0,e=this.items.length;e>c;c++)a.push(this.items[c].element);return a},I.prototype.layout=function(){this._resetLayout();this._manageStamps();
this.layoutItems(this.items,void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited);this._isLayoutInited=!0},I.prototype._init=I.prototype.layout,I.prototype._resetLayout=function(){this.getSize()},I.prototype.getSize=function(){this.size=W(this.element)},I.prototype._getMeasurement=function(a,c){var e,f=this.options[a];f?("string"==typeof f?e=this.element.querySelector(f):J(f)&&(e=f),this[a]=e?W(e)[c]:f):this[a]=0},I.prototype.layoutItems=function(a,c){a=this._getItemsForLayout(a);
this._layoutItems(a,c);this._postLayout()},I.prototype._getItemsForLayout=function(a){for(var c=[],e=0,f=a.length;f>e;e++){var g=a[e];g.isIgnored||c.push(g)}return c},I.prototype._layoutItems=function(a,c){if(!a||!a.length)return this.emitEvent("layoutComplete",[this,a]),void 0;this._itemsOn(a,"layout",function(){this.emitEvent("layoutComplete",[this,a])});for(var e=[],f=0,g=a.length;g>f;f++){var l=a[f],n=this._getItemLayoutPosition(l);n.item=l;n.isInstant=c;e.push(n)}this._processLayoutQueue(e)},
I.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},I.prototype._processLayoutQueue=function(a){for(var c=0,e=a.length;e>c;c++){var f=a[c];this._positionItem(f.item,f.x,f.y,f.isInstant)}},I.prototype._positionItem=function(a,c,e,f){f?a.goTo(c,e):a.moveTo(c,e)},I.prototype._postLayout=function(){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))},I.prototype._getContainerSize=s,I.prototype._setContainerMeasure=function(a,c){if(void 0!==
a){var e=this.size;e.isBorderBox&&(a+=c?e.paddingLeft+e.paddingRight+e.borderLeftWidth+e.borderRightWidth:e.paddingBottom+e.paddingTop+e.borderTopWidth+e.borderBottomWidth);a=Math.max(a,0);this.element.style[c?"width":"height"]=a+"px"}},I.prototype._itemsOn=function(a,c,e){function f(){return g++,g===l&&e.call(n),!0}for(var g=0,l=a.length,n=this,m=0,p=a.length;p>m;m++)a[m].on(c,f)},I.prototype.ignore=function(a){(a=this.getItem(a))&&(a.isIgnored=!0)},I.prototype.unignore=function(a){(a=this.getItem(a))&&
delete a.isIgnored},I.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var c=0,e=a.length;e>c;c++)this.ignore(a[c])}},I.prototype.unstamp=function(c){if(c=this._find(c))for(var e=0,f=c.length;f>e;e++){var g=c[e];a(g,this.stamps);this.unignore(g)}},I.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),m(a)):void 0},I.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=
0,c=this.stamps.length;c>a;a++)this._manageStamp(this.stamps[a])}},I.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),c=this.size;this._boundingRect={left:a.left+c.paddingLeft+c.borderLeftWidth,top:a.top+c.paddingTop+c.borderTopWidth,right:a.right-(c.paddingRight+c.borderRightWidth),bottom:a.bottom-(c.paddingBottom+c.borderBottomWidth)}},I.prototype._manageStamp=s,I.prototype._getElementOffset=function(a){var c=a.getBoundingClientRect(),e=this._boundingRect;a=W(a);
return{left:c.left-e.left-a.marginLeft,top:c.top-e.top-a.marginTop,right:e.right-c.right-a.marginRight,bottom:e.bottom-c.bottom-a.marginBottom}},I.prototype.handleEvent=function(a){var c="on"+a.type;this[c]&&this[c](a)},I.prototype.bindResize=function(){this.isResizeBound||(f.bind(g,"resize",this),this.isResizeBound=!0)},I.prototype.unbindResize=function(){f.unbind(g,"resize",this);this.isResizeBound=!1},I.prototype.onresize=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var a=this;
this.resizeTimeout=setTimeout(function(){a.resize();delete a.resizeTimeout},100)},I.prototype.resize=function(){var a=W(this.element);this.size&&a&&a.innerWidth===this.size.innerWidth||this.layout()},I.prototype.addItems=function(a){a=this._itemize(a);if(a.length)return this.items=this.items.concat(a),a},I.prototype.appended=function(a){a=this.addItems(a);a.length&&(this.layoutItems(a,!0),this.reveal(a))},I.prototype.prepended=function(a){a=this._itemize(a);if(a.length){var c=this.items.slice(0);
this.items=a.concat(c);this._resetLayout();this.layoutItems(a,!0);this.reveal(a);this.layoutItems(c)}},I.prototype.reveal=function(a){if(a&&a.length)for(var c=0,e=a.length;e>c;c++)a[c].reveal()},I.prototype.hide=function(a){if(a&&a.length)for(var c=0,e=a.length;e>c;c++)a[c].hide()},I.prototype.getItem=function(a){for(var c=0,e=this.items.length;e>c;c++){var f=this.items[c];if(f.element===a)return f}},I.prototype.getItems=function(a){if(a&&a.length){for(var c=[],e=0,f=a.length;f>e;e++){var g=this.getItem(a[e]);
g&&c.push(g)}return c}},I.prototype.remove=function(c){c=m(c);var e=this.getItems(c);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});c=0;for(var f=e.length;f>c;c++){var g=e[c];g.remove();a(g,this.items)}}},I.prototype.destroy=function(){var a=this.element.style;a.height="";a.position="";a.width="";for(var a=0,c=this.items.length;c>a;a++)this.items[a].destroy();this.unbindResize();delete this.element.outlayerGUID;n&&n.removeData(this.element,this.settings.namespace)},
I.data=function(a){return(a=a&&a.outlayerGUID)&&ca[a]},I.create=function(a,f){function g(){I.apply(this,arguments)}return l(g.prototype,I.prototype),Ia(g,"options"),Ia(g,"settings"),l(g.prototype.options,f),g.prototype.settings.namespace=a,g.data=I.data,g.Item=function(){ga.apply(this,arguments)},g.Item.prototype=new ga,g.prototype.settings.item=g.Item,y(function(){for(var f=c(a),l=e.querySelectorAll(".js-"+f),f="data-"+f+"-options",m=0,s=l.length;s>m;m++){var t,y=l[m],B=y.getAttribute(f);try{t=B&&
JSON.parse(B)}catch(E){p&&p.error("Error parsing "+f+" on "+y.nodeName.toLowerCase()+(y.id?"#"+y.id:"")+": "+E);continue}B=new g(y,t);n&&n.data(y,a,B)}}),n&&n.bridget&&n.bridget(a,g),g},I.Item=ga,I}var e=g.document,p=g.console,n=g.jQuery,s=function(){},E=Object.prototype.toString,J="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},y=Array.prototype.indexOf?function(a,c){return a.indexOf(c)}:
function(a,c){for(var e=0,f=a.length;f>e;e++)if(a[e]===c)return e;return-1};"function"==typeof define&&define.amd?define("eventie/eventie doc-ready/doc-ready eventEmitter/EventEmitter get-size/get-size matches-selector/matches-selector ./item".split(" "),f):g.Outlayer=f(g.eventie,g.docReady,g.EventEmitter,g.getSize,g.matchesSelector,g.Outlayer.Item)})(window);
(function(g){function l(a,c){var f=a.create("masonry");return f.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},f.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0];this.columnWidth=(a=a&&a.element)&&c(a).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;
this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)},f.prototype.getContainerWidth=function(){var a=c(this.options.isFitWidth?this.element.parentNode:this.element);this.containerWidth=a&&a.innerWidth},f.prototype._getItemLayoutPosition=function(a){a.getSize();var c=Math.ceil(a.size.outerWidth/this.columnWidth),c=Math.min(c,this.cols),f=this._getColGroup(c),g=Math.min.apply(Math,f),c=m(f,g),l={x:this.columnWidth*c,y:g};a=g+a.size.outerHeight;f=this.cols+
1-f.length;for(g=0;f>g;g++)this.colYs[c+g]=a;return l},f.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var c=[],f=this.cols+1-a,g=0;f>g;g++){var l=this.colYs.slice(g,g+a);c[g]=Math.max.apply(Math,l)}return c},f.prototype._manageStamp=function(a){var f=c(a);a=this._getElementOffset(a);var g=this.options.isOriginLeft?a.left:a.right,l=g+f.outerWidth,g=Math.floor(g/this.columnWidth),g=Math.max(0,g),l=Math.floor(l/this.columnWidth),l=Math.min(this.cols-1,l),f=(this.options.isOriginTop?
a.top:a.bottom)+f.outerHeight;for(a=g;l>=a;a++)this.colYs[a]=Math.max(f,this.colYs[a])},f.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},f.prototype._getContainerFitWidth=function(){for(var a=0,c=this.cols;--c&&0===this.colYs[c];)a++;return(this.cols-a)*this.columnWidth-this.gutter},f.prototype.resize=function(){var a=this.containerWidth;this.getContainerWidth();a!==
this.containerWidth&&this.layout()},f}var m=Array.prototype.indexOf?function(a,c){return a.indexOf(c)}:function(a,c){for(var f=0,e=a.length;e>f;f++)if(a[f]===c)return f;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],l):g.Masonry=l(g.Outlayer,g.getSize)})(window);function sortByKey(g,l){return g.sort(function(g,a){var c=g[l],f=a[l];return c<f?-1:c>f?1:0})}function parseUri(g){var l=parseUri.options;g=l.parser[l.strictMode?"strict":"loose"].exec(g);for(var m={},a=14;a--;)m[l.key[a]]=g[a]||"";m[l.q.name]={};m[l.key[12]].replace(l.q.parser,function(a,f,e){f&&(m[l.q.name][f]=e)});return m}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function makeUri(g){var l="";g.protocol&&(l+=g.protocol+"://");g.user&&(l+=g.user);g.password&&(l+=":"+g.password);if(g.user||g.password)l+="@";g.host&&(l+=g.host);g.port&&(l+=":"+g.port);g.path&&(l+=g.path);var m=g.queryKey,a=[];for(k in m)if(m.hasOwnProperty(k)){var c=encodeURIComponent(m[k]);k=encodeURIComponent(k);c?a.push(k+"="+c):a.push(k)}0<a.length&&(l+="?"+a.join("&"));g.anchor&&(l+="#"+g.anchor);return l}
function H1DSUri(g){this.base_uri=g;this.base_uri_components=parseUri(g);this.base_h1ds_filters=[];this.base_non_h1ds_query={};this.extra_h1ds_filters=[];this.extra_non_h1ds_query={};g={fids:[]};var l=/^f(\d+)(_(\w+))?/,m;for(m in this.base_uri_components.queryKey)if(this.base_uri_components.queryKey.hasOwnProperty(m)){var a=l.exec(m);a?(g.hasOwnProperty(a[1])||(g.fids.push(a[1]),g[a[1]]={name:"",kwargs:{},fid:parseInt(a[1])}),"undefined"===typeof a[2]?g[a[1]].name=this.base_uri_components.queryKey[m]:
g[a[1]].kwargs[a[3]]=this.base_uri_components.queryKey[m]):this.base_non_h1ds_query[m]=this.base_uri_components.queryKey[m]}for(m=0;m<g.fids.length;m++)this.base_h1ds_filters.push(g[g.fids[m]]);this.sortH1DSFilters()}H1DSUri.prototype.sortH1DSFilters=function(){this.base_h1ds_filters=sortByKey(this.base_h1ds_filters,"fid");this.extra_h1ds_filters=sortByKey(this.extra_h1ds_filters,"fid")};
H1DSUri.prototype.updateOrAddBaseFilter=function(g,l){var m=this.base_h1ds_filters.length;0<m&&this.base_h1ds_filters[m-1].name==g?this.base_h1ds_filters[m-1].kwargs=l:this.addBaseFilter(g,l)};H1DSUri.prototype.shiftExtraH1DSFilterFIDs=function(g){for(var l=0;l<this.extra_h1ds_filters.length;l++)this.extra_h1ds_filters[l].fid+=g};
H1DSUri.prototype.shiftExtraFilterIDs=function(){this.sortH1DSFilters();if(0<this.extra_h1ds_filters.length){var g=new_fid-this.extra_h1ds_filters[0].fid;0<=g&&this.shiftExtraH1DSFilterFIDs(g+1)}};H1DSUri.prototype.addBaseFilter=function(g,l){this.sortH1DSFilters();var m=this.base_h1ds_filters.length;this.base_h1ds_filters.push({name:g,kwargs:l,fid:0<m?this.base_h1ds_filters[m-1].fid+1:0});this.shiftExtraH1DSFilterFIDs(1)};
H1DSUri.prototype.addExtraFilter=function(g,l){this.sortH1DSFilters();var m=this.extra_h1ds_filters.length,a=this.base_h1ds_filters.length;this.extra_h1ds_filters.push({name:g,kwargs:l,fid:0<m?this.extra_h1ds_filters[m-1].fid+1:0<a?this.base_h1ds_filters[a-1].fid+1:0})};H1DSUri.prototype.packFilterIDs=function(){console.log(this.extra_h1ds_filters)};
H1DSUri.prototype.changeFilterID=function(g,l){for(var m=0;m<this.base_h1ds_filters.length;m++)this.base_h1ds_filters[m].fid==parseInt(g)&&(this.base_h1ds_filters[m].fid=parseInt(l));for(m=0;m<this.extra_h1ds_filters.length;m++)this.extra_h1ds_filters[m].fid==parseInt(g)&&(this.extra_h1ds_filters[m].fid=parseInt(l));this.shiftExtraFilterIDs()};
H1DSUri.prototype.renderBaseUri=function(){var g={},l;for(l in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(l)&&(g[l]=this.base_non_h1ds_query[l]);for(l=0;l<this.base_h1ds_filters.length;l++){var m=this.base_h1ds_filters[l].fid;g["f"+m]=this.base_h1ds_filters[l].name;for(var a in this.base_h1ds_filters[l].kwargs)g["f"+m+"_"+a]=this.base_h1ds_filters[l].kwargs[a]}a=jQuery.extend({},this.base_uri_components);a.queryKey=g;return makeUri(a)};
H1DSUri.prototype.renderExtraUri=function(){var g={},l;for(l in this.base_non_h1ds_query)this.base_non_h1ds_query.hasOwnProperty(l)&&(g[l]=this.base_non_h1ds_query[l]);for(var m=0;m<this.base_h1ds_filters.length;m++){var a=this.base_h1ds_filters[m].fid;g["f"+a]=this.base_h1ds_filters[m].name;for(var c in this.base_h1ds_filters[m].kwargs)g["f"+a+"_"+c]=this.base_h1ds_filters[m].kwargs[c]}for(l in this.extra_non_h1ds_query)this.extra_non_h1ds_query.hasOwnProperty(l)&&(g[l]=this.extra_non_h1ds_query[l]);
for(m=0;m<this.extra_h1ds_filters.length;m++)for(c in a=this.extra_h1ds_filters[m].fid,g["f"+a]=this.extra_h1ds_filters[m].name,this.extra_h1ds_filters[m].kwargs)g["f"+a+"_"+c]=this.extra_h1ds_filters[m].kwargs[c];l=jQuery.extend({},this.base_uri_components);l.queryKey=g;return makeUri(l)};H1DSUri.prototype.isBinary=function(){return"bin"===this.base_non_h1ds_query.format};
H1DSUri.prototype.getShot=function(){var g=this.uri_components.path;"/"!==g[g.length-1]&&(g+="/");g=g.match(/\/\d+\//);return null===g?0:Number(g[0].substring(1,g[0].length-1))};H1DSUri.prototype.setShot=function(g){var l=this.uri_components.path;"/"!==l[l.length-1]&&(l+="/");g=l.replace(/\/\d+\//,"/"+g+"/");this.uri_components.path=g};d3.chart("dvBaseChart",{initialize:function(){var g=this,l=this.base.append("g").classed("graph-background",!0);g.main=g.base.append("g").attr("class","chart-main");g.brush=d3.svg.brush();g.margin={top:10,right:10,bottom:10,left:10};g._width=100;g._height=100;g.rmin=function(l){if(l.hasOwnProperty("length")){for(var a=[],c=0;c<l.length;c++)a.push(g.rmin(l[c]));return d3.min(a)}return l};g.rmax=function(l){if(l.hasOwnProperty("length")){for(var a=[],c=0;c<l.length;c++)a.push(g.rmax(l[c]));return d3.max(a)}return l};
this.source=function(g){arguments.length||this.source_data;this.source_data=g};this.load_data=function(){g.data=[];for(var l=0;l<g.source_data.length;l++)g.data.push(g.source_data[l].url_parser(g.source_data[l].url,g.source_data[l].modifiers));g.formatted_data=g.format_data(g.data)};this.render=function(){g.draw(g.data)};this.set_margin=function(l){var a=g._width+g.margin.left+g.margin.right,c=g._height+g.margin.bottom+g.margin.top;g.margin=l;g.base.select("g.chart-main").attr("transform","translate("+
g.margin.left+","+g.margin.top+")");g._width=a-g.margin.left-g.margin.right;g._height=c-g.margin.top-g.margin.bottom};this.set_margin({top:10,right:10,bottom:10,left:10});this.layer("background",l,{dataBind:function(g){return this.selectAll("rect.background").data([g])},insert:function(){return this.insert("rect").attr("class","background").attr("x",0).attr("y",0).attr("width",g._width+g.margin.left+g.margin.right).attr("height",g._height+g.margin.top+g.margin.bottom)}})},width:function(g){if(!arguments.length)return this._width+
this.margin.left+this.margin.right;this._width=g-this.margin.left-this.margin.right;this.base.select("g rect.background").attr("width",g);return this},height:function(g){if(!arguments.length)return this._height+this.margin.top+this.margin.bottom;this._height=g-this.margin.top-this.margin.bottom;this.base.select("g rect.background").attr("y",g).attr("height",g);return this}});
d3.chart("dvBaseChart").extend("dvTimeSeriesChart",{initialize:function(){var g=this;this.set_margin({top:50,right:50,bottom:50,left:50});this.xScale=d3.scale.linear().range([0,g._width]);this.yScale=d3.scale.linear().range([g._height,0]);this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom");this.yAxis=d3.svg.axis().scale(this.yScale).orient("left");this.colors=d3.scale.category20().range();this.layer("xAxis",g.main.append("g"),{dataBind:function(a){return this.selectAll("g.x.axis").data([a])},
insert:function(){return this.insert("g").attr("class","x axis").attr("transform",function(a){return"translate(0,"+g._height+")"})},events:{merge:function(){g.xScale.range([0,g._width]).domain([d3.min(g.data,function(a){return g.rmin(a.dimension)}),d3.max(g.data,function(a){return g.rmax(a.dimension)})]);return this.call(g.xAxis)},enter:function(){g.xScale.range([0,g._width]).domain([d3.min(g.data,function(a){return g.rmin(a.dimension)}),d3.max(g.data,function(a){return g.rmax(a.dimension)})]);return this.call(g.xAxis)},
exit:function(){return this.remove()}}});this.layer("yAxis",g.main.append("g"),{dataBind:function(a){return this.selectAll("g.y.axis").data([a])},insert:function(){return this.append("g").attr("class","y axis").attr("transform",function(a){return"translate(0,0)"})},events:{merge:function(){var a=d3.min(g.data,function(a){return g.rmin(a.value)}),c=d3.max(g.data,function(a){return g.rmax(a.value)}),f=0.05*(c-a);g.yScale.range([g._height,0]).domain([a-f,c+f]);return this.call(g.yAxis)},enter:function(){var a=
d3.min(g.data,function(a){return g.rmin(a.value)}),c=d3.max(g.data,function(a){return g.rmax(a.value)}),f=0.05*(c-a);g.yScale.range([g._height,0]).domain([a-f,c+f]);return this.call(g.yAxis)},exit:function(){return this.remove()}}});var l=d3.svg.line().x(function(a){return g.xScale(a[0])}).y(function(a){return g.yScale(a[1])});g.format_data=function(a){for(var c=[],f=0,e=0;e<a.length;e++)for(var l=g.format_datum(a[e]),n=0;n<l.length;n++){var m=l[n];m.color_index=f;m.name=l.name;c.push(m);++f}return c};
g.format_datum=function(a){var c=[],f=0;"undefined"!==typeof a.metadata.minmax_pairs&&(f=a.metadata.minmax_pairs.length);var e=d3.range(a.value.length);if(0<f)for(var g=0;g<f;g++){e.splice(e.indexOf(a.metadata.minmax_pairs[g][0]),1);e.splice(e.indexOf(a.metadata.minmax_pairs[g][1]),1);for(var l=[],m=0;m<a.value[a.metadata.minmax_pairs[g][0]].length;m++)l.push([a.dimension[0][m],a.value[a.metadata.minmax_pairs[g][0]][m]]);for(m=a.value[a.metadata.minmax_pairs[g][1]].length-1;0<=m;m--)l.push([a.dimension[0][m],
a.value[a.metadata.minmax_pairs[g][1]][m]]);l.closeLine=!0;l.fillLine=!0;c.push(l)}for(g=0;g<e.length;g++){f=e[g];l=[];for(m=0;m<a.value[f].length;m++)l.push([a.dimension[0][m],a.value[f][m]]);l.closeLine=!1;l.fillLine=!1;c.push(l)}c.name=a.name;return c};this.layer("data",g.main.append("g"),{dataBind:function(a){return this.selectAll("path.signal").data(g.formatted_data)},insert:function(){return this.append("path")},events:{merge:function(){return this.attr("class","signal").style("stroke",function(a,
c){return g.colors[2*a.color_index]}).style("fill",function(a,c){return a.fillLine?g.colors[2*a.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(a,c){return l(a)+(a.closeLine?"Z":"")})},enter:function(){return this.attr("class","signal").style("stroke",function(a,c){return g.colors[2*a.color_index]}).style("fill",function(a,c){return a.fillLine?g.colors[2*a.color_index+1]:"none"}).style("fill-opacity",0.5).attr("d",function(a,c){return l(a)+(a.closeLine?"Z":"")})},exit:function(){return this.remove()}}});
this.layer("labels",g.main.append("g"),{dataBind:function(a){return this.selectAll("text.pathlabel").data(g.formatted_data)},insert:function(){return this.append("text").attr("class","pathlabel")},events:{merge:function(){return this.attr("x",10).attr("y",function(a,c){return 20*c}).attr("dy","0.5em").style("font","10 Helvetica Neue").text(function(a){return a.name}).attr("fill",function(a,c){return g.colors[2*a.color_index]})},enter:function(){return this.attr("x",10).attr("y",function(a,c){return 20*
c}).attr("dy","0.5em").style("font","10 Helvetica Neue").text(function(a){return a.name}).attr("fill",function(a,c){return g.colors[2*a.color_index]})},exit:function(){return this.remove()}}});var m=function(){for(var a=0;a<g.source_data.length;a++)g.source_data[a].modifiers.min=g.brush.extent()[0],g.source_data[a].modifiers.max=g.brush.extent()[1];g.load_data();g.render()};this.layer("interactive",g.main,{dataBind:function(a){return this.selectAll("g.brush").data([g.data])},insert:function(){g.brush.clear();
return this.append("g").attr("class","brush")},events:{merge:function(){g.brush=d3.svg.brush().x(g.xScale).on("brushend",m);return this.call(g.brush).selectAll("rect").attr("y",0).attr("height",g._height)}}})}});
dataviewer=function(){var g={margin:{top:10,right:10,bottom:10,left:10},_width:100,_height:100,n_columns:10,n_rows:10,create:function(l){g.basenode=d3.select(l);g.width(parseInt(g.basenode.style("width")));g.height(parseInt(d3.min([g.width()/1.61803398875,g.basenode.style("height")])));g.base=g.basenode.append("svg").attr("width",function(a){return g.width()}).attr("height",function(a){return g.height()}).append("g").attr("transform",function(a){return"translate("+g.margin.left+","+g.margin.top+")"});
g.xScale=d3.scale.linear().domain([0,g.n_columns]).range([0,g._width]);g.yScale=d3.scale.linear().domain([0,g.n_rows]).range([g._height,0]);g.column_width=g._width/g.n_columns;g.row_height=g._height/g.n_rows;g.background_grid=g.base.append("g").attr("class","pagelet-grid");for(var m=0;m<=g.n_columns;m++)g.background_grid.append("line").attr("x1",function(){return Math.round(m*g.column_width)}).attr("x2",function(){return Math.round(m*g.column_width)}).attr("y1",0).attr("y2",g._height);for(m=0;m<=
g.n_rows;m++)g.background_grid.append("line").attr("x1",0).attr("x2",g._width).attr("y1",function(){return Math.round(m*g.row_height)}).attr("y2",function(){return Math.round(m*g.row_height)});return g},data:function(l){g.data=g.updateCoords(l)},draw:function(){for(var l=0;l<g.data.length;l++){var m=g.base.append("g").attr("class","chart").attr("transform","translate("+g.data[l].px_coords[0]+","+g.data[l].px_coords[3]+")").chart("dvTimeSeriesChart");m.width(g.data[l].px_coords[2]-g.data[l].px_coords[0]);
m.height(g.data[l].px_coords[1]-g.data[l].px_coords[3]);m.source(g.data[l].data);m.load_data();m.render()}},updateCoords:function(l){for(var m=0;m<l.length;m++){l[m].px_coords=[g.xScale(l[m].plot_coords[0]),g.yScale(l[m].plot_coords[1]),g.xScale(l[m].plot_coords[2]),g.yScale(l[m].plot_coords[3])];for(var a=0;a<l[m].data.length;a++)l[m].data[a].hasOwnProperty("modifiers")||(l[m].data[a].modifiers={}),l[m].data[a].modifiers.width=parseInt(g.xScale(l[m].plot_coords[2])-g.xScale(l[m].plot_coords[0]))}return l},
width:function(l){if(!arguments.length)return g._width+g.margin.left+g.margin.right;g._width=l-g.margin.left-g.margin.right},height:function(l){if(!arguments.length)return g._height+g.margin.top+g.margin.bottom;g._height=l-g.margin.top-g.margin.bottom}};return g}();var golden_ratio=1.61803398875;$("#masonry-container").masonry({itemSelector:".mbox",columnWidth:384});$.fn.scrollView=function(){return this.each(function(){$("html, body").animate({scrollTop:$(this).offset().top},0)})};
$(function(){$(".column").each(function(g){var l=this;$(l).sortable({connectWith:".column",handle:".portlet-header",update:function(g,a){$.cookie("sortorder"+l.id,$(l).sortable("toArray").join(),{path:"/"})}})});$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend("<span class='ui-icon ui-icon-minusthick'></span>").end().find(".portlet-content");$(".portlet-header .ui-icon").click(function(){$(this).toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick");
$(this).parents(".portlet:first").find(".portlet-content").toggle($.cookie($(this).parents(".portlet:first")[0].id,$(this).parents(".portlet:first").find(".portlet-content").is(":hidden")?"expanded":"collapsed",{path:"/"}))})});
function loadCookie(){$(".column").each(function(g){g=$.cookie("sortorder"+this.id);var l=this;g&&$(g.split(",")).each(function(g,a){$("#"+a).appendTo(l)});$(this).sortable()});$(".portlet").each(function(g){(g=$.cookie(this.id))&&"collapsed"===g&&($(this).find(".ui-icon").toggleClass("ui-icon-minusthick").toggleClass("ui-icon-plusthick"),$(this).find(".portlet-content").hide())});"true"===$.cookie("shotTracking")?turnOnShotTracker():turnOffShotTracker()}var shot_stream_client=new XMLHttpRequest;
function turnOffShotTracker(){$("#h1ds-track-latest-shot").hide();$("#h1ds-shot-controller").show();$("#h1ds-toggle-track-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="track latest shot"></FORM>');$.cookie("shotTracking","false",{path:"/"});shot_stream_client.abort()}
function turnOnShotTracker(){$("#h1ds-shot-controller").hide();$("#h1ds-track-latest-shot").show();$("#h1ds-toggletrack-latest-shot").html('<FORM class="inline-form right" action="." onsubmit="javascript:toggleTrackLatestShot()" method="post"><INPUT type="submit" id="h1ds-toggletrack-shot" name="h1ds-toggletrack-shot" value="stop tracking latest shot"></FORM>');$.cookie("shotTracking","true",{path:"/"});shot_stream_client.open("get","/_/shot_stream/");shot_stream_client.send();shot_stream_client.onprogress=
function(){var g=this.responseText.split("\n");$.getJSON("/_/url_for_shot",{input_path:window.location.toString(),shot:g[g.length-2]},function(g){window.location=g.new_url})}}function toggleTrackLatestShot(){"true"===$.cookie("shotTracking")?turnOffShotTracker():turnOnShotTracker();return!1}
function autoPollSummaryDB(){var g=d3.select("#poll-summarydb-server");if(null!==g[0][0]&&"True"===g.text()){var l=null,m=window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),a=d3.select("table.main-table tbody"),c=function(c){$.ajax({url:m,dataType:"json",async:!1}).done(function(e){l=new Date(e.timestamp);e=a.selectAll("tr").data(cross(e),function(a){return a[0].shot});e.enter().insert("tr","tr").style("background-color","yellow");var g=e.selectAll("td").data(function(a){return a});
g.enter().append("td").html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"});g.transition().duration(500).each(function(a){d3.select(this).html(function(a,c){return'<a href="/summary/_/go_to_source/'+a.attr+"/"+a.shot+'/" >'+a.value+"</a>"})});e.transition().duration(c).style("background-color","white");e.exit().remove()})};c(1E3);setInterval(function(){summaryUpdateRequired(l)&&c(3E5)},2E3)}}
function getLastShotInDisplayedPage(){var g=-1;d3.selectAll("table.main-table tr").each(function(l,m){if(0<m){var a=Number(d3.select(this).select("td").text());a>g&&(g=a)}});return g}function summaryUpdateRequired(g){$.ajax({url:"/summary/_/get_last_update_time/",dataType:"json",async:!1}).done(function(g){latest_summdb_update=new Date(g.last_update)});return latest_summdb_update>g}
function updateSummaryDB(){var g=getLastShotInDisplayedPage(),l=-1;$.ajax({url:"/summary/_/get_latest_summarydb_shot/",dataType:"json",async:!1}).done(function(g){l=Number(g.latest_shot)});l>g&&$.ajax({url:window.location.toString()+(window.location.search+(window.location.search.length?"&":"?")+"format=json"),dataType:"json",async:!1}).done(function(g){})}
function cross(g){var l=[],m,a;for(m=0;m<g.data.length;m++)for(l[m]=[],l[m].shot,a=0;a<g.attributes.length;a++)l[m][a]={shot:g.data[m].shot,attr:g.attributes[a],value:g.data[m].d[a]};return l}$("span.toggleVertical").each(function(){"true"===$.cookie("vertical-"+$(this).text())&&($(this).toggleClass("verticalText"),$(this).html($(this).text().replace(/(.)/g,"$1<br />")))});
$("span.toggleVertical").click(function(){$(this).toggleClass("verticalText");$(this).hasClass("verticalText")?($(this).html($(this).text().replace(/(.)/g,"$1<br />")),$.cookie("vertical-"+$(this).text(),!0)):($(this).html($(this).text().replace("$1<br />","")),$.cookie("vertical-"+$(this).text(),!1))});d3.select(window).on("mousemove",mousemove).on("mouseup",mouseup);var rect,x0,x1,count,par_rect;
function mousedown(){x0=d3.mouse(this);count=0;par_rect=d3.select(this);rect=d3.select(this.parentNode).append("svg:rect").attr("y",par_rect.attr("y")).attr("height",par_rect.attr("height")).style("fill","#999").style("fill-opacity",0.5);d3.event.preventDefault()}function mousemove(){if(rect){x1=d3.mouse(rect.node());var g=Math.min(x0[0],x1[0]),l=Math.max(x0[0],x1[0]);Math.min(x0[1],x1[1]);Math.max(x0[1],x1[1]);rect.attr("x",g-0.5).attr("width",l-g+1)}}
function mouseup(){rect&&(rect.each(function(g){var l=g.xAxis.scale().invert(d3.select(this).attr("x"));g=g.xAxis.scale().invert(+d3.select(this).attr("x")+ +d3.select(this).attr("width"));var m=new H1DSUri(window.location.href),a=Number(m.getNextFilterID());0==a?m.appendFilter("dim_range",{min:l,max:g}):(a-=1,"dim_range"===m.h1ds_filters[String(a)].name?m.h1ds_filters[String(a)].kwargs={min:l,max:g}:m.appendFilter("dim_range",{min:l,max:g}));$(".h1ds-pagelet").each(function(){d3.select(this).html("");
populatePagelet($(this),m.renderUri())});Modernizr.history&&history.pushState(null,null,m.renderUri())}),rect.remove(),rect=null)}function getSpectrogramUri(g){g=new H1DSUri(g);g.addExtraFilter("slanted_baseline",{window:10});g.addExtraFilter("spectrogram",{bin_size:-1});g.addExtraFilter("norm_dim_range_2d",{x_min:0,x_max:1,y_min:0,y_max:0.5});g.addExtraFilter("y_axis_energy_limit",{threshold:0.995});g.extra_non_h1ds_query.format="bin";g.extra_non_h1ds_query.bin_assert_dtype="uint8";return g}
function getPowerspectrumUri(g,l){var m=new H1DSUri(g);m.addExtraFilter("slanted_baseline",{window:10});m.addExtraFilter("power_spectrum",{});m.addExtraFilter("norm_dim_range",{min:0,max:0.5});m.addExtraFilter("resample_minmax",{n_bins:l});m.extra_non_h1ds_query.format="json";return m}function getRawUri(g,l){var m=new H1DSUri(g);m.addExtraFilter("resample_minmax",{n_bins:l});m.extra_non_h1ds_query.format="json";return m}
ProcessH1DSHeaders=function(g){g=g.split("\n");for(var l={},m=0;m<g.length;m++){var a=g[m].split(":");2===a.length&&a[0].match("^X-H1DS")&&(l[a[0]]=$.trim(a[1]))}return l};
ProcessBinaryData=function(g,l){for(var m=new Uint8Array(str2ab(g)),a=parseInt(l["X-H1DS-ndim"]),c=0,f={data:[],dim:[],n_dim:a},e=0;e<a;e++){f.dim[e]=[];for(var p=parseInt(l["X-H1DS-dim-"+e+"-length"]),n=parseFloat(l["X-H1DS-dim-"+e+"-delta"]),s=parseFloat(l["X-H1DS-dim-"+e+"-first"]),E=0;E<p;E++)f.dim[e][E]=n*E+s}e=parseFloat(l["X-H1DS-data-delta"]);p=parseFloat(l["X-H1DS-data-min"]);if(0<a)for(n=parseInt(l["X-H1DS-dim-0-length"]),parseFloat(l["X-H1DS-dim-0-delta"]),parseFloat(l["X-H1DS-dim-0-first"]),
s=0;s<n;s++)if(1<a){f.data[s]=[];E=parseInt(l["X-H1DS-dim-1-length"]);parseFloat(l["X-H1DS-dim-1-delta"]);parseFloat(l["X-H1DS-dim-1-first"]);for(var J=0;J<E;J++)if(2<a){f.data[s][J]=[];var y=parseInt(l["X-H2DS-dim-2-length"]);parseFloat(l["X-H1DS-dim-2-delta"]);parseFloat(l["X-H1DS-dim-2-first"]);for(var t=0;t<y;t++)f.data[s][J][t]=e*m[c]+p,c++}else f.data[s][J]=m[c],c++}else f.data[s]=e*m[c]+p,c++;return f};function ab2str(g){return String.fromCharCode.apply(null,new Uint8Array(g))}
function str2ab(g){for(var l=new ArrayBuffer(g.length),m=new Uint8Array(l),a=0,c=g.length;a<c;a++)m[a]=g.charCodeAt(a);return l}var plotState={};function datamap(g){}
function loadWorksheet(){var g=[{plot_coords:[0,0,10,10],modifiers:{},data:[{url:window.location.toString(),url_parser:function(g,a){var c=getRawUri(g,a.width);a.hasOwnProperty("min")&&c.updateOrAddBaseFilter("dim_range",{min:a.min,max:a.max});var f;$.ajax({url:c.renderExtraUri(),dataType:"json",async:!1}).done(function(a){f=a.data});return f}}]}],l=dataviewer.create("div.data.worksheet");l.data(g);l.draw()}$(document).ready(function(){$("#main").scrollView();autoPollSummaryDB();loadCookie();loadWorksheet()});
